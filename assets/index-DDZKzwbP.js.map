{"version":3,"mappings":"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","names":["n","l","u","i","r","o","e","f","c","s","a","h","p","v","y","d","w","_","g","t","m","b","k","x","C","S","M","P","j","z","$","I","V","A","L","q","H","T","F","O","B","N","D","E","G","J","module","__webpack_exports__","__webpack_require__","__WEBPACK_DEFAULT_EXPORT__","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default","___CSS_LOADER_EXPORT___","cssWithMappingToString","list","item","content","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","id","_k","cssMapping","base64","data","sourceMapping","moduleId","cachedModule","getter","exports","definition","key","obj","prop","Canvas","Keyboard","Stream","callback","replaceMe","arrayBuffer","resolve","reject","cb","start","flagName","type","value","error","eventName","handler","_a","_b","newListeners","newOnceListeners","event","listeners","onces","emitter","PointerScope","RotationType","seed","mag01","min","max","likelihood","array","numPicks","allowDuplicates","result","currentPick","tempArray","index","swap","randomIndex","length","val","val1","val2","tolerance","angle","tmpAngle","radians","degrees","from","to","_x","random","vec","vec1","vec2","vector","deltaX","deltaY","magnitude","size","newSize","newLength","newMagnitude","distance","sizeOrScale","dest","num","rotationType","startAngleRadians","endAngleRadians","rotationClockwise","rotationAntiClockwise","anchor","sinAngle","cosAngle","fixed","string","rgbaRegEx","match","hex","hexRegEx","factor","temp","color","newR","newG","newB","newA","color1","color2","format","hexRepresentation","LogLevel","appender","level","args","len","serialized","consoleArgs","options","_c","_d","pagePos","message","pos","Side","getOpposite","side","fromDirection","direction","leftOrOptions","top","right","bottom","intersection","points","minX","minY","maxX","maxY","width","height","point","scale","shifted","matrix","xa1","xa2","xb1","xb2","ya1","ya2","yb1","yb2","matrixPos","left","wx","wy","ray","farClipDistance","tMin","tMax","xInv","yInv","tx1","tx2","ty1","ty2","other","compositeBB","epsilon","totalBoundingBox","overlapX","overlapY","bb","intersect","ex","el","rect","milliseconds","clock","future","object","keys","newObj","target","sources","source","MatrixLocations","near","far","mat","sx","sy","vectorOrMatrix","resultX","resultY","a11","a21","a31","a41","a12","a22","a32","a42","a13","a23","a33","a43","a14","a24","a34","a44","b11","b21","b31","b41","b12","b22","b32","b42","b13","b23","b33","b43","b14","b24","b34","b44","sine","cosine","currentScale","xscale","yscale","inverseDet","tx","ty","det","signX","signY","quad","resultTopLeftX","resultTopLeftY","resultTopRightX","resultTopRightY","resultBottomLeftX","resultBottomLeftY","resultBottomRightX","resultBottomRightY","xScaleSq","yScaleSq","builder","cleaner","preAllocate","amount","clean","path","responseType","bustCache","uri","request","errorText","change","typeType","_e","_f","_g","scaleDirX","scaleDirY","origin","image","newWidth","newHeight","nativeWidth","nativeHeight","ImageFiltering","ImageWrapping","gl","_garbageCollector","name","forceUpdate","filtering","wrapping","tex","wrappingConfig","xWrap","yWrap","filterMode","texture","originalSrc","pathOrBase64","bustCacheOrOptions","imageSource","blob","url","svgSource","loadedFuture","alphabet","spriteSheet","caseInsensitive","spacing","shadow","lineHeight","text","results","textToRender","letterIndex","letter","spriteIndex","letterSprite","maxWidth","lines","maxWidthLine","sprites","sprite","xCursor","yCursor","line","_color","bounds","newLine","spriteCanvas","tiledImageSource","rows","columns","_h","_j","spriteWithOptions","sourceView","cols","spriteWidth","spriteHeight","originOffset","margin","offsetDefaults","marginDefaults","ctx","_gl","_texture","attachmentPoint","variable","attributeRegexTemplate","matches","numIfs","assembleTestShader","testShader","testComplexity","canCompile","test","shader","vertexSource","fragmentSource","onPreLink","onPostCompile","vertexShader","fragmentShader","attributes","attribute","uniforms","uniform","uniformCount","uniformLocation","attributeCount","attributeLocation","slotNumber","uniformType","location","program","typeName","errorInfo","errorLineStart","errorLineEnd","error2","count","vertexBuffer","suppressWarnings","shaderAttributes","attrib","glType","componentsPerVertex","vertAttribute","typeSize","offset","vert","uploadBuffer","context","end","transform","finalStart","finalEnd","opacity","snapToPixel","finalPoint","postprocessor","numberOfQuads","useUint16","totalVertices","maxUint16Index","currentQuad","maxTexture","maxComplexity","transformedFrag","maxTextures","newSource","texturePickerBuilder","maybeFiltering","wrapX","wrapY","force","maybeTexture","maybeWidth","maybeHeight","swidth","sheight","dx","dy","dwidth","dheight","maybeImageWidth","maybeImageHeight","sw","sh","tint","textureId","imageWidth","imageHeight","uvx0","uvy0","uvx1","uvy1","txWidth","txHeight","thickness","dir","normal","halfThick","startTop","startBottom","endTop","endBottom","stroke","strokeThickness","topLeft","topRight","bottomRight","bottomLeft","radius","recycler","maxObjects","objects","poolIndex","graphicsContext","images","graphicsContextWebGL","textureUniformName","textureName","imageElement","startingTextureSlot","textureSlot","material","vertexIndex","view","topLeftScreen","bottomRightScreen","screenUVX0","screenUVY0","screenUVX1","screenUVY1","CoordPlane","original","newX","newY","globalScaleX","globalScaleY","localPos","rotation","canonRotation","inverseRotation","inverseScale","signBitX","signBitY","newComponent","observer","func","observersLength","subscriptionsLength","child","childTxComponent","owner","_previousOwner","oldz","component","AnimationDirection","AnimationStrategy","maybeFrame","spriteSheetIndex","durationPerFrame","strategy","maxIndex","invalidIndices","frameCoordinates","durationPerFrameMs","speed","reverse","defaultDuration","frames","coord","duration","frameNumber","currentFrame","next","elapsed","idempotencyToken","member","graphic","useBounds","bitmapWidth","bitmapHeight","maybeCtx","FontUnit","TextAlign","BaseAlign","FontStyle","Direction","x1","y1","x2","y2","cap","fill","br","defaultRadius","font","metrics","textHeight","lineAdjustedHeight","bottomBounds","textBounds","bitmap","lineHeightRatio","includeColor","textImages","currentX","currentY","canvas","hashCode","frag","hash","measurement","textInstance","deferred","currentHashCodes","time","newTextMeasurementCache","current","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_ex","_y","colorOverride","currentGraphic","visible","graphics","copyGraphics","onPreDraw","onPostDraw","onPreTransformDraw","onPostTransformDraw","graphicOrOptions","nameOrGraphic","graphicToSet","optionsToSet","offsetX","offsetY","EventTypes","self","engine","prevStats","stats","gamepad","button","axis","contact","lastContact","entity","action","componentsOrOptions","componentsToAdd","nameToAdd","components","silenceWarnings","tag","requiredTypes","requiredTags","queue","curr","newEntity","componentInstance","templateEntity","componentType","parent","ctor","rootComponent","typeOrInstance","componentToRemove","componentIndex","motion","totalAcc","seconds","globalPos","accel","ParticleTransform","renderer","startSize","endSize","bytesPerFloat","totalSize","_webglCtx","rectOptions","lineOptions","pointOptions","dim","supported","canvasElement","enableTransparency","antialiasing","uvPadding","multiSampleAntialiasing","pixelArtSampler","powerPreference","backgroundColor","useDrawSorting","garbageCollector","handleContextLost","handleContextRestored","rendererName","maybeRenderer","lazyFactory","drawCall","resolution","currentTarget","originalSort","firstIndex","zIndex","originalSortOrder","priority","oldTransform","oldState","currentRendererName","currentRenderer","smoothing","_resolution","_postprocessor","DisplayMode","pageOrigin","viewport","camera","currentPixelRatio","newResolutionSupported","widthUnit","heightUnit","isSmooth","elementId","maybeElement","screenHeight","screenMarginY","screenWidth","screenMarginX","screen","aspect","adjustedWidth","adjustedHeight","vw","vh","clip","scaleX","scaleY","maxScaleFactor","zoomedWidth","zoomedHeight","unlockTimeoutTimer","audioContext","buffer","ended","_options","state","machineDescription","machine","stateName","transitionState","eventData","potentialNewState","saveKey","_src","position","playStarted","pausedAt","startedAt","playbackRate","_value","_val","_name","_actor","track","_processedData","file","filetype","paths","arraybuffer","audiobuffer","volume","trackId","resumed","complete","newTrack","loadable","loadables","total","textbox","resource","existingRoot","loadablesOrOptions","buttonElement","resizeHandler","evt","startButtonHandler","buttonWidth","buttonHeight","canvasHeight","canvasWidth","logoY","logoX","oldAntialias","loadingX","loadingY","progress","progressWidth","elem","xhr","style","msg","feature","failedCritical","warning","CollisionType","mask","existingGroup","group","category","overlap1","overlap2","collisionGroups","combinedName","combinedMask","colliderA","colliderB","bodyA","bodyB","collider","idA","idB","projection","_config","worldBounds","leaf","leafAABB","currentRoot","area","combinedArea","cost","inheritanceCost","leftCost","leftCombined","newArea","oldArea","rightCost","rightCombined","oldParent","newParent","currentNode","grandParent","sibling","node","body","multdx","multdy","balance","helper","numerator","divisor","pointOrBounds","maxDistance","collisionGroup","collisionMask","searchAllColliders","maybeBody","canCollide","hit","colliders","targets","potentialColliders","pair","updateDistance","minDimension","updateVec","centerPoint","furthestPoint","minCollider","minTranslate","translate","shift","pairs","contacts","newContacts","updated","SolverStrategy","ContactSolveBias","SpatialPartitionStrategy","acc","axes","furthestPoints","bestPoint","mass","totalInertia","otherColliders","potentialCollider","maybeLine","minLength","minLine","hits","minHit","minDistance","projections","proj","newProjection","begin","sideVector","normalize","clipTime","signed","x0","y0","aMinusP","currPoint","threshold","dxc","dyc","dx1","dy1","cross","line1","line2","line1Dir","line2Dir","d1Squared","d2Squared","closestPoint","denom","closestPointOnLine1","closestPointOnLine2","polygonA","polygonB","aSides","bSides","closestLine","polygon","edge","otherDirection","rayTowardsOther","thisPoint","thisFace","edgeLine","circle","otherWorldPos","p0","circlex","circley","circleA","circleB","thisDirection","rayTowardsThis","otherPoint","circleWorldPos","edgeStart","edgeVector","edgeA","edgeB","edgeLineA","edgeLineB","orig","u1","toi","discriminant","toi1","toi2","positiveToi","minToi","shape","scalars","dotProduct","lineWidth","mtv","tangent","localPoints","info","colliderAId","colliderBId","polyA","polyB","bestSeparation","bestSideIndex","localPoint","toPolyBSpace","toPolyBSpaceRotation","normalsA","pointsA","pointsB","pointsAIndex","smallestPointDistance","smallestLocalPoint","pointsBIndex","bestSide2","separationInfo","polyDir","closestPointOnPoly","minOverlap","minAxis","minIndex","proj1","proj2","overlap","bestSide","bestAxis","bestOtherPoint","sides","localSides","vertB","vertSeparation","circleAPos","circleBPos","combinedRadius","separation","mvt","local","cc","edgeWorld","localSide","da","dda","db","ddb","den","pointOnEdge","dd","pc","linePoly","separationA","separationB","main","toIncidentFrame","toIncidentFrameRotation","referenceEdgeNormal","minEdge","incidentEdgeIndex","referenceSide","referenceDirection","clipRight","clipLeft","clipPoints","shapeA","txA","shapeB","txB","worldPoint","circlePoint","dist","transformedBegin","transformedEnd","padding","edgeNormal","debugDrawCall","firstPoint","center","strokeColor","boundingBox","normals","sum","oldPoint","newPoint","oldDirection","orientation","angleSum","polygons","triangles","vertices","vertexCount","getPrevIndex","getNextIndex","isConvex","prev","va","vb","vc","leftArm","rightArm","convexVertices","isPointInTriangle","ab","bc","ca","ap","bp","cp","cross1","cross2","cross3","findEarTip","isEar","cutEarTip","earIndex","currentSide","mostDirection","testRay","intersectCount","sideIndex","pts","faceIndex","denominator","iplusone","crossTerm","minContactTime","contactSide","contactIndex","contactTime","scalar","suppressConvexWarning","logger","flipped","precollision","postcollision","poly","DegreeOfFreedom","config","newMass","sleeping","currentMotion","bias","maybeCollider","scaleFactor","impulse","finalImpulse","distanceFromCenter","easing","currentTime","startValue","endValue","repeatBuilder","repeat","startAngle","endAngle","shortestPathIsPositive","distance1","distance2","shortDistance","longDistance","minSource","maxSource","minDestination","maxDestination","currentPos","newPosX","newPosY","velX","velY","destX","destY","newAngle","currentAngle","rx","distanceTraveled","angleRadiansOffset","newScale","speedX","speedY","directionX","directionY","scaleOffsetX","scaleOffsetY","method","easingFcn","timeVisible","timeNotVisible","numBlinks","endOpacity","entityToFollow","followDistance","actorToFollowSpeed","actor","actorToMeet","actorToMeetSpeed","totalLength","pt","diff","arcLength","timeSquared","p1","p2","p3","desiredDistance","uniformTime","xOrPosOrOptions","yOrSpeed","speedOrUndefined","xOffsetOrVectorOrOptions","yOffsetOrSpeed","xOffset","yOffset","angleRadiansOrOptions","angleRadiansOffsetOrOptions","sizeXOrVectorOrOptions","sizeYOrSpeed","speedXOrUndefined","speedYOrUndefined","sizeX","sizeY","sizeOffsetXOrVectorOrOptions","sizeOffsetYOrSpeed","sizeOffsetX","sizeOffsetY","times","xOffsetOrVectorOptions","thePos","theVel","theAcc","theAngle","angularVelocity","isDraggable","pe","coordPlane","vel","collisionType","clone","builtInComponents","scene","newZ","recurse","geom","containment","otherCollider","me","useWorld","coords","fcn","interval","repeats","numberOfRepeats","randomRange","newInterval","newNumberOfRepeats","parallaxFactor","draw","useTransform","contains","active","proxy","pointerId","maybeProxy","pointers","receiver","sortedObjects","lastFrameEntities","currentFrameEntities","lastMovePerPointer","lastUpPerPointer","lastDownPerPointer","lastUpDownMoveEvents","objectIndex","debugFlags","currentCol","tile","originalOffset","shareEdges","checkAndCombine","maxLookBack","maybeParallax","oneMinusFactor","parallaxOffset","tileStartX","tileStartY","tileEndX","tileEndY","tiles","graphicsIndex","graphicsLen","offsets","gfx","showAll","showGrid","gridColor","gridWidth","showColliderBounds","colliderBoundsColor","showColliderGeometry","geometryColor","geometryLineWidth","geometryPointSize","geometryPos","cameraElasticity","cameraFriction","box","Axis","cam","_eng","currentFocus","focus","cameraVel","stretch","friction","focusX","focusY","easingFn","magnitudeX","magnitudeY","cameraStrategy","currentRes","res","zoomEasing","newZoom","lerpPoint","blend","interpolatedPos","snapPos","newCanvasWidth","newCanvasHeight","cameraPos","SystemType","_world","entityIndex","childAdded","childRemoved","idOrEntity","childAddedHandler","childRemovedHandler","requiredComponents","sort","query","queries","maybeAddComponent","maybeRemoveComponent","addComponent","removeComponent","maybeAddTag","maybeRemoveTag","addTag","removeTag","tagQuery","systemType","systemOrCtor","system","systems","entityOrSystem","world","physics","entities","substep","optionalBody","aDir","bDir","aDist","bDist","opposite","velAdj","aToContactNormal","bToContactNormal","aToContactTangent","bToContactTangent","velA","finishedContactIds","contactPoints","pointIndex","aToContact","bToContact","normalMass","tangentMass","restitution","relativeVelocity","normalImpulse","tangentImpulse","constraints","steeringConstant","maxCorrection","slop","steeringForce","impulseForce","impulseDelta","maxFriction","newImpulse","normalVelocity","_physics","colliderComponent","colliderComp","compositeColliders","solver","step","compositeId","oldTx","newTx","oldTxWithNewParent","oldGlobalPos","oldGlobalScale","oldGlobalRotation","interpolatedScale","interpolatedRotation","transformIndex","parallax","graphicsComponent","transformComponent","flipHorizontal","flipVertical","globalScale","oldFlipHorizontal","oldFlipVertical","ancestors","ancestor","maybeGraphics","filterSettings","entitySettings","txSettings","motionSettings","colliderSettings","physicsSettings","graphicsSettings","debugDraw","bodySettings","cameraSettings","cursor","gridSize","leftX","rightX","bottomY","topY","cell","instance","boundsOrPoint","xCoord","yCoord","proxyIndex","cellIndex","transparent","pointer","maybeGfx","maybePointer","mapOrOptions","iso","entityOffscreen","transformedBounds","unitRay","dydx","dxdy","unitStepX","unitStepY","startXCoord","startYCoord","stepDir","currentXCoord","currentYCoord","currentRayLengthX","currentRayLengthY","collidersVisited","done","maxIterations","cellHits","colliderIndex","hit1","hit2","compColliders","proxyId","otherIndex","newConfig","enabled","pad","axesLength","buttonLength","gamepads","buttonIndex","axesIndex","pads","arr","clonedPad","Buttons","Axes","inputs","input","command","inputHandler","commandHandler","noop","Keys","originalEvent","ev","code","keyEvent","keyboardOptions","global","grabWindowFocus","character","xOrPos","yOrEngine","engineOrUndefined","pageX","pageY","screenPos","worldPos","pointerType","coordinates","nativeEvent","screenX","screenY","deltaZ","deltaMode","WheelDeltaMode","NativePointerButton","PointerButton","PointerType","eventReceiver","ids","native","normalized","wheelOptions","grabFocus","nativePointerId","eventCoords","touch","ScrollWheelNormalizationFactor","we","page","pointerSystem","pointerTarget","loader","timer","actors","ColorBlindnessMode","_colorBlindnessMode","simulate","colorBlindMode","colorBlindness","wasRunning","testClock","currentClock","standardClock","otherStats","fs","ps","nativeComponent","_windowGlobal","_documentGlobal","timeoutMs","timing","scheduledTime","overrideUpdateMs","now","fpsInterval","leftover","mainloop","numberOfSteps","toastMessage","linkTarget","linkName","toast","messageFragments","link","finalMessage","dismissBtn","keydownHandler","first","_engine","scenes","sceneKey","sceneOrOptions","deferredScene","deferredTransition","deferredSceneInstance","startScene","maybeLoaderOrCtor","maybeStartTransition","inTransition","startSceneInstance","sceneName","sceneOrRoute","maybeDeferred","maybeScene","transitions","outTransition","nameOrScene","sceneOrCtor","potentialSceneOrOptions","destinationScene","maybeDest","sourceSceneInstance","sourceScene","engineInputEnabled","maybeSourceOut","maybeDestinationIn","sourceOut","destinationIn","sceneActivationData","hideLoader","sceneDefinition","newScene","sceneToLoad","sceneToLoadInstance","transition","targetScene","sceneInputEnabled","previousScene","nextScene","destLoader","old","deadline","collector","timeoutInterval","resourceType","collect","collectionData","ScrollPreventionMode","shouldSnapToPixel","container","div","detector","testMessage","displayMode","nativeContextAntialiasing","canvasImageRendering","useCanvasGraphicsContext","allow","showPlayerMessage","average","newCanvas","toggle","sceneNameOrLoader","elapsedMs","frameId","beforeUpdate","fixedTimestepMs","afterUpdate","afterDraw","preserveHiDPIResolution","finalWidth","finalHeight","screenshot","raw","newFont","sf","spriteFont","EmitterType","particle","isEmitting","emitRate","emitterType","particleCount","ranX","ranY","expression","numParticles","numInputFloats","particleData","particleDataBuffer1","vao1","particleDataBuffer2","vao2","startIndex","maxSize","endIndex","midpoint","maxParticles","graphicsOffset","map","halfTileWidth","halfTileHeight","xPos","yPos","totalWidth","totalHeight","_elapsed","tileWidth","tileHeight","renderFromTopOfGraphic","elevation","worldCoordinate","tileCoordinate","tileCoord","maxZ","currentZ","showPosition","positionColor","positionSize","actionBuilder","parallelActions","newLevelOptions","ba","bite","dataArray","bytes","minCodeSize","readCode","output","clearCode","eoiCode","codeSize","dict","clear","last","stream","entries","colorTable","rgb","hdr","bits","block","parseGCExt","parseComExt","parsePTExt","parseAppExt","parseNetscapeExt","parseUnknownAppExt","parseUnknownExt","img","deinterlace","pixels","newPixels","cpRow","toRow","fromRow","fromPixels","steps","pass","lzwData","frame","imageData","transparentColorIndex","pixel","colorIndex","bg","family","coroutineGenerator","thisArg","passedEngine","inside","schedule","autostart","started","completed","cancelled","generatorFcn","generator","loop","co","currentScene","_progress","lineNormal","halfThickness","NineSliceStretch","auto","targetCanvas","destinationSize","horizontalStretch","verticalStretch","marginWidth","marginHeight","tempMarginW","tempMarginH","tempSizeX","tempPositionX","tempSizeY","tempPositionY","numTilesX","numTilesY","tempSize","tempPosition","aCtx","bCtx","cCtx","dCtx","eCtx","fCtx","gCtx","hCtx","iCtx","tileSize","tileNum","numTiles","reducedTileSize","promises","tiledSprite","animation","suppressObsoleteMessages","property","descriptor","DecoratedClass","_count","win","defaultPlatformMap","capPlatforms","addPlatform","platform","setPlatform","ExceptionCode","capCustomPlatform","Plugins","defaultGetPlatform","getPlatform","defaultIsNativePlatform","isNativePlatform","defaultIsPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","isPluginAvailable","defaultGetPluginHeader","handleError","err","pluginMethodNoop","_target","defaultRegisterPlugin","jsImplementations","registeredPlugin","pluginHeader","jsImplementation","loadPluginImplementation","createPluginMethod","impl","methodHeader","createPluginMethodWrapper","remove","wrapper","fn","addListener","removeListener","addListenerNative","call","callbackId","registerPlugin","filePath","listenerFunc","firstListener","windowListener","listener","retainUntilConsumed","windowEventName","pluginEventName","handle","arg","str","cookies","cookieMap","cookie","encodedKey","encodedValue","expires","domain","reader","base64String","headers","originalKeys","params","shouldEncode","accumulator","entry","extra","form","requestInit","urlParams","response","contentType","e.Actor","e.BoundingBox","e.Color","e.GraphicsComponent","e.ImageSource","e.SpriteSheet","e.TileMap","e.TransformComponent","e.Vector","e.vec","Z","U","W","K","Y","X","Q","R","lowerBound","upperBound","mean","stddev","gauss","part","opts","oldComposite","clearBefore","ch","fg","chars","availWidth","availHeight","boxWidth","boxHeight","oldFont","widthFraction","charWidth","Map","empty","doorX","doorY","RNG","cx","cy","parts","isWallCallback","canBeDugCallback","digCallback","startX","startY","endX","endY","nx","ny","ok","firstCornerBad","secondCornerBad","priorityWallCallback","t1","room","cnt","connected","room1","room2","rooms","center1","center2","diffX","diffY","dirIndex1","dirIndex2","mid","index2","mid1","mid2","dirIndex","avail","lastBadIndex","corridor","probability","newMap","born","survive","widthStep","widthStart","cur","ncount","connectionCallback","allFreeSpace","notConnected","widthStarts","pp","connectedKeys","notConnectedKeys","space","minPoint","minDist","stack","keepNotConnected","tests","xx","pkey","yy","stepWidth","priorityWalls","wall","featureAttempts","prio1","prio2","featureName","deltas","delta","rand","border","availX","availY","walls","solid","hole","regularity","blocked","dirs","cgx","cgy","idx","ncgx","ncgy","found","otherRoom","dirToCheck","cw","validRoom","directions","dirIdx","newI","newJ","cwp","chp","roomw","roomh","roomWidth","roomHeight","sxOffset","syOffset","ii","jj","aRoom","aDirection","ry","door","startPosition","endPosition","xpos","ypos","tempDist","xDir","yDir","move","moves","xAbs","yAbs","percent","firstHalf","secondHalf","connection","otherWall","intGridCsv","autoRuleGroups","gridHeight","spritesheet","autoLayerTiles","getCell","ruleGroup","rule","py","px","patternValue","neighborValue","tileRectId","mapWith","mapHeight","rules","LdtkResource","tilemap","tileset","pushTile","ldtkLayer","exTile","tsxCoord","tsyCoord","r1","r2","ex.Sound","ex.ImageSource","ex.Animation","ex.SpriteSheet","ex.range","fetch","FormData","File","ReadableStream","shims","manuallyImported","recommendation","_fetch","_Request","_Response","_Headers","shims.kind","shims.setShims","auto.getRuntime","status","errorResponse","cause","iterator","controller","consumed","decoder","iterMessages","lineDecoder","iter","chunk","sse","readableStream","iterLines","teeIterator","encoder","ctrl","fieldname","trailingNewline","delimiter","cancelPromise","props","json","responsePromise","parseResponse","onfulfilled","onrejected","onfinally","baseURL","maxRetries","timeout","httpAgent","overridenFetch","customHeaders","Page","retryCount","contentLength","minAgentTimeout","reqHeaders","defaultHeaders","shimsKind","header","remainingRetries","optionsInput","retriesRemaining","req","responseHeaders","retryMessage","errText","errJSON","errMessage","defaultQuery","init","ms","signal","shouldRetryHeader","timeoutMillis","retryAfterMillisHeader","retryAfterHeader","timeoutSeconds","numRetries","sleepSeconds","jitter","client","browserInfo","browserPatterns","pattern","major","minor","patch","arch","env","targetHeaders","newHeaders","lowerKey","lowerCasedHeader","intercapsHeader","g1","g2","Core.multipartFormRequestOptions","TranscriptionsAPI.Transcriptions","TranslationsAPI.Translations","Audio","CompletionsAPI.Completions","Completions","model","Core.APIClient","Core.readEnv","apiKey","Errors.GroqError","Core.isRunningInBrowser","API.Completions","API.Chat","API.Embeddings","API.Audio","API.Models","Errors.APIError","Errors.APIConnectionError","Errors.APIConnectionTimeoutError","Errors.APIUserAbortError","Errors.NotFoundError","Errors.ConflictError","Errors.RateLimitError","Errors.BadRequestError","Errors.AuthenticationError","Errors.InternalServerError","Errors.PermissionDeniedError","Errors.UnprocessableEntityError","Uploads.toFile","Uploads.fileFromPath","undefined","VERSION","LARGE_ARRAY_SIZE","CORE_ERROR_TEXT","FUNC_ERROR_TEXT","INVALID_TEMPL_VAR_ERROR_TEXT","HASH_UNDEFINED","MAX_MEMOIZE_SIZE","PLACEHOLDER","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","WRAP_BIND_FLAG","WRAP_BIND_KEY_FLAG","WRAP_CURRY_BOUND_FLAG","WRAP_CURRY_FLAG","WRAP_CURRY_RIGHT_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_REARG_FLAG","WRAP_FLIP_FLAG","DEFAULT_TRUNC_LENGTH","DEFAULT_TRUNC_OMISSION","HOT_COUNT","HOT_SPAN","LAZY_FILTER_FLAG","LAZY_MAP_FLAG","LAZY_WHILE_FLAG","INFINITY","MAX_SAFE_INTEGER","MAX_INTEGER","NAN","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","HALF_MAX_ARRAY_LENGTH","wrapFlags","argsTag","arrayTag","asyncTag","boolTag","dateTag","domExcTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","weakSetTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEscapedHtml","reUnescapedHtml","reHasEscapedHtml","reHasUnescapedHtml","reEscape","reEvaluate","reInterpolate","reIsDeepProp","reIsPlainProp","rePropName","reRegExpChar","reHasRegExpChar","reTrimStart","reWhitespace","reWrapComment","reWrapDetails","reSplitDetails","reAsciiWord","reForbiddenIdentifierChars","reEscapeChar","reEsTemplate","reFlags","reIsBadHex","reIsBinary","reIsHostCtor","reIsOctal","reIsUint","reLatin","reNoMatch","reUnescapedString","rsAstralRange","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsAstral","rsBreak","rsCombo","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","rsSymbol","reApos","reComboMark","reUnicode","reUnicodeWord","reHasUnicode","reHasUnicodeWord","contextProps","templateCounter","typedArrayTags","cloneableTags","deburredLetters","htmlEscapes","htmlUnescapes","stringEscapes","freeParseFloat","freeParseInt","freeGlobal","freeSelf","root","freeExports","freeModule","moduleExports","freeProcess","nodeUtil","types","nodeIsArrayBuffer","nodeIsDate","nodeIsMap","nodeIsRegExp","nodeIsSet","nodeIsTypedArray","apply","arrayAggregator","setter","iteratee","arrayEach","arrayEachRight","arrayEvery","predicate","arrayFilter","resIndex","arrayIncludes","baseIndexOf","arrayIncludesWith","comparator","arrayMap","arrayPush","values","arrayReduce","initAccum","arrayReduceRight","arraySome","asciiSize","baseProperty","asciiToArray","asciiWords","baseFindKey","collection","eachFunc","baseFindIndex","fromIndex","fromRight","strictIndexOf","baseIsNaN","baseIndexOfWith","baseMean","baseSum","basePropertyOf","baseReduce","baseSortBy","comparer","baseTimes","baseToPairs","baseTrim","trimmedEndIndex","baseUnary","baseValues","cacheHas","cache","charsStartIndex","strSymbols","chrSymbols","charsEndIndex","countHolders","placeholder","deburrLetter","escapeHtmlChar","escapeStringChar","chr","getValue","hasUnicode","hasUnicodeWord","iteratorToArray","mapToArray","overArg","replaceHolders","setToArray","set","setToPairs","strictLastIndexOf","stringSize","unicodeSize","stringToArray","unicodeToArray","unescapeHtmlChar","unicodeWords","runInContext","Array","Date","Error","Function","Math","Object","RegExp","String","TypeError","arrayProto","funcProto","objectProto","coreJsData","funcToString","hasOwnProperty","idCounter","maskSrcKey","uid","nativeObjectToString","objectCtorString","oldDash","reIsNative","Buffer","Symbol","Uint8Array","allocUnsafe","getPrototype","objectCreate","propertyIsEnumerable","splice","spreadableSymbol","symIterator","symToStringTag","defineProperty","getNative","ctxClearTimeout","ctxNow","ctxSetTimeout","nativeCeil","nativeFloor","nativeGetSymbols","nativeIsBuffer","nativeIsFinite","nativeJoin","nativeKeys","nativeMax","nativeMin","nativeNow","nativeParseInt","nativeRandom","nativeReverse","DataView","Promise","Set","WeakMap","nativeCreate","metaMap","realNames","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","symbolToString","lodash","isObjectLike","isArray","LazyWrapper","LodashWrapper","wrapperClone","baseCreate","proto","isObject","baseLodash","chainAll","lazyClone","copyArray","lazyReverse","lazyValue","isArr","isRight","arrLength","getView","iteratees","iterLength","takeCount","baseWrapperValue","outer","iterIndex","computed","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","SetCache","setCacheAdd","setCacheHas","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","arrayLikeKeys","inherited","isArg","isArguments","isBuff","isBuffer","isType","isTypedArray","skipIndexes","isIndex","arraySample","baseRandom","arraySampleSize","shuffleSelf","baseClamp","arrayShuffle","assignMergeValue","eq","baseAssignValue","assignValue","objValue","baseAggregator","baseEach","baseAssign","copyObject","baseAssignIn","keysIn","baseAt","skip","get","number","lower","upper","baseClone","bitmask","customizer","isDeep","isFlat","isFull","initCloneArray","getTag","isFunc","cloneBuffer","initCloneObject","copySymbolsIn","copySymbols","initCloneByTag","stacked","isSet","subValue","isMap","keysFunc","getAllKeysIn","getAllKeys","baseConforms","baseConformsTo","baseDelay","wait","setTimeout","baseDifference","includes","isCommon","valuesLength","valuesIndex","createBaseEach","baseForOwn","baseEachRight","baseForOwnRight","baseEvery","baseExtremum","isSymbol","baseFill","toInteger","toLength","baseFilter","baseFlatten","depth","isStrict","isFlattenable","baseFor","createBaseFor","baseForRight","baseFunctions","isFunction","baseGet","castPath","toKey","baseGetAllKeys","symbolsFunc","baseGetTag","getRawTag","objectToString","baseGt","baseHas","baseHasIn","baseInRange","baseIntersection","arrays","othLength","othIndex","caches","maxLength","seen","baseInverter","baseInvoke","baseIsArguments","baseIsArrayBuffer","baseIsDate","baseIsEqual","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsMap","baseIsMatch","matchData","noCustomizer","srcValue","baseIsNative","isMasked","baseIsRegExp","baseIsSet","baseIsTypedArray","isLength","baseIteratee","identity","baseMatchesProperty","baseMatches","baseKeys","isPrototype","baseKeysIn","nativeKeysIn","isProto","baseLt","baseMap","isArrayLike","getMatchData","matchesStrictComparable","isKey","isStrictComparable","hasIn","baseMerge","srcIndex","baseMergeDeep","newValue","safeGet","mergeFunc","isTyped","isArrayLikeObject","cloneTypedArray","isPlainObject","toPlainObject","baseNth","baseOrderBy","orders","getIteratee","criteria","compareMultiple","basePick","basePickBy","baseSet","basePropertyDeep","basePullAll","indexOf","basePullAt","indexes","previous","baseUnset","baseRange","baseRepeat","baseRest","setToString","overRest","baseSample","baseSampleSize","nested","baseSetData","baseSetToString","constant","baseShuffle","baseSlice","baseSome","baseSortedIndex","retHighest","low","high","baseSortedIndexBy","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedUniq","baseToNumber","baseToString","baseUniq","createSet","seenIndex","baseUpdate","updater","baseWhile","isDrop","actions","baseXor","baseZipObject","assignFunc","valsLength","castArrayLikeObject","castFunction","stringToPath","toString","castRest","castSlice","clearTimeout","cloneArrayBuffer","cloneDataView","dataView","cloneRegExp","regexp","cloneSymbol","symbol","typedArray","compareAscending","valIsDefined","valIsReflexive","objCriteria","othCriteria","ordersLength","order","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","isNew","getSymbols","getSymbolsIn","createAggregator","initializer","createAssigner","assigner","guard","isIterateeCall","iterable","createBind","isBind","Ctor","createCtor","createCaseFirst","methodName","trailing","createCompounder","words","deburr","thisBinding","createCurry","arity","getHolder","createRecurry","createHybrid","createFind","findIndexFunc","createFlow","flatRest","funcs","prereq","getFuncName","funcName","getData","isLaziable","partialsRight","holdersRight","argPos","ary","isAry","isBindKey","isFlip","holdersCount","newHolders","reorder","createInverter","toIteratee","createMathOperation","operator","defaultValue","createOver","arrayFunc","createPadding","charsLength","createPartial","createRange","toFinite","createRelationalOperation","toNumber","wrapFunc","isCurry","newHoldersRight","newPartials","newPartialsRight","newData","setData","setWrapToString","createRound","precision","createToPairs","createWrap","mergeData","customDefaultsAssignIn","customDefaultsMerge","customOmitClone","isPartial","arrStacked","othStacked","arrValue","othValue","compared","convert","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","flatten","otherFunc","isKeyable","isOwn","unmasked","stubArray","ctorString","transforms","getWrapDetails","hasPath","hasFunc","insertWrapDetails","details","isMaskable","stubFalse","memoizeCapped","memoize","srcBitmask","newBitmask","isCombo","otherArgs","oldArray","shortOut","reference","updateWrapDetails","lastCalled","stamp","remaining","quote","subString","compact","concat","difference","differenceBy","differenceWith","drop","dropRight","dropRightWhile","dropWhile","findIndex","findLastIndex","flattenDeep","flattenDepth","fromPairs","head","initial","mapped","intersectionBy","intersectionWith","join","separator","lastIndexOf","nth","pull","pullAll","pullAllBy","pullAllWith","pullAt","slice","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","sortedUniq","sortedUniqBy","tail","take","takeRight","takeRightWhile","takeWhile","union","unionBy","unionWith","uniq","uniqBy","uniqWith","unzip","unzipWith","without","xor","xorBy","xorWith","zip","zipObject","zipObjectDeep","zipWith","chain","tap","interceptor","thru","wrapperAt","wrapperChain","wrapperCommit","wrapperNext","toArray","wrapperToIterator","wrapperPlant","wrapperReverse","wrapped","wrapperValue","countBy","every","filter","find","findLast","flatMap","flatMapDeep","flatMapDepth","forEach","forEachRight","groupBy","isString","invokeMap","keyBy","orderBy","partition","reduce","reduceRight","negate","sample","sampleSize","shuffle","some","sortBy","after","before","bind","bindKey","curry","curryRight","debounce","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","invokeFunc","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","defer","delay","flip","resolver","memoized","once","overArgs","funcsLength","partial","partialRight","rearg","rest","spread","throttle","unary","wrap","castArray","cloneWith","cloneDeep","cloneDeepWith","conformsTo","gt","gte","isArrayBuffer","isBoolean","isDate","isElement","isEmpty","isEqual","isEqualWith","isError","isFinite","isInteger","isMatch","isMatchWith","isNaN","isNumber","isNative","isNull","isNil","isRegExp","isSafeInteger","isUndefined","isWeakMap","isWeakSet","lt","lte","sign","remainder","isBinary","toSafeInteger","assign","assignIn","assignInWith","assignWith","at","create","prototype","properties","defaults","propsIndex","propsLength","defaultsDeep","mergeWith","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","functions","functionsIn","has","invert","invertBy","invoke","mapKeys","mapValues","merge","omit","omitBy","pickBy","pick","setWith","toPairs","toPairsIn","isArrLike","unset","update","updateWith","valuesIn","clamp","inRange","floating","camelCase","word","capitalize","upperFirst","endsWith","escape","escapeRegExp","kebabCase","lowerCase","lowerFirst","strLength","padEnd","padStart","parseInt","radix","replace","snakeCase","split","limit","startCase","startsWith","template","settings","imports","importsKeys","importsValues","isEscaping","isEvaluating","interpolate","reDelimiters","sourceURL","escapeValue","interpolateValue","esTemplateValue","evaluateValue","attempt","toLower","toUpper","trim","trimEnd","trimStart","truncate","omission","substring","newEnd","unescape","upperCase","bindAll","methodNames","cond","conforms","defaultTo","flow","flowRight","matchesProperty","methodOf","mixin","noConflict","nthArg","over","overEvery","overSome","propertyOf","range","rangeRight","stubObject","stubString","stubTrue","toPath","uniqueId","prefix","add","augend","addend","ceil","divide","dividend","floor","maxBy","meanBy","minBy","multiply","multiplier","multiplicand","round","subtract","minuend","subtrahend","sumBy","isFilter","takeName","dropName","checkIteratee","isTaker","lodashFunc","retUnwrapped","isLazy","useLazy","isHybrid","isUnwrapped","onlyLazy","chainName","this","player","roomChat","checksum","jsxs","Fragment","ex.Actor","ex.CollisionType","portal","Actor","__publicField","roomNumber","tilepos","firstRoom","lastRoom","ex.Keys","ex.Axes","ex.vec","cursorPosition","newPos","lastPosition","renderValue","inputValue","_arguments","adopt","fulfilled","rejected","verb","op","pack","ar","newCursorPosition","removePosition","prevPosition","oldLength","wasLast","newInput","addedCharacters","serviceFunction","nextCommand","prevCommand","useState","setInputValue","setRenderValue","setCursorPosition","setState","newRenderValue","newInputValue","preventDefault","addCharacter","setInput","removeCharacter","moveCommandCursor","submitCommand","provideCommandService","services","inputElementRef","useRef","setInputCursor","commandsHistory","oldCursorPosition","nextIndex","prevIndex","maxHistoryCommands","commandsLength","sameCommand","canAppend","canReplace","setCommandsHistory","newCommandsHistory","addCommand","remainingWords","printedWords","charactersToPrint","firstWord","printedChunk","printedLength","prevWord","nextWord","wordFullyPrinted","printedWordsPrev","wordChunk","wordFullyPrintedPrev","remainingLine","printedLine","printedLines","remainingLines","firstLine","wordFullyPrintedAfterPrint","prevState","printedLinesNext","remainingLinesNext","wordFullyPrintedNext","newLineNext","nextPrint","printerSpeed","_this","charactersPerTick","afterPrintCallback","onPrintStatusChange","isPrinting","setIsPrinting","activeTimeout","setActiveTimeout","printerResponse","setPrinterResponse","resolveRef","clearTimeoutState","clearResolver","resp","startPrint","stopPrint","useEffect","shouldStopPrint","shouldPrint","shouldClearTimeout","printerConfig","WordTypes","characters","dataAttribute","className","onClick","prompt","LineTypes","PrinterEvents","queueState","setQueueState","enqueue","dequeue","afterDequeue","nextEvent","print","payload","TerminalEvents","lock","loading","inputLocked","lockApp","focusInput","printOnScreen","clearScreen","loaderLoading","startComponentLoading","endComponentLoading","onCommand","banner","focusOnMount","lockedByLoader","setLockedByLoader","locked","attemptUnlockLoader","lockByLoader","lockState","needToLock","needToUnlock","loadingState","handleInputChange","handleKeyboardEvent","handleKeyboardDown","loaded","setInputLocked","terminalRef","newInputLocked","scrollDown","activeEvent","setActiveEvent","nullifyActiveEvent","interpretEvent","printerQueue","printerPrint","printerClear","terminalQueue","terminalFocus","terminalLoading","terminalLock","slides","slideIndex","newIndex","slide","nextSlide","loaderSpeed","onSetOuterState","isLoading","setIsLoading","setSlide","setOuterState","newSlideIndex","startLoading","endLoading","shouldStopLoading","shouldLoad","css","ref","insertAt","children","React","selected","selectedStyle","memo","lineIndex","wordIndex","scanner","inputElement","cursorSymbol","handleInput","handleKeyDown","lastSelected","screenEffects","textEffects","terminalApp","screenHandlers","commandLine","_w","inputHandlers","commandHistory","loaderComponent","controllerHandlers","jsx","osd","setOsd","flash","USE","require","mod","MODULE","tmp","sT","sI","check","onto","as","be","State","NI","soul","Dup","opt","dup","dt","it","age","lack","Gun","gun","universe","eve","DBG","text_rand","ack","put","CT","nl","ni","nj","kl","states","pop","fire","ERR","cut","valid","ham","turn","graph","vertex","was","state_is","known","MD","aid","state_ify","CF","back","go","faith","obj_each","each","yes","sub","cat","obj_has","sat","unlink","any","lat","tat","odd","rid","acks","stun","ran","walk","run","ask","eas","act","none","one","neat","lex","parse","Mesh","mesh","puff","dup_check","dup_track","hear","peer","ash","SMIA","ss","sorta","meta","pl","wr","ST","send","wire","peers","souls","websocket","open","reconnect","doc","store","lg","disk","stop","DEP","Type","list_is","obj_map","obj_is","ll","lle","fn_is","Val","text_is","bi_is","num_is","rel_","obj_put","Node","soul_","text_random","obj_del","obj_copy","N_","Graph","obj_empty","nf","is","require$$0","render","ex.Engine","ex.DisplayMode","ex.Color","ex.SolverStrategy","ex.Loader","ex.WebAudio","ex.BoundingBox"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,83,84,85,88,89],"sources":["../../node_modules/preact/dist/preact.module.js","../../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../../node_modules/excalibur/build/esm/excalibur.js","../../node_modules/@capacitor/core/dist/index.js","../../node_modules/@capacitor/motion/dist/esm/index.js","../../node_modules/@excaliburjs/plugin-ldtk/build/esm/excalibur-ldtk.min.js","../../node_modules/rot-js/lib/rng.js","../../node_modules/rot-js/lib/display/backend.js","../../node_modules/rot-js/lib/display/canvas.js","../../node_modules/rot-js/lib/display/rect.js","../../node_modules/rot-js/lib/constants.js","../../node_modules/rot-js/lib/map/map.js","../../node_modules/rot-js/lib/map/arena.js","../../node_modules/rot-js/lib/map/dungeon.js","../../node_modules/rot-js/lib/map/features.js","../../node_modules/rot-js/lib/map/uniform.js","../../node_modules/rot-js/lib/map/cellular.js","../../node_modules/rot-js/lib/map/digger.js","../../node_modules/rot-js/lib/map/ellermaze.js","../../node_modules/rot-js/lib/map/dividedmaze.js","../../node_modules/rot-js/lib/map/iceymaze.js","../../node_modules/rot-js/lib/map/rogue.js","../../node_modules/rot-js/lib/map/index.js","../../src/assets/maps/vsm0.ldtk?url","../../src/autolayer.js","../../src/automap.js","../../src/assets/L/obj_Idle000.png","../../src/assets/L/obj_Idle001.png","../../src/assets/L/obj_Idle002.png","../../src/assets/L/obj_Idle003.png","../../src/assets/L/obj_Walk000.png","../../src/assets/L/obj_Walk001.png","../../src/assets/L/obj_Walk002.png","../../src/assets/L/obj_Walk003.png","../../src/assets/L/obj_Walk004.png","../../src/assets/L/obj_Walk005.png","../../src/assets/L/obj_Walk006.png","../../src/assets/L/obj_Walk007.png","../../src/assets/L/obj_Run000.png","../../src/assets/L/obj_Run001.png","../../src/assets/L/obj_Run002.png","../../src/assets/L/obj_Run003.png","../../src/assets/L/obj_Run004.png","../../src/assets/L/obj_Run005.png","../../src/assets/L/obj_Run006.png","../../src/assets/L/obj_Run007.png","../../src/assets/L/obj_Flying000.png","../../src/assets/L/obj_Flying001.png","../../src/assets/coins.png","../../src/assets/portalsSpriteSheet.png","../../src/assets/maps/Cavernas_by_Adam_Saltsman.png","../../src/assets/maps/scifi_platformTiles_32x32.png","../../src/assets/maps/vsm0/Level_0.ldtkl?url","../../src/assets/back/city/10.png","../../src/assets/sounds/elemental-magic-spell-impact-outgoing-228342.mp3","../../src/resources.js","../../src/permission.js","../../node_modules/groq-sdk/version.mjs","../../node_modules/groq-sdk/_shims/registry.mjs","../../node_modules/groq-sdk/_shims/MultipartBody.mjs","../../node_modules/groq-sdk/_shims/web-runtime.mjs","../../node_modules/groq-sdk/_shims/index.mjs","../../node_modules/groq-sdk/error.mjs","../../node_modules/groq-sdk/lib/streaming.mjs","../../node_modules/groq-sdk/uploads.mjs","../../node_modules/groq-sdk/core.mjs","../../node_modules/groq-sdk/resource.mjs","../../node_modules/groq-sdk/resources/audio/transcriptions.mjs","../../node_modules/groq-sdk/resources/audio/translations.mjs","../../node_modules/groq-sdk/resources/audio/audio.mjs","../../node_modules/groq-sdk/resources/chat/completions.mjs","../../node_modules/groq-sdk/resources/chat/chat.mjs","../../node_modules/groq-sdk/resources/completions.mjs","../../node_modules/groq-sdk/resources/embeddings.mjs","../../node_modules/groq-sdk/resources/models.mjs","../../node_modules/groq-sdk/index.mjs","../../node_modules/lodash/lodash.js","../../src/backrooms.jsx","../../src/util.js","../../src/portal.js","../../src/room.js","../../src/player.js","../../src/assets/logo512.png","../../node_modules/preact/hooks/dist/hooks.module.js","../../node_modules/preact/compat/dist/compat.module.js","../../node_modules/crt-terminal/dist/esm/index.js","../../src/crtterminal.jsx","../../src/crtvisual.jsx","../../node_modules/gun/gun.js","../../node_modules/gun/browser.js","../../src/telepathy.jsx","../../src/main.jsx"],"sourcesContent":["var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,d=Array.isArray;function w(n,l){for(var u in l)n[u]=l[u];return n}function _(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function g(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function C(n,l){if(null==l)return n.__?C(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?C(n):null}function S(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return S(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!P.__r++||r!==l.debounceRendering)&&((r=l.debounceRendering)||o)(P)}function P(){var n,u,t,r,o,f,c,s;for(i.sort(e);n=i.shift();)n.__d&&(u=i.length,r=void 0,f=(o=(t=n).__v).__e,c=[],s=[],t.__P&&((r=w({},o)).__v=o.__v+1,l.vnode&&l.vnode(r),j(t.__P,r,o,t.__n,t.__P.namespaceURI,32&o.__u?[f]:null,c,null==f?C(o):f,!!(32&o.__u),s),r.__v=o.__v,r.__.__k[r.__i]=r,z(c,r,s),r.__e!=f&&S(r)),i.length>u&&i.sort(e));P.__r=0}function $(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,d,w,_,g=t&&t.__k||v,m=l.length;for(f=I(u,l,g,f,m),a=0;a<m;a++)null!=(y=u.__k[a])&&(h=-1===y.__i?p:g[y.__i]||p,y.__i=a,_=j(n,y,h,i,r,o,e,f,c,s),d=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&V(h.ref,null,y),s.push(y.ref,y.__c||d,y)),null==w&&null!=d&&(w=d),4&y.__u||h.__k===y.__k?f=A(y,f,n):\"function\"==typeof y.type&&void 0!==_?f=_:d&&(f=d.nextSibling),y.__u&=-7);return u.__e=w,f}function I(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(f=r+h,(o=n.__k[r]=\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?m(null,o,null,null,null):d(o)?m(k,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,e=null,-1!==(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null===e.__v?(-1==c&&h--,\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=C(e)),q(e,e));return t}function A(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=A(t[i],l,u));return l}n.__e!=l&&(l&&n.type&&!u.contains(l)&&(l=C(n)),u.insertBefore(n.__e,l||null),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(d(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o=n.key,e=n.type,f=l[u];if(null===f||f&&o==f.key&&e===f.type&&0==(2&f.__u))return u;if(t>(null!=f&&0==(2&f.__u)?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;){if(i>=0){if((f=l[i])&&0==(2&f.__u)&&o==f.key&&e===f.type)return i;i--}if(r<l.length){if((f=l[r])&&0==(2&f.__u)&&o==f.key&&e===f.type)return r;r++}}return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function F(n,l,u,t,i){var r;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]===t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),l=l.toLowerCase()in n||\"onFocusOut\"==l||\"onFocusIn\"==l?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function O(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function j(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,g,m,b,C,S,M,P,I,A,H,L,T,F=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof F)try{if(b=u.props,C=\"prototype\"in F&&F.prototype.render,S=(a=F.contextType)&&i[a.__c],M=a?S?S.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(C?u.__c=h=new F(b,M):(u.__c=h=new x(b,M),h.constructor=F,h.render=B),S&&S.sub(h),h.props=b,h.state||(h.state={}),h.context=M,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),C&&null==h.__s&&(h.__s=h.state),C&&null!=F.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=w({},h.__s)),w(h.__s,F.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)C&&null==F.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),C&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(C&&null==F.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)||u.__v==t.__v)){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),C&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,g)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,I=l.__r,A=0,C){for(h.state=h.__s,h.__d=!1,I&&I(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,I&&I(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=w(w({},i),h.getChildContext())),C&&!p&&null!=h.getSnapshotBeforeUpdate&&(g=h.getSnapshotBeforeUpdate(v,y)),f=$(n,d(L=null!=a&&a.type===k&&null==a.key?a.props.children:a)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else for(T=o.length;T--;)_(o[T]);else u.__e=t.__e,u.__k=t.__k;l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=N(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n,u,t){for(var i=0;i<t.length;i++)V(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function N(u,t,i,r,o,e,f,c,s){var a,h,v,y,w,g,m,b=i.props,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((w=e[a])&&\"setAttribute\"in w==!!x&&(x?w.localName==x:3==w.nodeType)){u=w,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null===x)b===k||c&&u.data===k||(u.data=k);else{if(e=e&&n.call(u.childNodes),b=i.props||p,!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(w=u.attributes[a]).name]=w.value;for(a in b)if(w=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=w;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;F(u,a,null,w,o)}for(a in k)w=k[a],\"children\"==a?y=w:\"dangerouslySetInnerHTML\"==a?h=w:\"value\"==a?g=w:\"checked\"==a?m=w:c&&\"function\"!=typeof w||b[a]===w||F(u,a,w,b[a],o);if(h)c||v&&(h.__html===v.__html||h.__html===u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),$(u,d(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&C(i,0),c,s),null!=e)for(a=e.length;a--;)_(e[a]);c||(a=\"value\",\"progress\"==x&&null==g?u.removeAttribute(\"value\"):void 0!==g&&(g!==u[a]||\"progress\"==x&&!g||\"option\"==x&&g!==b[a])&&F(u,a,g,b[a],o),a=\"checked\",void 0!==m&&m!==u[a]&&F(u,a,m,b[a],o))}return u}function V(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function q(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||V(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&q(i[r],u,t||\"function\"!=typeof n.type);t||_(n.__e),n.__c=n.__=n.__e=void 0}function B(n,l,u){return this.constructor(n,u)}function D(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],j(t,u=(!r&&i||t).__k=g(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),z(e,u,f)}function E(n,l){D(n,l,E)}function G(l,u,t){var i,r,o,e,f=w({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&void 0!==e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function J(n,l){var u={__c:l=\"__cC\"+h++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=w({},this.state),\"function\"==typeof n&&(n=n(w({},u),this.props)),n&&w(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},P.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=O(!1),a=O(!0),h=0;export{x as Component,k as Fragment,G as cloneElement,J as createContext,g as createElement,b as createRef,g as h,E as hydrate,t as isValidElement,l as options,D as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,l=t;\"ref\"in t&&(a=t.ref,delete t.ref);var p={type:e,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===l[c]&&(l[c]=a[c]);return r.vnode&&r.vnode(p),p}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},l=/[A-Z]/g;function p(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var p=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(l,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||p.startsWith(\"--\")||o.test(p)||(s=\"px;\"),i=i+p+\":\"+a+s}}return e+'=\"'+i+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,p as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","/*!\n * excalibur - 0.30.3 - 2025-1-1\n * https://github.com/excaliburjs/Excalibur\n * Copyright (c) 2025 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>\n * Licensed BSD-2-Clause\n * @preserve\n */\n/******/ var __webpack_modules__ = ({\n\n/***/ 851:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(935);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* Buttons styles start */\r\n\r\nbutton#excalibur-play {\r\n  display: inline-block;\r\n  position: relative;\r\n  z-index: 999;\r\n  border-radius: 6px;\r\n  border: none;\r\n  /*border: 3px solid;\r\n    border-color: white;\r\n    box-shadow: 0 0 10px #ccc;*/\r\n  padding: 1rem 1.5rem 1rem 4rem;\r\n  margin: 0;\r\n  text-decoration: none;\r\n  background: #00b233;\r\n  color: #ffffff;\r\n  font-family: sans-serif;\r\n  font-size: 2rem;\r\n  white-space: nowrap;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  transition:\r\n    background 250ms ease-in-out,\r\n    transform 150ms ease;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n\r\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r\n  animation: excalibur-button-fadein 200ms;\r\n}\r\n\r\n/*\r\nbutton#excalibur-play {\r\n  display: none;\r\n}*/\r\n\r\nbutton#excalibur-play:after {\r\n  position: absolute;\r\n  content: '';\r\n  border: 8px solid;\r\n  border-color: transparent transparent transparent white;\r\n  left: 35px;\r\n  top: 24px;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\nbutton#excalibur-play:before {\r\n  position: absolute;\r\n  content: '';\r\n  border: 3px solid;\r\n  left: 19px;\r\n  top: 14px;\r\n  border-radius: 20px;\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\nbutton#excalibur-play:hover,\r\nbutton#excalibur-play:focus {\r\n  background: #00982c;\r\n}\r\n\r\nbutton#excalibur-play:focus {\r\n  outline: 1px solid #fff;\r\n  outline-offset: -4px;\r\n}\r\n\r\nbutton#excalibur-play:active {\r\n  transform: scale(0.99);\r\n}\r\n\r\n@keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Firefox < 16 */\r\n@-moz-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Safari, Chrome and Opera > 12.1 */\r\n@-webkit-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Internet Explorer */\r\n@-ms-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Opera < 12.1 */\r\n@-o-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./Director/Loader.css\"],\"names\":[],\"mappings\":\"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB;;wBAEsB;EACtB,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF\",\"sourcesContent\":[\"/* Buttons styles start */\\r\\n\\r\\nbutton#excalibur-play {\\r\\n  display: inline-block;\\r\\n  position: relative;\\r\\n  z-index: 999;\\r\\n  border-radius: 6px;\\r\\n  border: none;\\r\\n  /*border: 3px solid;\\r\\n    border-color: white;\\r\\n    box-shadow: 0 0 10px #ccc;*/\\r\\n  padding: 1rem 1.5rem 1rem 4rem;\\r\\n  margin: 0;\\r\\n  text-decoration: none;\\r\\n  background: #00b233;\\r\\n  color: #ffffff;\\r\\n  font-family: sans-serif;\\r\\n  font-size: 2rem;\\r\\n  white-space: nowrap;\\r\\n  line-height: 1;\\r\\n  cursor: pointer;\\r\\n  text-align: center;\\r\\n  transition:\\r\\n    background 250ms ease-in-out,\\r\\n    transform 150ms ease;\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n\\r\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\r\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\r\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\r\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\r\\n  animation: excalibur-button-fadein 200ms;\\r\\n}\\r\\n\\r\\n/*\\r\\nbutton#excalibur-play {\\r\\n  display: none;\\r\\n}*/\\r\\n\\r\\nbutton#excalibur-play:after {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 8px solid;\\r\\n  border-color: transparent transparent transparent white;\\r\\n  left: 35px;\\r\\n  top: 24px;\\r\\n  width: 0;\\r\\n  height: 0;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:before {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 3px solid;\\r\\n  left: 19px;\\r\\n  top: 14px;\\r\\n  border-radius: 20px;\\r\\n  width: 30px;\\r\\n  height: 30px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:hover,\\r\\nbutton#excalibur-play:focus {\\r\\n  background: #00982c;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:focus {\\r\\n  outline: 1px solid #fff;\\r\\n  outline-offset: -4px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:active {\\r\\n  transform: scale(0.99);\\r\\n}\\r\\n\\r\\n@keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Firefox < 16 */\\r\\n@-moz-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Safari, Chrome and Opera > 12.1 */\\r\\n@-webkit-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Internet Explorer */\\r\\n@-ms-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Opera < 12.1 */\\r\\n@-o-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 296:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(935);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `#ex-toast-container {\r\n  position: absolute;\r\n  height: 0;\r\n  min-width: 50%;\r\n  left: 50%;\r\n  top: 0;\r\n}\r\n\r\n.ex-toast-message {\r\n  left: -50%;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  padding: 10px;\r\n  margin-top: 5px;\r\n  font-size: 18px;\r\n  font-family: sans-serif;\r\n  border-radius: 6px;\r\n  border: 3px solid #b7b779;\r\n  background-color: rgb(253, 253, 192);\r\n}\r\n\r\n.ex-toast-message button {\r\n  align-self: flex-start;\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./Util/Toaster.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;EAE9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;AAEA;EACE,sBAAsB;AACxB\",\"sourcesContent\":[\"#ex-toast-container {\\r\\n  position: absolute;\\r\\n  height: 0;\\r\\n  min-width: 50%;\\r\\n  left: 50%;\\r\\n  top: 0;\\r\\n}\\r\\n\\r\\n.ex-toast-message {\\r\\n  left: -50%;\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n\\r\\n  padding: 10px;\\r\\n  margin-top: 5px;\\r\\n  font-size: 18px;\\r\\n  font-family: sans-serif;\\r\\n  border-radius: 6px;\\r\\n  border: 3px solid #b7b779;\\r\\n  background-color: rgb(253, 253, 192);\\r\\n}\\r\\n\\r\\n.ex-toast-message button {\\r\\n  align-self: flex-start;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 935:\n/***/ ((module) => {\n\n\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};\n\n/***/ }),\n\n/***/ 1:\n/***/ ((module) => {\n\n\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};\n\n/***/ })\n\n/******/ });\n/************************************************************************/\n/******/ // The module cache\n/******/ var __webpack_module_cache__ = {};\n/******/ \n/******/ // The require function\n/******/ function __webpack_require__(moduleId) {\n/******/ \t// Check if module is in cache\n/******/ \tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \tif (cachedModule !== undefined) {\n/******/ \t\treturn cachedModule.exports;\n/******/ \t}\n/******/ \t// Create a new module (and put it into the cache)\n/******/ \tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\tid: moduleId,\n/******/ \t\t// no module.loaded needed\n/******/ \t\texports: {}\n/******/ \t};\n/******/ \n/******/ \t// Execute the module function\n/******/ \t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \n/******/ \t// Return the exports of the module\n/******/ \treturn module.exports;\n/******/ }\n/******/ \n/************************************************************************/\n/******/ /* webpack/runtime/compat get default export */\n/******/ (() => {\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = (module) => {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t() => (module['default']) :\n/******/ \t\t\t() => (module);\n/******/ \t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\treturn getter;\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n/******/ \t// define getter functions for harmony exports\n/******/ \t__webpack_require__.d = (exports, definition) => {\n/******/ \t\tfor(var key in definition) {\n/******/ \t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n/******/ \t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/make namespace object */\n/******/ (() => {\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = (exports) => {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/ })();\n/******/ \n/************************************************************************/\nvar __webpack_exports__ = {};\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  eKr: () => (/* reexport */ ActionCompleteEvent),\n  yVm: () => (/* reexport */ ActionContext),\n  a7j: () => (/* reexport */ ActionQueue),\n  U_w: () => (/* reexport */ ActionSequence),\n  JF2: () => (/* reexport */ ActionStartEvent),\n  htg: () => (/* reexport */ ActionsComponent),\n  HXL: () => (/* reexport */ ActionsSystem),\n  mcg: () => (/* reexport */ ActivateEvent),\n  Agj: () => (/* reexport */ Actor),\n  J3_: () => (/* reexport */ ActorEvents),\n  Wgv: () => (/* reexport */ AddEvent),\n  u6S: () => (/* reexport */ AddedComponent),\n  x7M: () => (/* reexport */ AffineMatrix),\n  X55: () => (/* reexport */ Animation),\n  m3M: () => (/* reexport */ AnimationDirection),\n  aE5: () => (/* reexport */ AnimationEvents),\n  YJU: () => (/* reexport */ AnimationStrategy),\n  eZi: () => (/* reexport */ ArcadeSolver),\n  GNv: () => (/* reexport */ AudioContextFactory),\n  Y56: () => (/* reexport */ Axes),\n  _0v: () => (/* reexport */ Axis),\n  vhs: () => (/* reexport */ BaseAlign),\n  vrQ: () => (/* reexport */ BezierCurve),\n  Z8b: () => (/* reexport */ Blink),\n  Yfw: () => (/* reexport */ BodyComponent),\n  IcQ: () => (/* reexport */ BoundingBox),\n  kgJ: () => (/* reexport */ BrowserComponent),\n  GTT: () => (/* reexport */ BrowserEvents),\n  ypY: () => (/* reexport */ Buttons),\n  i7d: () => (/* reexport */ Camera),\n  fQ3: () => (/* reexport */ CameraEvents),\n  HlI: () => (/* reexport */ Canvas),\n  jlt: () => (/* reexport */ Circle),\n  VQc: () => (/* reexport */ CircleCollider),\n  zD7: () => (/* reexport */ Clock),\n  AUF: () => (/* reexport */ ClosestLineJumpTable),\n  JoF: () => (/* reexport */ Collider),\n  MlA: () => (/* reexport */ ColliderComponent),\n  PZh: () => (/* reexport */ CollisionContact),\n  qA: () => (/* reexport */ CollisionEndEvent),\n  CrD: () => (/* reexport */ CollisionGroup),\n  dQK: () => (/* reexport */ CollisionGroupManager),\n  D3r: () => (/* reexport */ CollisionJumpTable),\n  Qpo: () => (/* reexport */ CollisionPostSolveEvent),\n  D9n: () => (/* reexport */ CollisionPreSolveEvent),\n  b6v: () => (/* reexport */ CollisionStartEvent),\n  mvh: () => (/* reexport */ CollisionSystem),\n  Bpo: () => (/* reexport */ CollisionType),\n  Q1f: () => (/* reexport */ Color),\n  IKv: () => (/* reexport */ ColorBlindFlags),\n  fcV: () => (/* reexport */ ColorBlindnessMode),\n  Glf: () => (/* reexport */ ColorBlindnessPostProcessor),\n  uAl: () => (/* reexport */ Component),\n  ElT: () => (/* reexport */ CompositeCollider),\n  Z8r: () => (/* reexport */ ConsoleAppender),\n  QSL: () => (/* reexport */ ContactConstraintPoint),\n  sPV: () => (/* reexport */ ContactEndEvent),\n  nAn: () => (/* reexport */ ContactSolveBias),\n  zCU: () => (/* reexport */ ContactStartEvent),\n  QrV: () => (/* reexport */ CoordPlane),\n  fF9: () => (/* reexport */ CrossFade),\n  Jqv: () => (/* reexport */ CurveBy),\n  d_u: () => (/* reexport */ CurveTo),\n  xI8: () => (/* reexport */ DeactivateEvent),\n  yar: () => (/* reexport */ Debug),\n  SP7: () => (/* reexport */ DebugConfig),\n  oRy: () => (/* reexport */ DebugGraphicsComponent),\n  f5X: () => (/* reexport */ DebugSystem),\n  V1c: () => (/* reexport */ DebugText),\n  Mlx: () => (/* reexport */ DefaultAntialiasOptions),\n  ZiM: () => (/* reexport */ DefaultGarbageCollectionOptions),\n  ZCo: () => (/* reexport */ DefaultLoader),\n  J5p: () => (/* reexport */ DefaultPixelArtOptions),\n  mL_: () => (/* reexport */ DegreeOfFreedom),\n  Guw: () => (/* reexport */ Delay),\n  N5j: () => (/* reexport */ Detector),\n  pgY: () => (/* reexport */ Die),\n  OP3: () => (/* reexport */ Direction),\n  rl5: () => (/* reexport */ Director),\n  eod: () => (/* reexport */ DirectorEvents),\n  q5Z: () => (/* reexport */ DisplayMode),\n  YUC: () => (/* reexport */ DynamicTree),\n  saR: () => (/* reexport */ DynamicTreeCollisionProcessor),\n  hvr: () => (/* binding */ EX_VERSION),\n  Qol: () => (/* reexport */ EaseBy),\n  Wf4: () => (/* reexport */ EaseTo),\n  JCs: () => (/* reexport */ EasingFunctions),\n  gJV: () => (/* reexport */ EdgeCollider),\n  fWD: () => (/* reexport */ ElasticToActorStrategy),\n  Va_: () => (/* reexport */ EmitterType),\n  N$8: () => (/* reexport */ Engine),\n  _jQ: () => (/* reexport */ EngineEvents),\n  rxj: () => (/* reexport */ EnterTriggerEvent),\n  rhv: () => (/* reexport */ EnterViewPortEvent),\n  wCu: () => (/* reexport */ Entity),\n  HAp: () => (/* reexport */ EntityEvents),\n  Zy1: () => (/* reexport */ EntityManager),\n  bkB: () => (/* reexport */ EventEmitter),\n  wfL: () => (/* reexport */ EventTypes),\n  sVA: () => (/* reexport */ Events_namespaceObject),\n  $Gs: () => (/* reexport */ ExResponse),\n  CJ0: () => (/* reexport */ ExcaliburGraphicsContext2DCanvas),\n  NWh: () => (/* reexport */ ExcaliburGraphicsContextWebGL),\n  tWi: () => (/* reexport */ ExitTriggerEvent),\n  xAj: () => (/* reexport */ ExitViewPortEvent),\n  zWh: () => (/* reexport */ Fade),\n  i_4: () => (/* reexport */ FadeInOut),\n  iIx: () => (/* reexport */ Flags),\n  Hxo: () => (/* reexport */ Flash),\n  c9e: () => (/* reexport */ Follow),\n  KQV: () => (/* reexport */ Font),\n  weH: () => (/* reexport */ FontCache),\n  jXp: () => (/* reexport */ FontSource),\n  zzY: () => (/* reexport */ FontStyle),\n  yRQ: () => (/* reexport */ FontUnit),\n  MtE: () => (/* reexport */ FpsSampler),\n  rPj: () => (/* reexport */ FrameStats),\n  KLc: () => (/* reexport */ Future),\n  Fir: () => (/* reexport */ GameEvent),\n  V5f: () => (/* reexport */ GameStartEvent),\n  Xj7: () => (/* reexport */ GameStopEvent),\n  Wud: () => (/* reexport */ Gamepad),\n  FVg: () => (/* reexport */ GamepadAxisEvent),\n  g5Y: () => (/* reexport */ GamepadButtonEvent),\n  YQB: () => (/* reexport */ GamepadConnectEvent),\n  KPb: () => (/* reexport */ GamepadDisconnectEvent),\n  nHK: () => (/* reexport */ Gamepads),\n  Jrb: () => (/* reexport */ GarbageCollector),\n  TX_: () => (/* reexport */ Gif),\n  Olt: () => (/* reexport */ GifParser),\n  r3n: () => (/* reexport */ GlobalCoordinates),\n  Fvk: () => (/* reexport */ GpuParticleEmitter),\n  gpR: () => (/* reexport */ GpuParticleRenderer),\n  vYh: () => (/* reexport */ Graphic),\n  hnk: () => (/* reexport */ GraphicsComponent),\n  D2R: () => (/* reexport */ GraphicsGroup),\n  n1o: () => (/* reexport */ GraphicsSystem),\n  h9O: () => (/* reexport */ HashColliderProxy),\n  X5j: () => (/* reexport */ HashGridCell),\n  p3P: () => (/* reexport */ HashGridProxy),\n  RLG: () => (/* reexport */ HiddenEvent),\n  fBU: () => (/* reexport */ HorizontalFirst),\n  Adb: () => (/* reexport */ ImageFiltering),\n  bEs: () => (/* reexport */ ImageSource),\n  wCy: () => (/* reexport */ ImageSourceAttributeConstants),\n  CbD: () => (/* reexport */ ImageWrapping),\n  x_C: () => (/* reexport */ InitializeEvent),\n  pGf: () => (/* reexport */ InputHost),\n  ibQ: () => (/* reexport */ InputMapper),\n  shR: () => (/* reexport */ IsometricEntityComponent),\n  Yjk: () => (/* reexport */ IsometricEntitySystem),\n  _u1: () => (/* reexport */ IsometricMap),\n  OBI: () => (/* reexport */ IsometricTile),\n  klh: () => (/* reexport */ KeyEvent),\n  s3S: () => (/* reexport */ Keyboard),\n  D$R: () => (/* reexport */ Keys),\n  xth: () => (/* reexport */ KillEvent),\n  JU7: () => (/* reexport */ Label),\n  h9x: () => (/* reexport */ LimitCameraBoundsStrategy),\n  N1A: () => (/* reexport */ Line),\n  e_k: () => (/* reexport */ LineSegment),\n  aHM: () => (/* reexport */ Loader),\n  tlv: () => (/* reexport */ LoaderEvents),\n  Vi9: () => (/* reexport */ LockCameraToActorAxisStrategy),\n  ieR: () => (/* reexport */ LockCameraToActorStrategy),\n  $bb: () => (/* reexport */ LogLevel),\n  VyI: () => (/* reexport */ Logger),\n  imn: () => (/* reexport */ Material),\n  uqu: () => (/* reexport */ Matrix),\n  QnL: () => (/* reexport */ MatrixLocations),\n  vnc: () => (/* reexport */ MediaEvent),\n  wk_: () => (/* reexport */ Meet),\n  GH0: () => (/* reexport */ MotionComponent),\n  _1r: () => (/* reexport */ MotionSystem),\n  l0X: () => (/* reexport */ MoveBy),\n  bT: () => (/* reexport */ MoveByWithOptions),\n  HHX: () => (/* reexport */ MoveTo),\n  jtW: () => (/* reexport */ MoveToWithOptions),\n  tjk: () => (/* reexport */ NativePointerButton),\n  rWe: () => (/* reexport */ NativeSoundEvent),\n  j9l: () => (/* reexport */ NativeSoundProcessedEvent),\n  l0$: () => (/* reexport */ NineSlice),\n  sGJ: () => (/* reexport */ NineSliceStretch),\n  NVp: () => (/* reexport */ None),\n  cPK: () => (/* reexport */ Observable),\n  XoL: () => (/* reexport */ OffscreenSystem),\n  RmF: () => (/* reexport */ Pair),\n  DXI: () => (/* reexport */ ParallaxComponent),\n  tCD: () => (/* reexport */ ParallelActions),\n  J3D: () => (/* reexport */ Particle),\n  vCJ: () => (/* reexport */ ParticleEmitter),\n  e6k: () => (/* reexport */ ParticleRenderer),\n  f9l: () => (/* reexport */ ParticleTransform),\n  v9m: () => (/* reexport */ PhysicsStats),\n  yRJ: () => (/* reexport */ PhysicsWorld),\n  EU6: () => (/* reexport */ PointerAbstraction),\n  m3O: () => (/* reexport */ PointerButton),\n  Ryz: () => (/* reexport */ PointerComponent),\n  OxP: () => (/* reexport */ PointerEvent),\n  LEs: () => (/* reexport */ PointerEventReceiver),\n  Ec: () => (/* reexport */ PointerScope),\n  Pi5: () => (/* reexport */ PointerSystem),\n  gmH: () => (/* reexport */ PointerType),\n  tS: () => (/* reexport */ Polygon),\n  XxX: () => (/* reexport */ PolygonCollider),\n  bCz: () => (/* reexport */ Pool),\n  nYS: () => (/* reexport */ PostCollisionEvent),\n  yiT: () => (/* reexport */ PostDebugDrawEvent),\n  NHl: () => (/* reexport */ PostDrawEvent),\n  mO8: () => (/* reexport */ PostFrameEvent),\n  PXI: () => (/* reexport */ PostKillEvent),\n  bn5: () => (/* reexport */ PostTransformDrawEvent),\n  Ywr: () => (/* reexport */ PostUpdateEvent),\n  cMd: () => (/* reexport */ PreCollisionEvent),\n  Bs6: () => (/* reexport */ PreDebugDrawEvent),\n  G0k: () => (/* reexport */ PreDrawEvent),\n  pyn: () => (/* reexport */ PreFrameEvent),\n  QeM: () => (/* reexport */ PreKillEvent),\n  aPX: () => (/* reexport */ PreLoadEvent),\n  ITP: () => (/* reexport */ PreTransformDrawEvent),\n  BY0: () => (/* reexport */ PreUpdateEvent),\n  MFw: () => (/* reexport */ Projection),\n  sBn: () => (/* reexport */ QuadIndexBuffer),\n  S3L: () => (/* reexport */ QuadTree),\n  XKQ: () => (/* reexport */ Query),\n  ESI: () => (/* reexport */ QueryManager),\n  uxz: () => (/* reexport */ RadiusAroundActorStrategy),\n  o8N: () => (/* reexport */ Random),\n  u_r: () => (/* reexport */ Raster),\n  RlV: () => (/* reexport */ Ray),\n  gVA: () => (/* reexport */ RealisticSolver),\n  M_G: () => (/* reexport */ Rectangle),\n  BpG: () => (/* reexport */ RemoveEvent),\n  GRB: () => (/* reexport */ RemovedComponent),\n  kM6: () => (/* reexport */ Repeat),\n  dO8: () => (/* reexport */ RepeatForever),\n  jgM: () => (/* reexport */ Resolution),\n  FWq: () => (/* reexport */ Resource),\n  s3j: () => (/* reexport */ ResourceEvents),\n  hlw: () => (/* reexport */ RotateBy),\n  L0q: () => (/* reexport */ RotateByWithOptions),\n  B7e: () => (/* reexport */ RotateTo),\n  PGN: () => (/* reexport */ RotateToWithOptions),\n  H_X: () => (/* reexport */ RotationType),\n  S_d: () => (/* reexport */ ScaleBy),\n  _Tq: () => (/* reexport */ ScaleByWithOptions),\n  U7E: () => (/* reexport */ ScaleTo),\n  IOH: () => (/* reexport */ ScaleToWithOptions),\n  Z58: () => (/* reexport */ Scene),\n  yh2: () => (/* reexport */ SceneEvents),\n  ff$: () => (/* reexport */ Screen),\n  cWi: () => (/* reexport */ ScreenAppender),\n  NBt: () => (/* reexport */ ScreenElement),\n  oNz: () => (/* reexport */ ScreenEvents),\n  QlU: () => (/* reexport */ ScreenShader),\n  Xey: () => (/* reexport */ ScrollPreventionMode),\n  jft: () => (/* reexport */ Semaphore),\n  _r8: () => (/* reexport */ SeparatingAxis),\n  bTC: () => (/* reexport */ SeparationInfo),\n  Mtr: () => (/* reexport */ Shader),\n  ypk: () => (/* reexport */ Shape),\n  mnM: () => (/* reexport */ Side),\n  q7S: () => (/* reexport */ Slide),\n  bAZ: () => (/* reexport */ SolverStrategy),\n  ABN: () => (/* reexport */ Sound),\n  VK6: () => (/* reexport */ SoundEvents),\n  Hj2: () => (/* reexport */ SparseHashGrid),\n  Df8: () => (/* reexport */ SparseHashGridCollisionProcessor),\n  oOx: () => (/* reexport */ SpatialPartitionStrategy),\n  kxk: () => (/* reexport */ Sprite),\n  DT1: () => (/* reexport */ SpriteFont),\n  FLG: () => (/* reexport */ SpriteSheet),\n  qN_: () => (/* reexport */ StandardClock),\n  Z37: () => (/* reexport */ StateMachine),\n  FtL: () => (/* reexport */ StrategyContainer),\n  Z6X: () => (/* reexport */ Stream),\n  iQT: () => (/* reexport */ System),\n  ziO: () => (/* reexport */ SystemManager),\n  OEF: () => (/* reexport */ SystemPriority),\n  uuE: () => (/* reexport */ SystemType),\n  tiv: () => (/* reexport */ TagQuery),\n  T$Y: () => (/* reexport */ TestClock),\n  EYj: () => (/* reexport */ Text),\n  nOB: () => (/* reexport */ TextAlign),\n  Tap: () => (/* reexport */ TextureLoader),\n  FAs: () => (/* reexport */ Tile),\n  B_P: () => (/* reexport */ TileMap),\n  aA5: () => (/* reexport */ TileMapEvents),\n  J3s: () => (/* reexport */ TiledAnimation),\n  Y0Q: () => (/* reexport */ TiledSprite),\n  M4G: () => (/* reexport */ Timer),\n  l$l: () => (/* reexport */ Toaster),\n  dLy: () => (/* reexport */ transform_Transform),\n  WZP: () => (/* reexport */ TransformComponent),\n  eB6: () => (/* reexport */ Transition),\n  nFK: () => (/* reexport */ TreeNode),\n  l9z: () => (/* reexport */ Trigger),\n  YOF: () => (/* reexport */ TriggerEvents),\n  yhB: () => (/* reexport */ TwoPI),\n  J0N: () => (/* reexport */ Util_Index_namespaceObject),\n  Miz: () => (/* reexport */ Vector),\n  Bj4: () => (/* reexport */ VectorView),\n  Rcs: () => (/* reexport */ VertexBuffer),\n  vJ4: () => (/* reexport */ VertexLayout),\n  TqC: () => (/* reexport */ VerticalFirst),\n  nM0: () => (/* reexport */ VisibleEvent),\n  X1u: () => (/* reexport */ WebAudio),\n  SpZ: () => (/* reexport */ WebAudioInstance),\n  DX8: () => (/* reexport */ WheelDeltaMode),\n  Yx$: () => (/* reexport */ WheelEvent),\n  HK4: () => (/* reexport */ World),\n  yt5: () => (/* reexport */ approximatelyEqual),\n  vAR: () => (/* reexport */ assert),\n  SE$: () => (/* reexport */ canonicalizeAngle),\n  qE8: () => (/* reexport */ clamp),\n  Pz7: () => (/* reexport */ coroutine),\n  sX_: () => (/* reexport */ createId),\n  JuI: () => (/* reexport */ frac),\n  pxT: () => (/* reexport */ getDefaultPhysicsConfig),\n  Nl$: () => (/* reexport */ hasGraphicsTick),\n  zDr: () => (/* reexport */ hasOnAdd),\n  OwT: () => (/* reexport */ hasOnInitialize),\n  P$G: () => (/* reexport */ hasOnPostUpdate),\n  mHV: () => (/* reexport */ hasOnPreUpdate),\n  kEA: () => (/* reexport */ hasOnRemove),\n  Fx_: () => (/* reexport */ hasPostDraw),\n  WFC: () => (/* reexport */ hasPreDraw),\n  vKu: () => (/* reexport */ has_add),\n  aDq: () => (/* reexport */ has_initialize),\n  jIg: () => (/* reexport */ has_postupdate),\n  UH3: () => (/* reexport */ has_preupdate),\n  AJO: () => (/* reexport */ has_remove),\n  U4: () => (/* reexport */ inverseLerp),\n  xAc: () => (/* reexport */ inverseLerpVector),\n  _3Y: () => (/* reexport */ isActor),\n  K6X: () => (/* reexport */ isAddedComponent),\n  C1Y: () => (/* reexport */ isComponentCtor),\n  Aw1: () => (/* reexport */ isLoaderConstructor),\n  tm8: () => (/* reexport */ isMoveByOptions),\n  LBV: () => (/* reexport */ isMoveToOptions),\n  A8$: () => (/* reexport */ isRemovedComponent),\n  F5e: () => (/* reexport */ isRotateByOptions),\n  ran: () => (/* reexport */ isRotateToOptions),\n  c8L: () => (/* reexport */ isScaleByOptions),\n  o6M: () => (/* reexport */ isScaleToOptions),\n  hsx: () => (/* reexport */ isSceneConstructor),\n  l9E: () => (/* reexport */ isScreenElement),\n  aSf: () => (/* reexport */ isSystemConstructor),\n  CcK: () => (/* reexport */ lerp),\n  nU8: () => (/* reexport */ lerpAngle),\n  td6: () => (/* reexport */ lerpVector),\n  Zex: () => (/* reexport */ maxMessages),\n  bkJ: () => (/* reexport */ nextActionId),\n  mXP: () => (/* reexport */ obsolete),\n  vt$: () => (/* reexport */ parseImageFiltering),\n  hCA: () => (/* reexport */ parseImageWrapping),\n  pjR: () => (/* reexport */ pixelSnapEpsilon),\n  U43: () => (/* reexport */ randomInRange),\n  pSZ: () => (/* reexport */ randomIntInRange),\n  y17: () => (/* reexport */ range),\n  Ew7: () => (/* reexport */ remap),\n  hG1: () => (/* reexport */ remapVector),\n  jVr: () => (/* reexport */ resetObsoleteCounter),\n  _SZ: () => (/* reexport */ sign),\n  xWn: () => (/* reexport */ toDegrees),\n  ehJ: () => (/* reexport */ toRadians),\n  t6s: () => (/* reexport */ vec),\n  Eyn: () => (/* reexport */ webgl_util_namespaceObject)\n});\n\n// NAMESPACE OBJECT: ./Graphics/Context/webgl-util.ts\nvar webgl_util_namespaceObject = {};\n__webpack_require__.r(webgl_util_namespaceObject);\n__webpack_require__.d(webgl_util_namespaceObject, {\n  getAttributeComponentSize: () => (getAttributeComponentSize),\n  getAttributePointerType: () => (getAttributePointerType),\n  getGLTypeFromSource: () => (getGLTypeFromSource),\n  getGlTypeSizeBytes: () => (getGlTypeSizeBytes),\n  getMaxShaderComplexity: () => (getMaxShaderComplexity),\n  isAttributeInSource: () => (isAttributeInSource)\n});\n\n// NAMESPACE OBJECT: ./Util/DrawUtil.ts\nvar DrawUtil_namespaceObject = {};\n__webpack_require__.r(DrawUtil_namespaceObject);\n__webpack_require__.d(DrawUtil_namespaceObject, {\n  circle: () => (circle),\n  line: () => (line),\n  point: () => (point),\n  roundRect: () => (roundRect),\n  vector: () => (vector)\n});\n\n// NAMESPACE OBJECT: ./Events.ts\nvar Events_namespaceObject = {};\n__webpack_require__.r(Events_namespaceObject);\n__webpack_require__.d(Events_namespaceObject, {\n  ActionCompleteEvent: () => (ActionCompleteEvent),\n  ActionStartEvent: () => (ActionStartEvent),\n  ActivateEvent: () => (ActivateEvent),\n  AddEvent: () => (AddEvent),\n  CollisionEndEvent: () => (CollisionEndEvent),\n  CollisionPostSolveEvent: () => (CollisionPostSolveEvent),\n  CollisionPreSolveEvent: () => (CollisionPreSolveEvent),\n  CollisionStartEvent: () => (CollisionStartEvent),\n  ContactEndEvent: () => (ContactEndEvent),\n  ContactStartEvent: () => (ContactStartEvent),\n  DeactivateEvent: () => (DeactivateEvent),\n  EnterTriggerEvent: () => (EnterTriggerEvent),\n  EnterViewPortEvent: () => (EnterViewPortEvent),\n  EventTypes: () => (EventTypes),\n  ExitTriggerEvent: () => (ExitTriggerEvent),\n  ExitViewPortEvent: () => (ExitViewPortEvent),\n  GameEvent: () => (GameEvent),\n  GameStartEvent: () => (GameStartEvent),\n  GameStopEvent: () => (GameStopEvent),\n  GamepadAxisEvent: () => (GamepadAxisEvent),\n  GamepadButtonEvent: () => (GamepadButtonEvent),\n  GamepadConnectEvent: () => (GamepadConnectEvent),\n  GamepadDisconnectEvent: () => (GamepadDisconnectEvent),\n  HiddenEvent: () => (HiddenEvent),\n  InitializeEvent: () => (InitializeEvent),\n  KillEvent: () => (KillEvent),\n  PostCollisionEvent: () => (PostCollisionEvent),\n  PostDebugDrawEvent: () => (PostDebugDrawEvent),\n  PostDrawEvent: () => (PostDrawEvent),\n  PostFrameEvent: () => (PostFrameEvent),\n  PostKillEvent: () => (PostKillEvent),\n  PostTransformDrawEvent: () => (PostTransformDrawEvent),\n  PostUpdateEvent: () => (PostUpdateEvent),\n  PreCollisionEvent: () => (PreCollisionEvent),\n  PreDebugDrawEvent: () => (PreDebugDrawEvent),\n  PreDrawEvent: () => (PreDrawEvent),\n  PreFrameEvent: () => (PreFrameEvent),\n  PreKillEvent: () => (PreKillEvent),\n  PreTransformDrawEvent: () => (PreTransformDrawEvent),\n  PreUpdateEvent: () => (PreUpdateEvent),\n  RemoveEvent: () => (RemoveEvent),\n  VisibleEvent: () => (VisibleEvent)\n});\n\n// NAMESPACE OBJECT: ./Util/Index.ts\nvar Util_Index_namespaceObject = {};\n__webpack_require__.r(Util_Index_namespaceObject);\n__webpack_require__.d(Util_Index_namespaceObject, {\n  ConsoleAppender: () => (ConsoleAppender),\n  DrawUtil: () => (DrawUtil_namespaceObject),\n  EasingFunctions: () => (EasingFunctions),\n  LogLevel: () => (LogLevel),\n  Logger: () => (Logger),\n  Observable: () => (Observable),\n  ScreenAppender: () => (ScreenAppender),\n  addItemToArray: () => (addItemToArray),\n  contains: () => (contains),\n  delay: () => (delay),\n  fail: () => (fail),\n  getPosition: () => (getPosition),\n  isObject: () => (isObject),\n  mergeDeep: () => (mergeDeep),\n  omit: () => (omit),\n  removeItemFromArray: () => (removeItemFromArray)\n});\n\n;// ./Polyfill.ts\n/**\n * Polyfill adding function\n */\nfunction polyfill() {\n    /* istanbul ignore next */\n    if (typeof window === 'undefined') {\n        window = {\n            audioContext: function () {\n                return;\n            }\n        };\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.requestAnimationFrame) {\n        window.requestAnimationFrame =\n            window.webkitRequestAnimationFrame ||\n                window.mozRequestAnimationFrame ||\n                function (callback) {\n                    window.setInterval(callback, 1000 / 60);\n                };\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\n        window.cancelAnimationFrame =\n            window.webkitCancelAnimationFrame ||\n                window.mozCancelAnimationFrame ||\n                function () {\n                    return;\n                };\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.AudioContext) {\n        if (window.webkitAudioContext) {\n            const ctx = window.webkitAudioContext;\n            const replaceMe = ctx.prototype.decodeAudioData;\n            window.webkitAudioContext.prototype.decodeAudioData = function (arrayBuffer) {\n                return new Promise((resolve, reject) => {\n                    replaceMe.call(this, arrayBuffer, resolve, reject);\n                });\n            };\n        }\n        window.AudioContext =\n            window.AudioContext ||\n                window.webkitAudioContext ||\n                window.mozAudioContext ||\n                window.msAudioContext ||\n                window.oAudioContext;\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.devicePixelRatio) {\n        window.devicePixelRatio = window.devicePixelRatio || 1;\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.requestIdleCallback) {\n        // Adapted from https://developer.chrome.com/blog/using-requestidlecallback#checking_for_requestidlecallback\n        window.requestIdleCallback =\n            window.requestIdleCallback ||\n                function (cb) {\n                    const start = Date.now();\n                    return setTimeout(function () {\n                        cb({\n                            didTimeout: false,\n                            timeRemaining: function () {\n                                return Math.max(0, 50 - (Date.now() - start));\n                            }\n                        });\n                    }, 1);\n                };\n        window.cancelIdleCallback =\n            window.cancelIdleCallback ||\n                function (id) {\n                    clearTimeout(id);\n                };\n    }\n}\n\n;// ./Flags.ts\n/**\n * Flags is a feature flag implementation for Excalibur. They can only be operated **before {@apilink Engine} construction**\n * after which they are frozen and are read-only.\n *\n * Flags are used to enable experimental or preview features in Excalibur.\n */\nclass Flags {\n    /**\n     * Force excalibur to load the Canvas 2D graphics context fallback\n     * @warning not all features of excalibur are supported in the Canvas 2D fallback\n     */\n    static useCanvasGraphicsContext() {\n        Flags.enable('use-canvas-context');\n    }\n    /**\n     * Force excalibur to use the less optimized image renderer\n     */\n    static useLegacyImageRenderer() {\n        Flags.enable('use-legacy-image-renderer');\n    }\n    /**\n     * Freeze all flag modifications making them readonly\n     */\n    static freeze() {\n        Flags._FROZEN = true;\n    }\n    /**\n     * Resets internal flag state, not meant to be called by users. Only used for testing.\n     *\n     * Calling this in your game is UNSUPPORTED\n     * @internal\n     */\n    static _reset() {\n        Flags._FROZEN = false;\n        Flags._FLAGS = {};\n    }\n    /**\n     * Enable a specific feature flag by name. **Note: can only be set before {@apilink Engine} constructor time**\n     * @param flagName\n     */\n    static enable(flagName) {\n        if (this._FROZEN) {\n            throw Error('Feature flags can only be enabled before Engine constructor time');\n        }\n        Flags._FLAGS[flagName] = true;\n    }\n    /**\n     * Disable a specific feature flag by name. **Note: can only be set before {@apilink Engine} constructor time**\n     * @param flagName\n     */\n    static disable(flagName) {\n        if (this._FROZEN) {\n            throw Error('Feature flags can only be disabled before Engine constructor time');\n        }\n        Flags._FLAGS[flagName] = false;\n    }\n    /**\n     * Check if a flag is enabled. If the flag is disabled or does not exist `false` is returned\n     * @param flagName\n     */\n    static isEnabled(flagName) {\n        return !!Flags._FLAGS[flagName];\n    }\n    /**\n     * Show a list of currently known flags\n     */\n    static show() {\n        return Object.keys(Flags._FLAGS);\n    }\n}\nFlags._FROZEN = false;\nFlags._FLAGS = {};\n\n;// ./Id.ts\n/**\n * Create a branded ID type from a number\n */\nfunction createId(type, value) {\n    return { type, value };\n}\n\n;// ./Util/Future.ts\n/**\n * Future is a wrapper around a native browser Promise to allow resolving/rejecting at any time\n */\nclass Future {\n    constructor() {\n        this._isCompleted = false;\n        this.promise = new Promise((resolve, reject) => {\n            this._resolver = resolve;\n            this._rejecter = reject;\n        });\n    }\n    get isCompleted() {\n        return this._isCompleted;\n    }\n    resolve(value) {\n        if (this._isCompleted) {\n            return;\n        }\n        this._isCompleted = true;\n        this._resolver(value);\n    }\n    reject(error) {\n        if (this._isCompleted) {\n            return;\n        }\n        this._isCompleted = true;\n        this._rejecter(error);\n    }\n}\n\n;// ./EventEmitter.ts\n/**\n * Excalibur's typed event emitter, this allows events to be sent with any string to Type mapping\n */\nclass EventEmitter {\n    constructor() {\n        this._paused = false;\n        this._empty = true;\n        this._listeners = {};\n        this._listenersOnce = {};\n        this._pipes = [];\n    }\n    /**\n     * Removes all listeners and pipes\n     */\n    clear() {\n        this._listeners = {};\n        this._listenersOnce = {};\n        this._pipes.length = 0;\n        this._empty = true;\n    }\n    on(eventName, handler) {\n        var _a;\n        this._empty = false;\n        this._listeners[eventName] = (_a = this._listeners[eventName]) !== null && _a !== void 0 ? _a : [];\n        this._listeners[eventName].push(handler);\n        return {\n            close: () => this.off(eventName, handler)\n        };\n    }\n    once(eventName, handler) {\n        var _a;\n        this._empty = false;\n        this._listenersOnce[eventName] = (_a = this._listenersOnce[eventName]) !== null && _a !== void 0 ? _a : [];\n        this._listenersOnce[eventName].push(handler);\n        return {\n            close: () => this.off(eventName, handler)\n        };\n    }\n    off(eventName, handler) {\n        var _a, _b;\n        if (handler) {\n            const newListeners = (_a = this._listeners[eventName]) === null || _a === void 0 ? void 0 : _a.filter((h) => h !== handler);\n            this._listeners[eventName] = newListeners;\n            const newOnceListeners = (_b = this._listenersOnce[eventName]) === null || _b === void 0 ? void 0 : _b.filter((h) => h !== handler);\n            this._listenersOnce[eventName] = newOnceListeners;\n        }\n        else {\n            delete this._listeners[eventName];\n        }\n    }\n    emit(eventName, event) {\n        if (this._empty) {\n            return;\n        }\n        if (this._paused) {\n            return;\n        }\n        const listeners = this._listeners[eventName];\n        if (listeners) {\n            for (let i = 0; i < listeners.length; i++) {\n                listeners[i](event);\n            }\n        }\n        const onces = this._listenersOnce[eventName];\n        this._listenersOnce[eventName] = [];\n        if (onces) {\n            for (let i = 0; i < onces.length; i++) {\n                onces[i](event);\n            }\n        }\n        for (let i = 0; i < this._pipes.length; i++) {\n            this._pipes[i].emit(eventName, event);\n        }\n    }\n    /**\n     * Replay events from this emitter to another\n     * @param emitter\n     */\n    pipe(emitter) {\n        if (this === emitter) {\n            throw Error('Cannot pipe to self');\n        }\n        this._empty = false;\n        this._pipes.push(emitter);\n        return {\n            close: () => {\n                const i = this._pipes.indexOf(emitter);\n                if (i > -1) {\n                    this._pipes.splice(i, 1);\n                }\n            }\n        };\n    }\n    /**\n     * Remove any piped emitters\n     * @param emitter\n     */\n    unpipe(emitter) {\n        const i = this._pipes.indexOf(emitter);\n        if (i > -1) {\n            this._pipes.splice(i, 1);\n        }\n    }\n    /**\n     * Paused event emitters do not emit events\n     */\n    pause() {\n        this._paused = true;\n    }\n    /**\n     * Unpaused event emitter do emit events\n     */\n    unpause() {\n        this._paused = false;\n    }\n}\n\n;// ./Input/PointerScope.ts\n/**\n * Determines the scope of handling mouse/touch events.\n */\nvar PointerScope;\n(function (PointerScope) {\n    /**\n     * Handle events on the `canvas` element only. Events originating outside the\n     * `canvas` will not be handled.\n     */\n    PointerScope[\"Canvas\"] = \"Canvas\";\n    /**\n     * Handles events on the entire document. All events will be handled by Excalibur.\n     */\n    PointerScope[\"Document\"] = \"Document\";\n})(PointerScope || (PointerScope = {}));\n\n;// ./Math/rotation-type.ts\n/**\n * An enum that describes the strategies that rotation actions can use\n */\nvar RotationType;\n(function (RotationType) {\n    /**\n     * Rotation via `ShortestPath` will use the smallest angle\n     * between the starting and ending points. This strategy is the default behavior.\n     */\n    RotationType[\"ShortestPath\"] = \"shortest-path\";\n    /**\n     * Rotation via `LongestPath` will use the largest angle\n     * between the starting and ending points.\n     */\n    RotationType[\"LongestPath\"] = \"longest-path\";\n    /**\n     * Rotation via `Clockwise` will travel in a clockwise direction,\n     * regardless of the starting and ending points.\n     */\n    RotationType[\"Clockwise\"] = \"clockwise\";\n    /**\n     * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\n     * regardless of the starting and ending points.\n     */\n    RotationType[\"CounterClockwise\"] = \"counter-clockwise\";\n})(RotationType || (RotationType = {}));\n\n;// ./Math/Random.ts\n/**\n * @module\n * Pseudo-Random Utility\n *\n * A pseudo-random utility to add seeded random support for help in\n * generating things like terrain or reproducible randomness. Uses the\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\n */\n/**\n * 32-bit mask\n */\nconst BITMASK32 = 0xffffffff;\n/**\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\n * of numbers each time it is called.\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\n *\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\n */\nclass Random {\n    /**\n     * If no seed is specified, the Date.now() is used\n     */\n    constructor(seed) {\n        this.seed = seed;\n        // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\n        this._lowerMask = 0x7fffffff; // 31 bits same as _r\n        this._upperMask = 0x80000000; // 34 high bits\n        // Word size, 64 bits\n        this._w = 32;\n        // Degree of recurrence\n        this._n = 624;\n        // Middle word, an offset used in the recurrence defining the series x, 1<=m<n\n        this._m = 397;\n        // coefficients of teh rational normal form twist matrix\n        this._a = 0x9908b0df;\n        // tempering bit shifts and masks\n        this._u = 11;\n        this._s = 7;\n        this._b = 0x9d2c5680;\n        this._t = 15;\n        this._c = 0xefc60000;\n        this._l = 18;\n        this._f = 1812433253;\n        this._mt = new Array(this._n);\n        // need to mask to support higher bit machines\n        this._mt[0] = (seed || Date.now()) >>> 0;\n        for (let i = 1; i < this._n; i++) {\n            const s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\n            // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\n            this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\n        }\n        this._index = this._n;\n    }\n    /**\n     * Apply the twist\n     */\n    _twist() {\n        const mag01 = [0x0, this._a];\n        let y = 0, i = 0;\n        for (; i < this._n - this._m; i++) {\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n            this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n        }\n        for (; i < this._n - 1; i++) {\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n            this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n        }\n        y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\n        this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n        this._index = 0;\n    }\n    /**\n     * Return next 32 bit integer number in sequence\n     */\n    nextInt() {\n        if (this._index >= this._n) {\n            this._twist();\n        }\n        let y = this._mt[this._index++];\n        y ^= y >>> this._u;\n        y ^= (y << this._s) & this._b;\n        y ^= (y << this._t) & this._c;\n        y ^= y >>> this._l;\n        return y >>> 0;\n    }\n    /**\n     * Return a random floating point number between [0, 1)\n     */\n    next() {\n        return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\n    }\n    /**\n     * Return a random floating point in range [min, max) min is included, max is not included\n     */\n    floating(min, max) {\n        return (max - min) * this.next() + min;\n    }\n    /**\n     * Return a random integer in range [min, max] min is included, max is included.\n     * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\n     */\n    integer(min, max) {\n        return Math.floor((max - min + 1) * this.next() + min);\n    }\n    /**\n     * Returns true or false randomly with 50/50 odds by default.\n     * By default the likelihood of returning a true is .5 (50%).\n     * @param likelihood takes values between [0, 1]\n     */\n    bool(likelihood = 0.5) {\n        return this.next() <= likelihood;\n    }\n    /**\n     * Returns one element from an array at random\n     */\n    pickOne(array) {\n        return array[this.integer(0, array.length - 1)];\n    }\n    /**\n     * Returns a new array random picking elements from the original\n     * @param array Original array to pick from\n     * @param numPicks can be any positive number\n     * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\n     * just that it is possible)\n     */\n    pickSet(array, numPicks, allowDuplicates = false) {\n        if (allowDuplicates) {\n            return this._pickSetWithDuplicates(array, numPicks);\n        }\n        else {\n            return this._pickSetWithoutDuplicates(array, numPicks);\n        }\n    }\n    /**\n     * Returns a new array randomly picking elements in the original (not reused)\n     * @param array Array to pick elements out of\n     * @param numPicks must be less than or equal to the number of elements in the array.\n     */\n    _pickSetWithoutDuplicates(array, numPicks) {\n        if (numPicks > array.length || numPicks < 0) {\n            throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\n        }\n        if (numPicks === array.length) {\n            return array;\n        }\n        const result = new Array(numPicks);\n        let currentPick = 0;\n        const tempArray = array.slice(0);\n        while (currentPick < numPicks) {\n            const index = this.integer(0, tempArray.length - 1);\n            result[currentPick++] = tempArray[index];\n            tempArray.splice(index, 1);\n        }\n        return result;\n    }\n    /**\n     * Returns a new array random picking elements from the original allowing duplicates\n     * @param array Array to pick elements out of\n     * @param numPicks can be any positive number\n     */\n    _pickSetWithDuplicates(array, numPicks) {\n        // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\n        if (numPicks < 0) {\n            throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\n        }\n        const result = new Array(numPicks);\n        for (let i = 0; i < numPicks; i++) {\n            result[i] = this.pickOne(array);\n        }\n        return result;\n    }\n    /**\n     * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\n     * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n     */\n    shuffle(array) {\n        const tempArray = array.slice(0);\n        let swap;\n        for (let i = 0; i < tempArray.length - 2; i++) {\n            const randomIndex = this.integer(i, tempArray.length - 1);\n            swap = tempArray[i];\n            tempArray[i] = tempArray[randomIndex];\n            tempArray[randomIndex] = swap;\n        }\n        return tempArray;\n    }\n    /**\n     * Generate a list of random integer numbers\n     * @param length the length of the final array\n     * @param min the minimum integer number to generate inclusive\n     * @param max the maximum integer number to generate inclusive\n     */\n    range(length, min, max) {\n        const result = new Array(length);\n        for (let i = 0; i < length; i++) {\n            result[i] = this.integer(min, max);\n        }\n        return result;\n    }\n    /**\n     * Returns the result of a d4 dice roll\n     */\n    d4() {\n        return this.integer(1, 4);\n    }\n    /**\n     * Returns the result of a d6 dice roll\n     */\n    d6() {\n        return this.integer(1, 6);\n    }\n    /**\n     * Returns the result of a d8 dice roll\n     */\n    d8() {\n        return this.integer(1, 8);\n    }\n    /**\n     * Returns the result of a d10 dice roll\n     */\n    d10() {\n        return this.integer(1, 10);\n    }\n    /**\n     * Returns the result of a d12 dice roll\n     */\n    d12() {\n        return this.integer(1, 12);\n    }\n    /**\n     * Returns the result of a d20 dice roll\n     */\n    d20() {\n        return this.integer(1, 20);\n    }\n}\n\n;// ./Math/util.ts\n\n/**\n * Two PI constant\n */\nconst TwoPI = Math.PI * 2;\n/**\n * Returns the fractional part of a number\n * @param x\n */\nfunction frac(x) {\n    if (x >= 0) {\n        return x - Math.floor(x);\n    }\n    else {\n        return x - Math.ceil(x);\n    }\n}\n/**\n * Returns the sign of a number, if 0 returns 0\n */\nfunction sign(val) {\n    if (val === 0) {\n        return 0;\n    }\n    return val < 0 ? -1 : 1;\n}\n/**\n * Clamps a value between a min and max inclusive\n */\nfunction clamp(val, min, max) {\n    return Math.min(Math.max(min, val), max);\n}\n/**\n * Approximately equals\n */\nfunction approximatelyEqual(val1, val2, tolerance) {\n    // https://dev.to/alldanielscott/how-to-compare-numbers-correctly-in-javascript-1l4i\n    return Math.abs(val1 - val2) < tolerance;\n}\n/**\n * Convert an angle to be the equivalent in the range [0, 2PI)\n */\nfunction canonicalizeAngle(angle) {\n    let tmpAngle = angle;\n    if (angle >= TwoPI) {\n        while (tmpAngle >= TwoPI) {\n            tmpAngle -= TwoPI;\n        }\n    }\n    if (angle < 0) {\n        while (tmpAngle < 0) {\n            tmpAngle += TwoPI;\n        }\n    }\n    return tmpAngle;\n}\n/**\n * Convert radians to degrees\n */\nfunction toDegrees(radians) {\n    return (180 / Math.PI) * radians;\n}\n/**\n * Convert degrees to radians\n */\nfunction toRadians(degrees) {\n    return (degrees / 180) * Math.PI;\n}\n/**\n * Generate a range of numbers\n * For example: range(0, 5) -> [0, 1, 2, 3, 4, 5]\n * @param from inclusive\n * @param to inclusive\n */\nconst range = (from, to) => Array.from(new Array(to - from + 1), (_x, i) => i + from);\n/**\n * Find a random floating point number in range\n */\nfunction randomInRange(min, max, random = new Random()) {\n    return random ? random.floating(min, max) : min + Math.random() * (max - min);\n}\n/**\n * Find a random integer in a range\n */\nfunction randomIntInRange(min, max, random = new Random()) {\n    return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\n}\n\n;// ./Math/vector.ts\n\n\n/**\n * A 2D vector on a plane.\n */\nclass Vector {\n    /**\n     * A (0, 0) vector\n     */\n    static get Zero() {\n        return new Vector(0, 0);\n    }\n    /**\n     * A (1, 1) vector\n     */\n    static get One() {\n        return new Vector(1, 1);\n    }\n    /**\n     * A (0.5, 0.5) vector\n     */\n    static get Half() {\n        return new Vector(0.5, 0.5);\n    }\n    /**\n     * A unit vector pointing up (0, -1)\n     */\n    static get Up() {\n        return new Vector(0, -1);\n    }\n    /**\n     * A unit vector pointing down (0, 1)\n     */\n    static get Down() {\n        return new Vector(0, 1);\n    }\n    /**\n     * A unit vector pointing left (-1, 0)\n     */\n    static get Left() {\n        return new Vector(-1, 0);\n    }\n    /**\n     * A unit vector pointing right (1, 0)\n     */\n    static get Right() {\n        return new Vector(1, 0);\n    }\n    /**\n     * Returns a vector of unit length in the direction of the specified angle in Radians.\n     * @param angle The angle to generate the vector\n     */\n    static fromAngle(angle) {\n        return new Vector(Math.cos(angle), Math.sin(angle));\n    }\n    /**\n     * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\n     */\n    static isValid(vec) {\n        if (vec === null || vec === undefined) {\n            return false;\n        }\n        if (isNaN(vec.x) || isNaN(vec.y)) {\n            return false;\n        }\n        if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Calculates distance between two Vectors\n     * @param vec1\n     * @param vec2\n     */\n    static distance(vec1, vec2) {\n        return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\n    }\n    static min(vec1, vec2) {\n        return new Vector(Math.min(vec1.x, vec2.x), Math.min(vec1.y, vec2.y));\n    }\n    static max(vec1, vec2) {\n        return new Vector(Math.max(vec1.x, vec2.x), Math.max(vec1.y, vec2.y));\n    }\n    /**\n     * @param x  X component of the Vector\n     * @param y  Y component of the Vector\n     */\n    constructor(x, y) {\n        this._x = 0;\n        this._y = 0;\n        this._x = x;\n        this._y = y;\n    }\n    /**\n     * Get the x component of the vector\n     */\n    get x() {\n        return this._x;\n    }\n    /**\n     * Set the x component, THIS MUTATES the current vector. It is usually better to create a new vector.\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\n     */\n    set x(val) {\n        this._x = val;\n    }\n    /**\n     * Get the y component of the vector\n     */\n    get y() {\n        return this._y;\n    }\n    /**\n     * Set the y component, THIS MUTATES the current vector. It is usually better to create a new vector.\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\n     */\n    set y(val) {\n        this._y = val;\n    }\n    /**\n     * Sets the x and y components at once, THIS MUTATES the current vector. It is usually better to create a new vector.\n     * @warning **Be very careful using this, mutating vectors can cause hard to find bugs**\n     */\n    setTo(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    /**\n     * Compares this point against another and tests for equality\n     * @param vector The other point to compare to\n     * @param tolerance Amount of euclidean distance off we are willing to tolerate\n     */\n    equals(vector, tolerance = Vector.EQUALS_EPSILON) {\n        return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\n    }\n    /**\n     * The distance to another vector. If no other Vector is specified, this will return the {@apilink magnitude}.\n     * @param v  The other vector. Leave blank to use origin vector.\n     */\n    distance(v) {\n        if (!v) {\n            return Math.sqrt(this.x * this.x + this.y * this.y);\n        }\n        const deltaX = this.x - v.x;\n        const deltaY = this.y - v.y;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    }\n    squareDistance(v) {\n        if (!v) {\n            v = Vector.Zero;\n        }\n        const deltaX = this.x - v.x;\n        const deltaY = this.y - v.y;\n        return deltaX * deltaX + deltaY * deltaY;\n    }\n    /**\n     * Clamps the current vector's magnitude mutating it\n     * @param magnitude\n     */\n    clampMagnitude(magnitude) {\n        const size = this.magnitude;\n        const newSize = clamp(size, 0, magnitude);\n        this.magnitude = newSize;\n        return this;\n    }\n    /**\n     * The size (magnitude) of the Vector\n     * @deprecated Will be removed in v1, use Vector.magnitude\n     */\n    get size() {\n        return this.distance();\n    }\n    /**\n     * Setting the size mutates the current vector\n     * @warning Can be used to set the size of the vector, **be very careful using this, mutating vectors can cause hard to find bugs**\n     * @deprecated Will be removed in v1, use Vector.magnitude\n     */\n    set size(newLength) {\n        const v = this.normalize().scale(newLength);\n        this.setTo(v.x, v.y);\n    }\n    /**\n     * The magnitude (length) of the Vector\n     */\n    get magnitude() {\n        return this.distance();\n    }\n    /**\n     * Setting the size mutates the current vector\n     * @warning Can be used to set the size of the vector, **be very careful using this, mutating vectors can cause hard to find bugs**\n     */\n    set magnitude(newMagnitude) {\n        this.normalize().scale(newMagnitude, this);\n    }\n    /**\n     * Normalizes a non-zero vector to have a magnitude of 1. Zero vectors return a new zero vector.\n     */\n    normalize() {\n        const distance = this.distance();\n        if (distance === 0) {\n            return Vector.Zero;\n        }\n        return new Vector(this.x / distance, this.y / distance);\n    }\n    /**\n     * Returns the average (midpoint) between the current point and the specified\n     */\n    average(vec) {\n        return this.add(vec).scale(0.5);\n    }\n    scale(sizeOrScale, dest) {\n        const result = dest || new Vector(0, 0);\n        if (sizeOrScale instanceof Vector) {\n            result.x = this.x * sizeOrScale.x;\n            result.y = this.y * sizeOrScale.y;\n        }\n        else {\n            result.x = this.x * sizeOrScale;\n            result.y = this.y * sizeOrScale;\n        }\n        return result;\n    }\n    /**\n     * Adds one vector to another\n     * @param v The vector to add\n     * @param dest Optionally copy the result into a provided vector\n     */\n    add(v, dest) {\n        if (dest) {\n            dest.x = this.x + v.x;\n            dest.y = this.y + v.y;\n            return dest;\n        }\n        return new Vector(this.x + v.x, this.y + v.y);\n    }\n    /**\n     * Subtracts a vector from another, if you subtract vector `B.sub(A)` the resulting vector points from A -> B\n     * @param v The vector to subtract\n     */\n    sub(v, dest) {\n        const result = dest || new Vector(0, 0);\n        const x = this.x - v.x;\n        const y = this.y - v.y;\n        result.x = x;\n        result.y = y;\n        return result;\n    }\n    /**\n     * Adds one vector to this one modifying the original\n     * @param v The vector to add\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n     */\n    addEqual(v) {\n        this.setTo(this.x + v.x, this.y + v.y);\n        return this;\n    }\n    /**\n     * Subtracts a vector from this one modifying the original\n     * @param v The vector to subtract\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n     */\n    subEqual(v) {\n        this.setTo(this.x - v.x, this.y - v.y);\n        return this;\n    }\n    /**\n     * Scales this vector by a factor of size and modifies the original\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n     */\n    scaleEqual(size) {\n        this.setTo(this.x * size, this.y * size);\n        return this;\n    }\n    /**\n     * Performs a dot product with another vector\n     * @param v  The vector to dot\n     */\n    dot(v) {\n        return this.x * v.x + this.y * v.y;\n    }\n    cross(v) {\n        if (v instanceof Vector) {\n            return this.x * v.y - this.y * v.x;\n        }\n        else if (typeof v === 'number') {\n            return new Vector(v * this.y, -v * this.x);\n        }\n    }\n    static cross(num, vec) {\n        return new Vector(-num * vec.y, num * vec.x);\n    }\n    /**\n     * Returns the perpendicular vector to this one\n     */\n    perpendicular() {\n        return new Vector(this.y, -this.x);\n    }\n    /**\n     * Returns the normal vector to this one, same as the perpendicular of length 1\n     */\n    normal() {\n        return this.perpendicular().normalize();\n    }\n    /**\n     * Negate the current vector\n     */\n    negate() {\n        return this.scale(-1);\n    }\n    /**\n     * Returns the angle of this vector, in range [0, 2*PI)\n     */\n    toAngle() {\n        return canonicalizeAngle(Math.atan2(this.y, this.x));\n    }\n    /**\n     * Returns the difference in radians between the angle of this vector and given angle,\n     * using the given rotation type.\n     * @param angle in radians to which the vector has to be rotated, using {@apilink rotate}\n     * @param rotationType what {@apilink RotationType} to use for the rotation\n     * @returns the angle by which the vector needs to be rotated to match the given angle\n     */\n    angleBetween(angle, rotationType) {\n        const startAngleRadians = this.toAngle();\n        const endAngleRadians = canonicalizeAngle(angle);\n        let rotationClockwise = 0;\n        let rotationAntiClockwise = 0;\n        if (endAngleRadians > startAngleRadians) {\n            rotationClockwise = endAngleRadians - startAngleRadians;\n        }\n        else {\n            rotationClockwise = (TwoPI - startAngleRadians + endAngleRadians) % TwoPI;\n        }\n        rotationAntiClockwise = (rotationClockwise - TwoPI) % TwoPI;\n        switch (rotationType) {\n            case RotationType.ShortestPath:\n                if (Math.abs(rotationClockwise) < Math.abs(rotationAntiClockwise)) {\n                    return rotationClockwise;\n                }\n                else {\n                    return rotationAntiClockwise;\n                }\n            case RotationType.LongestPath:\n                if (Math.abs(rotationClockwise) > Math.abs(rotationAntiClockwise)) {\n                    return rotationClockwise;\n                }\n                else {\n                    return rotationAntiClockwise;\n                }\n            case RotationType.Clockwise:\n                return rotationClockwise;\n            case RotationType.CounterClockwise:\n                return rotationAntiClockwise;\n        }\n    }\n    /**\n     * Rotates the current vector around a point by a certain angle in radians.\n     * Positive angle means rotation clockwise.\n     */\n    rotate(angle, anchor, dest) {\n        const result = dest || new Vector(0, 0);\n        if (!anchor) {\n            anchor = new Vector(0, 0);\n        }\n        const sinAngle = Math.sin(angle);\n        const cosAngle = Math.cos(angle);\n        const x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\n        const y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\n        result.x = x;\n        result.y = y;\n        return result;\n    }\n    /**\n     * Creates new vector that has the same values as the previous.\n     */\n    clone(dest) {\n        const v = dest !== null && dest !== void 0 ? dest : new Vector(0, 0);\n        v.x = this.x;\n        v.y = this.y;\n        return v;\n    }\n    /**\n     * Returns a string representation of the vector.\n     */\n    toString(fixed) {\n        if (fixed) {\n            return `(${this.x.toFixed(fixed)}, ${this.y.toFixed(fixed)})`;\n        }\n        return `(${this.x}, ${this.y})`;\n    }\n}\n/**\n * Get or set the vector equals epsilon, by default 0.001 meaning vectors within that tolerance on x or y will be considered equal.\n */\nVector.EQUALS_EPSILON = 0.001;\n/**\n * Shorthand for creating new Vectors - returns a new Vector instance with the\n * provided X and Y components.\n * @param x  X component of the Vector\n * @param y  Y component of the Vector\n */\nfunction vec(x, y) {\n    return new Vector(x, y);\n}\n\n;// ./Color.ts\n/**\n * Provides standard colors (e.g. {@apilink Color.Black})\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\n * useful color operations like {@apilink Color.lighten}, {@apilink Color.darken}, and more.\n */\nclass Color {\n    /**\n     * Creates a new instance of Color from an r, g, b, a\n     * @param r  The red component of color (0-255)\n     * @param g  The green component of color (0-255)\n     * @param b  The blue component of color (0-255)\n     * @param a  The alpha component of color (0-1.0)\n     */\n    constructor(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a != null ? a : 1;\n    }\n    /**\n     * Creates a new instance of Color from an r, g, b, a\n     * @param r  The red component of color (0-255)\n     * @param g  The green component of color (0-255)\n     * @param b  The blue component of color (0-255)\n     * @param a  The alpha component of color (0-1.0)\n     */\n    static fromRGB(r, g, b, a) {\n        return new Color(r, g, b, a);\n    }\n    /**\n     * Creates a new instance of Color from a rgb string\n     * @param string  CSS color string of the form rgba(255, 255, 255, 1) or rgb(255, 255, 255)\n     */\n    static fromRGBString(string) {\n        const rgbaRegEx = /^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)/i;\n        let match = null;\n        if ((match = string.match(rgbaRegEx))) {\n            const r = parseInt(match[1], 10);\n            const g = parseInt(match[2], 10);\n            const b = parseInt(match[3], 10);\n            let a = 1;\n            if (match[4]) {\n                a = parseFloat(match[4]);\n            }\n            return new Color(r, g, b, a);\n        }\n        else {\n            throw new Error('Invalid rgb/a string: ' + string);\n        }\n    }\n    /**\n     * Creates a new instance of Color from a hex string\n     * @param hex  CSS color string of the form #ffffff, the alpha component is optional\n     */\n    static fromHex(hex) {\n        const hexRegEx = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\n        let match = null;\n        if ((match = hex.match(hexRegEx))) {\n            const r = parseInt(match[1], 16);\n            const g = parseInt(match[2], 16);\n            const b = parseInt(match[3], 16);\n            let a = 1;\n            if (match[4]) {\n                a = parseInt(match[4], 16) / 255;\n            }\n            return new Color(r, g, b, a);\n        }\n        else {\n            throw new Error('Invalid hex string: ' + hex);\n        }\n    }\n    /**\n     * Creates a new instance of Color from hsla values\n     * @param h  Hue is represented [0-1]\n     * @param s  Saturation is represented [0-1]\n     * @param l  Luminance is represented [0-1]\n     * @param a  Alpha is represented [0-1]\n     */\n    static fromHSL(h, s, l, a = 1.0) {\n        const temp = new HSLColor(h, s, l, a);\n        return temp.toRGBA();\n    }\n    /**\n     * Lightens the current color by a specified amount\n     * @param factor  The amount to lighten by [0-1]\n     */\n    lighten(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.l += (1 - temp.l) * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Darkens the current color by a specified amount\n     * @param factor  The amount to darken by [0-1]\n     */\n    darken(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.l -= temp.l * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Saturates the current color by a specified amount\n     * @param factor  The amount to saturate by [0-1]\n     */\n    saturate(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.s += temp.s * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Desaturates the current color by a specified amount\n     * @param factor  The amount to desaturate by [0-1]\n     */\n    desaturate(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.s -= temp.s * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Multiplies a color by another, results in a darker color\n     * @param color  The other color\n     */\n    multiply(color) {\n        const newR = (((color.r / 255) * this.r) / 255) * 255;\n        const newG = (((color.g / 255) * this.g) / 255) * 255;\n        const newB = (((color.b / 255) * this.b) / 255) * 255;\n        const newA = color.a * this.a;\n        return new Color(newR, newG, newB, newA);\n    }\n    /**\n     * Screens a color by another, results in a lighter color\n     * @param color  The other color\n     */\n    screen(color) {\n        const color1 = color.invert();\n        const color2 = color.invert();\n        return color1.multiply(color2).invert();\n    }\n    /**\n     * Inverts the current color\n     */\n    invert() {\n        return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\n    }\n    /**\n     * Averages the current color with another\n     * @param color  The other color\n     */\n    average(color) {\n        const newR = (color.r + this.r) / 2;\n        const newG = (color.g + this.g) / 2;\n        const newB = (color.b + this.b) / 2;\n        const newA = (color.a + this.a) / 2;\n        return new Color(newR, newG, newB, newA);\n    }\n    equal(color) {\n        return this.toString() === color.toString();\n    }\n    /**\n     * Returns a CSS string representation of a color.\n     * @param format Color representation, accepts: rgb, hsl, or hex\n     */\n    toString(format = 'rgb') {\n        switch (format) {\n            case 'rgb':\n                return this.toRGBA();\n            case 'hsl':\n                return this.toHSLA();\n            case 'hex':\n                return this.toHex();\n            default:\n                throw new Error('Invalid Color format');\n        }\n    }\n    /**\n     * Returns Hex Value of a color component\n     * @param c color component\n     * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n     */\n    _componentToHex(c) {\n        // Handle negative and fractional numbers\n        const hex = Math.max(Math.round(c), 0).toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n    }\n    /**\n     * Return Hex representation of a color.\n     */\n    toHex() {\n        let hexRepresentation = '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\n        if (this.a !== 1) {\n            hexRepresentation += this._componentToHex(this.a * 255);\n        }\n        return hexRepresentation;\n    }\n    /**\n     * Return RGBA representation of a color.\n     */\n    toRGBA() {\n        const result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\n        if (this.a !== undefined || this.a !== null) {\n            return 'rgba(' + result + ', ' + String(this.a) + ')';\n        }\n        return 'rgb(' + result + ')';\n    }\n    /**\n     * Return HSLA representation of a color.\n     */\n    toHSLA() {\n        return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\n    }\n    /**\n     * Returns a CSS string representation of a color.\n     */\n    fillStyle() {\n        return this.toString();\n    }\n    /**\n     * Returns a clone of the current color.\n     */\n    clone(dest) {\n        const result = dest || new Color(this.r, this.g, this.b, this.a);\n        result.r = this.r;\n        result.g = this.g;\n        result.b = this.b;\n        result.a = this.a;\n        return result;\n    }\n    /**\n     * Black (#000000)\n     */\n    static get Black() {\n        return Color.fromHex('#000000');\n    }\n    /**\n     * White (#FFFFFF)\n     */\n    static get White() {\n        return Color.fromHex('#FFFFFF');\n    }\n    /**\n     * Gray (#808080)\n     */\n    static get Gray() {\n        return Color.fromHex('#808080');\n    }\n    /**\n     * Light gray (#D3D3D3)\n     */\n    static get LightGray() {\n        return Color.fromHex('#D3D3D3');\n    }\n    /**\n     * Dark gray (#A9A9A9)\n     */\n    static get DarkGray() {\n        return Color.fromHex('#A9A9A9');\n    }\n    /**\n     * Yellow (#FFFF00)\n     */\n    static get Yellow() {\n        return Color.fromHex('#FFFF00');\n    }\n    /**\n     * Orange (#FFA500)\n     */\n    static get Orange() {\n        return Color.fromHex('#FFA500');\n    }\n    /**\n     * Red (#FF0000)\n     */\n    static get Red() {\n        return Color.fromHex('#FF0000');\n    }\n    /**\n     * Vermilion (#FF5B31)\n     */\n    static get Vermilion() {\n        return Color.fromHex('#FF5B31');\n    }\n    /**\n     * Rose (#FF007F)\n     */\n    static get Rose() {\n        return Color.fromHex('#FF007F');\n    }\n    /**\n     * Pink (#FFC0CB)\n     */\n    static get Pink() {\n        return Color.fromHex('#FFC0CB');\n    }\n    /**\n     * Magenta (#FF00FF)\n     */\n    static get Magenta() {\n        return Color.fromHex('#FF00FF');\n    }\n    /**\n     * Violet (#7F00FF)\n     */\n    static get Violet() {\n        return Color.fromHex('#7F00FF');\n    }\n    /**\n     * Purple (#800080)\n     */\n    static get Purple() {\n        return Color.fromHex('#800080');\n    }\n    /**\n     * Blue (#0000FF)\n     */\n    static get Blue() {\n        return Color.fromHex('#0000FF');\n    }\n    /**\n     * Azure (#007FFF)\n     */\n    static get Azure() {\n        return Color.fromHex('#007FFF');\n    }\n    /**\n     * Cyan (#00FFFF)\n     */\n    static get Cyan() {\n        return Color.fromHex('#00FFFF');\n    }\n    /**\n     * Viridian (#59978F)\n     */\n    static get Viridian() {\n        return Color.fromHex('#59978F');\n    }\n    /**\n     * Teal (#008080)\n     */\n    static get Teal() {\n        return Color.fromHex('#008080');\n    }\n    /**\n     * Green (#00FF00)\n     */\n    static get Green() {\n        return Color.fromHex('#00FF00');\n    }\n    /**\n     * Chartreuse (#7FFF00)\n     */\n    static get Chartreuse() {\n        return Color.fromHex('#7FFF00');\n    }\n    /**\n     * Transparent (#FFFFFF00)\n     */\n    static get Transparent() {\n        return Color.fromHex('#FFFFFF00');\n    }\n    /**\n     * ExcaliburBlue (#176BAA)\n     */\n    static get ExcaliburBlue() {\n        return Color.fromHex('#176BAA');\n    }\n    /**\n     * Brown (#964B00)\n     */\n    static get Brown() {\n        return Color.fromHex('#964B00');\n    }\n}\n/**\n * Internal HSL Color representation\n *\n * http://en.wikipedia.org/wiki/HSL_and_HSV\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nclass HSLColor {\n    constructor(h, s, l, a) {\n        this.h = h;\n        this.s = s;\n        this.l = l;\n        this.a = a;\n    }\n    static hue2rgb(p, q, t) {\n        if (t < 0) {\n            t += 1;\n        }\n        if (t > 1) {\n            t -= 1;\n        }\n        if (t < 1 / 6) {\n            return p + (q - p) * 6 * t;\n        }\n        if (t < 1 / 2) {\n            return q;\n        }\n        if (t < 2 / 3) {\n            return p + (q - p) * (2 / 3 - t) * 6;\n        }\n        return p;\n    }\n    static fromRGBA(r, g, b, a) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        const max = Math.max(r, g, b), min = Math.min(r, g, b);\n        let h, s;\n        const l = (max + min) / 2;\n        if (max === min) {\n            h = s = 0; // achromatic\n        }\n        else {\n            const d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        return new HSLColor(h, s, l, a);\n    }\n    toRGBA() {\n        let r, g, b;\n        if (this.s === 0) {\n            r = g = b = this.l; // achromatic\n        }\n        else {\n            const q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\n            const p = 2 * this.l - q;\n            r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\n            g = HSLColor.hue2rgb(p, q, this.h);\n            b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\n        }\n        return new Color(r * 255, g * 255, b * 255, this.a);\n    }\n    toString() {\n        const h = this.h.toFixed(0), s = this.s.toFixed(0), l = this.l.toFixed(0), a = this.a.toFixed(0);\n        return `hsla(${h}, ${s}, ${l}, ${a})`;\n    }\n}\n\n;// ./Util/Log.ts\n/* eslint-disable no-console */\n\n\n/**\n * Logging level that Excalibur will tag\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n    LogLevel[LogLevel[\"Fatal\"] = 4] = \"Fatal\";\n})(LogLevel || (LogLevel = {}));\n/**\n * Static singleton that represents the logging facility for Excalibur.\n * Excalibur comes built-in with a {@apilink ConsoleAppender} and {@apilink ScreenAppender}.\n * Derive from {@apilink Appender} to create your own logging appenders.\n */\nclass Logger {\n    constructor() {\n        this._appenders = [];\n        /**\n         * Gets or sets the default logging level. Excalibur will only log\n         * messages if equal to or above this level. Default: {@apilink LogLevel.Info}\n         */\n        this.defaultLevel = LogLevel.Info;\n        this._logOnceSet = new Set();\n        if (Logger._INSTANCE) {\n            throw new Error('Logger is a singleton');\n        }\n        Logger._INSTANCE = this;\n        // Default console appender\n        Logger._INSTANCE.addAppender(new ConsoleAppender());\n        return Logger._INSTANCE;\n    }\n    /**\n     * Gets the current static instance of Logger\n     */\n    static getInstance() {\n        if (Logger._INSTANCE == null) {\n            Logger._INSTANCE = new Logger();\n        }\n        return Logger._INSTANCE;\n    }\n    /**\n     * Adds a new {@apilink Appender} to the list of appenders to write to\n     */\n    addAppender(appender) {\n        this._appenders.push(appender);\n    }\n    /**\n     * Clears all appenders from the logger\n     */\n    clearAppenders() {\n        this._appenders.length = 0;\n    }\n    /**\n     * Logs a message at a given LogLevel\n     * @param level  The LogLevel`to log the message at\n     * @param args   An array of arguments to write to an appender\n     */\n    _log(level, args) {\n        if (level == null) {\n            level = this.defaultLevel;\n        }\n        const len = this._appenders.length;\n        for (let i = 0; i < len; i++) {\n            if (level >= this.defaultLevel) {\n                this._appenders[i].log(level, args);\n            }\n        }\n    }\n    _logOnce(level, args) {\n        const serialized = level + args.join('+');\n        if (this._logOnceSet.has(serialized)) {\n            return;\n        }\n        else {\n            this._logOnceSet.add(serialized);\n            this._log(level, args);\n        }\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Debug} level\n     * @param args  Accepts any number of arguments\n     */\n    debug(...args) {\n        this._log(LogLevel.Debug, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Fatal} level, if it sees the same args again it wont log\n     * @param args  Accepts any number of arguments\n     */\n    debugOnce(...args) {\n        this._logOnce(LogLevel.Debug, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Info} level\n     * @param args  Accepts any number of arguments\n     */\n    info(...args) {\n        this._log(LogLevel.Info, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Info} level, if it sees the same args again it wont log\n     * @param args  Accepts any number of arguments\n     */\n    infoOnce(...args) {\n        this._logOnce(LogLevel.Info, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Warn} level\n     * @param args  Accepts any number of arguments\n     */\n    warn(...args) {\n        this._log(LogLevel.Warn, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Warn} level, if it sees the same args again it won't log\n     * @param args  Accepts any number of arguments\n     */\n    warnOnce(...args) {\n        this._logOnce(LogLevel.Warn, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Error} level\n     * @param args  Accepts any number of arguments\n     */\n    error(...args) {\n        this._log(LogLevel.Error, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Error} level, if it sees the same args again it won't log\n     * @param args  Accepts any number of arguments\n     */\n    errorOnce(...args) {\n        this._logOnce(LogLevel.Error, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Fatal} level\n     * @param args  Accepts any number of arguments\n     */\n    fatal(...args) {\n        this._log(LogLevel.Fatal, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Fatal} level, if it sees the same args again it won't log\n     * @param args  Accepts any number of arguments\n     */\n    fatalOnce(...args) {\n        this._logOnce(LogLevel.Fatal, args);\n    }\n}\nLogger._INSTANCE = null;\n/**\n * Console appender for browsers (i.e. `console.log`)\n */\nclass ConsoleAppender {\n    /**\n     * Logs a message at the given {@apilink LogLevel}\n     * @param level  Level to log at\n     * @param args   Arguments to log\n     */\n    log(level, args) {\n        // Check for console support\n        if (!console && !console.log && console.warn && console.error) {\n            // todo maybe do something better than nothing\n            return;\n        }\n        // Create a new console args array\n        const consoleArgs = [];\n        consoleArgs.unshift.apply(consoleArgs, args);\n        consoleArgs.unshift('[' + LogLevel[level] + '] : ');\n        if (level < LogLevel.Warn) {\n            // Call .log for Debug/Info\n            if (console.log.apply) {\n                // this is required on some older browsers that don't support apply on console.log :(\n                console.log.apply(console, consoleArgs);\n            }\n            else {\n                console.log(consoleArgs.join(' '));\n            }\n        }\n        else if (level < LogLevel.Error) {\n            // Call .warn for Warn\n            if (console.warn.apply) {\n                console.warn.apply(console, consoleArgs);\n            }\n            else {\n                console.warn(consoleArgs.join(' '));\n            }\n        }\n        else {\n            // Call .error for Error/Fatal\n            if (console.error.apply) {\n                console.error.apply(console, consoleArgs);\n            }\n            else {\n                console.error(consoleArgs.join(' '));\n            }\n        }\n    }\n}\n/**\n * On-screen (canvas) appender\n */\nclass ScreenAppender {\n    constructor(options) {\n        var _a, _b;\n        this._messages = [];\n        this._pos = 10;\n        this._color = Color.Black;\n        this._options = options;\n        this.canvas = document.createElement('canvas');\n        this._ctx = this.canvas.getContext('2d');\n        this.canvas.style.position = 'absolute';\n        this.canvas.style.zIndex = (_b = (_a = options.zIndex) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '99';\n        document.body.appendChild(this.canvas);\n        this._positionScreenAppenderCanvas();\n        options.engine.screen.events.on('resize', () => {\n            this._positionScreenAppenderCanvas();\n        });\n    }\n    _positionScreenAppenderCanvas() {\n        var _a, _b, _c, _d;\n        const options = this._options;\n        this.canvas.width = (_a = options.width) !== null && _a !== void 0 ? _a : options.engine.screen.resolution.width;\n        this.canvas.height = (_b = options.height) !== null && _b !== void 0 ? _b : options.engine.screen.resolution.height;\n        this.canvas.style.position = 'absolute';\n        const pagePos = options.engine.screen.screenToPageCoordinates(vec(0, 0));\n        this.canvas.style.left = pagePos.x + 'px';\n        this.canvas.style.top = pagePos.y + 'px';\n        this._pos = (_c = options.xPos) !== null && _c !== void 0 ? _c : this._pos;\n        this._color = (_d = options.color) !== null && _d !== void 0 ? _d : this._color;\n    }\n    /**\n     * Logs a message at the given {@apilink LogLevel}\n     * @param level  Level to log at\n     * @param args   Arguments to log\n     */\n    log(level, args) {\n        const message = args.join(',');\n        this._ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\n        let pos = 10;\n        this._messages = this._messages.slice(0, 1000);\n        for (let i = 0; i < this._messages.length; i++) {\n            this._ctx.fillStyle = this._color.toRGBA();\n            this._ctx.fillText(this._messages[i], this._pos, pos);\n            pos += 10;\n        }\n    }\n}\n\n;// ./Collision/Side.ts\n/**\n * An enum that describes the sides of an axis aligned box for collision\n */\nvar Side;\n(function (Side) {\n    Side[\"None\"] = \"None\";\n    Side[\"Top\"] = \"Top\";\n    Side[\"Bottom\"] = \"Bottom\";\n    Side[\"Left\"] = \"Left\";\n    Side[\"Right\"] = \"Right\";\n})(Side || (Side = {}));\n(function (Side) {\n    /**\n     * Returns the opposite side from the current\n     */\n    function getOpposite(side) {\n        if (side === Side.Top) {\n            return Side.Bottom;\n        }\n        if (side === Side.Bottom) {\n            return Side.Top;\n        }\n        if (side === Side.Left) {\n            return Side.Right;\n        }\n        if (side === Side.Right) {\n            return Side.Left;\n        }\n        return Side.None;\n    }\n    Side.getOpposite = getOpposite;\n    /**\n     * Given a vector, return the Side most in that direction\n     */\n    function fromDirection(direction) {\n        if (Math.abs(direction.x) >= Math.abs(direction.y)) {\n            if (direction.x <= 0) {\n                return Side.Left;\n            }\n            return Side.Right;\n        }\n        if (direction.y <= 0) {\n            return Side.Top;\n        }\n        return Side.Bottom;\n    }\n    Side.fromDirection = fromDirection;\n})(Side || (Side = {}));\n\n;// ./Collision/BoundingBox.ts\n\n\n\n/**\n * Axis Aligned collision primitive for Excalibur.\n */\nclass BoundingBox {\n    /**\n     * Constructor allows passing of either an object with all coordinate components,\n     * or the coordinate components passed separately.\n     * @param leftOrOptions    Either x coordinate of the left edge or an options object\n     * containing the four coordinate components.\n     * @param top     y coordinate of the top edge\n     * @param right   x coordinate of the right edge\n     * @param bottom  y coordinate of the bottom edge\n     */\n    constructor(leftOrOptions = 0, top = 0, right = 0, bottom = 0) {\n        // Cache bounding box point returns\n        this._points = [];\n        if (typeof leftOrOptions === 'object') {\n            this.left = leftOrOptions.left;\n            this.top = leftOrOptions.top;\n            this.right = leftOrOptions.right;\n            this.bottom = leftOrOptions.bottom;\n        }\n        else if (typeof leftOrOptions === 'number') {\n            this.left = leftOrOptions;\n            this.top = top;\n            this.right = right;\n            this.bottom = bottom;\n        }\n    }\n    /**\n     * Returns a new instance of {@apilink BoundingBox} that is a copy of the current instance\n     */\n    clone(dest) {\n        const result = dest || new BoundingBox(0, 0, 0, 0);\n        result.left = this.left;\n        result.right = this.right;\n        result.top = this.top;\n        result.bottom = this.bottom;\n        return result;\n    }\n    /**\n     * Resets the bounds to a zero width/height box\n     */\n    reset() {\n        this.left = 0;\n        this.top = 0;\n        this.bottom = 0;\n        this.right = 0;\n    }\n    /**\n     * Given bounding box A & B, returns the side relative to A when intersection is performed.\n     * @param intersection Intersection vector between 2 bounding boxes\n     */\n    static getSideFromIntersection(intersection) {\n        if (!intersection) {\n            return Side.None;\n        }\n        if (intersection) {\n            if (Math.abs(intersection.x) > Math.abs(intersection.y)) {\n                if (intersection.x < 0) {\n                    return Side.Right;\n                }\n                return Side.Left;\n            }\n            else {\n                if (intersection.y < 0) {\n                    return Side.Bottom;\n                }\n                return Side.Top;\n            }\n        }\n        return Side.None;\n    }\n    static fromPoints(points) {\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n        for (let i = 0; i < points.length; i++) {\n            if (points[i].x < minX) {\n                minX = points[i].x;\n            }\n            if (points[i].x > maxX) {\n                maxX = points[i].x;\n            }\n            if (points[i].y < minY) {\n                minY = points[i].y;\n            }\n            if (points[i].y > maxY) {\n                maxY = points[i].y;\n            }\n        }\n        return new BoundingBox(minX, minY, maxX, maxY);\n    }\n    /**\n     * Creates a bounding box from a width and height\n     * @param width\n     * @param height\n     * @param anchor Default Vector.Half\n     * @param pos Default Vector.Zero\n     */\n    static fromDimension(width, height, anchor = Vector.Half, pos = Vector.Zero) {\n        return new BoundingBox(-width * anchor.x + pos.x, -height * anchor.y + pos.y, width - width * anchor.x + pos.x, height - height * anchor.y + pos.y);\n    }\n    /**\n     * Returns the calculated width of the bounding box\n     */\n    get width() {\n        return this.right - this.left;\n    }\n    /**\n     * Returns the calculated height of the bounding box\n     */\n    get height() {\n        return this.bottom - this.top;\n    }\n    /**\n     * Return whether the bounding box has zero dimensions in height,width or both\n     */\n    hasZeroDimensions() {\n        return this.width === 0 || this.height === 0;\n    }\n    /**\n     * Returns the center of the bounding box\n     */\n    get center() {\n        return new Vector((this.left + this.right) / 2, (this.top + this.bottom) / 2);\n    }\n    get topLeft() {\n        return new Vector(this.left, this.top);\n    }\n    get bottomRight() {\n        return new Vector(this.right, this.bottom);\n    }\n    get topRight() {\n        return new Vector(this.right, this.top);\n    }\n    get bottomLeft() {\n        return new Vector(this.left, this.bottom);\n    }\n    translate(pos) {\n        return new BoundingBox(this.left + pos.x, this.top + pos.y, this.right + pos.x, this.bottom + pos.y);\n    }\n    /**\n     * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\n     * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\n     */\n    rotate(angle, point = Vector.Zero) {\n        const points = this.getPoints().map((p) => p.rotate(angle, point));\n        return BoundingBox.fromPoints(points);\n    }\n    /**\n     * Scale a bounding box by a scale factor, optionally provide a point\n     * @param scale\n     * @param point\n     */\n    scale(scale, point = Vector.Zero) {\n        const shifted = this.translate(point);\n        return new BoundingBox(shifted.left * scale.x, shifted.top * scale.y, shifted.right * scale.x, shifted.bottom * scale.y);\n    }\n    /**\n     * Transform the axis aligned bounding box by a {@apilink Matrix}, producing a new axis aligned bounding box\n     * @param matrix\n     */\n    transform(matrix) {\n        // inlined these calculations to not use vectors would speed it up slightly\n        // const matFirstColumn = vec(matrix.data[0], matrix.data[1]);\n        // const xa = matFirstColumn.scale(this.left);\n        const xa1 = matrix.data[0] * this.left;\n        const xa2 = matrix.data[1] * this.left;\n        // const xb = matFirstColumn.scale(this.right);\n        const xb1 = matrix.data[0] * this.right;\n        const xb2 = matrix.data[1] * this.right;\n        // const matSecondColumn = vec(matrix.data[2], matrix.data[3]);\n        // const ya = matSecondColumn.scale(this.top);\n        const ya1 = matrix.data[2] * this.top;\n        const ya2 = matrix.data[3] * this.top;\n        // const yb = matSecondColumn.scale(this.bottom);\n        const yb1 = matrix.data[2] * this.bottom;\n        const yb2 = matrix.data[3] * this.bottom;\n        const matrixPos = matrix.getPosition();\n        // const topLeft = Vector.min(xa, xb).add(Vector.min(ya, yb)).add(matrixPos);\n        // const bottomRight = Vector.max(xa, xb).add(Vector.max(ya, yb)).add(matrixPos);\n        const left = Math.min(xa1, xb1) + Math.min(ya1, yb1) + matrixPos.x;\n        const top = Math.min(xa2, xb2) + Math.min(ya2, yb2) + matrixPos.y;\n        const right = Math.max(xa1, xb1) + Math.max(ya1, yb1) + matrixPos.x;\n        const bottom = Math.max(xa2, xb2) + Math.max(ya2, yb2) + matrixPos.y;\n        return new BoundingBox({\n            left, //: topLeft.x,\n            top, //: topLeft.y,\n            right, //: bottomRight.x,\n            bottom //: bottomRight.y\n        });\n    }\n    /**\n     * Returns the perimeter of the bounding box\n     */\n    getPerimeter() {\n        const wx = this.width;\n        const wy = this.height;\n        return 2 * (wx + wy);\n    }\n    /**\n     * Returns the world space points that make up the corners of the bounding box as a polygon\n     */\n    getPoints() {\n        if (this._left !== this.left || this._right !== this.right || this._top !== this.top || this._bottom !== this.bottom) {\n            this._points.length = 0;\n            this._points.push(new Vector(this.left, this.top));\n            this._points.push(new Vector(this.right, this.top));\n            this._points.push(new Vector(this.right, this.bottom));\n            this._points.push(new Vector(this.left, this.bottom));\n            this._left = this.left;\n            this._right = this.right;\n            this._top = this.top;\n            this._bottom = this.bottom;\n        }\n        return this._points;\n    }\n    /**\n     * Determines whether a ray intersects with a bounding box\n     */\n    rayCast(ray, farClipDistance = Infinity) {\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n        let tMin = -Infinity;\n        let tMax = +Infinity;\n        const xInv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n        const yInv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n        const tx1 = (this.left - ray.pos.x) * xInv;\n        const tx2 = (this.right - ray.pos.x) * xInv;\n        tMin = Math.min(tx1, tx2);\n        tMax = Math.max(tx1, tx2);\n        const ty1 = (this.top - ray.pos.y) * yInv;\n        const ty2 = (this.bottom - ray.pos.y) * yInv;\n        tMin = Math.max(tMin, Math.min(ty1, ty2));\n        tMax = Math.min(tMax, Math.max(ty1, ty2));\n        return tMax >= Math.max(0, tMin) && tMin < farClipDistance;\n    }\n    rayCastTime(ray, farClipDistance = Infinity) {\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n        let tMin = -Infinity;\n        let tMax = +Infinity;\n        const xInv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n        const yInv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n        const tx1 = (this.left - ray.pos.x) * xInv;\n        const tx2 = (this.right - ray.pos.x) * xInv;\n        tMin = Math.min(tx1, tx2);\n        tMax = Math.max(tx1, tx2);\n        const ty1 = (this.top - ray.pos.y) * yInv;\n        const ty2 = (this.bottom - ray.pos.y) * yInv;\n        tMin = Math.max(tMin, Math.min(ty1, ty2));\n        tMax = Math.min(tMax, Math.max(ty1, ty2));\n        if (tMax >= Math.max(0, tMin) && tMin < farClipDistance) {\n            return tMin;\n        }\n        return -1;\n    }\n    contains(val) {\n        if (val instanceof Vector) {\n            return this.left <= val.x && this.top <= val.y && val.y <= this.bottom && val.x <= this.right;\n        }\n        else if (val instanceof BoundingBox) {\n            return this.left <= val.left && this.top <= val.top && val.bottom <= this.bottom && val.right <= this.right;\n        }\n        return false;\n    }\n    /**\n     * Combines this bounding box and another together returning a new bounding box\n     * @param other  The bounding box to combine\n     */\n    combine(other, dest) {\n        const compositeBB = dest || new BoundingBox(0, 0, 0, 0);\n        const left = Math.min(this.left, other.left);\n        const top = Math.min(this.top, other.top);\n        const right = Math.max(this.right, other.right);\n        const bottom = Math.max(this.bottom, other.bottom);\n        compositeBB.left = left;\n        compositeBB.top = top;\n        compositeBB.right = right;\n        compositeBB.bottom = bottom;\n        return compositeBB;\n    }\n    get dimensions() {\n        return new Vector(this.width, this.height);\n    }\n    /**\n     * Returns true if the bounding boxes overlap.\n     * @param other\n     * @param epsilon Optionally specify a small epsilon (default 0) as amount of overlap to ignore as overlap.\n     * This epsilon is useful in stable collision simulations.\n     */\n    overlaps(other, epsilon) {\n        const e = epsilon || 0;\n        if (other.hasZeroDimensions()) {\n            return this.contains(other);\n        }\n        if (this.hasZeroDimensions()) {\n            return other.contains(this);\n        }\n        const totalBoundingBox = this.combine(other);\n        return totalBoundingBox.width + e < other.width + this.width && totalBoundingBox.height + e < other.height + this.height;\n    }\n    /**\n     * Test wether this bounding box intersects with another returning\n     * the intersection vector that can be used to resolve the collision. If there\n     * is no intersection null is returned.\n     * @param other  Other {@apilink BoundingBox} to test intersection with\n     * @returns A Vector in the direction of the current BoundingBox, this <- other\n     */\n    intersect(other) {\n        const totalBoundingBox = this.combine(other);\n        // If the total bounding box is less than or equal the sum of the 2 bounds then there is collision\n        if (totalBoundingBox.width < other.width + this.width &&\n            totalBoundingBox.height < other.height + this.height &&\n            !totalBoundingBox.dimensions.equals(other.dimensions) &&\n            !totalBoundingBox.dimensions.equals(this.dimensions)) {\n            // collision\n            let overlapX = 0;\n            // right edge is between the other's left and right edge\n            /**\n             *     +-this-+\n             *     |      |\n             *     |    +-other-+\n             *     +----|-+     |\n             *          |       |\n             *          +-------+\n             *         <---\n             *          ^ overlap\n             */\n            if (this.right >= other.left && this.right <= other.right) {\n                overlapX = other.left - this.right;\n                // right edge is past the other's right edge\n                /**\n                 *     +-other-+\n                 *     |       |\n                 *     |    +-this-+\n                 *     +----|--+   |\n                 *          |      |\n                 *          +------+\n                 *          --->\n                 *          ^ overlap\n                 */\n            }\n            else {\n                overlapX = other.right - this.left;\n            }\n            let overlapY = 0;\n            // top edge is between the other's top and bottom edge\n            /**\n             *     +-other-+\n             *     |       |\n             *     |    +-this-+   | <- overlap\n             *     +----|--+   |   |\n             *          |      |  \\ /\n             *          +------+   '\n             */\n            if (this.top <= other.bottom && this.top >= other.top) {\n                overlapY = other.bottom - this.top;\n                // top edge is above the other top edge\n                /**\n                 *     +-this-+         .\n                 *     |      |        / \\\n                 *     |    +-other-+   | <- overlap\n                 *     +----|-+     |   |\n                 *          |       |\n                 *          +-------+\n                 */\n            }\n            else {\n                overlapY = other.top - this.bottom;\n            }\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\n                return new Vector(overlapX, 0);\n            }\n            else {\n                return new Vector(0, overlapY);\n            }\n            // Case of total containment of one bounding box by another\n        }\n        else if (totalBoundingBox.dimensions.equals(other.dimensions) || totalBoundingBox.dimensions.equals(this.dimensions)) {\n            let overlapX = 0;\n            // this is wider than the other\n            if (this.width - other.width >= 0) {\n                // This right edge is closest to the others right edge\n                if (this.right - other.right <= other.left - this.left) {\n                    overlapX = other.left - this.right;\n                    // This left edge is closest to the others left edge\n                }\n                else {\n                    overlapX = other.right - this.left;\n                }\n                // other is wider than this\n            }\n            else {\n                // This right edge is closest to the others right edge\n                if (other.right - this.right <= this.left - other.left) {\n                    overlapX = this.left - other.right;\n                    // This left edge is closest to the others left edge\n                }\n                else {\n                    overlapX = this.right - other.left;\n                }\n            }\n            let overlapY = 0;\n            // this is taller than other\n            if (this.height - other.height >= 0) {\n                // The bottom edge is closest to the others bottom edge\n                if (this.bottom - other.bottom <= other.top - this.top) {\n                    overlapY = other.top - this.bottom;\n                }\n                else {\n                    overlapY = other.bottom - this.top;\n                }\n                // other is taller than this\n            }\n            else {\n                // The bottom edge is closest to the others bottom edge\n                if (other.bottom - this.bottom <= this.top - other.top) {\n                    overlapY = this.top - other.bottom;\n                }\n                else {\n                    overlapY = this.bottom - other.top;\n                }\n            }\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\n                return new Vector(overlapX, 0);\n            }\n            else {\n                return new Vector(0, overlapY);\n            }\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Test whether the bounding box has intersected with another bounding box, returns the side of the current bb that intersected.\n     * @param bb The other actor to test\n     */\n    intersectWithSide(bb) {\n        const intersect = this.intersect(bb);\n        return BoundingBox.getSideFromIntersection(intersect);\n    }\n    /**\n     * Draw a debug bounding box\n     * @param ex\n     * @param color\n     */\n    draw(ex, color = Color.Yellow) {\n        ex.debug.drawRect(this.left, this.top, this.width, this.height, { color });\n    }\n}\n\n;// ./Util/Util.ts\n\n\n/**\n * Find the screen position of an HTML element\n */\nfunction getPosition(el) {\n    // do we need the scroll too? technically the offset method before did that\n    if (el && el.getBoundingClientRect) {\n        const rect = el.getBoundingClientRect();\n        return vec(rect.x + window.scrollX, rect.y + window.scrollY);\n    }\n    return Vector.Zero;\n}\n/**\n * Add an item to an array list if it doesn't already exist. Returns true if added, false if not and already exists in the array.\n * @deprecated Will be removed in v0.26.0\n */\nfunction addItemToArray(item, array) {\n    if (array.indexOf(item) === -1) {\n        array.push(item);\n        return true;\n    }\n    return false;\n}\n/**\n * Remove an item from an list\n * @deprecated Will be removed in v0.26.0\n */\nfunction removeItemFromArray(item, array) {\n    let index = -1;\n    if ((index = array.indexOf(item)) > -1) {\n        array.splice(index, 1);\n        return true;\n    }\n    return false;\n}\n/**\n * See if an array contains something\n */\nfunction contains(array, obj) {\n    for (let i = 0; i < array.length; i++) {\n        if (array[i] === obj) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Used for exhaustive checks at compile time\n */\nfunction fail(message) {\n    throw new Error(message);\n}\n/**\n * Create a promise that resolves after a certain number of milliseconds\n *\n * It is strongly recommended you pass the excalibur clock so delays are bound to the\n * excalibur clock which would be unaffected by stop/pause.\n * @param milliseconds\n * @param clock\n */\nfunction delay(milliseconds, clock) {\n    var _a;\n    const future = new Future();\n    const schedule = (_a = clock === null || clock === void 0 ? void 0 : clock.schedule.bind(clock)) !== null && _a !== void 0 ? _a : setTimeout;\n    schedule(() => {\n        future.resolve();\n    }, milliseconds);\n    return future.promise;\n}\n/**\n * Remove keys from object literals\n * @param object\n * @param keys\n */\nfunction omit(object, keys) {\n    const newObj = {};\n    for (const key in object) {\n        if (!keys.includes(key)) {\n            newObj[key] = object[key];\n        }\n    }\n    return newObj;\n}\n/**\n * Simple object check.\n * @param item\n */\nfunction isObject(item) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n}\n/**\n * Deep merge two objects.\n * @param target\n * @param sources\n */\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) {\n        return target;\n    }\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key]) {\n                    Object.assign(target, { [key]: {} });\n                }\n                mergeDeep(target[key], source[key]);\n            }\n            else {\n                Object.assign(target, { [key]: source[key] });\n            }\n        }\n    }\n    return mergeDeep(target, ...sources);\n}\n\n;// ./Math/matrix.ts\n\n\n\nvar MatrixLocations;\n(function (MatrixLocations) {\n    MatrixLocations[MatrixLocations[\"X\"] = 12] = \"X\";\n    MatrixLocations[MatrixLocations[\"Y\"] = 13] = \"Y\";\n})(MatrixLocations || (MatrixLocations = {}));\n/**\n * Excalibur Matrix helper for 4x4 matrices\n *\n * Useful for webgl 4x4 matrices\n */\nclass Matrix {\n    constructor() {\n        /**\n         *  4x4 matrix in column major order\n         *\n         * |         |         |          |          |\n         * | ------- | ------- | -------- | -------- |\n         * | data[0] | data[4] | data[8]  | data[12] |\n         * | data[1] | data[5] | data[9]  | data[13] |\n         * | data[2] | data[6] | data[10] | data[14] |\n         * | data[3] | data[7] | data[11] | data[15] |\n         *\n         */\n        this.data = new Float32Array(16);\n        this._scaleX = 1;\n        this._scaleSignX = 1;\n        this._scaleY = 1;\n        this._scaleSignY = 1;\n    }\n    /**\n     * Creates an orthographic (flat non-perspective) projection\n     * https://en.wikipedia.org/wiki/Orthographic_projection\n     * @param left\n     * @param right\n     * @param bottom\n     * @param top\n     * @param near\n     * @param far\n     */\n    static ortho(left, right, bottom, top, near, far) {\n        const mat = new Matrix();\n        mat.data[0] = 2 / (right - left);\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = 0;\n        mat.data[5] = 2 / (top - bottom);\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = -2 / (far - near);\n        mat.data[11] = 0;\n        mat.data[12] = -(right + left) / (right - left);\n        mat.data[13] = -(top + bottom) / (top - bottom);\n        mat.data[14] = -(far + near) / (far - near);\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Creates a new Matrix with the same data as the current 4x4\n     */\n    clone(dest) {\n        const mat = dest || new Matrix();\n        mat.data[0] = this.data[0];\n        mat.data[1] = this.data[1];\n        mat.data[2] = this.data[2];\n        mat.data[3] = this.data[3];\n        mat.data[4] = this.data[4];\n        mat.data[5] = this.data[5];\n        mat.data[6] = this.data[6];\n        mat.data[7] = this.data[7];\n        mat.data[8] = this.data[8];\n        mat.data[9] = this.data[9];\n        mat.data[10] = this.data[10];\n        mat.data[11] = this.data[11];\n        mat.data[12] = this.data[12];\n        mat.data[13] = this.data[13];\n        mat.data[14] = this.data[14];\n        mat.data[15] = this.data[15];\n        return mat;\n    }\n    /**\n     * Converts the current matrix into a DOMMatrix\n     *\n     * This is useful when working with the browser Canvas context\n     * @returns {DOMMatrix} DOMMatrix\n     */\n    toDOMMatrix() {\n        return new DOMMatrix([...this.data]);\n    }\n    static fromFloat32Array(data) {\n        const matrix = new Matrix();\n        matrix.data = data;\n        return matrix;\n    }\n    /**\n     * Creates a new identity matrix (a matrix that when applied does nothing)\n     */\n    static identity() {\n        const mat = new Matrix();\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = 0;\n        mat.data[5] = 1;\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = 1;\n        mat.data[11] = 0;\n        mat.data[12] = 0;\n        mat.data[13] = 0;\n        mat.data[14] = 0;\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Resets the current matrix to the identity matrix, mutating it\n     * @returns {Matrix} Current matrix as identity\n     */\n    reset() {\n        const mat = this;\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = 0;\n        mat.data[5] = 1;\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = 1;\n        mat.data[11] = 0;\n        mat.data[12] = 0;\n        mat.data[13] = 0;\n        mat.data[14] = 0;\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Creates a brand new translation matrix at the specified 3d point\n     * @param x\n     * @param y\n     */\n    static translation(x, y) {\n        const mat = Matrix.identity();\n        mat.data[12] = x;\n        mat.data[13] = y;\n        return mat;\n    }\n    /**\n     * Creates a brand new scaling matrix with the specified scaling factor\n     * @param sx\n     * @param sy\n     */\n    static scale(sx, sy) {\n        const mat = Matrix.identity();\n        mat.data[0] = sx;\n        mat.data[5] = sy;\n        mat.data[10] = 1;\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Creates a brand new rotation matrix with the specified angle in radians\n     * @param angle\n     */\n    static rotation(angle) {\n        const mat = Matrix.identity();\n        mat.data[0] = Math.cos(angle);\n        mat.data[4] = -Math.sin(angle);\n        mat.data[1] = Math.sin(angle);\n        mat.data[5] = Math.cos(angle);\n        return mat;\n    }\n    multiply(vectorOrMatrix, dest) {\n        if (vectorOrMatrix instanceof Vector) {\n            const result = dest || new Vector(0, 0);\n            const vector = vectorOrMatrix;\n            // these shenanigans are to allow dest and vector to be the same instance\n            const resultX = vector.x * this.data[0] + vector.y * this.data[4] + this.data[12];\n            const resultY = vector.x * this.data[1] + vector.y * this.data[5] + this.data[13];\n            result.x = resultX;\n            result.y = resultY;\n            return result;\n        }\n        else {\n            const result = dest || new Matrix();\n            const other = vectorOrMatrix;\n            const a11 = this.data[0];\n            const a21 = this.data[1];\n            const a31 = this.data[2];\n            const a41 = this.data[3];\n            const a12 = this.data[4];\n            const a22 = this.data[5];\n            const a32 = this.data[6];\n            const a42 = this.data[7];\n            const a13 = this.data[8];\n            const a23 = this.data[9];\n            const a33 = this.data[10];\n            const a43 = this.data[11];\n            const a14 = this.data[12];\n            const a24 = this.data[13];\n            const a34 = this.data[14];\n            const a44 = this.data[15];\n            const b11 = other.data[0];\n            const b21 = other.data[1];\n            const b31 = other.data[2];\n            const b41 = other.data[3];\n            const b12 = other.data[4];\n            const b22 = other.data[5];\n            const b32 = other.data[6];\n            const b42 = other.data[7];\n            const b13 = other.data[8];\n            const b23 = other.data[9];\n            const b33 = other.data[10];\n            const b43 = other.data[11];\n            const b14 = other.data[12];\n            const b24 = other.data[13];\n            const b34 = other.data[14];\n            const b44 = other.data[15];\n            result.data[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n            result.data[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n            result.data[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n            result.data[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n            result.data[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n            result.data[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n            result.data[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n            result.data[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n            result.data[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n            result.data[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n            result.data[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n            result.data[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n            result.data[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n            result.data[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n            result.data[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n            result.data[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n            const s = this.getScale();\n            result._scaleSignX = sign(s.x) * sign(result._scaleSignX);\n            result._scaleSignY = sign(s.y) * sign(result._scaleSignY);\n            return result;\n        }\n    }\n    /**\n     * Applies translation to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    translate(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a31 = this.data[2];\n        const a41 = this.data[3];\n        const a12 = this.data[4];\n        const a22 = this.data[5];\n        const a32 = this.data[6];\n        const a42 = this.data[7];\n        const a13 = this.data[8];\n        const a23 = this.data[9];\n        const a33 = this.data[10];\n        const a43 = this.data[11];\n        const a14 = this.data[12];\n        const a24 = this.data[13];\n        const a34 = this.data[14];\n        const a44 = this.data[15];\n        // Doesn't change z\n        const z = 0;\n        const w = 1;\n        this.data[12] = a11 * x + a12 * y + a13 * z + a14 * w;\n        this.data[13] = a21 * x + a22 * y + a23 * z + a24 * w;\n        this.data[14] = a31 * x + a32 * y + a33 * z + a34 * w;\n        this.data[15] = a41 * x + a42 * y + a43 * z + a44 * w;\n        return this;\n    }\n    setPosition(x, y) {\n        this.data[12] = x;\n        this.data[13] = y;\n    }\n    getPosition() {\n        return vec(this.data[12], this.data[13]);\n    }\n    /**\n     * Applies rotation to the current matrix mutating it\n     * @param angle in Radians\n     */\n    rotate(angle) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a31 = this.data[2];\n        const a41 = this.data[3];\n        const a12 = this.data[4];\n        const a22 = this.data[5];\n        const a32 = this.data[6];\n        const a42 = this.data[7];\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * a11 + sine * a12;\n        this.data[1] = cosine * a21 + sine * a22;\n        this.data[2] = cosine * a31 + sine * a32;\n        this.data[3] = cosine * a41 + sine * a42;\n        this.data[4] = cosine * a12 - sine * a11;\n        this.data[5] = cosine * a22 - sine * a21;\n        this.data[6] = cosine * a32 - sine * a31;\n        this.data[7] = cosine * a42 - sine * a41;\n        return this;\n    }\n    /**\n     * Applies scaling to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    scale(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a31 = this.data[2];\n        const a41 = this.data[3];\n        const a12 = this.data[4];\n        const a22 = this.data[5];\n        const a32 = this.data[6];\n        const a42 = this.data[7];\n        this.data[0] = a11 * x;\n        this.data[1] = a21 * x;\n        this.data[2] = a31 * x;\n        this.data[3] = a41 * x;\n        this.data[4] = a12 * y;\n        this.data[5] = a22 * y;\n        this.data[6] = a32 * y;\n        this.data[7] = a42 * y;\n        return this;\n    }\n    setRotation(angle) {\n        const currentScale = this.getScale();\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * currentScale.x;\n        this.data[1] = sine * currentScale.y;\n        this.data[4] = -sine * currentScale.x;\n        this.data[5] = cosine * currentScale.y;\n    }\n    getRotation() {\n        const angle = Math.atan2(this.data[1] / this.getScaleY(), this.data[0] / this.getScaleX());\n        return canonicalizeAngle(angle);\n    }\n    getScaleX() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const xscale = vec(this.data[0], this.data[4]).magnitude;\n        return this._scaleSignX * xscale;\n    }\n    getScaleY() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const yscale = vec(this.data[1], this.data[5]).magnitude;\n        return this._scaleSignY * yscale;\n    }\n    /**\n     * Get the scale of the matrix\n     */\n    getScale() {\n        return vec(this.getScaleX(), this.getScaleY());\n    }\n    setScaleX(val) {\n        if (this._scaleX === val) {\n            return;\n        }\n        this._scaleSignX = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const xscale = vec(this.data[0] * this._scaleSignX, this.data[4] * this._scaleSignX).normalize();\n        this.data[0] = xscale.x * val;\n        this.data[4] = xscale.y * val;\n        this._scaleX = val;\n    }\n    setScaleY(val) {\n        if (this._scaleY === val) {\n            return;\n        }\n        this._scaleSignY = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const yscale = vec(this.data[1] * this._scaleSignY, this.data[5] * this._scaleSignY).normalize();\n        this.data[1] = yscale.x * val;\n        this.data[5] = yscale.y * val;\n        this._scaleY = val;\n    }\n    setScale(scale) {\n        this.setScaleX(scale.x);\n        this.setScaleY(scale.y);\n    }\n    /**\n     * Determinant of the upper left 2x2 matrix\n     */\n    getBasisDeterminant() {\n        return this.data[0] * this.data[5] - this.data[1] * this.data[4];\n    }\n    /**\n     * Return the affine inverse, optionally store it in a target matrix.\n     *\n     * It's recommended you call .reset() the target unless you know what you're doing\n     * @param target\n     */\n    getAffineInverse(target) {\n        // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\n        // See https://www.mathsisfun.com/algebra/matrix-inverse.html\n        // Since we are actually only doing 2D transformations we can use this hack\n        // We don't actually use the 3rd or 4th dimension\n        const det = this.getBasisDeterminant();\n        const inverseDet = 1 / det; // todo zero check\n        const a = this.data[0];\n        const b = this.data[4];\n        const c = this.data[1];\n        const d = this.data[5];\n        const m = target || Matrix.identity();\n        // inverts rotation and scale\n        m.data[0] = d * inverseDet;\n        m.data[1] = -c * inverseDet;\n        m.data[4] = -b * inverseDet;\n        m.data[5] = a * inverseDet;\n        const tx = this.data[12];\n        const ty = this.data[13];\n        // invert translation\n        // transform translation into the matrix basis created by rot/scale\n        m.data[12] = -(tx * m.data[0] + ty * m.data[4]);\n        m.data[13] = -(tx * m.data[1] + ty * m.data[5]);\n        return m;\n    }\n    isIdentity() {\n        return (this.data[0] === 1 &&\n            this.data[1] === 0 &&\n            this.data[2] === 0 &&\n            this.data[3] === 0 &&\n            this.data[4] === 0 &&\n            this.data[5] === 1 &&\n            this.data[6] === 0 &&\n            this.data[7] === 0 &&\n            this.data[8] === 0 &&\n            this.data[9] === 0 &&\n            this.data[10] === 1 &&\n            this.data[11] === 0 &&\n            this.data[12] === 0 &&\n            this.data[13] === 0 &&\n            this.data[14] === 0 &&\n            this.data[15] === 1);\n    }\n    toString() {\n        return `\r\n[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]\r\n[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]\r\n[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]\r\n[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]\r\n`;\n    }\n}\n\n;// ./Math/affine-matrix.ts\n\n\n\nclass AffineMatrix {\n    constructor() {\n        /**\n         * |         |         |          |\n         * | ------- | ------- | -------- |\n         * | data[0] | data[2] | data[4]  |\n         * | data[1] | data[3] | data[5]  |\n         * |   0     |    0    |    1     |\n         */\n        this.data = new Float64Array(6);\n        this._scale = new Float64Array([1, 1]);\n        this._scaleSignX = 1;\n        this._scaleSignY = 1;\n    }\n    /**\n     * Converts the current matrix into a DOMMatrix\n     *\n     * This is useful when working with the browser Canvas context\n     * @returns {DOMMatrix} DOMMatrix\n     */\n    toDOMMatrix() {\n        return new DOMMatrix([...this.data]);\n    }\n    static identity() {\n        const mat = new AffineMatrix();\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 1;\n        mat.data[4] = 0;\n        mat.data[5] = 0;\n        return mat;\n    }\n    /**\n     * Creates a brand new translation matrix at the specified 3d point\n     * @param x\n     * @param y\n     */\n    static translation(x, y) {\n        const mat = AffineMatrix.identity();\n        mat.data[4] = x;\n        mat.data[5] = y;\n        return mat;\n    }\n    /**\n     * Creates a brand new scaling matrix with the specified scaling factor\n     * @param sx\n     * @param sy\n     */\n    static scale(sx, sy) {\n        const mat = AffineMatrix.identity();\n        mat.data[0] = sx;\n        mat.data[3] = sy;\n        mat._scale[0] = sx;\n        mat._scale[1] = sy;\n        return mat;\n    }\n    /**\n     * Creates a brand new rotation matrix with the specified angle in radians\n     * @param angle\n     */\n    static rotation(angle) {\n        const mat = AffineMatrix.identity();\n        mat.data[0] = Math.cos(angle);\n        mat.data[1] = Math.sin(angle);\n        mat.data[2] = -Math.sin(angle);\n        mat.data[3] = Math.cos(angle);\n        return mat;\n    }\n    setPosition(x, y) {\n        this.data[4] = x;\n        this.data[5] = y;\n    }\n    getPosition() {\n        return vec(this.data[4], this.data[5]);\n    }\n    /**\n     * Applies rotation to the current matrix mutating it\n     * @param angle in Radians\n     */\n    rotate(angle) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a12 = this.data[2];\n        const a22 = this.data[3];\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * a11 + sine * a12;\n        this.data[1] = cosine * a21 + sine * a22;\n        this.data[2] = cosine * a12 - sine * a11;\n        this.data[3] = cosine * a22 - sine * a21;\n        return this;\n    }\n    /**\n     * Applies translation to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    translate(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        // const a31 = 0;\n        const a12 = this.data[2];\n        const a22 = this.data[3];\n        // const a32 = 0;\n        const a13 = this.data[4];\n        const a23 = this.data[5];\n        // const a33 = 1;\n        // Doesn't change z\n        this.data[4] = a11 * x + a12 * y + a13;\n        this.data[5] = a21 * x + a22 * y + a23;\n        return this;\n    }\n    /**\n     * Applies scaling to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    scale(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a12 = this.data[2];\n        const a22 = this.data[3];\n        this.data[0] = a11 * x;\n        this.data[1] = a21 * x;\n        this.data[2] = a12 * y;\n        this.data[3] = a22 * y;\n        this._scale[0] = x;\n        this._scale[1] = y;\n        this._scaleSignX = sign(x);\n        this._scaleSignY = sign(y);\n        return this;\n    }\n    determinant() {\n        return this.data[0] * this.data[3] - this.data[1] * this.data[2];\n    }\n    /**\n     * Return the affine inverse, optionally store it in a target matrix.\n     *\n     * It's recommended you call .reset() the target unless you know what you're doing\n     * @param target\n     */\n    inverse(target) {\n        // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\n        // See https://www.mathsisfun.com/algebra/matrix-inverse.html\n        // Since we are actually only doing 2D transformations we can use this hack\n        // We don't actually use the 3rd or 4th dimension\n        const det = this.determinant();\n        let inverseDet = det; // default to a zero matrix if we have a singular matrix\n        if (det !== 0) {\n            inverseDet = 1 / det;\n        }\n        const a = this.data[0];\n        const b = this.data[2];\n        const c = this.data[1];\n        const d = this.data[3];\n        const m = target || AffineMatrix.identity();\n        // inverts rotation and scale\n        m.data[0] = d * inverseDet;\n        m.data[1] = -c * inverseDet;\n        m.data[2] = -b * inverseDet;\n        m.data[3] = a * inverseDet;\n        const tx = this.data[4];\n        const ty = this.data[5];\n        // invert translation\n        // transform translation into the matrix basis created by rot/scale\n        m.data[4] = -(tx * m.data[0] + ty * m.data[2]);\n        m.data[5] = -(tx * m.data[1] + ty * m.data[3]);\n        return m;\n    }\n    multiply(vectorOrMatrix, dest) {\n        if (vectorOrMatrix instanceof Vector) {\n            const result = dest || new Vector(0, 0);\n            const vector = vectorOrMatrix;\n            // these shenanigans are to allow dest and vector to be the same instance\n            const resultX = vector.x * this.data[0] + vector.y * this.data[2] + this.data[4];\n            const resultY = vector.x * this.data[1] + vector.y * this.data[3] + this.data[5];\n            result.x = resultX;\n            result.y = resultY;\n            return result;\n        }\n        else {\n            const result = dest || new AffineMatrix();\n            const other = vectorOrMatrix;\n            const a11 = this.data[0];\n            const a21 = this.data[1];\n            //  const a31 = 0;\n            const a12 = this.data[2];\n            const a22 = this.data[3];\n            //  const a32 = 0;\n            const a13 = this.data[4];\n            const a23 = this.data[5];\n            //  const a33 = 1;\n            const b11 = other.data[0];\n            const b21 = other.data[1];\n            //  const b31 = 0;\n            const b12 = other.data[2];\n            const b22 = other.data[3];\n            //  const b32 = 0;\n            const b13 = other.data[4];\n            const b23 = other.data[5];\n            //  const b33 = 1;\n            result.data[0] = a11 * b11 + a12 * b21; // + a13 * b31; // zero\n            result.data[1] = a21 * b11 + a22 * b21; // + a23 * b31; // zero\n            result.data[2] = a11 * b12 + a12 * b22; // + a13 * b32; // zero\n            result.data[3] = a21 * b12 + a22 * b22; // + a23 * b32; // zero\n            result.data[4] = a11 * b13 + a12 * b23 + a13; // * b33; // one\n            result.data[5] = a21 * b13 + a22 * b23 + a23; // * b33; // one\n            const signX = this._scaleSignX;\n            const signY = this._scaleSignY;\n            result._scaleSignX = signX * sign(result._scaleSignX);\n            result._scaleSignY = signY * sign(result._scaleSignY);\n            return result;\n        }\n    }\n    /**\n     * Packed array of length 8, that contains 4 vertices, with 2 components each\n     * So: [x0, y0, x1, y1, x2, y2, x3, y3]\n     * @param quad\n     */\n    multiplyQuadInPlace(quad) {\n        const resultTopLeftX = quad[0] * this.data[0] + quad[1] * this.data[2] + this.data[4];\n        const resultTopLeftY = quad[0] * this.data[1] + quad[1] * this.data[3] + this.data[5];\n        quad[0] = resultTopLeftX;\n        quad[1] = resultTopLeftY;\n        const resultTopRightX = quad[2] * this.data[0] + quad[3] * this.data[2] + this.data[4];\n        const resultTopRightY = quad[2] * this.data[1] + quad[3] * this.data[3] + this.data[5];\n        quad[2] = resultTopRightX;\n        quad[3] = resultTopRightY;\n        const resultBottomLeftX = quad[4] * this.data[0] + quad[5] * this.data[2] + this.data[4];\n        const resultBottomLeftY = quad[4] * this.data[1] + quad[5] * this.data[3] + this.data[5];\n        quad[4] = resultBottomLeftX;\n        quad[5] = resultBottomLeftY;\n        const resultBottomRightX = quad[6] * this.data[0] + quad[7] * this.data[2] + this.data[4];\n        const resultBottomRightY = quad[6] * this.data[1] + quad[7] * this.data[3] + this.data[5];\n        quad[6] = resultBottomRightX;\n        quad[7] = resultBottomRightY;\n    }\n    to4x4() {\n        const mat = new Matrix();\n        mat.data[0] = this.data[0];\n        mat.data[1] = this.data[1];\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = this.data[2];\n        mat.data[5] = this.data[3];\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = 1;\n        mat.data[11] = 0;\n        mat.data[12] = this.data[4];\n        mat.data[13] = this.data[5];\n        mat.data[14] = 0;\n        mat.data[15] = 1;\n        return mat;\n    }\n    setRotation(angle) {\n        const currentScale = this.getScale();\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * currentScale.x;\n        this.data[1] = sine * currentScale.y;\n        this.data[2] = -sine * currentScale.x;\n        this.data[3] = cosine * currentScale.y;\n    }\n    getRotation() {\n        const angle = Math.atan2(this.data[1] / this.getScaleY(), this.data[0] / this.getScaleX());\n        return canonicalizeAngle(angle);\n    }\n    getScaleX() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const xScaleSq = this.data[0] * this.data[0] + this.data[2] * this.data[2];\n        if (xScaleSq === 1.0) {\n            // usually there isn't scale so we can avoid a sqrt\n            return this._scaleSignX;\n        }\n        return this._scaleSignX * Math.sqrt(xScaleSq);\n    }\n    getScaleY() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const yScaleSq = this.data[1] * this.data[1] + this.data[3] * this.data[3];\n        if (yScaleSq === 1.0) {\n            // usually there isn't scale so we can avoid a sqrt\n            return this._scaleSignY;\n        }\n        return this._scaleSignY * Math.sqrt(yScaleSq);\n    }\n    /**\n     * Get the scale of the matrix\n     */\n    getScale() {\n        return vec(this.getScaleX(), this.getScaleY());\n    }\n    setScaleX(val) {\n        if (val === this._scale[0]) {\n            return;\n        }\n        this._scaleSignX = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const xscale = vec(this.data[0] * this._scaleSignX, this.data[2] * this._scaleSignX).normalize();\n        this.data[0] = xscale.x * val;\n        this.data[2] = xscale.y * val;\n        this._scale[0] = val;\n    }\n    setScaleY(val) {\n        if (val === this._scale[1]) {\n            return;\n        }\n        this._scaleSignY = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const yscale = vec(this.data[1] * this._scaleSignY, this.data[3] * this._scaleSignY).normalize();\n        this.data[1] = yscale.x * val;\n        this.data[3] = yscale.y * val;\n        this._scale[1] = val;\n    }\n    setScale(scale) {\n        this.setScaleX(scale.x);\n        this.setScaleY(scale.y);\n    }\n    isIdentity() {\n        return this.data[0] === 1 && this.data[1] === 0 && this.data[2] === 0 && this.data[3] === 1 && this.data[4] === 0 && this.data[5] === 0;\n    }\n    /**\n     * Resets the current matrix to the identity matrix, mutating it\n     * @returns {AffineMatrix} Current matrix as identity\n     */\n    reset() {\n        const mat = this;\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 1;\n        mat.data[4] = 0;\n        mat.data[5] = 0;\n        return mat;\n    }\n    /**\n     * Creates a new Matrix with the same data as the current {@apilink AffineMatrix}\n     */\n    clone(dest) {\n        const mat = dest || new AffineMatrix();\n        mat.data[0] = this.data[0];\n        mat.data[1] = this.data[1];\n        mat.data[2] = this.data[2];\n        mat.data[3] = this.data[3];\n        mat.data[4] = this.data[4];\n        mat.data[5] = this.data[5];\n        mat._scaleSignX = this._scaleSignX;\n        mat._scaleSignY = this._scaleSignY;\n        return mat;\n    }\n    toString() {\n        return `\r\n[${this.data[0]} ${this.data[2]} ${this.data[4]}]\r\n[${this.data[1]} ${this.data[3]} ${this.data[5]}]\r\n[0 0 1]\r\n`;\n    }\n}\n\n;// ./Util/RentalPool.ts\nclass RentalPool {\n    constructor(builder, cleaner, preAllocate = 1) {\n        this.builder = builder;\n        this.cleaner = cleaner;\n        this._pool = [];\n        this._size = 0;\n        this.grow(preAllocate);\n    }\n    /**\n     * Grow the pool size by an amount\n     * @param amount\n     */\n    grow(amount) {\n        if (amount > 0) {\n            this._size += amount;\n            for (let i = 0; i < amount; i++) {\n                this._pool.push(this.builder());\n            }\n        }\n    }\n    /**\n     * Rent an object from the pool, optionally clean it. If not cleaned previous state may be set.\n     *\n     * The pool will automatically double if depleted\n     * @param clean\n     */\n    rent(clean = false) {\n        if (this._pool.length === 0) {\n            this.grow(this._size);\n        }\n        return clean ? this.cleaner(this._pool.pop()) : this._pool.pop();\n    }\n    /**\n     * Return an object to the pool\n     * @param object\n     */\n    return(object) {\n        this._pool.push(object);\n    }\n}\n\n;// ./Graphics/Context/transform-stack.ts\n\n\nclass TransformStack {\n    constructor() {\n        this._pool = new RentalPool(() => AffineMatrix.identity(), (mat) => mat.reset(), 100);\n        this._transforms = [];\n        this._currentTransform = this._pool.rent(true);\n    }\n    save() {\n        this._transforms.push(this._currentTransform);\n        this._currentTransform = this._currentTransform.clone(this._pool.rent());\n    }\n    restore() {\n        this._pool.return(this._currentTransform);\n        this._currentTransform = this._transforms.pop();\n    }\n    translate(x, y) {\n        return this._currentTransform.translate(x, y);\n    }\n    rotate(angle) {\n        return this._currentTransform.rotate(angle);\n    }\n    scale(x, y) {\n        return this._currentTransform.scale(x, y);\n    }\n    reset() {\n        this._currentTransform.reset();\n    }\n    set current(matrix) {\n        this._currentTransform = matrix;\n    }\n    get current() {\n        return this._currentTransform;\n    }\n}\n\n;// ./Graphics/Context/state-stack.ts\n\n\nclass ContextState {\n    constructor() {\n        this.opacity = 1;\n        this.z = 0;\n        this.tint = Color.White;\n        this.material = null;\n    }\n}\nclass StateStack {\n    constructor() {\n        this._pool = new RentalPool(() => new ContextState(), (s) => {\n            s.opacity = 1;\n            s.z = 0;\n            s.tint = Color.White;\n            s.material = null;\n            return s;\n        }, 100);\n        this.current = this._pool.rent(true);\n        this._states = [];\n    }\n    _cloneState(dest) {\n        var _a;\n        dest.opacity = this.current.opacity;\n        dest.z = this.current.z;\n        dest.tint = (_a = this.current.tint) === null || _a === void 0 ? void 0 : _a.clone();\n        dest.material = this.current.material; // TODO is this going to cause problems when cloning\n        return dest;\n    }\n    save() {\n        this._states.push(this.current);\n        this.current = this._cloneState(this._pool.rent());\n    }\n    restore() {\n        this._pool.return(this.current);\n        this.current = this._states.pop();\n    }\n}\n\n;// ./Resources/Resource.ts\n\n\nconst ResourceEvents = {\n    Complete: 'complete',\n    Load: 'load',\n    LoadStart: 'loadstart',\n    Progress: 'progress',\n    Error: 'error'\n};\n/**\n * The {@apilink Resource} type allows games built in Excalibur to load generic resources.\n * For any type of remote resource it is recommended to use {@apilink Resource} for preloading.\n */\nclass Resource {\n    /**\n     * @param path          Path to the remote resource\n     * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\n     * @param bustCache     Whether or not to cache-bust requests\n     */\n    constructor(path, responseType, bustCache = false) {\n        this.path = path;\n        this.responseType = responseType;\n        this.bustCache = bustCache;\n        this.data = null;\n        this.logger = Logger.getInstance();\n        this.events = new EventEmitter();\n    }\n    /**\n     * Returns true if the Resource is completely loaded and is ready\n     * to be drawn.\n     */\n    isLoaded() {\n        return this.data !== null;\n    }\n    _cacheBust(uri) {\n        const query = /\\?\\w*=\\w*/;\n        if (query.test(uri)) {\n            uri += '&__=' + Date.now();\n        }\n        else {\n            uri += '?__=' + Date.now();\n        }\n        return uri;\n    }\n    /**\n     * Begin loading the resource and returns a promise to be resolved on completion\n     */\n    load() {\n        return new Promise((resolve, reject) => {\n            // Exit early if we already have data\n            if (this.data !== null) {\n                this.logger.debug('Already have data for resource', this.path);\n                this.events.emit('complete', this.data);\n                resolve(this.data);\n                return;\n            }\n            const request = new XMLHttpRequest();\n            request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\n            request.responseType = this.responseType;\n            request.addEventListener('loadstart', (e) => this.events.emit('loadstart', e));\n            request.addEventListener('progress', (e) => this.events.emit('progress', e));\n            request.addEventListener('error', (e) => this.events.emit('error', e));\n            request.addEventListener('load', (e) => this.events.emit('load', e));\n            request.addEventListener('load', () => {\n                // XHR on file:// success status is 0, such as with PhantomJS\n                if (request.status !== 0 && request.status !== 200) {\n                    this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\n                    this.events.emit('error', request.response);\n                    reject(new Error(request.statusText));\n                    return;\n                }\n                if (request.response instanceof Blob && request.response.type === 'text/html') {\n                    const errorText = `Expected blob (usually image) data from the server when loading ${this.path}, but got HTML content instead!\r\n\r\nCheck your server configuration, for example Vite serves static files from the /public folder`;\n                    this.events.emit('error', request.response);\n                    reject(new Error(errorText));\n                    return;\n                }\n                this.data = request.response;\n                this.events.emit('complete', this.data);\n                this.logger.debug('Completed loading resource', this.path);\n                resolve(this.data);\n            });\n            request.send();\n        });\n    }\n}\n\n;// ./Util/Watch.ts\n/**\n * Watch an object with a proxy, only fires if property value is different\n */\nfunction watch(type, change) {\n    if (!type) {\n        return type;\n    }\n    if (type.__isProxy === undefined) {\n        // expando hack to mark a proxy\n        return new Proxy(type, {\n            set: (obj, prop, value) => {\n                // The default behavior to store the value\n                if (obj[prop] !== value) {\n                    obj[prop] = value;\n                    // Avoid watching private junk\n                    if (typeof prop === 'string') {\n                        if (prop[0] !== '_') {\n                            change(obj);\n                        }\n                    }\n                }\n                // Indicate success\n                return true;\n            },\n            get: (obj, prop) => {\n                if (prop !== '__isProxy') {\n                    return obj[prop];\n                }\n                return true;\n            }\n        });\n    }\n    return type;\n}\nconst createHandler = (path = [], change, typeType) => ({\n    get: (target, key) => {\n        if (key === '__isProxy') {\n            return true;\n        }\n        if (typeof target[key] === 'object' && target[key] != null) {\n            return new Proxy(target[key], createHandler([...path, key], change, typeType));\n        }\n        return target[key];\n    },\n    set: (target, key, value) => {\n        if (typeof key === 'string') {\n            if (key[0] !== '_') {\n                change(typeType);\n            }\n        }\n        target[key] = value;\n        return true;\n    }\n});\n/**\n *\n */\nfunction watchDeep(type, change) {\n    if (!type) {\n        return type;\n    }\n    if (type.__isProxy === undefined) {\n        // expando hack to mark a proxy\n        return new Proxy(type, createHandler([], change, type));\n    }\n    return type;\n}\n/**\n * Watch an object with a proxy, fires change on any property value change\n */\nfunction watchAny(type, change) {\n    if (!type) {\n        return type;\n    }\n    if (type.__isProxy === undefined) {\n        // expando hack to mark a proxy\n        return new Proxy(type, {\n            set: (obj, prop, value) => {\n                // The default behavior to store the value\n                obj[prop] = value;\n                // Avoid watching private junk\n                if (typeof prop === 'string') {\n                    if (prop[0] !== '_') {\n                        change(obj);\n                    }\n                }\n                // Indicate success\n                return true;\n            },\n            get: (obj, prop) => {\n                if (prop !== '__isProxy') {\n                    return obj[prop];\n                }\n                return true;\n            }\n        });\n    }\n    return type;\n}\n\n;// ./Graphics/Graphic.ts\n\n\n\n\n/**\n * A Graphic is the base Excalibur primitive for something that can be drawn to the {@apilink ExcaliburGraphicsContext}.\n * {@apilink Sprite}, {@apilink Animation}, {@apilink GraphicsGroup}, {@apilink Canvas}, {@apilink Rectangle}, {@apilink Circle}, and {@apilink Polygon} all derive from the\n * {@apilink Graphic} abstract class.\n *\n * Implementors of a Graphic must override the abstract {@apilink Graphic._drawImage} method to render an image to the graphics context. Graphic\n * handles all the position, rotation, and scale transformations in {@apilink Graphic._preDraw} and {@apilink Graphic._postDraw}\n */\nclass Graphic {\n    isStale() {\n        return this._transformStale;\n    }\n    /**\n     * Gets or sets the flipHorizontal, which will flip the graphic horizontally (across the y axis)\n     */\n    get flipHorizontal() {\n        return this._flipHorizontal;\n    }\n    set flipHorizontal(value) {\n        this._flipHorizontal = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the flipVertical, which will flip the graphic vertically (across the x axis)\n     */\n    get flipVertical() {\n        return this._flipVertical;\n    }\n    set flipVertical(value) {\n        this._flipVertical = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the rotation of the graphic\n     */\n    get rotation() {\n        return this._rotation;\n    }\n    set rotation(value) {\n        this._rotation = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the scale of the graphic, this affects the width and\n     */\n    get scale() {\n        return this._scale;\n    }\n    set scale(value) {\n        this._scale = watch(value, () => {\n            this._transformStale = true;\n        });\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the origin of the graphic, if not set the center of the graphic is the origin\n     */\n    get origin() {\n        return this._origin;\n    }\n    set origin(value) {\n        if (value) {\n            this._origin = watch(value, () => {\n                this._transformStale = true;\n            });\n        }\n        this._transformStale = true;\n    }\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        this.id = Graphic._ID++;\n        this.transform = AffineMatrix.identity();\n        this._transformStale = true;\n        /**\n         * Gets or sets wether to show debug information about the graphic\n         */\n        this.showDebug = false;\n        this._flipHorizontal = false;\n        this._flipVertical = false;\n        this._rotation = 0;\n        /**\n         * Gets or sets the opacity of the graphic, 0 is transparent, 1 is solid (opaque).\n         */\n        this.opacity = 1;\n        this._scale = Vector.One;\n        this._width = 0;\n        this._height = 0;\n        if (options) {\n            this.origin = (_a = options.origin) !== null && _a !== void 0 ? _a : this.origin;\n            this.flipHorizontal = (_b = options.flipHorizontal) !== null && _b !== void 0 ? _b : this.flipHorizontal;\n            this.flipVertical = (_c = options.flipVertical) !== null && _c !== void 0 ? _c : this.flipVertical;\n            this.rotation = (_d = options.rotation) !== null && _d !== void 0 ? _d : this.rotation;\n            this.opacity = (_e = options.opacity) !== null && _e !== void 0 ? _e : this.opacity;\n            this.scale = (_f = options.scale) !== null && _f !== void 0 ? _f : this.scale;\n            this.tint = (_g = options.tint) !== null && _g !== void 0 ? _g : this.tint;\n            if (options.width) {\n                this._width = options.width;\n            }\n            if (options.height) {\n                this._height = options.height;\n            }\n        }\n    }\n    cloneGraphicOptions() {\n        return {\n            width: this.width / this.scale.x,\n            height: this.height / this.scale.y,\n            origin: this.origin ? this.origin.clone() : undefined,\n            flipHorizontal: this.flipHorizontal,\n            flipVertical: this.flipVertical,\n            rotation: this.rotation,\n            opacity: this.opacity,\n            scale: this.scale ? this.scale.clone() : undefined,\n            tint: this.tint ? this.tint.clone() : undefined\n        };\n    }\n    /**\n     * Gets or sets the width of the graphic (always positive)\n     */\n    get width() {\n        return Math.abs(this._width * this.scale.x);\n    }\n    /**\n     * Gets or sets the height of the graphic (always positive)\n     */\n    get height() {\n        return Math.abs(this._height * this.scale.y);\n    }\n    set width(value) {\n        this._width = value;\n        this._transformStale = true;\n    }\n    set height(value) {\n        this._height = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets a copy of the bounds in pixels occupied by the graphic on the the screen. This includes scale.\n     */\n    get localBounds() {\n        return BoundingBox.fromDimension(this.width, this.height, Vector.Zero);\n    }\n    /**\n     * Draw the whole graphic to the context including transform\n     * @param ex The excalibur graphics context\n     * @param x\n     * @param y\n     */\n    draw(ex, x, y) {\n        this._preDraw(ex, x, y);\n        this._drawImage(ex, 0, 0);\n        this._postDraw(ex);\n    }\n    /**\n     * Apply affine transformations to the graphics context to manipulate the graphic before {@apilink Graphic._drawImage}\n     * @param ex\n     * @param x\n     * @param y\n     */\n    _preDraw(ex, x, y) {\n        ex.save();\n        ex.translate(x, y);\n        if (this._transformStale) {\n            this.transform.reset();\n            this.transform.scale(Math.abs(this.scale.x), Math.abs(this.scale.y));\n            this._rotate(this.transform);\n            this._flip(this.transform);\n            this._transformStale = false;\n        }\n        ex.multiply(this.transform);\n        // it is important to multiply alphas so graphics respect the current context\n        ex.opacity = ex.opacity * this.opacity;\n        if (this.tint) {\n            ex.tint = this.tint;\n        }\n    }\n    _rotate(ex) {\n        var _a;\n        const scaleDirX = this.scale.x > 0 ? 1 : -1;\n        const scaleDirY = this.scale.y > 0 ? 1 : -1;\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : vec(this.width / 2, this.height / 2);\n        ex.translate(origin.x, origin.y);\n        ex.rotate(this.rotation);\n        // This is for handling direction changes 1 or -1, that way we don't have mismatched translates()\n        ex.scale(scaleDirX, scaleDirY);\n        ex.translate(-origin.x, -origin.y);\n    }\n    _flip(ex) {\n        if (this.flipHorizontal) {\n            ex.translate(this.width / this.scale.x, 0);\n            ex.scale(-1, 1);\n        }\n        if (this.flipVertical) {\n            ex.translate(0, this.height / this.scale.y);\n            ex.scale(1, -1);\n        }\n    }\n    /**\n     * Apply any additional work after {@apilink Graphic._drawImage} and restore the context state.\n     * @param ex\n     */\n    _postDraw(ex) {\n        if (this.showDebug) {\n            ex.debug.drawRect(0, 0, this.width, this.height);\n        }\n        ex.restore();\n    }\n}\nGraphic._ID = 0;\n\n;// ./Graphics/Sprite.ts\n\n\nclass Sprite extends Graphic {\n    static from(image, options) {\n        return new Sprite({\n            image,\n            ...options\n        });\n    }\n    constructor(options) {\n        var _a, _b;\n        super(options);\n        this._logger = Logger.getInstance();\n        this._dirty = true;\n        this.image = options.image;\n        const { width, height } = options;\n        this.sourceView = (_a = options.sourceView) !== null && _a !== void 0 ? _a : { x: 0, y: 0, width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\n        this.destSize = (_b = options.destSize) !== null && _b !== void 0 ? _b : { width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\n        this._updateSpriteDimensions();\n        // Fire when loaded\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.image.ready.then(() => {\n            this._updateSpriteDimensions();\n        });\n    }\n    get width() {\n        return Math.abs(this.destSize.width * this.scale.x);\n    }\n    get height() {\n        return Math.abs(this.destSize.height * this.scale.y);\n    }\n    set width(newWidth) {\n        newWidth /= Math.abs(this.scale.x);\n        this.destSize.width = newWidth;\n        super.width = Math.ceil(this.destSize.width);\n    }\n    set height(newHeight) {\n        newHeight /= Math.abs(this.scale.y);\n        this.destSize.height = newHeight;\n        super.height = Math.ceil(this.destSize.height);\n    }\n    _updateSpriteDimensions() {\n        var _a, _b, _c, _d, _e, _f;\n        const { width: nativeWidth, height: nativeHeight } = this.image;\n        // This code uses || to avoid 0's\n        // If the source is not specified, use the native dimension\n        this.sourceView.width = ((_a = this.sourceView) === null || _a === void 0 ? void 0 : _a.width) || nativeWidth;\n        this.sourceView.height = ((_b = this.sourceView) === null || _b === void 0 ? void 0 : _b.height) || nativeHeight;\n        // If the destination is not specified, use the source if specified, then native\n        this.destSize.width = ((_c = this.destSize) === null || _c === void 0 ? void 0 : _c.width) || ((_d = this.sourceView) === null || _d === void 0 ? void 0 : _d.width) || nativeWidth;\n        this.destSize.height = ((_e = this.destSize) === null || _e === void 0 ? void 0 : _e.height) || ((_f = this.sourceView) === null || _f === void 0 ? void 0 : _f.height) || nativeHeight;\n        this.width = Math.ceil(this.destSize.width) * this.scale.x;\n        this.height = Math.ceil(this.destSize.height) * this.scale.y;\n    }\n    _preDraw(ex, x, y) {\n        if (this.image.isLoaded() && this._dirty) {\n            this._dirty = false;\n            this._updateSpriteDimensions();\n        }\n        super._preDraw(ex, x, y);\n    }\n    _drawImage(ex, x, y) {\n        if (this.image.isLoaded()) {\n            ex.drawImage(this.image.image, this.sourceView.x, this.sourceView.y, this.sourceView.width, this.sourceView.height, x, y, this.destSize.width, this.destSize.height);\n        }\n        else {\n            this._logger.warnOnce(`ImageSource ${this.image.path}` +\n                ` is not yet loaded and won't be drawn. Please call .load() or include in a Loader.\\n\\n` +\n                `Read https://excaliburjs.com/docs/imagesource for more information.`);\n        }\n    }\n    clone() {\n        return new Sprite({\n            image: this.image,\n            sourceView: { ...this.sourceView },\n            destSize: { ...this.destSize },\n            ...this.cloneGraphicOptions()\n        });\n    }\n}\n\n;// ./Graphics/Filtering.ts\n/**\n * Describes the different image filtering modes\n */\nvar ImageFiltering;\n(function (ImageFiltering) {\n    /**\n     * Pixel is useful when you do not want smoothing aka antialiasing applied to your graphics.\n     *\n     * Useful for Pixel art aesthetics.\n     */\n    ImageFiltering[\"Pixel\"] = \"Pixel\";\n    /**\n     * Blended is useful when you have high resolution artwork and would like it blended and smoothed\n     */\n    ImageFiltering[\"Blended\"] = \"Blended\";\n})(ImageFiltering || (ImageFiltering = {}));\n/**\n * Parse the image filtering attribute value, if it doesn't match returns null\n */\nfunction parseImageFiltering(val) {\n    switch (val) {\n        case ImageFiltering.Pixel:\n            return ImageFiltering.Pixel;\n        case ImageFiltering.Blended:\n            return ImageFiltering.Blended;\n        default:\n            return undefined;\n    }\n}\n\n;// ./Graphics/Wrapping.ts\n/**\n * Describes the different image wrapping modes\n */\nvar ImageWrapping;\n(function (ImageWrapping) {\n    ImageWrapping[\"Clamp\"] = \"Clamp\";\n    ImageWrapping[\"Repeat\"] = \"Repeat\";\n    ImageWrapping[\"Mirror\"] = \"Mirror\";\n})(ImageWrapping || (ImageWrapping = {}));\n/**\n *\n */\nfunction parseImageWrapping(val) {\n    switch (val) {\n        case ImageWrapping.Clamp:\n            return ImageWrapping.Clamp;\n        case ImageWrapping.Repeat:\n            return ImageWrapping.Repeat;\n        case ImageWrapping.Mirror:\n            return ImageWrapping.Mirror;\n        default:\n            return ImageWrapping.Clamp;\n    }\n}\n\n;// ./Graphics/Context/texture-loader.ts\n\n\n\n/**\n * Manages loading image sources into webgl textures, a unique id is associated with all sources\n */\nclass TextureLoader {\n    constructor(gl, _garbageCollector) {\n        var _a;\n        this._garbageCollector = _garbageCollector;\n        this._textureMap = new Map();\n        /**\n         * Looks for textures that haven't been drawn in a while\n         */\n        this._collect = (image) => {\n            var _a;\n            if (this._gl) {\n                const name = (_a = image.dataset.originalSrc) !== null && _a !== void 0 ? _a : image.constructor.name;\n                TextureLoader._LOGGER.debug(`WebGL Texture for ${name} collected`);\n                this.delete(image);\n                return true;\n            }\n            return false;\n        };\n        this._gl = gl;\n        TextureLoader._MAX_TEXTURE_SIZE = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n        if (this._garbageCollector) {\n            TextureLoader._LOGGER.debug('WebGL Texture collection interval:', this._garbageCollector.collectionInterval);\n            (_a = this._garbageCollector.garbageCollector) === null || _a === void 0 ? void 0 : _a.registerCollector('texture', this._garbageCollector.collectionInterval, this._collect);\n        }\n    }\n    dispose() {\n        for (const [image] of this._textureMap) {\n            this.delete(image);\n        }\n        this._textureMap.clear();\n        this._gl = null;\n    }\n    /**\n     * Get the WebGL Texture from a source image\n     * @param image\n     */\n    get(image) {\n        return this._textureMap.get(image);\n    }\n    /**\n     * Returns whether a source image has been loaded as a texture\n     * @param image\n     */\n    has(image) {\n        return this._textureMap.has(image);\n    }\n    /**\n     * Loads a graphic into webgl and returns it's texture info, a webgl context must be previously registered\n     * @param image Source graphic\n     * @param options {ImageSourceOptions} Optionally configure the ImageFiltering and ImageWrapping mode to apply to the loaded texture\n     * @param forceUpdate Optionally force a texture to be reloaded, useful if the source graphic has changed\n     */\n    load(image, options, forceUpdate = false) {\n        var _a, _b;\n        // Ignore loading if webgl is not registered\n        const gl = this._gl;\n        if (!gl) {\n            return null;\n        }\n        const { filtering, wrapping } = { ...options };\n        let tex = null;\n        // If reuse the texture if it's from the same source\n        if (this.has(image)) {\n            tex = this.get(image);\n        }\n        // Update existing webgl texture and return early\n        if (tex) {\n            if (forceUpdate) {\n                gl.bindTexture(gl.TEXTURE_2D, tex);\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            }\n            (_a = this._garbageCollector) === null || _a === void 0 ? void 0 : _a.garbageCollector.touch(image);\n            return tex;\n        }\n        // No texture exists create a new one\n        tex = gl.createTexture();\n        // TODO implement texture gc with weakmap and timer\n        TextureLoader.checkImageSizeSupportedAndLog(image);\n        gl.bindTexture(gl.TEXTURE_2D, tex);\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n        let wrappingConfig;\n        if (wrapping) {\n            if (typeof wrapping === 'string') {\n                wrappingConfig = {\n                    x: wrapping,\n                    y: wrapping\n                };\n            }\n            else {\n                wrappingConfig = {\n                    x: wrapping.x,\n                    y: wrapping.y\n                };\n            }\n        }\n        const { x: xWrap, y: yWrap } = wrappingConfig !== null && wrappingConfig !== void 0 ? wrappingConfig : TextureLoader.wrapping;\n        switch (xWrap) {\n            case ImageWrapping.Clamp:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                break;\n            case ImageWrapping.Repeat:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n                break;\n            case ImageWrapping.Mirror:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.MIRRORED_REPEAT);\n                break;\n            default:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        }\n        switch (yWrap) {\n            case ImageWrapping.Clamp:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                break;\n            case ImageWrapping.Repeat:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n                break;\n            case ImageWrapping.Mirror:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.MIRRORED_REPEAT);\n                break;\n            default:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        }\n        // NEAREST for pixel art, LINEAR for hi-res\n        const filterMode = filtering !== null && filtering !== void 0 ? filtering : TextureLoader.filtering;\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        this._textureMap.set(image, tex);\n        (_b = this._garbageCollector) === null || _b === void 0 ? void 0 : _b.garbageCollector.addCollectableResource('texture', image);\n        return tex;\n    }\n    delete(image) {\n        // Ignore loading if webgl is not registered\n        const gl = this._gl;\n        if (!gl) {\n            return;\n        }\n        if (this.has(image)) {\n            const texture = this.get(image);\n            if (texture) {\n                this._textureMap.delete(image);\n                gl.deleteTexture(texture);\n            }\n        }\n    }\n    /**\n     * Takes an image and returns if it meets size criteria for hardware\n     * @param image\n     * @returns if the image will be supported at runtime\n     */\n    static checkImageSizeSupportedAndLog(image) {\n        var _a;\n        const originalSrc = (_a = image.dataset.originalSrc) !== null && _a !== void 0 ? _a : 'internal canvas bitmap';\n        if (image.width > TextureLoader._MAX_TEXTURE_SIZE || image.height > TextureLoader._MAX_TEXTURE_SIZE) {\n            TextureLoader._LOGGER.error(`The image [${originalSrc}] provided to Excalibur is too large for the device's maximum texture size of ` +\n                `(${TextureLoader._MAX_TEXTURE_SIZE}x${TextureLoader._MAX_TEXTURE_SIZE}) please resize to an image ` +\n                `for excalibur to render properly.\\n\\nImages will likely render as black rectangles.\\n\\n` +\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\n            return false;\n        }\n        else if (image.width > 4096 || image.height > 4096) {\n            // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits\n            TextureLoader._LOGGER.warn(`The image [${originalSrc}] provided to excalibur is too large may not work on all mobile devices, ` +\n                `it is recommended you resize images to a maximum (4096x4096).\\n\\n` +\n                `Images will likely render as black rectangles on some mobile platforms.\\n\\n` +\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\n        }\n        return true;\n    }\n}\nTextureLoader._LOGGER = Logger.getInstance();\n/**\n * Sets the default filtering for the Excalibur texture loader, default {@apilink ImageFiltering.Blended}\n */\nTextureLoader.filtering = ImageFiltering.Blended;\nTextureLoader.wrapping = { x: ImageWrapping.Clamp, y: ImageWrapping.Clamp };\nTextureLoader._MAX_TEXTURE_SIZE = 4096;\n\n;// ./Graphics/ImageSource.ts\n\n\n\n\n\n\n\nconst ImageSourceAttributeConstants = {\n    Filtering: 'filtering',\n    WrappingX: 'wrapping-x',\n    WrappingY: 'wrapping-y'\n};\nclass ImageSource {\n    /**\n     * The original size of the source image in pixels\n     */\n    get width() {\n        return this.image.naturalWidth;\n    }\n    /**\n     * The original height of the source image in pixels\n     */\n    get height() {\n        return this.image.naturalHeight;\n    }\n    /**\n     * Returns true if the Texture is completely loaded and is ready\n     * to be drawn.\n     */\n    isLoaded() {\n        if (!this._src) {\n            // this boosts speed of access\n            this._src = this.data.src;\n        }\n        return !!this._src;\n    }\n    get image() {\n        return this.data;\n    }\n    constructor(pathOrBase64, bustCacheOrOptions, filtering) {\n        this._logger = Logger.getInstance();\n        /**\n         * Access to the underlying html image element\n         */\n        this.data = new Image();\n        this._readyFuture = new Future();\n        /**\n         * Promise the resolves when the image is loaded and ready for use, does not initiate loading\n         */\n        this.ready = this._readyFuture.promise;\n        this.path = pathOrBase64;\n        let bustCache = false;\n        let wrapping;\n        if (typeof bustCacheOrOptions === 'boolean') {\n            bustCache = bustCacheOrOptions;\n        }\n        else {\n            ({ filtering, wrapping, bustCache } = { ...bustCacheOrOptions });\n        }\n        this._resource = new Resource(pathOrBase64, 'blob', bustCache);\n        this.filtering = filtering !== null && filtering !== void 0 ? filtering : this.filtering;\n        if (typeof wrapping === 'string') {\n            this.wrapping = {\n                x: wrapping,\n                y: wrapping\n            };\n        }\n        else {\n            this.wrapping = wrapping !== null && wrapping !== void 0 ? wrapping : this.wrapping;\n        }\n        if (pathOrBase64.endsWith('.gif')) {\n            this._logger.warn(`Use the ex.Gif type to load gifs, you may have mixed results with ${pathOrBase64} in ex.ImageSource. Fully supported: svg, jpg, bmp, and png`);\n        }\n    }\n    /**\n     * Create an ImageSource from and HTML <image> tag element\n     * @param image\n     */\n    static fromHtmlImageElement(image, options) {\n        const imageSource = new ImageSource('');\n        imageSource._src = 'image-element';\n        imageSource.data = image;\n        imageSource.data.setAttribute('data-original-src', 'image-element');\n        if (options === null || options === void 0 ? void 0 : options.filtering) {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, options === null || options === void 0 ? void 0 : options.filtering);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, ImageFiltering.Blended);\n        }\n        if (options === null || options === void 0 ? void 0 : options.wrapping) {\n            let wrapping;\n            if (typeof options.wrapping === 'string') {\n                wrapping = {\n                    x: options.wrapping,\n                    y: options.wrapping\n                };\n            }\n            else {\n                wrapping = {\n                    x: options.wrapping.x,\n                    y: options.wrapping.y\n                };\n            }\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, wrapping.x);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, wrapping.y);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, ImageWrapping.Clamp);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, ImageWrapping.Clamp);\n        }\n        TextureLoader.checkImageSizeSupportedAndLog(image);\n        imageSource._readyFuture.resolve(image);\n        return imageSource;\n    }\n    static fromHtmlCanvasElement(image, options) {\n        const imageSource = new ImageSource('');\n        imageSource._src = 'canvas-element-blob';\n        imageSource.data.setAttribute('data-original-src', 'canvas-element-blob');\n        if (options === null || options === void 0 ? void 0 : options.filtering) {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, options === null || options === void 0 ? void 0 : options.filtering);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, ImageFiltering.Blended);\n        }\n        if (options === null || options === void 0 ? void 0 : options.wrapping) {\n            let wrapping;\n            if (typeof options.wrapping === 'string') {\n                wrapping = {\n                    x: options.wrapping,\n                    y: options.wrapping\n                };\n            }\n            else {\n                wrapping = {\n                    x: options.wrapping.x,\n                    y: options.wrapping.y\n                };\n            }\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, wrapping.x);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, wrapping.y);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, ImageWrapping.Clamp);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, ImageWrapping.Clamp);\n        }\n        TextureLoader.checkImageSizeSupportedAndLog(image);\n        image.toBlob((blob) => {\n            // TODO throw? if blob null?\n            const url = URL.createObjectURL(blob);\n            imageSource.image.onload = () => {\n                // no longer need to read the blob so it's revoked\n                URL.revokeObjectURL(url);\n                imageSource.data = imageSource.image;\n                imageSource._readyFuture.resolve(imageSource.image);\n            };\n            imageSource.image.src = url;\n        });\n        return imageSource;\n    }\n    static fromSvgString(svgSource, options) {\n        const blob = new Blob([svgSource], { type: 'image/svg+xml' });\n        const url = URL.createObjectURL(blob);\n        return new ImageSource(url, options);\n    }\n    /**\n     * Should excalibur add a cache busting querystring? By default false.\n     * Must be set before loading\n     */\n    get bustCache() {\n        return this._resource.bustCache;\n    }\n    set bustCache(val) {\n        this._resource.bustCache = val;\n    }\n    /**\n     * Begins loading the image and returns a promise that resolves when the image is loaded\n     */\n    async load() {\n        var _a, _b, _c, _d;\n        if (this.isLoaded()) {\n            return this.data;\n        }\n        try {\n            // Load base64 or blob if needed\n            let url;\n            if (!this.path.includes('data:image/')) {\n                const blob = await this._resource.load();\n                url = URL.createObjectURL(blob);\n            }\n            else {\n                url = this.path;\n            }\n            // Decode the image\n            const image = new Image();\n            // Use Image.onload over Image.decode()\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=1055828#c7\n            // Otherwise chrome will throw still Image.decode() failures for large textures\n            const loadedFuture = new Future();\n            image.onload = () => loadedFuture.resolve();\n            image.src = url;\n            image.setAttribute('data-original-src', this.path);\n            await loadedFuture.promise;\n            // Set results\n            // We defer loading the texture into webgl until the first draw that way we avoid a singleton\n            // and for the multi-engine case the texture needs to be created in EACH webgl context to work\n            // See image-renderer.ts draw()\n            this.data = image;\n            // emit warning if potentially too big\n            TextureLoader.checkImageSizeSupportedAndLog(this.data);\n        }\n        catch (error) {\n            throw `Error loading ImageSource from path '${this.path}' with error [${error.message}]`;\n        }\n        // Do a bad thing to pass the filtering as an attribute\n        this.data.setAttribute(ImageSourceAttributeConstants.Filtering, this.filtering); // TODO fix type\n        this.data.setAttribute(ImageSourceAttributeConstants.WrappingX, (_b = (_a = this.wrapping) === null || _a === void 0 ? void 0 : _a.x) !== null && _b !== void 0 ? _b : ImageWrapping.Clamp);\n        this.data.setAttribute(ImageSourceAttributeConstants.WrappingY, (_d = (_c = this.wrapping) === null || _c === void 0 ? void 0 : _c.y) !== null && _d !== void 0 ? _d : ImageWrapping.Clamp);\n        // todo emit complete\n        this._readyFuture.resolve(this.data);\n        return this.data;\n    }\n    /**\n     * Build a sprite from this ImageSource\n     */\n    toSprite(options) {\n        return Sprite.from(this, options);\n    }\n    /**\n     * Unload images from memory\n     */\n    unload() {\n        this.data = new Image();\n    }\n}\n\n;// ./Graphics/SpriteFont.ts\n\n\n\n\nclass SpriteFont extends Graphic {\n    constructor(options) {\n        super(options);\n        this._text = '';\n        this.alphabet = '';\n        this.shadow = undefined;\n        this.caseInsensitive = false;\n        this.spacing = 0;\n        this.lineHeight = undefined;\n        this._logger = Logger.getInstance();\n        const { alphabet, spriteSheet, caseInsensitive, spacing, shadow, lineHeight } = options;\n        this.alphabet = alphabet;\n        this.spriteSheet = spriteSheet;\n        this.caseInsensitive = caseInsensitive !== null && caseInsensitive !== void 0 ? caseInsensitive : this.caseInsensitive;\n        this.spacing = spacing !== null && spacing !== void 0 ? spacing : this.spacing;\n        this.shadow = shadow !== null && shadow !== void 0 ? shadow : this.shadow;\n        this.lineHeight = lineHeight !== null && lineHeight !== void 0 ? lineHeight : this.lineHeight;\n    }\n    _getCharacterSprites(text) {\n        const results = [];\n        // handle case insensitive\n        const textToRender = this.caseInsensitive ? text.toLocaleLowerCase() : text;\n        const alphabet = this.caseInsensitive ? this.alphabet.toLocaleLowerCase() : this.alphabet;\n        // for each letter in text\n        for (let letterIndex = 0; letterIndex < textToRender.length; letterIndex++) {\n            // find the sprite index in alphabet , if there is an error pick the first\n            const letter = textToRender[letterIndex];\n            let spriteIndex = alphabet.indexOf(letter);\n            if (spriteIndex === -1) {\n                spriteIndex = 0;\n                this._logger.warnOnce(`SpriteFont - Cannot find letter '${letter}' in configured alphabet '${alphabet}'.`);\n                this._logger.warnOnce('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\n            }\n            const letterSprite = this.spriteSheet.sprites[spriteIndex];\n            if (letterSprite) {\n                results.push(letterSprite);\n            }\n            else {\n                this._logger.warnOnce(`SpriteFont - Cannot find sprite for '${letter}' at index '${spriteIndex}' in configured SpriteSheet`);\n                this._logger.warnOnce('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\n            }\n        }\n        return results;\n    }\n    measureText(text, maxWidth) {\n        const lines = this._getLinesFromText(text, maxWidth);\n        const maxWidthLine = lines.reduce((a, b) => {\n            return a.length > b.length ? a : b;\n        });\n        const sprites = this._getCharacterSprites(maxWidthLine);\n        let width = 0;\n        let height = 0;\n        for (const sprite of sprites) {\n            width += sprite.width + this.spacing;\n            height = Math.max(height, sprite.height);\n        }\n        return BoundingBox.fromDimension(width * this.scale.x, height * lines.length * this.scale.y, Vector.Zero);\n    }\n    _drawImage(ex, x, y, maxWidth) {\n        var _a;\n        let xCursor = 0;\n        let yCursor = 0;\n        let height = 0;\n        const lines = this._getLinesFromText(this._text, maxWidth);\n        for (const line of lines) {\n            for (const sprite of this._getCharacterSprites(line)) {\n                // draw it in the right spot and increase the cursor by sprite width\n                sprite.draw(ex, x + xCursor, y + yCursor);\n                xCursor += sprite.width + this.spacing;\n                height = Math.max(height, sprite.height);\n            }\n            xCursor = 0;\n            yCursor += (_a = this.lineHeight) !== null && _a !== void 0 ? _a : height;\n        }\n    }\n    render(ex, text, _color, x, y, maxWidth) {\n        // SpriteFont doesn't support _color, yet...\n        this._text = text;\n        const bounds = this.measureText(text, maxWidth);\n        this.width = bounds.width;\n        this.height = bounds.height;\n        if (this.shadow) {\n            ex.save();\n            ex.translate(this.shadow.offset.x, this.shadow.offset.y);\n            this._preDraw(ex, x, y);\n            this._drawImage(ex, 0, 0, maxWidth);\n            this._postDraw(ex);\n            ex.restore();\n        }\n        this._preDraw(ex, x, y);\n        this._drawImage(ex, 0, 0, maxWidth);\n        this._postDraw(ex);\n    }\n    clone() {\n        return new SpriteFont({\n            alphabet: this.alphabet,\n            spriteSheet: this.spriteSheet,\n            spacing: this.spacing\n        });\n    }\n    _getLinesFromText(text, maxWidth) {\n        var _a;\n        if (this._cachedText === text && this._cachedRenderWidth === maxWidth && ((_a = this._cachedLines) === null || _a === void 0 ? void 0 : _a.length)) {\n            return this._cachedLines;\n        }\n        const lines = text.split('\\n');\n        if (maxWidth == null) {\n            return lines;\n        }\n        // If the current line goes past the maxWidth, append a new line without modifying the underlying text.\n        for (let i = 0; i < lines.length; i++) {\n            let line = lines[i];\n            let newLine = '';\n            // Note: we subtract the spacing to counter the initial padding on the left side.\n            if (this.measureText(line).width > maxWidth) {\n                while (this.measureText(line).width > maxWidth) {\n                    newLine = line[line.length - 1] + newLine;\n                    line = line.slice(0, -1); // Remove last character from line\n                }\n                // Update the array with our new values\n                lines[i] = line;\n                lines[i + 1] = newLine;\n            }\n        }\n        this._cachedText = text;\n        this._cachedLines = lines;\n        this._cachedRenderWidth = maxWidth;\n        return lines;\n    }\n}\n\n;// ./Graphics/TiledSprite.ts\n\n\n\n\nclass TiledSprite extends Sprite {\n    constructor(options) {\n        super({\n            image: options.image,\n            sourceView: options.sourceView,\n            destSize: { width: options.width, height: options.height },\n            flipHorizontal: options.flipHorizontal,\n            flipVertical: options.flipVertical,\n            rotation: options.rotation,\n            scale: options.scale,\n            opacity: options.opacity,\n            tint: options.tint,\n            origin: options.origin\n        });\n        this._ready = new Future();\n        this.ready = this._ready.promise;\n        this._options = options;\n        if (this.image.isLoaded()) {\n            this._applyTiling();\n        }\n        else {\n            this.image.ready.then(() => this._applyTiling());\n        }\n    }\n    static fromSprite(sprite, options) {\n        return new TiledSprite({\n            sourceView: { ...sprite.sourceView },\n            width: sprite.width,\n            height: sprite.height,\n            ...options,\n            image: sprite.image\n        });\n    }\n    _applyTiling() {\n        const { width, height, filtering, wrapping } = { ...this._options };\n        const spriteCanvas = document.createElement('canvas');\n        spriteCanvas.width = this.sourceView.width;\n        spriteCanvas.height = this.sourceView.height;\n        const spriteCtx = spriteCanvas.getContext('2d');\n        // prettier-ignore\n        spriteCtx.drawImage(this.image.image, this.sourceView.x, this.sourceView.y, this.sourceView.width, this.sourceView.height, 0, 0, this.sourceView.width, this.sourceView.height);\n        // prettier-ignore\n        const tiledImageSource = ImageSource.fromHtmlCanvasElement(spriteCanvas, {\n            wrapping: wrapping !== null && wrapping !== void 0 ? wrapping : ImageWrapping.Repeat,\n            filtering\n        });\n        if (width) {\n            this.destSize.width = width;\n            this.sourceView.width = width;\n        }\n        if (height) {\n            this.destSize.height = height;\n            this.sourceView.height = height;\n        }\n        this.sourceView.x = 0;\n        this.sourceView.y = 0;\n        this.image = tiledImageSource;\n        // this._ready.resolve();\n        this.image.ready.then(() => this._ready.resolve());\n    }\n}\n\n;// ./Graphics/SpriteSheet.ts\n\n\n/**\n * Represents a collection of sprites from a source image with some organization in a grid\n */\nclass SpriteSheet {\n    /**\n     * Build a new sprite sheet from a list of sprites\n     *\n     * Use {@apilink SpriteSheet.fromImageSource} to create a SpriteSheet from an {@apilink ImageSource} organized in a grid\n     * @param options\n     */\n    constructor(options) {\n        this.sprites = [];\n        const { sprites, rows, columns } = options;\n        this.sprites = sprites;\n        this.rows = rows !== null && rows !== void 0 ? rows : 1;\n        this.columns = columns !== null && columns !== void 0 ? columns : this.sprites.length;\n    }\n    /**\n     * Find a sprite by their x/y integer coordinates in the SpriteSheet, for example `getSprite(0, 0)` is the {@apilink Sprite} in the top-left\n     * and `getSprite(1, 0)` is the sprite one to the right.\n     * @param x\n     * @param y\n     */\n    getSprite(x, y, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (x >= this.columns || x < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), x: ${x} should be between 0 and ${this.columns - 1} columns`);\n        }\n        if (y >= this.rows || y < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), y: ${y} should be between 0 and ${this.rows - 1} rows`);\n        }\n        const spriteIndex = x + y * this.columns;\n        const sprite = this.sprites[spriteIndex];\n        if (sprite) {\n            if (options) {\n                const spriteWithOptions = sprite.clone();\n                spriteWithOptions.flipHorizontal = (_a = options.flipHorizontal) !== null && _a !== void 0 ? _a : spriteWithOptions.flipHorizontal;\n                spriteWithOptions.flipVertical = (_b = options.flipVertical) !== null && _b !== void 0 ? _b : spriteWithOptions.flipVertical;\n                spriteWithOptions.width = (_c = options.width) !== null && _c !== void 0 ? _c : spriteWithOptions.width;\n                spriteWithOptions.height = (_d = options.height) !== null && _d !== void 0 ? _d : spriteWithOptions.height;\n                spriteWithOptions.rotation = (_e = options.rotation) !== null && _e !== void 0 ? _e : spriteWithOptions.rotation;\n                spriteWithOptions.scale = (_f = options.scale) !== null && _f !== void 0 ? _f : spriteWithOptions.scale;\n                spriteWithOptions.opacity = (_g = options.opacity) !== null && _g !== void 0 ? _g : spriteWithOptions.opacity;\n                spriteWithOptions.tint = (_h = options.tint) !== null && _h !== void 0 ? _h : spriteWithOptions.tint;\n                spriteWithOptions.origin = (_j = options.origin) !== null && _j !== void 0 ? _j : spriteWithOptions.origin;\n                return spriteWithOptions;\n            }\n            return sprite;\n        }\n        throw Error(`Invalid sprite coordinates (${x}, ${y})`);\n    }\n    /**\n     * Find a sprite by their x/y integer coordinates in the SpriteSheet and configures tiling to repeat by default,\n     * for example `getTiledSprite(0, 0)` is the {@apilink TiledSprite} in the top-left\n     * and `getTiledSprite(1, 0)` is the sprite one to the right.\n     *\n     * Example:\n     *\n     * ```typescript\n     * spriteSheet.getTiledSprite(1, 0, {\n     * width: game.screen.width,\n     * height: 200,\n     * wrapping: {\n     * x: ex.ImageWrapping.Repeat,\n     * y: ex.ImageWrapping.Clamp\n     * }\n     * });\n     * ```\n     * @param x\n     * @param y\n     * @param options\n     */\n    getTiledSprite(x, y, options) {\n        if (x >= this.columns || x < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), x: ${x} should be between 0 and ${this.columns - 1} columns`);\n        }\n        if (y >= this.rows || y < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), y: ${y} should be between 0 and ${this.rows - 1} rows`);\n        }\n        const spriteIndex = x + y * this.columns;\n        const sprite = this.sprites[spriteIndex];\n        if (sprite) {\n            return TiledSprite.fromSprite(sprite, options);\n        }\n        throw Error(`Invalid sprite coordinates (${x}, ${y})`);\n    }\n    /**\n     * Create a sprite sheet from a sparse set of {@apilink SourceView} rectangles\n     * @param options\n     */\n    static fromImageSourceWithSourceViews(options) {\n        const sprites = options.sourceViews.map((sourceView) => {\n            return new Sprite({\n                image: options.image,\n                sourceView\n            });\n        });\n        return new SpriteSheet({ sprites });\n    }\n    /**\n     * Create a SpriteSheet from an {@apilink ImageSource} organized in a grid\n     *\n     * Example:\n     * ```\n     * const spriteSheet = SpriteSheet.fromImageSource({\n     *   image: imageSource,\n     *   grid: {\n     *     rows: 5,\n     *     columns: 2,\n     *     spriteWidth: 32, // pixels\n     *     spriteHeight: 32 // pixels\n     *   },\n     *   // Optionally specify spacing\n     *   spacing: {\n     *     // pixels from the top left to start the sprite parsing\n     *     originOffset: {\n     *       x: 5,\n     *       y: 5\n     *     },\n     *     // pixels between each sprite while parsing\n     *     margin: {\n     *       x: 1,\n     *       y: 1\n     *     }\n     *   }\n     * })\n     * ```\n     * @param options\n     */\n    static fromImageSource(options) {\n        var _a;\n        const sprites = [];\n        options.spacing = (_a = options.spacing) !== null && _a !== void 0 ? _a : {};\n        const { image, grid: { rows, columns: cols, spriteWidth, spriteHeight }, spacing: { originOffset, margin } } = options;\n        const offsetDefaults = { x: 0, y: 0, ...originOffset };\n        const marginDefaults = { x: 0, y: 0, ...margin };\n        for (let x = 0; x < cols; x++) {\n            for (let y = 0; y < rows; y++) {\n                sprites[x + y * cols] = new Sprite({\n                    image: image,\n                    sourceView: {\n                        x: x * spriteWidth + marginDefaults.x * x + offsetDefaults.x,\n                        y: y * spriteHeight + marginDefaults.y * y + offsetDefaults.y,\n                        width: spriteWidth,\n                        height: spriteHeight\n                    },\n                    destSize: { height: spriteHeight, width: spriteWidth }\n                });\n            }\n        }\n        return new SpriteSheet({\n            sprites: sprites,\n            rows: rows,\n            columns: cols\n        });\n    }\n    clone() {\n        return new SpriteSheet({\n            sprites: this.sprites.map((sprite) => sprite.clone()),\n            rows: this.rows,\n            columns: this.columns\n        });\n    }\n}\n\n;// ./Graphics/Context/debug-font.png\n/* harmony default export */ const debug_font = (\"data:image/png;base64,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\");\n;// ./Graphics/Context/debug-text.ts\n\n\n\n\n/**\n * Internal debug text helper\n */\nclass DebugText {\n    constructor() {\n        /**\n         * base64 font\n         */\n        this.fontSheet = debug_font;\n        this.size = 16;\n        // We fire and forget, we don't care if it's loaded or not\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.load();\n    }\n    load() {\n        this._imageSource = new ImageSource(this.fontSheet);\n        return this._imageSource.load().then(() => {\n            this._spriteSheet = SpriteSheet.fromImageSource({\n                image: this._imageSource,\n                grid: {\n                    rows: 4,\n                    columns: 16,\n                    spriteWidth: 16,\n                    spriteHeight: 16\n                }\n            });\n            this._spriteFont = new SpriteFont({\n                alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!\\'&.\"?-()+# ',\n                caseInsensitive: true,\n                spriteSheet: this._spriteSheet,\n                spacing: -6\n            });\n        });\n    }\n    /**\n     * Writes debug text using the built in sprint font\n     * @param ctx\n     * @param text\n     * @param pos\n     */\n    write(ctx, text, pos) {\n        if (this._imageSource.isLoaded()) {\n            this._spriteFont.render(ctx, text, null, pos.x, pos.y);\n        }\n    }\n}\n\n;// ./Graphics/Context/render-source.ts\nclass RenderSource {\n    constructor(_gl, _texture) {\n        this._gl = _gl;\n        this._texture = _texture;\n    }\n    use() {\n        const gl = this._gl;\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\n    }\n    disable() {\n        const gl = this._gl;\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n}\n\n;// ./Graphics/Context/render-target.ts\n\nclass RenderTarget {\n    constructor(options) {\n        var _a, _b;\n        this.antialias = false;\n        this.samples = 1;\n        this._gl = options.gl;\n        this.width = options.width;\n        this.height = options.height;\n        this.transparency = options.transparency;\n        this.antialias = (_a = options.antialias) !== null && _a !== void 0 ? _a : this.antialias;\n        this.samples = (_b = options.samples) !== null && _b !== void 0 ? _b : this._gl.getParameter(this._gl.MAX_SAMPLES);\n        const gl = this._gl;\n        // Determine current context format for blitting later needs to match\n        if (gl.drawingBufferFormat) {\n            this.bufferFormat = gl.drawingBufferFormat;\n        }\n        else {\n            // Documented in webgl spec\n            // https://registry.khronos.org/webgl/specs/latest/1.0/\n            if (this.transparency) {\n                this.bufferFormat = gl.RGBA8;\n            }\n            else {\n                this.bufferFormat = gl.RGB8;\n            }\n        }\n        this._setupRenderBuffer();\n        this._setupFramebuffer();\n    }\n    setResolution(width, height) {\n        const gl = this._gl;\n        this.width = width;\n        this.height = height;\n        // update backing texture size\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // update render buffer size\n        if (this._renderBuffer) {\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this._renderBuffer);\n            gl.renderbufferStorageMultisample(gl.RENDERBUFFER, Math.min(this.samples, gl.getParameter(gl.MAX_SAMPLES)), this.bufferFormat, this.width, this.height);\n        }\n    }\n    get renderBuffer() {\n        return this._renderBuffer;\n    }\n    get renderFrameBuffer() {\n        return this._renderFrameBuffer;\n    }\n    get frameBuffer() {\n        return this._frameBuffer;\n    }\n    get frameTexture() {\n        return this._frameTexture;\n    }\n    _setupRenderBuffer() {\n        if (this.antialias) {\n            const gl = this._gl;\n            // Render buffers can be used as an input to a shader\n            this._renderBuffer = gl.createRenderbuffer();\n            this._renderFrameBuffer = gl.createFramebuffer();\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this._renderBuffer);\n            gl.renderbufferStorageMultisample(gl.RENDERBUFFER, Math.min(this.samples, gl.getParameter(gl.MAX_SAMPLES)), this.bufferFormat, this.width, this.height);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this._renderFrameBuffer);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, this._renderBuffer);\n        }\n    }\n    _setupFramebuffer() {\n        // Allocates frame buffer\n        const gl = this._gl;\n        this._frameTexture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // set the filtering so we don't need mips\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        // attach the texture as the first color attachment\n        const attachmentPoint = gl.COLOR_ATTACHMENT0;\n        // After this bind all draw calls will draw to this framebuffer texture\n        this._frameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, this._frameTexture, 0);\n        // Reset after initialized\n        this.disable();\n    }\n    toRenderSource() {\n        if (this.renderBuffer) {\n            this.blitRenderBufferToFrameBuffer();\n        }\n        const source = new RenderSource(this._gl, this._frameTexture);\n        return source;\n    }\n    blitToScreen() {\n        const gl = this._gl;\n        // set to size of canvas's drawingBuffer\n        if (this._renderBuffer) {\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.renderFrameBuffer);\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);\n            gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 1.0, 1.0]);\n            gl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n        }\n        else {\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.frameBuffer);\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);\n            gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 1.0, 1.0]);\n            gl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n        }\n    }\n    blitRenderBufferToFrameBuffer() {\n        if (this._renderBuffer) {\n            const gl = this._gl;\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.renderFrameBuffer);\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.frameBuffer);\n            gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 1.0, 1.0]);\n            gl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n        }\n    }\n    copyToTexture(texture) {\n        const gl = this._gl;\n        if (this._renderBuffer) {\n            this.blitRenderBufferToFrameBuffer();\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.copyTexImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 0, 0, this.width, this.height, 0);\n    }\n    /**\n     * When called, all drawing gets redirected to this render target\n     */\n    use() {\n        const gl = this._gl;\n        if (this.antialias) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this._renderFrameBuffer);\n        }\n        else {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n        }\n        // very important to set the viewport to the size of the framebuffer texture\n        gl.viewport(0, 0, this.width, this.height);\n    }\n    /**\n     * When called, all drawing is sent back to the canvas\n     */\n    disable() {\n        const gl = this._gl;\n        // passing null switches rendering back to the canvas\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n}\n\n;// ./Graphics/Context/line-renderer/line-vertex.glsl\n/* harmony default export */ const line_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\nin vec4 a_color;\\r\\n\\r\\nout lowp vec4 v_color;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Passthrough the color\\r\\n   v_color = a_color;\\r\\n}\");\n;// ./Graphics/Context/line-renderer/line-fragment.glsl\n/* harmony default export */ const line_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// Color\\r\\nin lowp vec4 v_color;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  fragColor = v_color;\\r\\n}\");\n;// ./Graphics/Context/webgl-util.ts\n/**\n * Return the size of the GlType in bytes\n * @param gl\n * @param type\n */\nfunction getGlTypeSizeBytes(gl, type) {\n    switch (type) {\n        case gl.INT:\n        case gl.UNSIGNED_INT:\n        case gl.FLOAT:\n            return 4;\n        case gl.SHORT:\n            return 2;\n        case gl.UNSIGNED_SHORT:\n            return 2;\n        case gl.BYTE:\n            return 1;\n        case gl.UNSIGNED_BYTE:\n            return 1;\n        default:\n            return 1;\n    }\n}\n/**\n * Checks if an attribute is present in vertex source\n */\nfunction isAttributeInSource(source, variable) {\n    const attributeRegexTemplate = `(?<type>[a-z0-9]+)\\\\s+${variable};`;\n    const regex = new RegExp(attributeRegexTemplate, 'g');\n    const matches = regex.exec(source);\n    return (matches === null || matches === void 0 ? void 0 : matches.length) > 0;\n}\n/**\n * Attempt to discern the glType of an attribute from vertex source\n * @param gl\n * @param source\n * @param variable\n */\nfunction getGLTypeFromSource(gl, source, variable) {\n    var _a;\n    const attributeRegexTemplate = `(?<type>[a-z0-9]+)\\\\s+${variable};`;\n    const regex = new RegExp(attributeRegexTemplate, 'g');\n    const matches = regex.exec(source);\n    const type = (_a = matches === null || matches === void 0 ? void 0 : matches.groups) === null || _a === void 0 ? void 0 : _a.type;\n    switch (type) {\n        case 'float':\n        case 'vec2':\n        case 'vec3':\n        case 'vec4':\n            return gl.FLOAT;\n        case 'int':\n        case 'ivec2':\n        case 'ivec3':\n        case 'ivec4':\n            return gl.INT;\n        case 'uint':\n        case 'uvec2':\n        case 'uvec3':\n        case 'uvec4':\n            return gl.UNSIGNED_INT;\n        case 'bool':\n        case 'bvec2':\n        case 'bvec3':\n        case 'bvec4':\n            return gl.BOOL;\n        case 'short':\n            return gl.SHORT;\n        case 'ushort':\n            return gl.UNSIGNED_SHORT;\n        case 'ubyte':\n            return gl.UNSIGNED_BYTE;\n        case 'byte':\n            return gl.BYTE;\n        default:\n            return gl.FLOAT;\n    }\n}\n/**\n * Based on the type return the number of attribute components\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\n * @param gl\n * @param type\n */\nfunction getAttributeComponentSize(gl, type) {\n    switch (type) {\n        case gl.LOW_FLOAT:\n        case gl.HIGH_FLOAT:\n        case gl.FLOAT:\n            return 1;\n        case gl.FLOAT_VEC2:\n            return 2;\n        case gl.FLOAT_VEC3:\n            return 3;\n        case gl.FLOAT_VEC4:\n            return 4;\n        case gl.BYTE:\n            return 1;\n        case gl.UNSIGNED_BYTE:\n            return 1;\n        case gl.UNSIGNED_SHORT:\n        case gl.SHORT:\n            return 1;\n        default:\n            return 1;\n    }\n}\n/**\n * Based on the attribute return the corresponding supported attrib pointer type\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\n * @param gl\n * @param type\n */\nfunction getAttributePointerType(gl, type) {\n    switch (type) {\n        case gl.LOW_FLOAT:\n        case gl.HIGH_FLOAT:\n        case gl.FLOAT:\n        case gl.FLOAT_VEC2:\n        case gl.FLOAT_VEC3:\n        case gl.FLOAT_VEC4:\n            return gl.FLOAT;\n        case gl.BYTE:\n            return gl.BYTE;\n        case gl.UNSIGNED_BYTE:\n            return gl.UNSIGNED_BYTE;\n        case gl.SHORT:\n            return gl.SHORT;\n        case gl.UNSIGNED_SHORT:\n            return gl.UNSIGNED_SHORT;\n        default:\n            return gl.FLOAT;\n    }\n}\n/**\n *\n */\nfunction getMaxShaderComplexity(gl, numIfs) {\n    const assembleTestShader = (numIfs) => {\n        const testShader = `#version 300 es\r\n    precision mediump float;\r\n    out vec4 fragColor;\r\n    void main() {\r\n      float index = 1.01;\r\n      %%complexity%%\r\n    }`;\n        let testComplexity = '';\n        for (let i = 0; i < numIfs; i++) {\n            if (i === 0) {\n                testComplexity += `if (index <= ${i}.5) {\\n`;\n            }\n            else {\n                testComplexity += `   else if (index <= ${i}.5) {\\n`;\n            }\n            testComplexity += `      fragColor = vec4(1.0);\\n`;\n            testComplexity += `   }\\n`;\n        }\n        return testShader.replace('%%complexity%%', testComplexity);\n    };\n    let canCompile = false;\n    do {\n        const test = assembleTestShader(numIfs);\n        const shader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(shader, test);\n        gl.compileShader(shader);\n        canCompile = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (!canCompile) {\n            numIfs = (numIfs / 2) | 0;\n        }\n    } while (!canCompile);\n    return numIfs;\n}\n\n;// ./Graphics/Context/shader.ts\n\n\nclass Shader {\n    get compiled() {\n        return this._compiled;\n    }\n    /**\n     * Create a shader program in excalibur\n     * @param options specify shader vertex and fragment source\n     */\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this.uniforms = {};\n        this.attributes = {};\n        this._compiled = false;\n        const { gl, vertexSource, fragmentSource, onPreLink, onPostCompile } = options;\n        this._gl = gl;\n        this.vertexSource = vertexSource;\n        this.fragmentSource = fragmentSource;\n        this._onPreLink = onPreLink;\n        this._onPostCompile = onPostCompile;\n    }\n    dispose() {\n        const gl = this._gl;\n        gl.deleteProgram(this.program);\n        this._gl = null;\n    }\n    /**\n     * Binds the shader program\n     */\n    use() {\n        const gl = this._gl;\n        gl.useProgram(this.program);\n        Shader._ACTIVE_SHADER_INSTANCE = this;\n    }\n    isCurrentlyBound() {\n        return Shader._ACTIVE_SHADER_INSTANCE === this;\n    }\n    /**\n     * Compile the current shader against a webgl context\n     */\n    compile() {\n        const gl = this._gl;\n        const vertexShader = this._compileShader(gl, this.vertexSource, gl.VERTEX_SHADER);\n        const fragmentShader = this._compileShader(gl, this.fragmentSource, gl.FRAGMENT_SHADER);\n        this.program = this._createProgram(gl, vertexShader, fragmentShader);\n        const attributes = this.getAttributes();\n        for (const attribute of attributes) {\n            this.attributes[attribute.name] = attribute;\n        }\n        const uniforms = this.getUniforms();\n        for (const uniform of uniforms) {\n            this.uniforms[uniform.name] = uniform;\n        }\n        this._compiled = true;\n        if (this._onPostCompile) {\n            this._onPostCompile(this);\n        }\n        return this.program;\n    }\n    getUniforms() {\n        const gl = this._gl;\n        const uniformCount = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);\n        const uniforms = [];\n        for (let i = 0; i < uniformCount; i++) {\n            const uniform = gl.getActiveUniform(this.program, i);\n            const uniformLocation = gl.getUniformLocation(this.program, uniform.name);\n            uniforms.push({\n                name: uniform.name,\n                glType: uniform.type,\n                location: uniformLocation\n            });\n        }\n        return uniforms;\n    }\n    getAttributes() {\n        const gl = this._gl;\n        const attributeCount = gl.getProgramParameter(this.program, gl.ACTIVE_ATTRIBUTES);\n        const attributes = [];\n        for (let i = 0; i < attributeCount; i++) {\n            const attribute = gl.getActiveAttrib(this.program, i);\n            const attributeLocation = gl.getAttribLocation(this.program, attribute.name);\n            attributes.push({\n                name: attribute.name,\n                glType: getAttributePointerType(gl, attribute.type),\n                size: getAttributeComponentSize(gl, attribute.type),\n                location: attributeLocation,\n                normalized: false\n            });\n        }\n        return attributes;\n    }\n    /**\n     * Set a texture in a gpu texture slot\n     * @param slotNumber\n     * @param texture\n     */\n    setTexture(slotNumber, texture) {\n        const gl = this._gl;\n        gl.activeTexture(gl.TEXTURE0 + slotNumber);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n    }\n    /**\n     * Set an integer uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformInt(name, value) {\n        this.setUniform('uniform1i', name, ~~value);\n    }\n    /**\n     * Set an integer uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformInt(name, value) {\n        return this.trySetUniform('uniform1i', name, ~~value);\n    }\n    /**\n     * Set an integer array uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformIntArray(name, value) {\n        this.setUniform('uniform1iv', name, value);\n    }\n    /**\n     * Set an integer array uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformIntArray(name, value) {\n        return this.trySetUniform('uniform1iv', name, value);\n    }\n    /**\n     * Set a boolean uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformBoolean(name, value) {\n        this.setUniform('uniform1i', name, value ? 1 : 0);\n    }\n    /**\n     * Set a boolean uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformBoolean(name, value) {\n        return this.trySetUniform('uniform1i', name, value ? 1 : 0);\n    }\n    /**\n     * Set a float uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloat(name, value) {\n        this.setUniform('uniform1f', name, value);\n    }\n    /**\n     * Set a float uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloat(name, value) {\n        return this.trySetUniform('uniform1f', name, value);\n    }\n    /**\n     * Set a float array uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloatArray(name, value) {\n        this.setUniform('uniform1fv', name, value);\n    }\n    /**\n     * Set a float array uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloatArray(name, value) {\n        return this.trySetUniform('uniform1fv', name, value);\n    }\n    /**\n     * Set a {@apilink Vector} uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloatVector(name, value) {\n        this.setUniform('uniform2f', name, value.x, value.y);\n    }\n    /**\n     * Set a {@apilink Vector} uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloatVector(name, value) {\n        return this.trySetUniform('uniform2f', name, value.x, value.y);\n    }\n    /**\n     * Set a {@apilink Color} uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloatColor(name, value) {\n        this.setUniform('uniform4f', name, value.r / 255, value.g / 255, value.b / 255, value.a);\n    }\n    /**\n     * Set a {@apilink Color} uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloatColor(name, value) {\n        return this.trySetUniform('uniform4f', name, value.r / 255, value.g / 255, value.b / 255, value.a);\n    }\n    /**\n     * Set an {@apilink Matrix} uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformMatrix(name, value) {\n        this.setUniform('uniformMatrix4fv', name, false, value.data);\n    }\n    setUniformAffineMatrix(name, value) {\n        this.setUniform('uniformMatrix4fv', name, false, [\n            value.data[0],\n            value.data[1],\n            0,\n            0,\n            value.data[2],\n            value.data[3],\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n            value.data[4],\n            value.data[5],\n            0,\n            1\n        ]);\n    }\n    /**\n     * Set an {@apilink Matrix} uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformMatrix(name, value) {\n        return this.trySetUniform('uniformMatrix4fv', name, false, value.data);\n    }\n    /**\n     * Set any available uniform type in webgl\n     *\n     * For example setUniform('uniformMatrix2fv', 'u_my2x2_mat`, ...);\n     */\n    setUniform(uniformType, name, ...value) {\n        if (!this._compiled) {\n            throw Error(`Must compile shader before setting a uniform ${uniformType}:${name}`);\n        }\n        if (!this.isCurrentlyBound()) {\n            throw Error('Currently accessed shader instance is not the current active shader in WebGL,' +\n                ' must call `shader.use()` before setting uniforms');\n        }\n        const gl = this._gl;\n        const location = gl.getUniformLocation(this.program, name);\n        if (location) {\n            const args = [location, ...value];\n            this._gl[uniformType].apply(this._gl, args);\n        }\n        else {\n            throw Error(`Uniform ${uniformType}:${name} doesn\\'t exist or is not used in the shader source code,` +\n                ' unused uniforms are optimized away by most browsers');\n        }\n    }\n    /**\n     * Set any available uniform type in webgl. Will try to set the uniform, will return false if the uniform didn't exist,\n     * true if it was set.\n     *\n     * WILL NOT THROW on error\n     *\n     * For example setUniform('uniformMatrix2fv', 'u_my2x2_mat`, ...);\n     *\n     */\n    trySetUniform(uniformType, name, ...value) {\n        if (!this._compiled) {\n            this._logger.warn(`Must compile shader before setting a uniform ${uniformType}:${name}`);\n            return false;\n        }\n        if (!this.isCurrentlyBound()) {\n            this._logger.warn('Currently accessed shader instance is not the current active shader in WebGL,' +\n                ' must call `shader.use()` before setting uniforms');\n            return false;\n        }\n        const gl = this._gl;\n        const location = gl.getUniformLocation(this.program, name);\n        if (location) {\n            const args = [location, ...value];\n            this._gl[uniformType].apply(this._gl, args);\n        }\n        else {\n            return false;\n        }\n        return true;\n    }\n    _createProgram(gl, vertexShader, fragmentShader) {\n        const program = gl.createProgram();\n        if (program === null) {\n            throw Error('Could not create graphics shader program');\n        }\n        // attach the shaders.\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        if (this._onPreLink) {\n            this._onPreLink(program);\n        }\n        // link the program.\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n        if (!success) {\n            throw Error(`Could not link the program: [${gl.getProgramInfoLog(program)}]`);\n        }\n        return program;\n    }\n    _compileShader(gl, source, type) {\n        const typeName = gl.VERTEX_SHADER === type ? 'vertex' : 'fragment';\n        const shader = gl.createShader(type);\n        if (shader === null) {\n            throw Error(`Could not build shader: [${source}]`);\n        }\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (!success) {\n            const errorInfo = gl.getShaderInfoLog(shader);\n            throw Error(`Could not compile ${typeName} shader:\\n\\n${errorInfo}${this._processSourceForError(source, errorInfo)}`);\n        }\n        return shader;\n    }\n    _processSourceForError(source, errorInfo) {\n        if (!source) {\n            return errorInfo;\n        }\n        const lines = source.split('\\n');\n        const errorLineStart = errorInfo.search(/\\d:\\d/);\n        const errorLineEnd = errorInfo.indexOf(' ', errorLineStart);\n        const [_, error2] = errorInfo\n            .slice(errorLineStart, errorLineEnd)\n            .split(':')\n            .map((v) => Number(v));\n        for (let i = 0; i < lines.length; i++) {\n            lines[i] = `${i + 1}: ${lines[i]}${error2 === i + 1 ? ' <----- ERROR!' : ''}`;\n        }\n        return '\\n\\nSource:\\n' + lines.join('\\n');\n    }\n}\nShader._ACTIVE_SHADER_INSTANCE = null;\n\n;// ./Graphics/Context/vertex-buffer.ts\n/**\n * Helper around vertex buffer to simplify creating and uploading geometry\n *\n * Under the hood uses Float32Array\n */\nclass VertexBuffer {\n    constructor(options) {\n        /**\n         * If the vertices never change switching 'static' can be more efficient on the gpu\n         *\n         * Default is 'dynamic'\n         */\n        this.type = 'dynamic';\n        const { gl, size, type, data } = options;\n        this._gl = gl;\n        this.buffer = this._gl.createBuffer();\n        if (!data && !size) {\n            throw Error('Must either provide data or a size to the VertexBuffer');\n        }\n        if (!data) {\n            this.bufferData = new Float32Array(size);\n        }\n        else {\n            this.bufferData = data;\n        }\n        this.type = type !== null && type !== void 0 ? type : this.type;\n        // Allocate buffer\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.bufferData, this.type === 'static' ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW);\n    }\n    /**\n     * Bind this vertex buffer\n     */\n    bind() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    }\n    unbind() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    }\n    /**\n     * Upload vertex buffer geometry to the GPU\n     */\n    upload(count) {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        if (count) {\n            gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.bufferData, 0, count);\n        }\n        else {\n            // TODO always use bufferSubData? need to perf test it\n            gl.bufferData(gl.ARRAY_BUFFER, this.bufferData, this.type === 'static' ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW);\n        }\n    }\n    dispose() {\n        const gl = this._gl;\n        gl.deleteBuffer(this.buffer);\n        this._gl = null;\n    }\n}\n\n;// ./Graphics/Context/vertex-layout.ts\n\n\n/**\n * Helper around creating vertex attributes in a given {@apilink VertexBuffer}, this is useful for describing\n * the memory layout for your vertices inside a particular buffer\n *\n * Note: This helper assumes interleaved attributes in one {@apilink VertexBuffer}, not many.\n *\n * Working with `gl.vertexAttribPointer` can be tricky, and this attempts to double check you\n */\nclass VertexLayout {\n    get vertexBuffer() {\n        return this._vertexBuffer;\n    }\n    get attributes() {\n        return this._attributes;\n    }\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this._suppressWarnings = false;\n        this._layout = [];\n        this._attributes = [];\n        this._vertexTotalSizeBytes = 0;\n        this._initialized = false;\n        const { gl, shader, vertexBuffer, attributes, suppressWarnings } = options;\n        this._gl = gl;\n        this._vertexBuffer = vertexBuffer;\n        this._attributes = attributes;\n        this._shader = shader;\n        this._suppressWarnings = suppressWarnings;\n        if (shader) {\n            this.initialize();\n        }\n    }\n    /**\n     * Total number of bytes that the vertex will take up\n     */\n    get totalVertexSizeBytes() {\n        return this._vertexTotalSizeBytes;\n    }\n    set shader(shader) {\n        if (shader && this._shader !== shader) {\n            this._shader = shader;\n            this.initialize();\n        }\n    }\n    get shader() {\n        return this._shader;\n    }\n    /**\n     * Layouts need shader locations and must be bound to a shader\n     */\n    initialize() {\n        if (this._initialized) {\n            return;\n        }\n        if (!this._shader) {\n            return;\n        }\n        if (!this._shader.compiled) {\n            throw Error('Shader not compiled, shader must be compiled before defining a vertex layout');\n        }\n        this._vertexTotalSizeBytes = 0;\n        this._layout.length = 0;\n        const shaderAttributes = this._shader.attributes;\n        for (const attribute of this._attributes) {\n            const attrib = shaderAttributes[attribute[0]];\n            if (!attrib) {\n                if (!isAttributeInSource(this._shader.vertexSource, attribute[0])) {\n                    throw Error(`The attribute named: ${attribute[0]} size ${attribute[1]}` +\n                        ` not found in the shader source code:\\n ${this._shader.vertexSource}`);\n                }\n                if (!this._suppressWarnings) {\n                    this._logger.warn(`The attribute named: ${attribute[0]} size ${attribute[1]}` +\n                        ` not found in the compiled shader. This is possibly a bug:\\n` +\n                        ` 1. Not a bug, but should remove unused code - attribute \"${attribute[0]}\" is unused in` +\n                        ` vertex/fragment and has been automatically removed by glsl compiler.\\n` +\n                        ` 2. Definitely a bug, attribute \"${attribute[0]}\" in layout has been mistyped or is missing` +\n                        ` in shader, check vertex/fragment source.`);\n                }\n                const glType = getGLTypeFromSource(this._gl, this._shader.vertexSource, attribute[0]);\n                // Unused attribute placeholder\n                this._layout.push({\n                    name: attribute[0],\n                    glType,\n                    size: attribute[1],\n                    location: -1,\n                    normalized: false\n                });\n            }\n            if (attrib) {\n                if (attrib.size !== attribute[1]) {\n                    throw Error(`VertexLayout size definition for attribute: [${attribute[0]}, ${attribute[1]}],` +\n                        ` doesn\\'t match shader source size ${attrib.size}:\\n ${this._shader.vertexSource}`);\n                }\n                this._layout.push(attrib);\n            }\n        }\n        // calc size\n        let componentsPerVertex = 0;\n        for (const vertAttribute of this._layout) {\n            const typeSize = getGlTypeSizeBytes(this._gl, vertAttribute.glType);\n            this._vertexTotalSizeBytes += typeSize * vertAttribute.size;\n            componentsPerVertex += vertAttribute.size;\n        }\n        if (this._vertexBuffer.bufferData.length % componentsPerVertex !== 0) {\n            this._logger.warn(`The vertex component size (${componentsPerVertex})  does NOT divide evenly into the specified vertex buffer` +\n                ` (${this._vertexBuffer.bufferData.length})`);\n        }\n        // create VAO\n        const gl = this._gl;\n        this._vao = gl.createVertexArray();\n        gl.bindVertexArray(this._vao);\n        this._vertexBuffer.bind();\n        let offset = 0;\n        for (const vert of this._layout) {\n            // skip unused attributes\n            if (vert.location !== -1) {\n                if (vert.glType === gl.INT) {\n                    gl.vertexAttribIPointer(vert.location, vert.size, vert.glType, this.totalVertexSizeBytes, offset);\n                }\n                else {\n                    gl.vertexAttribPointer(vert.location, vert.size, vert.glType, vert.normalized, this.totalVertexSizeBytes, offset);\n                }\n                gl.enableVertexAttribArray(vert.location);\n            }\n            offset += getGlTypeSizeBytes(gl, vert.glType) * vert.size;\n        }\n        gl.bindVertexArray(null);\n        this._vertexBuffer.unbind();\n        this._initialized = true;\n    }\n    /**\n     * Bind this layout with it's associated vertex buffer\n     * @param uploadBuffer Optionally indicate you wish to upload the buffer to the GPU associated with this layout\n     */\n    use(uploadBuffer = false, count) {\n        if (!this._shader) {\n            throw Error('No shader is associated with this vertex layout, a shader must be set');\n        }\n        const gl = this._gl;\n        if (!this._shader.isCurrentlyBound()) {\n            throw Error('Shader associated with this vertex layout is not active! Call shader.use() before layout.use()');\n        }\n        this._vertexBuffer.bind();\n        if (uploadBuffer) {\n            this._vertexBuffer.upload(count);\n        }\n        gl.bindVertexArray(this._vao);\n    }\n}\n\n;// ./Graphics/GraphicsDiagnostics.ts\nclass GraphicsDiagnostics {\n    static clear() {\n        GraphicsDiagnostics.DrawCallCount = 0;\n        GraphicsDiagnostics.DrawnImagesCount = 0;\n    }\n}\nGraphicsDiagnostics.DrawCallCount = 0;\nGraphicsDiagnostics.DrawnImagesCount = 0;\n\n;// ./Graphics/Context/line-renderer/line-renderer.ts\n\n\n\n\n\nclass LineRenderer {\n    constructor() {\n        this.type = 'ex.line';\n        this.priority = 0;\n        this._maxLines = 10922;\n        this._vertexIndex = 0;\n        this._lineCount = 0;\n        this._startScratch = vec(0, 0);\n        this._endScratch = vec(0, 0);\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            vertexSource: line_vertex,\n            fragmentSource: line_fragment\n        });\n        this._shader.compile();\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        this._vertexBuffer = new VertexBuffer({\n            gl,\n            size: 6 * 2 * this._maxLines,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            vertexBuffer: this._vertexBuffer,\n            shader: this._shader,\n            attributes: [\n                ['a_position', 2],\n                ['a_color', 4]\n            ]\n        });\n    }\n    dispose() {\n        this._vertexBuffer.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    draw(start, end, color) {\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._lineCount++;\n        const transform = this._context.getTransform();\n        const finalStart = transform.multiply(start, this._startScratch);\n        const finalEnd = transform.multiply(end, this._endScratch);\n        const vertexBuffer = this._vertexBuffer.bufferData;\n        // Start\n        vertexBuffer[this._vertexIndex++] = finalStart.x;\n        vertexBuffer[this._vertexIndex++] = finalStart.y;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        // End\n        vertexBuffer[this._vertexIndex++] = finalEnd.x;\n        vertexBuffer[this._vertexIndex++] = finalEnd.y;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n    }\n    _isFull() {\n        if (this._lineCount >= this._maxLines) {\n            return true;\n        }\n        return false;\n    }\n    hasPendingDraws() {\n        return this._lineCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._lineCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        this._shader.use();\n        this._layout.use(true);\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        gl.drawArrays(gl.LINES, 0, this._lineCount * 2); // 2 verts per line\n        GraphicsDiagnostics.DrawnImagesCount += this._lineCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // reset\n        this._vertexIndex = 0;\n        this._lineCount = 0;\n    }\n}\n\n;// ./Graphics/Context/point-renderer/point-vertex.glsl\n/* harmony default export */ const point_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\nin vec4 a_color;\\r\\nin float a_size;\\r\\nout lowp vec4 v_color;\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n  gl_PointSize = a_size * 2.0;\\r\\n  v_color = a_color;\\r\\n}\");\n;// ./Graphics/Context/point-renderer/point-fragment.glsl\n/* harmony default export */ const point_fragment = (\"#version 300 es\\r\\n\\r\\nprecision mediump float;\\r\\nin lowp vec4 v_color;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  float r = 0.0, delta = 0.0, alpha = 1.0;\\r\\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\r\\n  r = dot(cxy, cxy);\\r\\n\\r\\n  delta = fwidth(r);\\r\\n  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\\r\\n  // \\\"premultiply\\\" the color by alpha\\r\\n  vec4 color = v_color;\\r\\n  color.a = color.a * alpha;\\r\\n  color.rgb = color.rgb * color.a;\\r\\n  fragColor = color;\\r\\n}\");\n;// ./Graphics/Context/point-renderer/point-renderer.ts\n\n\n\n\n\n\n\nclass PointRenderer {\n    constructor() {\n        this.type = 'ex.point';\n        this.priority = 0;\n        this._maxPoints = 10922;\n        this._pointCount = 0;\n        this._vertexIndex = 0;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            vertexSource: point_vertex,\n            fragmentSource: point_fragment\n        });\n        this._shader.compile();\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 7 * this._maxPoints,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_color', 4],\n                ['a_size', 1]\n            ]\n        });\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    draw(point, color, size) {\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._pointCount++;\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const finalPoint = transform.multiply(point);\n        if (snapToPixel) {\n            finalPoint.x = ~~(finalPoint.x + pixelSnapEpsilon);\n            finalPoint.y = ~~(finalPoint.y + pixelSnapEpsilon);\n        }\n        const vertexBuffer = this._buffer.bufferData;\n        vertexBuffer[this._vertexIndex++] = finalPoint.x;\n        vertexBuffer[this._vertexIndex++] = finalPoint.y;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a * opacity;\n        vertexBuffer[this._vertexIndex++] = size * Math.max(transform.getScaleX(), transform.getScaleY());\n    }\n    _isFull() {\n        if (this._pointCount >= this._maxPoints) {\n            return true;\n        }\n        return false;\n    }\n    hasPendingDraws() {\n        return this._pointCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._pointCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        this._shader.use();\n        this._layout.use(true);\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        gl.drawArrays(gl.POINTS, 0, this._pointCount);\n        GraphicsDiagnostics.DrawnImagesCount += this._pointCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        this._pointCount = 0;\n        this._vertexIndex = 0;\n    }\n}\n\n;// ./Graphics/Context/screen-pass-painter/screen-vertex.glsl\n/* harmony default export */ const screen_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\nin vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n  // Pass the texcoord to the fragment shader.\\r\\n  v_texcoord = a_texcoord;\\r\\n}\");\n;// ./Graphics/Context/screen-pass-painter/screen-fragment.glsl\n/* harmony default export */ const screen_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// Passed in from the vertex shader.\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// The texture.\\r\\nuniform sampler2D u_texture;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n   fragColor = texture(u_texture, v_texcoord);\\r\\n}\");\n;// ./Graphics/Context/screen-pass-painter/screen-pass-painter.ts\n\n\n\n\n\n/**\n * This is responsible for painting the entire screen during the render passes\n */\nclass ScreenPassPainter {\n    constructor(gl) {\n        this._gl = gl;\n        this._shader = new Shader({\n            gl,\n            vertexSource: screen_vertex,\n            fragmentSource: screen_fragment\n        });\n        this._shader.compile();\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            type: 'static',\n            // clip space quad + uv since we don't need a camera\n            data: new Float32Array([\n                -1, -1, 0, 0, -1, 1, 0, 1, 1, -1, 1, 0,\n                1, -1, 1, 0, -1, 1, 0, 1, 1, 1, 1, 1\n            ])\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_texcoord', 2]\n            ]\n        });\n        this._buffer.upload();\n    }\n    renderWithPostProcessor(postprocessor) {\n        const gl = this._gl;\n        const shader = postprocessor.getShader();\n        shader.use();\n        postprocessor.getLayout().use();\n        gl.activeTexture(gl.TEXTURE0);\n        shader.trySetUniformInt('u_image', 0);\n        if (postprocessor.onDraw) {\n            postprocessor.onDraw();\n        }\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    }\n    renderToScreen() {\n        const gl = this._gl;\n        this._shader.use();\n        this._layout.use();\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    }\n}\n\n;// ./Graphics/Context/quad-index-buffer.ts\n\n/**\n * Helper that defines and index buffer for quad geometry\n *\n * Index buffers allow you to save space in vertex buffers when you share vertices in geometry\n * it is almost always worth it in terms of performance to use an index buffer.\n */\nclass QuadIndexBuffer {\n    /**\n     * @param gl WebGL2RenderingContext this layout will be attached to, these cannot be reused across contexts.\n     * @param numberOfQuads Specify the max number of quads you want to draw\n     * @param useUint16 Optionally force a uint16 buffer\n     */\n    constructor(gl, numberOfQuads, useUint16) {\n        this._logger = Logger.getInstance();\n        this._gl = gl;\n        this.buffer = gl.createBuffer();\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n        const totalVertices = numberOfQuads * 6;\n        if (!useUint16) {\n            this.bufferData = new Uint32Array(totalVertices);\n        }\n        else {\n            // fall back to using gl.UNSIGNED_SHORT or tell the user they are out of luck\n            const maxUint16 = 65535;\n            const maxUint16Index = Math.floor((maxUint16 - 1) / 4); // max quads\n            this.bufferGlType = gl.UNSIGNED_SHORT;\n            this.bufferData = new Uint16Array(totalVertices);\n            // TODO Should we error if this happens?? maybe not might crash mid game\n            if (numberOfQuads > maxUint16Index) {\n                this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${maxUint16Index}) requested quads(${numberOfQuads})`);\n            }\n        }\n        let currentQuad = 0;\n        for (let i = 0; i < totalVertices; i += 6) {\n            // first triangle\n            this.bufferData[i + 0] = currentQuad + 0;\n            this.bufferData[i + 1] = currentQuad + 1;\n            this.bufferData[i + 2] = currentQuad + 2;\n            // second triangle\n            this.bufferData[i + 3] = currentQuad + 2;\n            this.bufferData[i + 4] = currentQuad + 1;\n            this.bufferData[i + 5] = currentQuad + 3;\n            currentQuad += 4;\n        }\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\n    }\n    get size() {\n        return this.bufferData.length;\n    }\n    /**\n     * Upload data to the GPU\n     */\n    upload() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\n    }\n    /**\n     * Bind this index buffer\n     */\n    bind() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n    }\n    dispose() {\n        const gl = this._gl;\n        gl.deleteBuffer(this.buffer);\n        this._gl = null;\n    }\n}\n\n;// ./Graphics/Context/image-renderer/image-renderer.frag.glsl\n/* harmony default export */ const image_renderer_frag = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// Texture index\\r\\nin lowp float v_textureIndex;\\r\\n\\r\\n// Textures in the current draw\\r\\nuniform sampler2D u_textures[%%count%%];\\r\\n\\r\\nuniform bool u_pixelart;\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nin vec4 v_tint;\\r\\n\\r\\nin vec2 v_res;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\n// Inigo Quilez pixel art filter https://jorenjoestar.github.io/post/pixel_art_filtering/\\r\\nvec2 uv_iq(in vec2 uv, in vec2 texture_size) {\\r\\n  vec2 pixel = uv * texture_size;\\r\\n  \\r\\n  vec2 seam=floor(pixel+.5);\\r\\n  vec2 dudv=fwidth(pixel);\\r\\n  pixel=seam+clamp((pixel-seam)/dudv,-.5,.5);\\r\\n  \\r\\n  return pixel/texture_size;\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n  // In order to support the most efficient sprite batching, we have multiple\\r\\n  // textures loaded into the gpu (usually 8) this picker logic skips over textures\\r\\n  // that do not apply to a particular sprite.\\r\\n  \\r\\n  vec4 color=vec4(1.,0,0,1.);\\r\\n  \\r\\n  // GLSL is templated out to pick the right texture and set the vec4 color\\r\\n  %%texture_picker%%\\r\\n  \\r\\n  color.rgb=color.rgb*v_opacity;\\r\\n  color.a=color.a*v_opacity;\\r\\n  fragColor=color*v_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer/image-renderer.vert.glsl\n/* harmony default export */ const image_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// Opacity\\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\n// Texture res\\r\\nin vec2 a_res;\\r\\nout vec2 v_res;\\r\\n\\r\\n// Texture number\\r\\nin lowp float a_textureIndex;\\r\\nout lowp float v_textureIndex;\\r\\n\\r\\nin vec4 a_tint;\\r\\nout vec4 v_tint;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main(){\\r\\n  // Set the vertex position using the ortho transform matrix\\r\\n  gl_Position=u_matrix*vec4(a_position,0.,1.);\\r\\n  \\r\\n  // Pass through the Opacity to the fragment shader\\r\\n  v_opacity=a_opacity;\\r\\n  // Pass through the UV coord to the fragment shader\\r\\n  v_texcoord=a_texcoord;\\r\\n\\r\\n  v_res = a_res;\\r\\n\\r\\n  // Pass through the texture number to the fragment shader\\r\\n  v_textureIndex=a_textureIndex;\\r\\n  // Pass through the tint\\r\\n  v_tint=a_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer/image-renderer.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass ImageRenderer {\n    constructor(options) {\n        this.type = 'ex.image';\n        this.priority = 0;\n        this._maxImages = 10922; // max(uint16) / 6 verts\n        this._maxTextures = 0;\n        // Per flush vars\n        this._imageCount = 0;\n        this._textures = [];\n        this._textureIndex = 0;\n        this._textureToIndex = new Map();\n        this._images = new Set();\n        this._vertexIndex = 0;\n        this._imageToWidth = new Map();\n        this._imageToHeight = new Map();\n        this._view = [0, 0, 0, 0];\n        this._dest = [0, 0];\n        this._quad = [0, 0, 0, 0, 0, 0, 0, 0];\n        this._defaultTint = Color.White;\n        this.pixelArtSampler = options.pixelArtSampler;\n        this.uvPadding = options.uvPadding;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // Transform shader source\n        // FIXME: PIXEL 6 complains `ERROR: Expression too complex.` if we use it's reported max texture units, 125 seems to work for now...\n        const maxTexture = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n        const maxComplexity = getMaxShaderComplexity(gl, maxTexture);\n        this._maxTextures = Math.min(maxTexture, maxComplexity);\n        const transformedFrag = this._transformFragmentSource(image_renderer_frag, this._maxTextures);\n        // Compile shader\n        this._shader = new Shader({\n            gl,\n            fragmentSource: transformedFrag,\n            vertexSource: image_renderer_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        // Initialize texture slots to [0, 1, 2, 3, 4, .... maxGPUTextures]\n        this._shader.setUniformIntArray('u_textures', [...Array(this._maxTextures)].map((_, i) => i));\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 12 * 4 * this._maxImages, // 12 components * 4 verts\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_opacity', 1],\n                ['a_res', 2],\n                ['a_texcoord', 2],\n                ['a_textureIndex', 1],\n                ['a_tint', 4]\n            ]\n        });\n        // Setup index buffer\n        this._quads = new QuadIndexBuffer(gl, this._maxImages, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._shader.dispose();\n        this._textures.length = 0;\n        this._context = null;\n        this._gl = null;\n    }\n    _transformFragmentSource(source, maxTextures) {\n        let newSource = source.replace('%%count%%', maxTextures.toString());\n        let texturePickerBuilder = '';\n        for (let i = 0; i < maxTextures; i++) {\n            if (i === 0) {\n                texturePickerBuilder += `if (v_textureIndex <= ${i}.5) {\\n`;\n            }\n            else {\n                texturePickerBuilder += `   else if (v_textureIndex <= ${i}.5) {\\n`;\n            }\n            texturePickerBuilder += `      vec2 uv = u_pixelart ? uv_iq(v_texcoord, v_res) : v_texcoord;\\n`;\n            texturePickerBuilder += `      color = texture(u_textures[${i}], uv);\\n`;\n            texturePickerBuilder += `   }\\n`;\n        }\n        newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\n        return newSource;\n    }\n    _addImageAsTexture(image) {\n        if (this._images.has(image)) {\n            return;\n        }\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        if (this._textures.indexOf(texture) === -1) {\n            this._textures.push(texture);\n            this._textureToIndex.set(texture, this._textureIndex++);\n            this._images.add(image);\n        }\n    }\n    _bindTextures(gl) {\n        // Bind textures in the correct order\n        for (let i = 0; i < this._maxTextures; i++) {\n            gl.activeTexture(gl.TEXTURE0 + i);\n            gl.bindTexture(gl.TEXTURE_2D, this._textures[i] || this._textures[0]);\n        }\n    }\n    _getTextureIdForImage(image) {\n        var _a;\n        if (image) {\n            const maybeTexture = this._context.textureLoader.get(image);\n            return (_a = this._textureToIndex.get(maybeTexture)) !== null && _a !== void 0 ? _a : -1; //this._textures.indexOf(maybeTexture);\n        }\n        return -1;\n    }\n    _isFull() {\n        if (this._imageCount >= this._maxImages) {\n            return true;\n        }\n        if (this._textures.length >= this._maxTextures) {\n            return true;\n        }\n        return false;\n    }\n    _getImageWidth(image) {\n        let maybeWidth = this._imageToWidth.get(image);\n        if (maybeWidth === undefined) {\n            maybeWidth = image.width;\n            this._imageToWidth.set(image, maybeWidth);\n        }\n        return maybeWidth;\n    }\n    _getImageHeight(image) {\n        let maybeHeight = this._imageToHeight.get(image);\n        if (maybeHeight === undefined) {\n            maybeHeight = image.height;\n            this._imageToHeight.set(image, maybeHeight);\n        }\n        return maybeHeight;\n    }\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        var _a, _b, _c, _d;\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._imageCount++;\n        // This creates and uploads the texture if not already done\n        this._addImageAsTexture(image);\n        const maybeImageWidth = this._getImageWidth(image);\n        const maybeImageHeight = this._getImageHeight(image);\n        let width = maybeImageWidth || swidth || 0;\n        let height = maybeImageHeight || sheight || 0;\n        this._view[0] = 0;\n        this._view[1] = 0;\n        this._view[2] = (_a = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _a !== void 0 ? _a : 0;\n        this._view[3] = (_b = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _b !== void 0 ? _b : 0;\n        this._dest[0] = sx !== null && sx !== void 0 ? sx : 1;\n        this._dest[1] = sy !== null && sy !== void 0 ? sy : 1;\n        // If destination is specified, update view and dest\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n            this._view[0] = sx !== null && sx !== void 0 ? sx : 1;\n            this._view[1] = sy !== null && sy !== void 0 ? sy : 1;\n            this._view[2] = (_c = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _c !== void 0 ? _c : 0;\n            this._view[3] = (_d = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _d !== void 0 ? _d : 0;\n            this._dest[0] = dx;\n            this._dest[1] = dy;\n            width = dwidth;\n            height = dheight;\n        }\n        sx = this._view[0];\n        sy = this._view[1];\n        const sw = this._view[2];\n        const sh = this._view[3];\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        // top left\n        this._quad[0] = this._dest[0];\n        this._quad[1] = this._dest[1];\n        // top right\n        this._quad[2] = this._dest[0] + width;\n        this._quad[3] = this._dest[1];\n        // bottom left\n        this._quad[4] = this._dest[0];\n        this._quad[5] = this._dest[1] + height;\n        // bottom right\n        this._quad[6] = this._dest[0] + width;\n        this._quad[7] = this._dest[1] + height;\n        transform.multiplyQuadInPlace(this._quad);\n        if (snapToPixel) {\n            this._quad[0] = ~~(this._quad[0] + sign(this._quad[0]) * pixelSnapEpsilon);\n            this._quad[1] = ~~(this._quad[1] + sign(this._quad[1]) * pixelSnapEpsilon);\n            this._quad[2] = ~~(this._quad[2] + sign(this._quad[2]) * pixelSnapEpsilon);\n            this._quad[3] = ~~(this._quad[3] + sign(this._quad[3]) * pixelSnapEpsilon);\n            this._quad[4] = ~~(this._quad[4] + sign(this._quad[4]) * pixelSnapEpsilon);\n            this._quad[5] = ~~(this._quad[5] + sign(this._quad[5]) * pixelSnapEpsilon);\n            this._quad[6] = ~~(this._quad[6] + sign(this._quad[6]) * pixelSnapEpsilon);\n            this._quad[7] = ~~(this._quad[7] + sign(this._quad[7]) * pixelSnapEpsilon);\n        }\n        const tint = this._context.tint || this._defaultTint;\n        const textureId = this._getTextureIdForImage(image);\n        const imageWidth = maybeImageWidth || width;\n        const imageHeight = maybeImageHeight || height;\n        const uvx0 = (sx + this.uvPadding) / imageWidth;\n        const uvy0 = (sy + this.uvPadding) / imageHeight;\n        const uvx1 = (sx + sw - this.uvPadding) / imageWidth;\n        const uvy1 = (sy + sh - this.uvPadding) / imageHeight;\n        const txWidth = maybeImageWidth;\n        const txHeight = maybeImageHeight;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = this._quad[0];\n        vertexBuffer[this._vertexIndex++] = this._quad[1];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = this._quad[4];\n        vertexBuffer[this._vertexIndex++] = this._quad[5];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = this._quad[2];\n        vertexBuffer[this._vertexIndex++] = this._quad[3];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = this._quad[6];\n        vertexBuffer[this._vertexIndex++] = this._quad[7];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n    }\n    hasPendingDraws() {\n        return this._imageCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._imageCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._layout.use(true, 4 * 12 * this._imageCount); // 4 verts * 12 components\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Turn on pixel art aa sampler\n        this._shader.setUniformBoolean('u_pixelart', this.pixelArtSampler);\n        // Bind textures to\n        this._bindTextures(gl);\n        // Bind index buffer\n        this._quads.bind();\n        // Draw all the quads\n        gl.drawElements(gl.TRIANGLES, this._imageCount * 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount += this._imageCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // Reset\n        this._imageCount = 0;\n        this._vertexIndex = 0;\n        this._textures.length = 0;\n        this._textureIndex = 0;\n        this._textureToIndex.clear();\n        this._images.clear();\n        this._imageToWidth.clear();\n        this._imageToHeight.clear();\n    }\n}\n\n;// ./Graphics/Context/rectangle-renderer/rectangle-renderer.frag.glsl\n/* harmony default export */ const rectangle_renderer_frag = (\"#version 300 es\\r\\n\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_uv;\\r\\n\\r\\nin vec2 v_size; // in pixels\\r\\n\\r\\n// Color coord to blend with image\\r\\nin lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nin lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nin lowp float v_strokeThickness; // in pixels\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\\r\\n    vec2 uv = v_uv;\\r\\n    vec2 fragCoord = uv * v_size;\\r\\n    float maxX = v_size.x - v_strokeThickness;\\r\\n    float minX = v_strokeThickness;\\r\\n    float maxY = v_size.y - v_strokeThickness;\\r\\n    float minY = v_strokeThickness;\\r\\n\\r\\n    if (fragCoord.x < maxX && fragCoord.x > minX &&\\r\\n        fragCoord.y < maxY && fragCoord.y > minY) {\\r\\n      fragColor = v_color;\\r\\n    } else {\\r\\n      fragColor = v_strokeColor;\\r\\n    }\\r\\n    fragColor.a *= v_opacity;\\r\\n    fragColor.rgb *= fragColor.a;\\r\\n\\r\\n    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\\r\\n    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\\r\\n\\r\\n    // float fHalfBorderDist      = 0.0;\\r\\n    // float fHalfBorderThickness = 0.0;\\r\\n\\r\\n    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \\r\\n    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \\r\\n    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else\\r\\n    // {\\r\\n    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\\r\\n    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\\r\\n    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\\r\\n        \\r\\n    //     float ellipse_ab    = v_radius-v_strokeThickness;\\r\\n    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\\r\\n    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \\r\\n            \\r\\n    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\\r\\n    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\\r\\n    // }\\r\\n\\r\\n    // vec4 v4FromColor = v_strokeColor;\\r\\n    // v4FromColor.rgb *= v4FromColor.a;\\r\\n    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\\r\\n    // if (fHalfBorderDist < 0.0) {\\r\\n    //     v4ToColor = v_color;\\r\\n    //     v4ToColor.rgb *= v4ToColor.a;\\r\\n    // }\\r\\n\\r\\n    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\\r\\n\\r\\n    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\\r\\n    // gl_FragColor = finalColor;\\r\\n}\");\n;// ./Graphics/Context/rectangle-renderer/rectangle-renderer.vert.glsl\n/* harmony default export */ const rectangle_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_uv;\\r\\nout vec2 v_uv;\\r\\n\\r\\nin vec2 a_size;\\r\\nout vec2 v_size;\\r\\n\\r\\n// Opacity \\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\nin vec4 a_color;\\r\\nout vec4 v_color;\\r\\n\\r\\nin vec4 a_strokeColor;\\r\\nout vec4 v_strokeColor;\\r\\n\\r\\nin float a_strokeThickness;\\r\\nout float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through size\\r\\n   v_size = a_size;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// ./Graphics/Context/rectangle-renderer/rectangle-renderer.ts\n\n\n\n\n\n\n\n\n\n\nclass RectangleRenderer {\n    constructor() {\n        this.type = 'ex.rectangle';\n        this.priority = 0;\n        this._maxRectangles = 10922; // max(uint16) / 6 verts\n        this._rectangleCount = 0;\n        this._vertexIndex = 0;\n        this._transparent = Color.Transparent;\n        this._scratch1 = vec(0, 0);\n        this._scratch2 = vec(0, 0);\n        this._scratch3 = vec(0, 0);\n        this._scratch4 = vec(0, 0);\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\n        this._shader = new Shader({\n            gl,\n            fragmentSource: rectangle_renderer_frag,\n            vertexSource: rectangle_renderer_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 16 * 4 * this._maxRectangles,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2],\n                ['a_size', 2],\n                ['a_opacity', 1],\n                ['a_color', 4],\n                ['a_strokeColor', 4],\n                ['a_strokeThickness', 1]\n            ]\n        });\n        this._quads = new QuadIndexBuffer(gl, this._maxRectangles, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    _isFull() {\n        if (this._rectangleCount >= this._maxRectangles) {\n            return true;\n        }\n        return false;\n    }\n    draw(...args) {\n        if (args[0] instanceof Vector && args[1] instanceof Vector) {\n            this.drawLine.apply(this, args);\n        }\n        else {\n            this.drawRectangle.apply(this, args);\n        }\n    }\n    drawLine(start, end, color, thickness = 1) {\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._rectangleCount++;\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const dir = end.sub(start);\n        const length = dir.magnitude;\n        const normal = dir.normalize().perpendicular();\n        const halfThick = thickness / 2;\n        /**\n         *    +---------------------^----------------------+\n         *    |                     | (normal)             |\n         *   (startX, startY)------------------>(endX, endY)\n         *    |                                            |\n         *    + -------------------------------------------+\n         */\n        const startTop = transform.multiply(normal.scale(halfThick, this._scratch1).add(start, this._scratch1), this._scratch1);\n        const startBottom = transform.multiply(normal.scale(-halfThick, this._scratch2).add(start, this._scratch2), this._scratch2);\n        const endTop = transform.multiply(normal.scale(halfThick, this._scratch3).add(end, this._scratch3), this._scratch3);\n        const endBottom = transform.multiply(normal.scale(-halfThick, this._scratch4).add(end, this._scratch4), this._scratch4);\n        if (snapToPixel) {\n            startTop.x = ~~(startTop.x + pixelSnapEpsilon);\n            startTop.y = ~~(startTop.y + pixelSnapEpsilon);\n            endTop.x = ~~(endTop.x + pixelSnapEpsilon);\n            endTop.y = ~~(endTop.y + pixelSnapEpsilon);\n            startBottom.x = ~~(startBottom.x + pixelSnapEpsilon);\n            startBottom.y = ~~(startBottom.y + pixelSnapEpsilon);\n            endBottom.x = ~~(endBottom.x + pixelSnapEpsilon);\n            endBottom.y = ~~(endBottom.y + pixelSnapEpsilon);\n        }\n        // TODO uv could be static vertex buffer\n        const uvx0 = 0;\n        const uvy0 = 0;\n        const uvx1 = 1;\n        const uvy1 = 1;\n        const stroke = this._transparent;\n        const strokeThickness = 0;\n        const width = 1;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = startTop.x;\n        vertexBuffer[this._vertexIndex++] = startTop.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = startBottom.x;\n        vertexBuffer[this._vertexIndex++] = startBottom.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = endTop.x;\n        vertexBuffer[this._vertexIndex++] = endTop.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = endBottom.x;\n        vertexBuffer[this._vertexIndex++] = endBottom.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n    }\n    drawRectangle(pos, width, height, color, stroke = Color.Transparent, strokeThickness = 0) {\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._rectangleCount++;\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const topLeft = transform.multiply(pos.add(vec(0, 0)));\n        const topRight = transform.multiply(pos.add(vec(width, 0)));\n        const bottomRight = transform.multiply(pos.add(vec(width, height)));\n        const bottomLeft = transform.multiply(pos.add(vec(0, height)));\n        if (snapToPixel) {\n            topLeft.x = ~~(topLeft.x + pixelSnapEpsilon);\n            topLeft.y = ~~(topLeft.y + pixelSnapEpsilon);\n            topRight.x = ~~(topRight.x + pixelSnapEpsilon);\n            topRight.y = ~~(topRight.y + pixelSnapEpsilon);\n            bottomLeft.x = ~~(bottomLeft.x + pixelSnapEpsilon);\n            bottomLeft.y = ~~(bottomLeft.y + pixelSnapEpsilon);\n            bottomRight.x = ~~(bottomRight.x + pixelSnapEpsilon);\n            bottomRight.y = ~~(bottomRight.y + pixelSnapEpsilon);\n        }\n        // TODO uv could be static vertex buffer\n        const uvx0 = 0;\n        const uvy0 = 0;\n        const uvx1 = 1;\n        const uvy1 = 1;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = topRight.x;\n        vertexBuffer[this._vertexIndex++] = topRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n    }\n    hasPendingDraws() {\n        return this._rectangleCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._rectangleCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._layout.use(true);\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Bind index buffer\n        this._quads.bind();\n        // Draw all the quads\n        gl.drawElements(gl.TRIANGLES, this._rectangleCount * 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount += this._rectangleCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // Reset\n        this._rectangleCount = 0;\n        this._vertexIndex = 0;\n    }\n}\n\n;// ./Graphics/Context/circle-renderer/circle-renderer.frag.glsl\n/* harmony default export */ const circle_renderer_frag = (\"#version 300 es\\r\\nprecision highp float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_uv;\\r\\n\\r\\n// Color coord to blend with image\\r\\nin lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nin lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nin lowp float v_strokeThickness;\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  // make (0, 0) the center the uv \\r\\n  vec2 uv = v_uv * 2.0 - 1.0;\\r\\n\\r\\n  vec4 color = v_color;\\r\\n  vec4 strokeColor = v_strokeColor;\\r\\n\\r\\n  // circle border is at radius 1.0 \\r\\n  // dist is > 0 when inside the circle \\r\\n  float d = length(uv);\\r\\n  float dist = 1.0 - length(uv);\\r\\n\\r\\n  // Fade based on fwidth\\r\\n  float fade = fwidth(dot(uv, uv));\\r\\n\\r\\n  // if dist is greater than 0 step to 1;\\r\\n  // when we cross this 0 threshold add a smooth fade\\r\\n  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\\r\\n\\r\\n  // if dist is greater than the stroke thickness step to 1\\r\\n  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\\r\\n\\r\\n  strokeColor.a *= fill * stroke;\\r\\n  strokeColor.rgb *= strokeColor.a;\\r\\n\\r\\n  color.a *= fill * (1.0 - stroke);\\r\\n  color.rgb *= color.a;\\r\\n\\r\\n  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\\r\\n  finalColor.rgb = finalColor.rgb * v_opacity;\\r\\n  finalColor.a = finalColor.a * v_opacity;\\r\\n  fragColor = finalColor;\\r\\n}\");\n;// ./Graphics/Context/circle-renderer/circle-renderer.vert.glsl\n/* harmony default export */ const circle_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_uv;\\r\\nout vec2 v_uv;\\r\\n\\r\\n// Opacity \\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\nin vec4 a_color;\\r\\nout vec4 v_color;\\r\\n\\r\\nin vec4 a_strokeColor;\\r\\nout vec4 v_strokeColor;\\r\\n\\r\\nin float a_strokeThickness;\\r\\nout float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// ./Graphics/Context/circle-renderer/circle-renderer.ts\n\n\n\n\n\n\n\n\n\n\nclass CircleRenderer {\n    constructor() {\n        this.type = 'ex.circle';\n        this.priority = 0;\n        this._maxCircles = 10922; // max(uint16) / 6 verts\n        this._circleCount = 0;\n        this._vertexIndex = 0;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            fragmentSource: circle_renderer_frag,\n            vertexSource: circle_renderer_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 14 * 4 * this._maxCircles,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2],\n                ['a_opacity', 1],\n                ['a_color', 4],\n                ['a_strokeColor', 4],\n                ['a_strokeThickness', 1]\n            ]\n        });\n        this._quads = new QuadIndexBuffer(gl, this._maxCircles, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    _isFull() {\n        if (this._circleCount >= this._maxCircles) {\n            return true;\n        }\n        return false;\n    }\n    draw(pos, radius, color, stroke = Color.Transparent, strokeThickness = 0) {\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._circleCount++;\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const topLeft = transform.multiply(pos.add(vec(-radius, -radius)));\n        const topRight = transform.multiply(pos.add(vec(radius, -radius)));\n        const bottomRight = transform.multiply(pos.add(vec(radius, radius)));\n        const bottomLeft = transform.multiply(pos.add(vec(-radius, radius)));\n        if (snapToPixel) {\n            topLeft.x = ~~(topLeft.x + pixelSnapEpsilon);\n            topLeft.y = ~~(topLeft.y + pixelSnapEpsilon);\n            topRight.x = ~~(topRight.x + pixelSnapEpsilon);\n            topRight.y = ~~(topRight.y + pixelSnapEpsilon);\n            bottomLeft.x = ~~(bottomLeft.x + pixelSnapEpsilon);\n            bottomLeft.y = ~~(bottomLeft.y + pixelSnapEpsilon);\n            bottomRight.x = ~~(bottomRight.x + pixelSnapEpsilon);\n            bottomRight.y = ~~(bottomRight.y + pixelSnapEpsilon);\n        }\n        // TODO UV could be static vertex buffer\n        const uvx0 = 0;\n        const uvy0 = 0;\n        const uvx1 = 1;\n        const uvy1 = 1;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = topRight.x;\n        vertexBuffer[this._vertexIndex++] = topRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n    }\n    hasPendingDraws() {\n        return this._circleCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._circleCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._layout.use(true);\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Bind index buffer\n        this._quads.bind();\n        // Draw all the quads\n        gl.drawElements(gl.TRIANGLES, this._circleCount * 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount += this._circleCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // Reset\n        this._circleCount = 0;\n        this._vertexIndex = 0;\n    }\n}\n\n;// ./Util/Pool.ts\n\nclass Pool {\n    constructor(builder, recycler, maxObjects = 100) {\n        this.builder = builder;\n        this.recycler = recycler;\n        this.maxObjects = maxObjects;\n        this.totalAllocations = 0;\n        this.index = 0;\n        this.objects = [];\n        this.disableWarnings = false;\n        this._logger = Logger.getInstance();\n    }\n    dispose() {\n        this.objects.length = 0;\n    }\n    preallocate() {\n        for (let i = 0; i < this.maxObjects; i++) {\n            this.objects[i] = this.builder();\n        }\n    }\n    /**\n     * Use many instances out of the in the context and return all to the pool.\n     *\n     * By returning values out of the context they will be un-hooked from the pool and are free to be passed to consumers\n     * @param context\n     */\n    using(context) {\n        const result = context(this);\n        if (result) {\n            return this.done(...result);\n        }\n        return this.done();\n    }\n    /**\n     * Use a single instance out of th pool and immediately return it to the pool\n     * @param context\n     */\n    borrow(context) {\n        const object = this.get();\n        context(object);\n        this.index--;\n    }\n    /**\n     * Retrieve a value from the pool, will allocate a new instance if necessary or recycle from the pool\n     */\n    get() {\n        if (this.index === this.maxObjects) {\n            if (!this.disableWarnings) {\n                this._logger.warn('Max pooled objects reached, possible memory leak? Doubling');\n            }\n            this.maxObjects = this.maxObjects * 2;\n        }\n        if (this.objects[this.index]) {\n            // Pool has an available object already constructed\n            if (this.recycler) {\n                return this.recycler(this.objects[this.index++]);\n            }\n            return this.objects[this.index++];\n        }\n        else {\n            // New allocation\n            this.totalAllocations++;\n            const object = (this.objects[this.index++] = this.builder());\n            return object;\n        }\n    }\n    done(...objects) {\n        // All objects in pool now considered \"free\"\n        this.index = 0;\n        for (const object of objects) {\n            const poolIndex = this.objects.indexOf(object);\n            // Build a new object to take the pool place\n            this.objects[poolIndex] = this.builder();\n            this.totalAllocations++;\n        }\n        return objects;\n    }\n}\n\n;// ./Graphics/Context/draw-call.ts\n\n\nclass DrawCall {\n    constructor() {\n        this.z = 0;\n        this.priority = 0;\n        this.renderer = '';\n        this.transform = AffineMatrix.identity();\n        this.state = {\n            z: 0,\n            opacity: 1,\n            tint: Color.White,\n            material: null\n        };\n        this.args = new Array(10);\n    }\n}\n\n;// ./Graphics/Context/material.ts\n\n\n\n\n\n\nconst defaultVertexSource = `#version 300 es\r\nin vec2 a_position;\r\n\r\nin vec2 a_uv;\r\nout vec2 v_uv;\r\n\r\nin vec2 a_screenuv;\r\nout vec2 v_screenuv;\r\n\r\nuniform mat4 u_matrix;\r\nuniform mat4 u_transform;\r\n\r\nvoid main() {\r\n  // Set the vertex position using the ortho & transform matrix\r\n  gl_Position = u_matrix * u_transform * vec4(a_position, 0.0, 1.0);\r\n\r\n  // Pass through the UV coord to the fragment shader\r\n  v_uv = a_uv;\r\n  v_screenuv = a_screenuv;\r\n}\r\n`;\nclass Material {\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this._color = Color.Transparent;\n        this._initialized = false;\n        this._images = new Map();\n        this._textures = new Map();\n        const { color, name, vertexSource, fragmentSource, graphicsContext, images } = options;\n        this._name = name !== null && name !== void 0 ? name : 'anonymous material';\n        this._vertexSource = vertexSource !== null && vertexSource !== void 0 ? vertexSource : defaultVertexSource;\n        this._fragmentSource = fragmentSource;\n        this._color = color !== null && color !== void 0 ? color : this._color;\n        if (!graphicsContext) {\n            throw Error(`Material ${name} must be provided an excalibur webgl graphics context`);\n        }\n        if (graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            this._graphicsContext = graphicsContext;\n            this._initialize(graphicsContext);\n        }\n        else {\n            this._logger.warn(`Material ${name} was created in 2D Canvas mode, currently only WebGL is supported`);\n        }\n        if (images) {\n            for (const key in images) {\n                this.addImageSource(key, images[key]);\n            }\n        }\n    }\n    _initialize(graphicsContextWebGL) {\n        if (this._initialized) {\n            return;\n        }\n        const gl = graphicsContextWebGL.__gl;\n        // max texture slots - 2 for the graphic texture and screen texture\n        this._maxTextureSlots = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS) - 2;\n        this._shader = graphicsContextWebGL.createShader({\n            vertexSource: this._vertexSource,\n            fragmentSource: this._fragmentSource\n        });\n        this._shader.compile();\n        this._initialized = true;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(c) {\n        this._color = c;\n    }\n    get name() {\n        var _a;\n        return (_a = this._name) !== null && _a !== void 0 ? _a : 'anonymous material';\n    }\n    get isUsingScreenTexture() {\n        return this._fragmentSource.includes('u_screen_texture');\n    }\n    update(callback) {\n        if (this._shader) {\n            this._shader.use();\n            callback(this._shader);\n        }\n    }\n    getShader() {\n        return this._shader;\n    }\n    addImageSource(textureUniformName, image) {\n        if (this._images.size < this._maxTextureSlots) {\n            this._images.set(textureUniformName, image);\n        }\n        else {\n            this._logger.warn(`Max number texture slots ${this._maxTextureSlots} have been reached for material \"${this.name}\", ` +\n                `no more textures will be uploaded due to hardware constraints.`);\n        }\n    }\n    removeImageSource(textureName) {\n        const image = this._images.get(textureName);\n        this._graphicsContext.textureLoader.delete(image.image);\n        this._images.delete(textureName);\n    }\n    _loadImageSource(image) {\n        const imageElement = image.image;\n        const maybeFiltering = imageElement.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(imageElement.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(imageElement.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = imageElement.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._graphicsContext.textureLoader.load(imageElement, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        imageElement.removeAttribute('forceUpload');\n        if (!this._textures.has(image)) {\n            this._textures.set(image, texture);\n        }\n        return texture;\n    }\n    uploadAndBind(gl, startingTextureSlot = 2) {\n        let textureSlot = startingTextureSlot;\n        for (const [textureName, image] of this._images.entries()) {\n            if (!image.isLoaded()) {\n                this._logger.warnOnce(`Image named ${textureName} in material ${this.name} not loaded, nothing will be uploaded to the shader.` +\n                    ` Did you forget to add this to a loader? https://excaliburjs.com/docs/loaders/`);\n                continue;\n            } // skip unloaded images, maybe warn\n            const texture = this._loadImageSource(image);\n            gl.activeTexture(gl.TEXTURE0 + textureSlot);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            this._shader.trySetUniformInt(textureName, textureSlot);\n            textureSlot++;\n        }\n    }\n    use() {\n        if (this._initialized) {\n            // bind the shader\n            this._shader.use();\n            // Apply standard uniforms\n            this._shader.trySetUniformFloatColor('u_color', this._color);\n        }\n        else {\n            throw Error(`Material ${this.name} not yet initialized, use the ExcaliburGraphicsContext.createMaterial() to work around this.`);\n        }\n    }\n}\n\n;// ./Graphics/Context/material-renderer/material-renderer.ts\n\n\n\n\n\n\n\n\nclass MaterialRenderer {\n    constructor() {\n        this.type = 'ex.material';\n        this.priority = 0;\n        this._textures = [];\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 6 * 4, // 6 components * 4 verts\n            type: 'dynamic'\n        });\n        // Setup a vertex layout/buffer to the material\n        this._layout = new VertexLayout({\n            gl,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2],\n                ['a_screenuv', 2]\n            ],\n            suppressWarnings: true\n        });\n        // Setup index buffer\n        this._quads = new QuadIndexBuffer(gl, 1, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._textures.length = 0;\n        this._context = null;\n        this._gl = null;\n    }\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        var _a, _b, _c, _d;\n        const gl = this._gl;\n        // Extract context info\n        const material = this._context.material;\n        if (!material) {\n            return;\n        }\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        // material shader\n        const shader = material.getShader();\n        // construct geometry, or hold on to it in the material?\n        // geometry primitive for drawing rectangles?\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        let vertexIndex = 0;\n        let width = (image === null || image === void 0 ? void 0 : image.width) || swidth || 0;\n        let height = (image === null || image === void 0 ? void 0 : image.height) || sheight || 0;\n        let view = [0, 0, (_a = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _a !== void 0 ? _a : 0, (_b = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _b !== void 0 ? _b : 0];\n        let dest = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1];\n        // If destination is specified, update view and dest\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n            view = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1, (_c = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _c !== void 0 ? _c : 0, (_d = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _d !== void 0 ? _d : 0];\n            dest = [dx, dy];\n            width = dwidth;\n            height = dheight;\n        }\n        sx = view[0];\n        sy = view[1];\n        const sw = view[2];\n        const sh = view[3];\n        const topLeft = vec(dest[0], dest[1]);\n        const topRight = vec(dest[0] + width, dest[1]);\n        const bottomLeft = vec(dest[0], dest[1] + height);\n        const bottomRight = vec(dest[0] + width, dest[1] + height);\n        const imageWidth = image.width || width;\n        const imageHeight = image.height || height;\n        const uvx0 = sx / imageWidth;\n        const uvy0 = sy / imageHeight;\n        const uvx1 = (sx + sw - 0.01) / imageWidth;\n        const uvy1 = (sy + sh - 0.01) / imageHeight;\n        const topLeftScreen = transform.getPosition();\n        const bottomRightScreen = topLeftScreen.add(bottomRight);\n        const screenUVX0 = topLeftScreen.x / this._context.width;\n        const screenUVY0 = topLeftScreen.y / this._context.height;\n        const screenUVX1 = bottomRightScreen.x / this._context.width;\n        const screenUVY1 = bottomRightScreen.y / this._context.height;\n        // (0, 0) - 0\n        vertexBuffer[vertexIndex++] = topLeft.x;\n        vertexBuffer[vertexIndex++] = topLeft.y;\n        vertexBuffer[vertexIndex++] = uvx0;\n        vertexBuffer[vertexIndex++] = uvy0;\n        vertexBuffer[vertexIndex++] = screenUVX0;\n        vertexBuffer[vertexIndex++] = screenUVY0;\n        // (0, 1) - 1\n        vertexBuffer[vertexIndex++] = bottomLeft.x;\n        vertexBuffer[vertexIndex++] = bottomLeft.y;\n        vertexBuffer[vertexIndex++] = uvx0;\n        vertexBuffer[vertexIndex++] = uvy1;\n        vertexBuffer[vertexIndex++] = screenUVX0;\n        vertexBuffer[vertexIndex++] = screenUVY1;\n        // (1, 0) - 2\n        vertexBuffer[vertexIndex++] = topRight.x;\n        vertexBuffer[vertexIndex++] = topRight.y;\n        vertexBuffer[vertexIndex++] = uvx1;\n        vertexBuffer[vertexIndex++] = uvy0;\n        vertexBuffer[vertexIndex++] = screenUVX1;\n        vertexBuffer[vertexIndex++] = screenUVY0;\n        // (1, 1) - 3\n        vertexBuffer[vertexIndex++] = bottomRight.x;\n        vertexBuffer[vertexIndex++] = bottomRight.y;\n        vertexBuffer[vertexIndex++] = uvx1;\n        vertexBuffer[vertexIndex++] = uvy1;\n        vertexBuffer[vertexIndex++] = screenUVX1;\n        vertexBuffer[vertexIndex++] = screenUVY1;\n        // This creates and uploads the texture if not already done\n        const texture = this._addImageAsTexture(image);\n        // apply material\n        material.use();\n        this._layout.shader = shader;\n        // apply layout and geometry\n        this._layout.use(true);\n        // apply time in ms since the page (performance.now())\n        shader.trySetUniformFloat('u_time_ms', performance.now());\n        // apply opacity\n        shader.trySetUniformFloat('u_opacity', opacity);\n        // apply resolution\n        shader.trySetUniformFloatVector('u_resolution', vec(this._context.width, this._context.height));\n        // apply graphic resolution\n        shader.trySetUniformFloatVector('u_graphic_resolution', vec(imageWidth, imageHeight));\n        // apply size\n        shader.trySetUniformFloatVector('u_size', vec(sw, sh));\n        // apply orthographic projection\n        shader.trySetUniformMatrix('u_matrix', this._context.ortho);\n        // apply geometry transform\n        shader.trySetUniformMatrix('u_transform', transform.to4x4());\n        // bind graphic image texture 'uniform sampler2D u_graphic;'\n        gl.activeTexture(gl.TEXTURE0 + 0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        shader.trySetUniformInt('u_graphic', 0);\n        // bind the screen texture\n        gl.activeTexture(gl.TEXTURE0 + 1);\n        gl.bindTexture(gl.TEXTURE_2D, this._context.materialScreenTexture);\n        shader.trySetUniformInt('u_screen_texture', 1);\n        // bind any additional textures in the material\n        material.uploadAndBind(gl);\n        // bind quad index buffer\n        this._quads.bind();\n        // Draw a single quad\n        gl.drawElements(gl.TRIANGLES, 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount++;\n        GraphicsDiagnostics.DrawCallCount++;\n    }\n    _addImageAsTexture(image) {\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        if (this._textures.indexOf(texture) === -1) {\n            this._textures.push(texture);\n        }\n        return texture;\n    }\n    hasPendingDraws() {\n        return false;\n    }\n    flush() {\n        // flush does not do anything, material renderer renders immediately per draw\n    }\n}\n\n;// ./Graphics/Context/particle-renderer/particle-vertex.glsl\n/* harmony default export */ const particle_vertex = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\nuniform float deltaMs;\\r\\nuniform float maxLifeMs;\\r\\nuniform vec2 gravity;\\r\\nuniform vec2 focus;\\r\\nuniform float focusAccel;\\r\\nuniform mat4 u_matrix;\\r\\nuniform mat4 u_transform;\\r\\nuniform float startSize;\\r\\nuniform float endSize;\\r\\n// uniform sampler2D obstacle;\\r\\n\\r\\nlayout(location=0)in vec2 position;\\r\\nlayout(location=1)in vec2 velocity;\\r\\nlayout(location=2)in float rotation;\\r\\nlayout(location=3)in float angularVelocity;\\r\\nlayout(location=4)in float lifeMs;\\r\\n\\r\\n// TODO z index to handle buffer wrapping?\\r\\n\\r\\n// DO NOT RE-ORDER\\r\\nout vec2 finalPosition;\\r\\nout vec2 finalVelocity;\\r\\nout float finalRotation;\\r\\nout float finalAngularVelocity;\\r\\nout float finalLifeMs;\\r\\nvoid main(){\\r\\n  // Evolve particle\\r\\n  float seconds = deltaMs / 1000.;\\r\\n  // euler integration\\r\\n  // Weird artifact of re-using the same buffer layout for update/draw\\r\\n  // we need differently named variables\\r\\n  vec2 finalGravity = gravity + normalize(focus - position) * focusAccel;\\r\\n  finalVelocity = velocity + finalGravity * seconds;\\r\\n  finalPosition = position + velocity * seconds + finalGravity * .5 * seconds * seconds;\\r\\n  finalRotation = rotation + angularVelocity * seconds;\\r\\n  finalAngularVelocity = angularVelocity;\\r\\n  finalLifeMs = clamp(lifeMs - deltaMs, 0., maxLifeMs);\\r\\n\\r\\n  // Collision mask sampling\\r\\n  // vec2 samplePoint = finalPosition / vec2(width, height);\\r\\n  // vec4 collides = texture(obstacle, samplePoint);\\r\\n  // if (distance(collides,vec4(0.)) > .01) {\\r\\n  //   // non opaque means we collide! recalc final pos/vel\\r\\n  //   vec2 newVelocity = velocity * -.1;// lose energy\\r\\n  //   finalVelocity = newVelocity + gravity * seconds;\\r\\n  //   finalPosition = position + newVelocity * seconds + gravity * .5 * seconds * seconds;\\r\\n  // }\\r\\n\\r\\n  float lifePercent = finalLifeMs / maxLifeMs;\\r\\n  vec2 transformedPos = (u_matrix * u_transform * vec4(finalPosition,0.,1.)).xy;\\r\\n  float scale = sqrt(u_transform[0][0] * u_transform[0][0] + u_transform[1][1] * u_transform[1][1]);\\r\\n  gl_Position = vec4(transformedPos, 1.0 - lifePercent, 1.); // use life percent to sort z\\r\\n  gl_PointSize = mix(startSize, endSize, 1.0 - lifePercent) * scale;\\r\\n}\");\n;// ./Graphics/Context/particle-renderer/particle-fragment.glsl\n/* harmony default export */ const particle_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\nuniform sampler2D graphic;\\r\\nuniform bool useTexture;\\r\\nuniform float maxLifeMs;\\r\\n\\r\\nuniform vec4 beginColor;\\r\\nuniform vec4 endColor;\\r\\nuniform bool fade;\\r\\nuniform float startOpacity;\\r\\n\\r\\nin float finalRotation;\\r\\nin float finalLifeMs;\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main(){\\r\\n\\r\\n  float lifePct = finalLifeMs / maxLifeMs;\\r\\n\\r\\n  if (useTexture) {\\r\\n    /** Draw texture */\\r\\n    if (lifePct <= 0.) discard;\\r\\n    float mid = .5;\\r\\n    float cosine = cos(finalRotation);\\r\\n    float sine = sin(finalRotation);\\r\\n    vec2 rotated = vec2(cosine * (gl_PointCoord.x - mid) + sine * (gl_PointCoord.y - mid) + mid,\\r\\n                        cosine * (gl_PointCoord.y - mid) - sine * (gl_PointCoord.x - mid) + mid);\\r\\n    vec4 color = texture(graphic, rotated);\\r\\n    fragColor = color * (fade ? lifePct : 1.0);\\r\\n  } else {\\r\\n    /** Draw circle */\\r\\n    if (lifePct <= 0.) discard;\\r\\n    vec2 uv = gl_PointCoord.xy * 2.0 - 1.0;\\r\\n    float dist = 1.0 - length(uv);\\r\\n    float edge = fwidth(dot(uv, uv));\\r\\n    float circle = smoothstep(-edge/2.0, edge/2.0, dist);\\r\\n    vec3 color = mix(beginColor.rgb, endColor.rgb, 1.0 - lifePct);\\r\\n    fragColor.rgb = color;\\r\\n    fragColor.a = startOpacity * circle * (fade ? lifePct : 1.0);// * mix(beginColor.a, endColor.a, 1.0 - lifePct);\\r\\n    fragColor.rgb *= fragColor.a;\\r\\n  }\\r\\n}\");\n;// ./Math/coord-plane.ts\n/**\n * Enum representing the coordinate plane for the position 2D vector in the {@apilink TransformComponent}\n */\nvar CoordPlane;\n(function (CoordPlane) {\n    /**\n     * The world coordinate plane (default) represents world space, any entities drawn with world\n     * space move when the camera moves.\n     */\n    CoordPlane[\"World\"] = \"world\";\n    /**\n     * The screen coordinate plane represents screen space, entities drawn in screen space are pinned\n     * to screen coordinates ignoring the camera.\n     */\n    CoordPlane[\"Screen\"] = \"screen\";\n})(CoordPlane || (CoordPlane = {}));\n\n;// ./Math/vector-view.ts\n\nclass VectorView extends Vector {\n    constructor(options) {\n        super(0, 0);\n        this._getX = options.getX;\n        this._getY = options.getY;\n        this._setX = options.setX;\n        this._setY = options.setY;\n    }\n    get x() {\n        return (this._x = this._getX());\n    }\n    set x(val) {\n        this._setX(val);\n        this._x = val;\n    }\n    get y() {\n        return (this._y = this._getY());\n    }\n    set y(val) {\n        this._setY(val);\n        this._y = val;\n    }\n}\n\n;// ./Math/watch-vector.ts\n\n/**\n * Wraps a vector and watches for changes in the x/y, modifies the original vector.\n */\nclass WatchVector extends Vector {\n    constructor(original, change) {\n        super(original.x, original.y);\n        this.original = original;\n        this.change = change;\n    }\n    get x() {\n        return (this._x = this.original.x);\n    }\n    set x(newX) {\n        if (newX !== this._x) {\n            this.change(newX, this._y);\n            this._x = this.original.x = newX;\n        }\n    }\n    get y() {\n        return (this._y = this.original.y);\n    }\n    set y(newY) {\n        if (newY !== this._y) {\n            this.change(this._x, newY);\n            this._y = this.original.y = newY;\n        }\n    }\n    setTo(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\n;// ./Math/transform.ts\n\n\n\n\n\nclass transform_Transform {\n    constructor() {\n        this._parent = null;\n        this._children = [];\n        this._pos = new WatchVector(vec(0, 0), () => {\n            this.flagDirty();\n        });\n        this._globalPos = new VectorView({\n            getX: () => this.matrix.data[4],\n            getY: () => this.matrix.data[5],\n            setX: (x) => {\n                if (this.parent) {\n                    const { x: newX } = this.parent.inverse.multiply(vec(x, this.pos.y));\n                    this.pos.x = newX;\n                }\n                else {\n                    this.pos.x = x;\n                }\n                if (x !== this.matrix.data[4]) {\n                    this.flagDirty();\n                }\n            },\n            setY: (y) => {\n                if (this.parent) {\n                    const { y: newY } = this.parent.inverse.multiply(vec(this.pos.x, y));\n                    this.pos.y = newY;\n                }\n                else {\n                    this.pos.y = y;\n                }\n                if (y !== this.matrix.data[5]) {\n                    this.flagDirty();\n                }\n            }\n        });\n        this._rotation = 0;\n        this._scale = new WatchVector(vec(1, 1), () => {\n            this.flagDirty();\n        });\n        this._globalScale = new VectorView({\n            getX: () => (this.parent ? this.matrix.getScaleX() : this.scale.x),\n            getY: () => (this.parent ? this.matrix.getScaleY() : this.scale.y),\n            setX: (x) => {\n                if (this.parent) {\n                    const globalScaleX = this.parent.globalScale.x;\n                    this.scale.x = x / globalScaleX;\n                }\n                else {\n                    this.scale.x = x;\n                }\n            },\n            setY: (y) => {\n                if (this.parent) {\n                    const globalScaleY = this.parent.globalScale.y;\n                    this.scale.y = y / globalScaleY;\n                }\n                else {\n                    this.scale.y = y;\n                }\n            }\n        });\n        this._z = 0;\n        this._isDirty = false;\n        this._isInverseDirty = false;\n        this._matrix = AffineMatrix.identity();\n        this._inverse = AffineMatrix.identity();\n        this._scratch = AffineMatrix.identity();\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(transform) {\n        if (this._parent) {\n            const index = this._parent._children.indexOf(this);\n            if (index > -1) {\n                this._parent._children.splice(index, 1);\n            }\n        }\n        this._parent = transform;\n        if (this._parent) {\n            this._parent._children.push(this);\n        }\n        this.flagDirty();\n    }\n    get children() {\n        return this._children;\n    }\n    set pos(v) {\n        this._pos.x = v.x;\n        this._pos.y = v.y;\n    }\n    get pos() {\n        return this._pos;\n    }\n    set globalPos(v) {\n        let localPos = v.clone();\n        if (this.parent) {\n            localPos = this.parent.inverse.multiply(v);\n        }\n        if (!localPos.equals(this._pos)) {\n            this._pos = localPos;\n            this.flagDirty();\n        }\n    }\n    get globalPos() {\n        return this._globalPos;\n    }\n    set rotation(rotation) {\n        const canonRotation = canonicalizeAngle(rotation);\n        if (canonRotation !== this._rotation) {\n            this.flagDirty();\n        }\n        this._rotation = canonRotation;\n    }\n    get rotation() {\n        return this._rotation;\n    }\n    set globalRotation(rotation) {\n        let inverseRotation = 0;\n        if (this.parent) {\n            inverseRotation = this.parent.globalRotation;\n        }\n        const canonRotation = canonicalizeAngle(rotation + inverseRotation);\n        if (canonRotation !== this._rotation) {\n            this.flagDirty();\n        }\n        this._rotation = canonRotation;\n    }\n    get globalRotation() {\n        if (this.parent) {\n            return this.matrix.getRotation();\n        }\n        return this.rotation;\n    }\n    set scale(v) {\n        this._scale.x = v.x;\n        this._scale.y = v.y;\n    }\n    get scale() {\n        return this._scale;\n    }\n    set globalScale(v) {\n        let inverseScale = vec(1, 1);\n        if (this.parent) {\n            inverseScale = this.parent.globalScale;\n        }\n        this.scale = v.scale(vec(1 / inverseScale.x, 1 / inverseScale.y));\n    }\n    get globalScale() {\n        return this._globalScale;\n    }\n    set z(z) {\n        this._z = z;\n        this.flagDirty();\n    }\n    get z() {\n        return this._z;\n    }\n    set globalZ(z) {\n        if (this.parent) {\n            this.z = z - this.parent.globalZ;\n        }\n        else {\n            this.z = z;\n        }\n    }\n    get globalZ() {\n        if (this.parent) {\n            return this.z + this.parent.globalZ;\n        }\n        return this.z;\n    }\n    /**\n     * Calculates and returns the matrix representation of this transform\n     *\n     * Avoid mutating the matrix to update the transform, it is not the source of truth.\n     * Update the transform pos, rotation, scale.\n     */\n    get matrix() {\n        if (this._isDirty) {\n            if (this.parent === null) {\n                this._calculateMatrix().clone(this._matrix);\n            }\n            else {\n                this.parent.matrix.multiply(this._calculateMatrix()).clone(this._matrix);\n            }\n            this._isDirty = false;\n        }\n        return this._matrix;\n    }\n    /**\n     * Calculates and returns the inverse matrix representation of this transform\n     */\n    get inverse() {\n        if (this._isInverseDirty) {\n            this.matrix.inverse(this._inverse);\n            this._isInverseDirty = false;\n        }\n        return this._inverse;\n    }\n    _calculateMatrix() {\n        this._scratch.data[0] = Math.cos(this._rotation);\n        this._scratch.data[1] = Math.sin(this._rotation);\n        this._scratch.data[2] = -Math.sin(this._rotation);\n        this._scratch.data[3] = Math.cos(this.rotation);\n        this._scratch.data[4] = this._pos.x;\n        this._scratch.data[5] = this._pos.y;\n        this._scratch.scale(this._scale.x, this._scale.y);\n        return this._scratch;\n    }\n    flagDirty() {\n        this._isDirty = true;\n        this._isInverseDirty = true;\n        for (let i = 0; i < this._children.length; i++) {\n            this._children[i].flagDirty();\n        }\n    }\n    apply(point) {\n        return this.matrix.multiply(point);\n    }\n    applyInverse(point) {\n        return this.inverse.multiply(point);\n    }\n    setTransform(pos, rotation, scale) {\n        this._pos.x = pos.x;\n        this._pos.y = pos.y;\n        this._rotation = canonicalizeAngle(rotation);\n        this._scale.x = scale.x;\n        this._scale.y = scale.y;\n        this.flagDirty();\n    }\n    /**\n     * Returns true if the transform has a negative x scale or y scale, but not both\n     */\n    isMirrored() {\n        const signBitX = sign(this.scale.x) >>> 31;\n        const signBitY = sign(this.scale.y) >>> 31;\n        const mirrored = signBitX ^ signBitY;\n        return !!mirrored;\n    }\n    /**\n     * Clones the current transform\n     * **Warning does not clone the parent**\n     * @param dest\n     */\n    clone(dest) {\n        const target = dest !== null && dest !== void 0 ? dest : new transform_Transform();\n        this._pos.clone(target._pos);\n        target._z = this._z;\n        target._rotation = this._rotation;\n        this._scale.clone(target._scale);\n        target.flagDirty();\n        return target;\n    }\n    /**\n     * Clones but keeps the same parent reference\n     */\n    cloneWithParent(dest) {\n        const target = dest !== null && dest !== void 0 ? dest : new transform_Transform();\n        this._pos.clone(target._pos);\n        target._z = this._z;\n        target._rotation = this._rotation;\n        this._scale.clone(target._scale);\n        target.parent = this.parent;\n        target.flagDirty();\n        return target;\n    }\n    toString() {\n        return this.matrix.toString();\n    }\n}\n\n;// ./EntityComponentSystem/Component.ts\n/**\n *\n */\nfunction isComponentCtor(value) {\n    return !!value && !!value.prototype && !!value.prototype.constructor;\n}\n/**\n * Type guard to check if a component implements clone\n * @param x\n */\nfunction hasClone(x) {\n    return !!(x === null || x === void 0 ? void 0 : x.clone);\n}\n/**\n * Components are containers for state in Excalibur, the are meant to convey capabilities that an Entity possesses\n *\n * Implementations of Component must have a zero-arg constructor to support dependencies\n *\n * ```typescript\n * class MyComponent extends ex.Component {\n *   // zero arg support required if you want to use component dependencies\n *   constructor(public optionalPos?: ex.Vector) {}\n * }\n * ```\n */\nclass Component {\n    constructor() {\n        // TODO maybe generate a unique id?\n        /**\n         * Current owning {@apilink Entity}, if any, of this component. Null if not added to any {@apilink Entity}\n         */\n        this.owner = undefined;\n    }\n    /**\n     * Clones any properties on this component, if that property value has a `clone()` method it will be called\n     */\n    clone() {\n        const newComponent = new this.constructor();\n        for (const prop in this) {\n            if (this.hasOwnProperty(prop)) {\n                const val = this[prop];\n                if (hasClone(val) && prop !== 'owner' && prop !== 'clone') {\n                    newComponent[prop] = val.clone();\n                }\n                else {\n                    newComponent[prop] = val;\n                }\n            }\n        }\n        return newComponent;\n    }\n}\n\n;// ./Util/Observable.ts\n/**\n * Simple Observable implementation\n * @template T is the typescript Type that defines the data being observed\n */\nclass Observable {\n    constructor() {\n        this.observers = [];\n        this.subscriptions = [];\n    }\n    /**\n     * Register an observer to listen to this observable\n     * @param observer\n     */\n    register(observer) {\n        this.observers.push(observer);\n    }\n    /**\n     * Register a callback to listen to this observable\n     * @param func\n     */\n    subscribe(func) {\n        this.subscriptions.push(func);\n    }\n    /**\n     * Remove an observer from the observable\n     * @param observer\n     */\n    unregister(observer) {\n        const i = this.observers.indexOf(observer);\n        if (i !== -1) {\n            this.observers.splice(i, 1);\n        }\n    }\n    /**\n     * Remove a callback that is listening to this observable\n     * @param func\n     */\n    unsubscribe(func) {\n        const i = this.subscriptions.indexOf(func);\n        if (i !== -1) {\n            this.subscriptions.splice(i, 1);\n        }\n    }\n    /**\n     * Broadcasts a message to all observers and callbacks\n     * @param message\n     */\n    notifyAll(message) {\n        const observersLength = this.observers.length;\n        for (let i = 0; i < observersLength; i++) {\n            this.observers[i].notify(message);\n        }\n        const subscriptionsLength = this.subscriptions.length;\n        for (let i = 0; i < subscriptionsLength; i++) {\n            this.subscriptions[i](message);\n        }\n    }\n    /**\n     * Removes all observers and callbacks\n     */\n    clear() {\n        this.observers.length = 0;\n        this.subscriptions.length = 0;\n    }\n}\n\n;// ./EntityComponentSystem/Components/TransformComponent.ts\n\n\n\n\n\nclass TransformComponent extends Component {\n    constructor() {\n        super(...arguments);\n        this._logger = Logger.getInstance();\n        this._parentComponent = null;\n        this._transform = new transform_Transform();\n        this._addChildTransform = (child) => {\n            const childTxComponent = child.get(TransformComponent);\n            if (childTxComponent) {\n                childTxComponent._transform.parent = this._transform;\n                childTxComponent._parentComponent = this;\n            }\n        };\n        /**\n         * Observable that emits when the z index changes on this component\n         */\n        this.zIndexChanged$ = new Observable();\n        this._coordPlane = CoordPlane.World;\n    }\n    get() {\n        return this._transform;\n    }\n    onAdd(owner) {\n        for (const child of owner.children) {\n            this._addChildTransform(child);\n        }\n        owner.childrenAdded$.subscribe((child) => this._addChildTransform(child));\n        owner.childrenRemoved$.subscribe((child) => {\n            const childTxComponent = child.get(TransformComponent);\n            if (childTxComponent) {\n                childTxComponent._transform.parent = null;\n                childTxComponent._parentComponent = null;\n            }\n        });\n    }\n    onRemove(_previousOwner) {\n        this._transform.parent = null;\n        this._parentComponent = null;\n    }\n    /**\n     * The z-index ordering of the entity, a higher values are drawn on top of lower values.\n     * For example z=99 would be drawn on top of z=0.\n     */\n    get z() {\n        return this._transform.z;\n    }\n    set z(val) {\n        const oldz = this._transform.z;\n        this._transform.z = val;\n        if (oldz !== val) {\n            this.zIndexChanged$.notifyAll(val);\n        }\n    }\n    get globalZ() {\n        return this._transform.globalZ;\n    }\n    set globalZ(z) {\n        this._transform.globalZ = z;\n    }\n    /**\n     * The {@apilink CoordPlane | `coordinate plane`} for this transform for the entity.\n     */\n    get coordPlane() {\n        if (this._parentComponent) {\n            return this._parentComponent.coordPlane;\n        }\n        return this._coordPlane;\n    }\n    set coordPlane(value) {\n        var _a;\n        if (!this._parentComponent) {\n            this._coordPlane = value;\n        }\n        else {\n            this._logger.warn(`Cannot set coordinate plane on child entity ${(_a = this.owner) === null || _a === void 0 ? void 0 : _a.name}, children inherit their coordinate plane from their parents.`);\n        }\n    }\n    get pos() {\n        return this._transform.pos;\n    }\n    set pos(v) {\n        this._transform.pos = v;\n    }\n    get globalPos() {\n        return this._transform.globalPos;\n    }\n    set globalPos(v) {\n        this._transform.globalPos = v;\n    }\n    get rotation() {\n        return this._transform.rotation;\n    }\n    set rotation(rotation) {\n        this._transform.rotation = rotation;\n    }\n    get globalRotation() {\n        return this._transform.globalRotation;\n    }\n    set globalRotation(rotation) {\n        this._transform.globalRotation = rotation;\n    }\n    get scale() {\n        return this._transform.scale;\n    }\n    set scale(v) {\n        this._transform.scale = v;\n    }\n    get globalScale() {\n        return this._transform.globalScale;\n    }\n    set globalScale(v) {\n        this._transform.globalScale = v;\n    }\n    applyInverse(v) {\n        return this._transform.applyInverse(v);\n    }\n    apply(v) {\n        return this._transform.apply(v);\n    }\n    clone() {\n        const component = new TransformComponent();\n        component._transform = this._transform.clone();\n        return component;\n    }\n}\n\n;// ./Graphics/Animation.ts\n\n\n\n\nvar AnimationDirection;\n(function (AnimationDirection) {\n    /**\n     * Animation is playing forwards\n     */\n    AnimationDirection[\"Forward\"] = \"forward\";\n    /**\n     * Animation is playing backwards\n     */\n    AnimationDirection[\"Backward\"] = \"backward\";\n})(AnimationDirection || (AnimationDirection = {}));\nvar AnimationStrategy;\n(function (AnimationStrategy) {\n    /**\n     * Animation ends without displaying anything\n     */\n    AnimationStrategy[\"End\"] = \"end\";\n    /**\n     * Animation loops to the first frame after the last frame\n     */\n    AnimationStrategy[\"Loop\"] = \"loop\";\n    /**\n     * Animation plays to the last frame, then backwards to the first frame, then repeats\n     */\n    AnimationStrategy[\"PingPong\"] = \"pingpong\";\n    /**\n     * Animation ends stopping on the last frame\n     */\n    AnimationStrategy[\"Freeze\"] = \"freeze\";\n})(AnimationStrategy || (AnimationStrategy = {}));\nconst AnimationEvents = {\n    Frame: 'frame',\n    Loop: 'loop',\n    End: 'end'\n};\n/**\n * Create an Animation given a list of {@apilink Frame | `frames`} in {@apilink AnimationOptions}\n *\n * To create an Animation from a {@apilink SpriteSheet}, use {@apilink Animation.fromSpriteSheet}\n */\nclass Animation extends Graphic {\n    constructor(options) {\n        var _a, _b, _c;\n        super(options);\n        this.events = new EventEmitter();\n        this.frames = [];\n        this.strategy = AnimationStrategy.Loop;\n        this.frameDuration = 100;\n        this._idempotencyToken = -1;\n        this._firstTick = true;\n        this._currentFrame = 0;\n        this._timeLeftInFrame = 0;\n        this._pingPongDirection = 1;\n        this._done = false;\n        this._playing = true;\n        this._speed = 1;\n        this._reversed = false;\n        this.frames = options.frames;\n        this.speed = (_a = options.speed) !== null && _a !== void 0 ? _a : this.speed;\n        this.strategy = (_b = options.strategy) !== null && _b !== void 0 ? _b : this.strategy;\n        this.frameDuration = options.totalDuration ? options.totalDuration / this.frames.length : (_c = options.frameDuration) !== null && _c !== void 0 ? _c : this.frameDuration;\n        if (options.reverse) {\n            this.reverse();\n        }\n        this.goToFrame(0);\n    }\n    clone() {\n        return new Animation({\n            frames: this.frames.map((f) => ({ ...f })),\n            frameDuration: this.frameDuration,\n            speed: this.speed,\n            reverse: this._reversed,\n            strategy: this.strategy,\n            ...this.cloneGraphicOptions()\n        });\n    }\n    get width() {\n        const maybeFrame = this.currentFrame;\n        if (maybeFrame && maybeFrame.graphic) {\n            return Math.abs(maybeFrame.graphic.width * this.scale.x);\n        }\n        return 0;\n    }\n    get height() {\n        const maybeFrame = this.currentFrame;\n        if (maybeFrame && maybeFrame.graphic) {\n            return Math.abs(maybeFrame.graphic.height * this.scale.y);\n        }\n        return 0;\n    }\n    /**\n     * Create an Animation from a {@apilink SpriteSheet}, a list of indices into the sprite sheet, a duration per frame\n     * and optional {@apilink AnimationStrategy}\n     *\n     * Example:\n     * ```typescript\n     * const spriteSheet = SpriteSheet.fromImageSource({...});\n     *\n     * const anim = Animation.fromSpriteSheet(spriteSheet, range(0, 5), 200, AnimationStrategy.Loop);\n     * ```\n     * @param spriteSheet ex.SpriteSheet\n     * @param spriteSheetIndex 0 based index from left to right, top down (row major order) of the ex.SpriteSheet\n     * @param durationPerFrame duration per frame in milliseconds\n     * @param strategy Optional strategy, default AnimationStrategy.Loop\n     */\n    static fromSpriteSheet(spriteSheet, spriteSheetIndex, durationPerFrame, strategy = AnimationStrategy.Loop) {\n        const maxIndex = spriteSheet.sprites.length - 1;\n        const invalidIndices = spriteSheetIndex.filter((index) => index < 0 || index > maxIndex);\n        if (invalidIndices.length) {\n            Animation._LOGGER.warn(`Indices into SpriteSheet were provided that don\\'t exist: ${invalidIndices.join(',')} no frame will be shown`);\n        }\n        return new Animation({\n            frames: spriteSheet.sprites\n                .filter((_, index) => spriteSheetIndex.indexOf(index) > -1)\n                .map((f) => ({\n                graphic: f,\n                duration: durationPerFrame\n            })),\n            strategy: strategy\n        });\n    }\n    /**\n     * Create an {@apilink Animation} from a {@apilink SpriteSheet} given a list of coordinates\n     *\n     * Example:\n     * ```typescript\n     * const spriteSheet = SpriteSheet.fromImageSource({...});\n     *\n     * const anim = Animation.fromSpriteSheetCoordinates({\n     *  spriteSheet,\n     *  frameCoordinates: [\n     *    {x: 0, y: 5, duration: 100, options { flipHorizontal: true }},\n     *    {x: 1, y: 5, duration: 200},\n     *    {x: 2, y: 5},\n     *    {x: 3, y: 5}\n     *  ],\n     *  strategy: AnimationStrategy.PingPong\n     * });\n     * ```\n     * @param options\n     * @returns Animation\n     */\n    static fromSpriteSheetCoordinates(options) {\n        var _a;\n        const { spriteSheet, frameCoordinates, durationPerFrame, durationPerFrameMs, speed, strategy, reverse } = options;\n        const defaultDuration = (_a = durationPerFrame !== null && durationPerFrame !== void 0 ? durationPerFrame : durationPerFrameMs) !== null && _a !== void 0 ? _a : 100;\n        const frames = [];\n        for (const coord of frameCoordinates) {\n            const { x, y, duration, options } = coord;\n            const sprite = spriteSheet.getSprite(x, y, options);\n            if (sprite) {\n                frames.push({\n                    graphic: sprite,\n                    duration: duration !== null && duration !== void 0 ? duration : defaultDuration\n                });\n            }\n            else {\n                Animation._LOGGER.warn(`Skipping frame! SpriteSheet does not have coordinate (${x}, ${y}), please check your SpriteSheet to confirm that sprite exists`);\n            }\n        }\n        return new Animation({\n            frames,\n            strategy,\n            speed,\n            reverse\n        });\n    }\n    /**\n     * Current animation speed\n     *\n     * 1 meaning normal 1x speed.\n     * 2 meaning 2x speed and so on.\n     */\n    get speed() {\n        return this._speed;\n    }\n    /**\n     * Current animation speed\n     *\n     * 1 meaning normal 1x speed.\n     * 2 meaning 2x speed and so on.\n     */\n    set speed(val) {\n        this._speed = clamp(Math.abs(val), 0, Infinity);\n    }\n    /**\n     * Returns the current Frame of the animation\n     *\n     * Use {@apilink Animation.currentFrameIndex} to get the frame number and\n     * {@apilink Animation.goToFrame} to set the current frame index\n     */\n    get currentFrame() {\n        if (this._currentFrame >= 0 && this._currentFrame < this.frames.length) {\n            return this.frames[this._currentFrame];\n        }\n        return null;\n    }\n    /**\n     * Returns the current frame index of the animation\n     *\n     * Use {@apilink Animation.currentFrame} to grab the current {@apilink Frame} object\n     */\n    get currentFrameIndex() {\n        return this._currentFrame;\n    }\n    /**\n     * Returns the amount of time in milliseconds left in the current frame\n     */\n    get currentFrameTimeLeft() {\n        return this._timeLeftInFrame;\n    }\n    /**\n     * Returns `true` if the animation is playing\n     */\n    get isPlaying() {\n        return this._playing;\n    }\n    get isReversed() {\n        return this._reversed;\n    }\n    /**\n     * Reverses the play direction of the Animation, this preserves the current frame\n     */\n    reverse() {\n        // Don't mutate with the original frame list, create a copy\n        this.frames = this.frames.slice().reverse();\n        this._reversed = !this._reversed;\n    }\n    /**\n     * Returns the current play direction of the animation\n     */\n    get direction() {\n        // Keep logically consistent with ping-pong direction\n        // If ping-pong is forward = 1 and reversed is true then we are logically reversed\n        const reversed = this._reversed && this._pingPongDirection === 1 ? true : false;\n        return reversed ? AnimationDirection.Backward : AnimationDirection.Forward;\n    }\n    /**\n     * Plays or resumes the animation from the current frame\n     */\n    play() {\n        this._playing = true;\n    }\n    /**\n     * Pauses the animation on the current frame\n     */\n    pause() {\n        this._playing = false;\n        this._firstTick = true; // firstTick must be set to emit the proper frame event\n    }\n    /**\n     * Reset the animation back to the beginning, including if the animation were done\n     */\n    reset() {\n        this._done = false;\n        this._firstTick = true;\n        this._currentFrame = 0;\n        this._timeLeftInFrame = this.frameDuration;\n        const maybeFrame = this.frames[this._currentFrame];\n        if (maybeFrame) {\n            this._timeLeftInFrame = (maybeFrame === null || maybeFrame === void 0 ? void 0 : maybeFrame.duration) || this.frameDuration;\n        }\n    }\n    /**\n     * Returns `true` if the animation can end\n     */\n    get canFinish() {\n        switch (this.strategy) {\n            case AnimationStrategy.End:\n            case AnimationStrategy.Freeze: {\n                return true;\n            }\n            default: {\n                return false;\n            }\n        }\n    }\n    /**\n     * Returns `true` if the animation is done, for looping type animations\n     * `ex.AnimationStrategy.PingPong` and `ex.AnimationStrategy.Loop` this will always return `false`\n     *\n     * See the `ex.Animation.canFinish()` method to know if an animation type can end\n     */\n    get done() {\n        return this._done;\n    }\n    /**\n     * Jump the animation immediately to a specific frame if it exists\n     *\n     * Optionally specify an override for the duration of the frame, useful for\n     * keeping multiple animations in sync with one another.\n     * @param frameNumber\n     * @param duration\n     */\n    goToFrame(frameNumber, duration) {\n        this._currentFrame = frameNumber;\n        this._timeLeftInFrame = duration !== null && duration !== void 0 ? duration : this.frameDuration;\n        const maybeFrame = this.frames[this._currentFrame];\n        if (maybeFrame && !this._done) {\n            this._timeLeftInFrame = duration !== null && duration !== void 0 ? duration : ((maybeFrame === null || maybeFrame === void 0 ? void 0 : maybeFrame.duration) || this.frameDuration);\n            this.events.emit('frame', { ...maybeFrame, frameIndex: this.currentFrameIndex });\n        }\n    }\n    _nextFrame() {\n        const currentFrame = this._currentFrame;\n        if (this._done) {\n            return currentFrame;\n        }\n        let next = -1;\n        switch (this.strategy) {\n            case AnimationStrategy.Loop: {\n                next = (currentFrame + 1) % this.frames.length;\n                if (next === 0) {\n                    this.events.emit('loop', this);\n                }\n                break;\n            }\n            case AnimationStrategy.End: {\n                next = currentFrame + 1;\n                if (next >= this.frames.length) {\n                    this._done = true;\n                    this._currentFrame = this.frames.length;\n                    this.events.emit('end', this);\n                }\n                break;\n            }\n            case AnimationStrategy.Freeze: {\n                next = clamp(currentFrame + 1, 0, this.frames.length - 1);\n                if (next >= this.frames.length - 1) {\n                    this._done = true;\n                    this.events.emit('end', this);\n                }\n                break;\n            }\n            case AnimationStrategy.PingPong: {\n                if (currentFrame + this._pingPongDirection >= this.frames.length) {\n                    this._pingPongDirection = -1;\n                    this.events.emit('loop', this);\n                }\n                if (currentFrame + this._pingPongDirection < 0) {\n                    this._pingPongDirection = 1;\n                    this.events.emit('loop', this);\n                }\n                next = currentFrame + (this._pingPongDirection % this.frames.length);\n                break;\n            }\n        }\n        return next;\n    }\n    /**\n     * Called internally by Excalibur to update the state of the animation potential update the current frame\n     * @param elapsed Milliseconds elapsed\n     * @param idempotencyToken Prevents double ticking in a frame by passing a unique token to the frame\n     */\n    tick(elapsed, idempotencyToken = 0) {\n        if (this._idempotencyToken === idempotencyToken) {\n            return;\n        }\n        this._idempotencyToken = idempotencyToken;\n        if (!this._playing) {\n            return;\n        }\n        // if it's the first frame emit frame event\n        if (this._firstTick) {\n            this._firstTick = false;\n            this.events.emit('frame', { ...this.currentFrame, frameIndex: this.currentFrameIndex });\n        }\n        this._timeLeftInFrame -= elapsed * this._speed;\n        if (this._timeLeftInFrame <= 0) {\n            this.goToFrame(this._nextFrame());\n        }\n    }\n    _drawImage(ctx, x, y) {\n        if (this.currentFrame && this.currentFrame.graphic) {\n            this.currentFrame.graphic.draw(ctx, x, y);\n        }\n    }\n}\nAnimation._LOGGER = Logger.getInstance();\n\n;// ./Graphics/GraphicsGroup.ts\n\n\n\n\n\nclass GraphicsGroup extends Graphic {\n    constructor(options) {\n        var _a;\n        super(options);\n        this._logger = Logger.getInstance();\n        this.useAnchor = true;\n        this.members = [];\n        this.members = options.members;\n        this.useAnchor = (_a = options.useAnchor) !== null && _a !== void 0 ? _a : this.useAnchor;\n        this._updateDimensions();\n    }\n    clone() {\n        return new GraphicsGroup({\n            members: [...this.members],\n            ...this.cloneGraphicOptions()\n        });\n    }\n    _updateDimensions() {\n        const bb = this.localBounds;\n        this.width = bb.width;\n        this.height = bb.height;\n        return bb;\n    }\n    get localBounds() {\n        const bb = new BoundingBox();\n        for (const member of this.members) {\n            if (member instanceof Graphic) {\n                member.localBounds.combine(bb, bb);\n            }\n            else {\n                const { graphic, offset: pos, useBounds } = member;\n                const shouldUseBounds = useBounds === undefined ? true : useBounds;\n                if (graphic) {\n                    if (shouldUseBounds) {\n                        graphic.localBounds.translate(pos).combine(bb, bb);\n                    }\n                }\n                else {\n                    this._logger.warnOnce(`Graphics group member has an null or undefined graphic, member definition: ${JSON.stringify(member)}.`);\n                }\n            }\n        }\n        return bb;\n    }\n    _isAnimationOrGroup(graphic) {\n        return graphic instanceof Animation || graphic instanceof GraphicsGroup;\n    }\n    tick(elapsed, idempotencyToken) {\n        for (const member of this.members) {\n            let graphic;\n            if (member instanceof Graphic) {\n                graphic = member;\n            }\n            else {\n                graphic = member.graphic;\n            }\n            if (this._isAnimationOrGroup(graphic)) {\n                graphic.tick(elapsed, idempotencyToken);\n            }\n        }\n    }\n    reset() {\n        for (const member of this.members) {\n            let graphic;\n            if (member instanceof Graphic) {\n                graphic = member;\n            }\n            else {\n                graphic = member.graphic;\n            }\n            if (this._isAnimationOrGroup(graphic)) {\n                graphic.reset();\n            }\n        }\n    }\n    _preDraw(ex, x, y) {\n        this._updateDimensions();\n        super._preDraw(ex, this.useAnchor ? x : 0, this.useAnchor ? y : 0);\n    }\n    _drawImage(ex, x, y) {\n        const pos = Vector.Zero;\n        for (const member of this.members) {\n            let graphic;\n            if (member instanceof Graphic) {\n                graphic = member;\n            }\n            else {\n                graphic = member.graphic;\n                member.offset.clone(pos);\n            }\n            if (!graphic) {\n                continue;\n            }\n            ex.save();\n            ex.translate(x, y);\n            graphic.draw(ex, pos.x, pos.y);\n            if (this.showDebug) {\n                /* istanbul ignore next */\n                ex.debug.drawRect(0, 0, this.width, this.height);\n            }\n            ex.restore();\n        }\n    }\n}\n\n;// ./Graphics/Raster.ts\n\n\n\n\n\n\n/**\n * A Raster is a Graphic that needs to be first painted to a HTMLCanvasElement before it can be drawn to the\n * {@apilink ExcaliburGraphicsContext}. This is useful for generating custom images using the 2D canvas api.\n *\n * Implementors must implement the {@apilink Raster.execute} method to rasterize their drawing.\n */\nclass Raster extends Graphic {\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        super(omit({ ...options }, ['width', 'height'])); // rasters do some special sauce with width/height\n        this.lineCap = 'butt';\n        this.quality = 1;\n        this._dirty = true;\n        this._smoothing = false;\n        this._color = watch(Color.Black, () => this.flagDirty());\n        this._lineWidth = 1;\n        this._lineDash = [];\n        this._padding = 0;\n        if (options) {\n            this.quality = (_a = options.quality) !== null && _a !== void 0 ? _a : this.quality;\n            this.color = (_b = options.color) !== null && _b !== void 0 ? _b : Color.Black;\n            this.strokeColor = options === null || options === void 0 ? void 0 : options.strokeColor;\n            this.smoothing = (_c = options.smoothing) !== null && _c !== void 0 ? _c : this.smoothing;\n            this.lineWidth = (_d = options.lineWidth) !== null && _d !== void 0 ? _d : this.lineWidth;\n            this.lineDash = (_e = options.lineDash) !== null && _e !== void 0 ? _e : this.lineDash;\n            this.lineCap = (_f = options.lineCap) !== null && _f !== void 0 ? _f : this.lineCap;\n            this.padding = (_g = options.padding) !== null && _g !== void 0 ? _g : this.padding;\n            this.filtering = (_h = options.filtering) !== null && _h !== void 0 ? _h : this.filtering;\n        }\n        this._bitmap = document.createElement('canvas');\n        // get the default canvas width/height as a fallback\n        const bitmapWidth = (_j = options === null || options === void 0 ? void 0 : options.width) !== null && _j !== void 0 ? _j : this._bitmap.width;\n        const bitmapHeight = (_k = options === null || options === void 0 ? void 0 : options.height) !== null && _k !== void 0 ? _k : this._bitmap.height;\n        this.width = bitmapWidth;\n        this.height = bitmapHeight;\n        const maybeCtx = this._bitmap.getContext('2d');\n        if (!maybeCtx) {\n            /* istanbul ignore next */\n            throw new Error('Browser does not support 2d canvas drawing, cannot create Raster graphic');\n        }\n        else {\n            this._ctx = maybeCtx;\n        }\n    }\n    cloneRasterOptions() {\n        return {\n            color: this.color ? this.color.clone() : undefined,\n            strokeColor: this.strokeColor ? this.strokeColor.clone() : undefined,\n            smoothing: this.smoothing,\n            lineWidth: this.lineWidth,\n            lineDash: this.lineDash,\n            lineCap: this.lineCap,\n            quality: this.quality,\n            padding: this.padding\n        };\n    }\n    /**\n     * Gets whether the graphic is dirty, this means there are changes that haven't been re-rasterized\n     */\n    get dirty() {\n        return this._dirty;\n    }\n    /**\n     * Flags the graphic as dirty, meaning it must be re-rasterized before draw.\n     * This should be called any time the graphics state changes such that it affects the outputted drawing\n     */\n    flagDirty() {\n        this._dirty = true;\n    }\n    /**\n     * Gets or sets the current width of the Raster graphic. Setting the width will cause the raster\n     * to be flagged dirty causing a re-raster on the next draw.\n     *\n     * Any `padding`s or `quality` set will be factored into the width\n     */\n    get width() {\n        return Math.abs(this._getTotalWidth() * this.scale.x);\n    }\n    set width(value) {\n        value /= Math.abs(this.scale.x);\n        this._bitmap.width = value;\n        this._originalWidth = value;\n        this.flagDirty();\n    }\n    /**\n     * Gets or sets the current height of the Raster graphic. Setting the height will cause the raster\n     * to be flagged dirty causing a re-raster on the next draw.\n     *\n     * Any `padding` or `quality` set will be factored into the height\n     */\n    get height() {\n        return Math.abs(this._getTotalHeight() * this.scale.y);\n    }\n    set height(value) {\n        value /= Math.abs(this.scale.y);\n        this._bitmap.height = value;\n        this._originalHeight = value;\n        this.flagDirty();\n    }\n    _getTotalWidth() {\n        var _a;\n        return (((_a = this._originalWidth) !== null && _a !== void 0 ? _a : this._bitmap.width) + this.padding * 2) * 1;\n    }\n    _getTotalHeight() {\n        var _a;\n        return (((_a = this._originalHeight) !== null && _a !== void 0 ? _a : this._bitmap.height) + this.padding * 2) * 1;\n    }\n    /**\n     * Returns the local bounds of the Raster including the padding\n     */\n    get localBounds() {\n        return BoundingBox.fromDimension(this._getTotalWidth() * this.scale.x, this._getTotalHeight() * this.scale.y, Vector.Zero);\n    }\n    /**\n     * Gets or sets the smoothing (anti-aliasing of the graphic). Setting the height will cause the raster\n     * to be flagged dirty causing a re-raster on the next draw.\n     */\n    get smoothing() {\n        return this._smoothing;\n    }\n    set smoothing(value) {\n        this._smoothing = value;\n        this.flagDirty();\n    }\n    /**\n     * Gets or sets the fillStyle of the Raster graphic. Setting the fillStyle will cause the raster to be\n     * flagged dirty causing a re-raster on the next draw.\n     */\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this.flagDirty();\n        this._color = watch(value, () => this.flagDirty());\n    }\n    /**\n     * Gets or sets the strokeStyle of the Raster graphic. Setting the strokeStyle will cause the raster to be\n     * flagged dirty causing a re-raster on the next draw.\n     */\n    get strokeColor() {\n        return this._strokeColor;\n    }\n    set strokeColor(value) {\n        this.flagDirty();\n        if (value) {\n            this._strokeColor = watch(value, () => this.flagDirty());\n        }\n    }\n    /**\n     * Gets or sets the line width of the Raster graphic. Setting the lineWidth will cause the raster to be\n     * flagged dirty causing a re-raster on the next draw.\n     */\n    get lineWidth() {\n        return this._lineWidth;\n    }\n    set lineWidth(value) {\n        this._lineWidth = value;\n        this.flagDirty();\n    }\n    get lineDash() {\n        return this._lineDash;\n    }\n    set lineDash(value) {\n        this._lineDash = value;\n        this.flagDirty();\n    }\n    get padding() {\n        return this._padding;\n    }\n    set padding(value) {\n        this._padding = value;\n        this.flagDirty();\n    }\n    /**\n     * Rasterize the graphic to a bitmap making it usable as in excalibur. Rasterize is called automatically if\n     * the graphic is {@apilink Raster.dirty} on the next {@apilink Graphic.draw} call\n     */\n    rasterize() {\n        this._dirty = false;\n        this._ctx.clearRect(0, 0, this._getTotalWidth(), this._getTotalHeight());\n        this._ctx.save();\n        this._applyRasterProperties(this._ctx);\n        this.execute(this._ctx);\n        this._ctx.restore();\n    }\n    _applyRasterProperties(ctx) {\n        var _a, _b, _c, _d;\n        this._bitmap.width = this._getTotalWidth() * this.quality;\n        this._bitmap.height = this._getTotalHeight() * this.quality;\n        // Do a bad thing to pass the filtering as an attribute\n        this._bitmap.setAttribute('filtering', this.filtering);\n        this._bitmap.setAttribute('forceUpload', 'true');\n        ctx.scale(this.quality, this.quality);\n        ctx.translate(this.padding, this.padding);\n        ctx.imageSmoothingEnabled = this.smoothing;\n        ctx.lineWidth = this.lineWidth;\n        ctx.setLineDash((_a = this.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\n        ctx.lineCap = this.lineCap;\n        ctx.strokeStyle = (_c = (_b = this.strokeColor) === null || _b === void 0 ? void 0 : _b.toString()) !== null && _c !== void 0 ? _c : '';\n        ctx.fillStyle = (_d = this.color) === null || _d === void 0 ? void 0 : _d.toString();\n    }\n    _drawImage(ex, x, y) {\n        if (this._dirty) {\n            this.rasterize();\n        }\n        ex.scale(1 / this.quality, 1 / this.quality);\n        ex.drawImage(this._bitmap, x, y);\n    }\n}\n\n;// ./Graphics/FontCommon.ts\n/**\n * Enum representing the different font size units\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n */\nvar FontUnit;\n(function (FontUnit) {\n    /**\n     * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\n     */\n    FontUnit[\"Em\"] = \"em\";\n    /**\n     * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\n     */\n    FontUnit[\"Rem\"] = \"rem\";\n    /**\n     * Pixel is a unit of length in screen pixels\n     */\n    FontUnit[\"Px\"] = \"px\";\n    /**\n     * Point is a physical unit length (1/72 of an inch)\n     */\n    FontUnit[\"Pt\"] = \"pt\";\n    /**\n     * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\n     */\n    FontUnit[\"Percent\"] = \"%\";\n})(FontUnit || (FontUnit = {}));\n/**\n * Enum representing the different horizontal text alignments\n */\nvar TextAlign;\n(function (TextAlign) {\n    /**\n     * The text is left-aligned.\n     */\n    TextAlign[\"Left\"] = \"left\";\n    /**\n     * The text is right-aligned.\n     */\n    TextAlign[\"Right\"] = \"right\";\n    /**\n     * The text is centered.\n     */\n    TextAlign[\"Center\"] = \"center\";\n    /**\n     * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\n     * right-aligned for right-to-left locales).\n     */\n    TextAlign[\"Start\"] = \"start\";\n    /**\n     * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\n     * left-aligned for right-to-left locales).\n     */\n    TextAlign[\"End\"] = \"end\";\n})(TextAlign || (TextAlign = {}));\n/**\n * Enum representing the different baseline text alignments\n */\nvar BaseAlign;\n(function (BaseAlign) {\n    /**\n     * The text baseline is the top of the em square.\n     */\n    BaseAlign[\"Top\"] = \"top\";\n    /**\n     * The text baseline is the hanging baseline.  Currently unsupported; this will act like\n     * alphabetic.\n     */\n    BaseAlign[\"Hanging\"] = \"hanging\";\n    /**\n     * The text baseline is the middle of the em square.\n     */\n    BaseAlign[\"Middle\"] = \"middle\";\n    /**\n     * The text baseline is the normal alphabetic baseline.\n     */\n    BaseAlign[\"Alphabetic\"] = \"alphabetic\";\n    /**\n     * The text baseline is the ideographic baseline; this is the bottom of\n     * the body of the characters, if the main body of characters protrudes\n     * beneath the alphabetic baseline.  Currently unsupported; this will\n     * act like alphabetic.\n     */\n    BaseAlign[\"Ideographic\"] = \"ideographic\";\n    /**\n     * The text baseline is the bottom of the bounding box.  This differs\n     * from the ideographic baseline in that the ideographic baseline\n     * doesn't consider descenders.\n     */\n    BaseAlign[\"Bottom\"] = \"bottom\";\n})(BaseAlign || (BaseAlign = {}));\n/**\n * Enum representing the different possible font styles\n */\nvar FontStyle;\n(function (FontStyle) {\n    FontStyle[\"Normal\"] = \"normal\";\n    FontStyle[\"Italic\"] = \"italic\";\n    FontStyle[\"Oblique\"] = \"oblique\";\n})(FontStyle || (FontStyle = {}));\n/**\n * Enum representing the text direction, useful for other languages, or writing text in reverse\n */\nvar Direction;\n(function (Direction) {\n    Direction[\"LeftToRight\"] = \"ltr\";\n    Direction[\"RightToLeft\"] = \"rtl\";\n})(Direction || (Direction = {}));\n\n;// ./Util/DrawUtil.ts\n\n/* istanbul ignore next */\n/**\n * Draw a line on canvas context\n * @param ctx The canvas context\n * @param color The color of the line\n * @param x1 The start x coordinate\n * @param y1 The start y coordinate\n * @param x2 The ending x coordinate\n * @param y2 The ending y coordinate\n * @param thickness The line thickness\n * @param cap The {@apilink LineCapStyle} (butt, round, or square)\n */\nfunction line(ctx, color = Color.Red, x1, y1, x2, y2, thickness = 1, cap = 'butt') {\n    ctx.save();\n    ctx.beginPath();\n    ctx.lineWidth = thickness;\n    ctx.lineCap = cap;\n    ctx.strokeStyle = color.toString();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.restore();\n}\n/* istanbul ignore next */\n/**\n * Draw the vector as a point onto the canvas.\n */\nfunction point(ctx, color = Color.Red, point) {\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n}\n/**\n * Draw the vector as a line onto the canvas starting a origin point.\n */\n/* istanbul ignore next */\n/**\n *\n */\nfunction vector(ctx, color, origin, vector, scale = 1.0) {\n    const c = color ? color.toString() : 'blue';\n    const v = vector.scale(scale);\n    ctx.beginPath();\n    ctx.strokeStyle = c;\n    ctx.moveTo(origin.x, origin.y);\n    ctx.lineTo(origin.x + v.x, origin.y + v.y);\n    ctx.closePath();\n    ctx.stroke();\n}\n/**\n * Draw a round rectangle on a canvas context\n * @param ctx The canvas context\n * @param x The top-left x coordinate\n * @param y The top-left y coordinate\n * @param width The width of the rectangle\n * @param height The height of the rectangle\n * @param radius The border radius of the rectangle\n * @param stroke The {@apilink Color} to stroke rectangle with\n * @param fill The {@apilink Color} to fill rectangle with\n */\nfunction roundRect(ctx, x, y, width, height, radius = 5, stroke = Color.White, fill = null) {\n    let br;\n    if (typeof radius === 'number') {\n        br = { tl: radius, tr: radius, br: radius, bl: radius };\n    }\n    else {\n        const defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\n        for (const prop in defaultRadius) {\n            if (defaultRadius.hasOwnProperty(prop)) {\n                const side = prop;\n                br[side] = radius[side] || defaultRadius[side];\n            }\n        }\n    }\n    ctx.beginPath();\n    ctx.moveTo(x + br.tl, y);\n    ctx.lineTo(x + width - br.tr, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\n    ctx.lineTo(x + width, y + height - br.br);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\n    ctx.lineTo(x + br.bl, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\n    ctx.lineTo(x, y + br.tl);\n    ctx.quadraticCurveTo(x, y, x + br.tl, y);\n    ctx.closePath();\n    if (fill) {\n        ctx.fillStyle = fill.toString();\n        ctx.fill();\n    }\n    if (stroke) {\n        ctx.strokeStyle = stroke.toString();\n        ctx.stroke();\n    }\n}\n/**\n *\n */\nfunction circle(ctx, x, y, radius, stroke = Color.White, fill = null) {\n    ctx.beginPath();\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\n    ctx.closePath();\n    if (fill) {\n        ctx.fillStyle = fill.toString();\n        ctx.fill();\n    }\n    if (stroke) {\n        ctx.strokeStyle = stroke.toString();\n        ctx.stroke();\n    }\n}\n\n;// ./Graphics/FontTextInstance.ts\n\n\n\n\nclass FontTextInstance {\n    constructor(font, text, color, maxWidth) {\n        this.font = font;\n        this.text = text;\n        this.color = color;\n        this.maxWidth = maxWidth;\n        this._textFragments = [];\n        this.disposed = false;\n        this._dirty = true;\n        this.canvas = document.createElement('canvas');\n        const ctx = this.canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Unable to create FontTextInstance, internal canvas failed to create');\n        }\n        this.ctx = ctx;\n        this.dimensions = this.measureText(text);\n        this._setDimension(this.dimensions, this.ctx);\n        this._lastHashCode = this.getHashCode();\n    }\n    measureText(text, maxWidth) {\n        if (this.disposed) {\n            throw Error('Accessing disposed text instance! ' + this.text);\n        }\n        let lines = null;\n        if (maxWidth != null) {\n            lines = this._getLinesFromText(text, maxWidth);\n        }\n        else {\n            lines = text.split('\\n');\n        }\n        const maxWidthLine = lines.reduce((a, b) => {\n            return a.length > b.length ? a : b;\n        });\n        this._applyFont(this.ctx); // font must be applied to the context to measure it\n        const metrics = this.ctx.measureText(maxWidthLine);\n        let textHeight = Math.abs(metrics.actualBoundingBoxAscent) + Math.abs(metrics.actualBoundingBoxDescent);\n        // TODO line height makes the text bounds wonky\n        const lineAdjustedHeight = textHeight * lines.length;\n        textHeight = lineAdjustedHeight;\n        const bottomBounds = lineAdjustedHeight - Math.abs(metrics.actualBoundingBoxAscent);\n        const x = 0;\n        const y = 0;\n        const measurement = new BoundingBox({\n            left: x - Math.abs(metrics.actualBoundingBoxLeft) - this.font.padding,\n            top: y - Math.abs(metrics.actualBoundingBoxAscent) - this.font.padding,\n            bottom: y + bottomBounds + this.font.padding,\n            right: x + Math.abs(metrics.actualBoundingBoxRight) + this.font.padding\n        });\n        return measurement;\n    }\n    _setDimension(textBounds, bitmap) {\n        let lineHeightRatio = 1;\n        if (this.font.lineHeight) {\n            lineHeightRatio = this.font.lineHeight / this.font.size;\n        }\n        // Changing the width and height clears the context properties\n        // We double the bitmap width to account for all possible alignment\n        // We scale by \"quality\" so we render text without jaggies\n        bitmap.canvas.width = (textBounds.width + this.font.padding * 2) * 2 * this.font.quality;\n        bitmap.canvas.height = (textBounds.height + this.font.padding * 2) * 2 * this.font.quality * lineHeightRatio;\n    }\n    static getHashCode(font, text, color) {\n        var _a;\n        const hash = text +\n            '__hashcode__' +\n            font.fontString +\n            font.showDebug +\n            font.textAlign +\n            font.baseAlign +\n            font.direction +\n            font.lineHeight +\n            JSON.stringify(font.shadow) +\n            (font.padding.toString() +\n                font.smoothing.toString() +\n                font.lineWidth.toString() +\n                font.lineDash.toString() +\n                ((_a = font.strokeColor) === null || _a === void 0 ? void 0 : _a.toString()) +\n                (color ? color.toString() : font.color.toString()));\n        return hash;\n    }\n    getHashCode(includeColor = true) {\n        return FontTextInstance.getHashCode(this.font, this.text, includeColor ? this.color : undefined);\n    }\n    _applyRasterProperties(ctx) {\n        var _a, _b, _c;\n        ctx.translate(this.font.padding, this.font.padding);\n        ctx.imageSmoothingEnabled = this.font.smoothing;\n        ctx.lineWidth = this.font.lineWidth;\n        ctx.setLineDash((_a = this.font.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\n        ctx.strokeStyle = (_c = (_b = this.font.strokeColor) === null || _b === void 0 ? void 0 : _b.toString()) !== null && _c !== void 0 ? _c : '';\n        ctx.fillStyle = this.color.toString();\n    }\n    _applyFont(ctx) {\n        ctx.resetTransform();\n        ctx.translate(this.font.padding + ctx.canvas.width / 2, this.font.padding + ctx.canvas.height / 2);\n        ctx.scale(this.font.quality, this.font.quality);\n        ctx.textAlign = this.font.textAlign;\n        ctx.textBaseline = this.font.baseAlign;\n        ctx.font = this.font.fontString;\n        ctx.direction = this.font.direction;\n        if (this.font.shadow) {\n            if (this.font.shadow.color) {\n                ctx.shadowColor = this.font.shadow.color.toString();\n            }\n            if (this.font.shadow.blur) {\n                ctx.shadowBlur = this.font.shadow.blur;\n            }\n            if (this.font.shadow.offset) {\n                ctx.shadowOffsetX = this.font.shadow.offset.x;\n                ctx.shadowOffsetY = this.font.shadow.offset.y;\n            }\n        }\n    }\n    _drawText(ctx, lines, lineHeight) {\n        this._applyRasterProperties(ctx);\n        this._applyFont(ctx);\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i];\n            if (this.color) {\n                ctx.fillText(line, 0, i * lineHeight);\n            }\n            if (this.font.strokeColor) {\n                ctx.strokeText(line, 0, i * lineHeight);\n            }\n        }\n        if (this.font.showDebug) {\n            // Horizontal line\n            /* istanbul ignore next */\n            line(ctx, Color.Green, -ctx.canvas.width / 2, 0, ctx.canvas.width / 2, 0, 2);\n            // Vertical line\n            /* istanbul ignore next */\n            line(ctx, Color.Red, 0, -ctx.canvas.height / 2, 0, ctx.canvas.height / 2, 2);\n        }\n    }\n    _splitTextBitmap(bitmap) {\n        const textImages = [];\n        let currentX = 0;\n        let currentY = 0;\n        // 4k is the max for mobile devices\n        const width = Math.min(4096, bitmap.canvas.width);\n        const height = Math.min(4096, bitmap.canvas.height);\n        // Splits the original bitmap into 4k max chunks\n        while (currentX < bitmap.canvas.width) {\n            while (currentY < bitmap.canvas.height) {\n                // create new bitmap\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d');\n                if (!ctx) {\n                    throw new Error('Unable to split internal FontTextInstance bitmap, failed to create internal canvas');\n                }\n                // draw current slice to new bitmap in < 4k chunks\n                ctx.drawImage(bitmap.canvas, currentX, currentY, width, height, 0, 0, width, height);\n                textImages.push({ x: currentX, y: currentY, canvas });\n                currentY += height;\n            }\n            currentX += width;\n            currentY = 0;\n        }\n        return textImages;\n    }\n    flagDirty() {\n        this._dirty = true;\n    }\n    render(ex, x, y, maxWidth) {\n        var _a;\n        if (this.disposed) {\n            throw Error('Accessing disposed text instance! ' + this.text);\n        }\n        this._ex = ex;\n        const hashCode = this.getHashCode();\n        if (this._lastHashCode !== hashCode) {\n            this._dirty = true;\n        }\n        // Calculate image chunks\n        if (this._dirty) {\n            this.dimensions = this.measureText(this.text, maxWidth);\n            this._setDimension(this.dimensions, this.ctx);\n            const lines = this._getLinesFromText(this.text, maxWidth);\n            const lineHeight = (_a = this.font.lineHeight) !== null && _a !== void 0 ? _a : this.dimensions.height / lines.length;\n            // draws the text to the main bitmap\n            this._drawText(this.ctx, lines, lineHeight);\n            // clear any out old fragments\n            if (ex instanceof ExcaliburGraphicsContextWebGL) {\n                for (const frag of this._textFragments) {\n                    ex.textureLoader.delete(frag.canvas);\n                }\n            }\n            // splits to < 4k fragments for large text\n            this._textFragments = this._splitTextBitmap(this.ctx);\n            if (ex instanceof ExcaliburGraphicsContextWebGL) {\n                for (const frag of this._textFragments) {\n                    ex.textureLoader.load(frag.canvas, { filtering: this.font.filtering }, true);\n                }\n            }\n            this._lastHashCode = hashCode;\n            this._dirty = false;\n        }\n        // draws the bitmap fragments to excalibur graphics context\n        for (const frag of this._textFragments) {\n            ex.drawImage(frag.canvas, 0, 0, frag.canvas.width, frag.canvas.height, frag.x / this.font.quality + x - this.ctx.canvas.width / this.font.quality / 2, frag.y / this.font.quality + y - this.ctx.canvas.height / this.font.quality / 2, frag.canvas.width / this.font.quality, frag.canvas.height / this.font.quality);\n        }\n    }\n    dispose() {\n        this.disposed = true;\n        this.dimensions = undefined;\n        this.canvas = undefined;\n        this.ctx = undefined;\n        if (this._ex instanceof ExcaliburGraphicsContextWebGL) {\n            for (const frag of this._textFragments) {\n                this._ex.textureLoader.delete(frag.canvas);\n            }\n        }\n        this._textFragments.length = 0;\n    }\n    _getLinesFromText(text, maxWidth) {\n        var _a;\n        if (this._cachedText === text && this._cachedRenderWidth === maxWidth && ((_a = this._cachedLines) === null || _a === void 0 ? void 0 : _a.length)) {\n            return this._cachedLines;\n        }\n        const lines = text.split('\\n');\n        if (maxWidth == null) {\n            return lines;\n        }\n        // If the current line goes past the maxWidth, append a new line without modifying the underlying text.\n        for (let i = 0; i < lines.length; i++) {\n            let line = lines[i];\n            let newLine = '';\n            if (this.measureText(line).width > maxWidth) {\n                while (this.measureText(line).width > maxWidth) {\n                    newLine = line[line.length - 1] + newLine;\n                    line = line.slice(0, -1); // Remove last character from line\n                }\n                // Update the array with our new values\n                lines[i] = line;\n                lines[i + 1] = newLine;\n            }\n        }\n        this._cachedText = text;\n        this._cachedLines = lines;\n        this._cachedRenderWidth = maxWidth;\n        return lines;\n    }\n}\n\n;// ./Graphics/FontCache.ts\n\n\nclass FontCache {\n    static measureText(text, font, maxWidth) {\n        const hash = FontTextInstance.getHashCode(font, text);\n        if (FontCache._MEASURE_CACHE.has(hash)) {\n            return FontCache._MEASURE_CACHE.get(hash);\n        }\n        FontCache._LOGGER.debug('Font text measurement cache miss');\n        const measurement = font.measureTextWithoutCache(text, maxWidth);\n        FontCache._MEASURE_CACHE.set(hash, measurement);\n        return measurement;\n    }\n    static getTextInstance(text, font, color) {\n        const hash = FontTextInstance.getHashCode(font, text, color);\n        let textInstance = FontCache._TEXT_CACHE.get(hash);\n        if (!textInstance) {\n            textInstance = new FontTextInstance(font, text, color);\n            FontCache._TEXT_CACHE.set(hash, textInstance);\n            FontCache._LOGGER.debug('Font text instance cache miss');\n        }\n        // Cache the bitmap for certain amount of time\n        FontCache._TEXT_USAGE.set(textInstance, performance.now());\n        return textInstance;\n    }\n    static checkAndClearCache() {\n        const deferred = [];\n        const currentHashCodes = new Set();\n        for (const [textInstance, time] of FontCache._TEXT_USAGE.entries()) {\n            // if bitmap hasn't been used in 100 ms clear it\n            if (time + FontCache.FONT_TIMEOUT < performance.now()) {\n                FontCache._LOGGER.debug(`Text cache entry timed out ${textInstance.text}`);\n                deferred.push(textInstance);\n                textInstance.dispose();\n            }\n            else {\n                const hash = textInstance.getHashCode(false);\n                currentHashCodes.add(hash);\n            }\n        }\n        // Deferred removal of text instances\n        deferred.forEach((t) => {\n            FontCache._TEXT_USAGE.delete(t);\n        });\n        // Regenerate text instance cache\n        this._TEXT_CACHE.clear();\n        for (const [textInstance] of this._TEXT_USAGE.entries()) {\n            this._TEXT_CACHE.set(textInstance.getHashCode(), textInstance);\n        }\n        // Regenerated measurement cache\n        const newTextMeasurementCache = new Map();\n        for (const current of currentHashCodes) {\n            if (FontCache._MEASURE_CACHE.has(current)) {\n                newTextMeasurementCache.set(current, FontCache._MEASURE_CACHE.get(current));\n            }\n        }\n        this._MEASURE_CACHE.clear();\n        this._MEASURE_CACHE = newTextMeasurementCache;\n    }\n    static get cacheSize() {\n        return FontCache._TEXT_USAGE.size;\n    }\n    /**\n     * Force clear all cached text bitmaps\n     */\n    static clearCache() {\n        for (const [textInstance] of FontCache._TEXT_USAGE.entries()) {\n            textInstance.dispose();\n        }\n        FontCache._TEXT_USAGE.clear();\n        FontCache._TEXT_CACHE.clear();\n        FontCache._MEASURE_CACHE.clear();\n    }\n}\nFontCache.FONT_TIMEOUT = 500;\nFontCache._LOGGER = Logger.getInstance();\nFontCache._TEXT_USAGE = new Map();\nFontCache._TEXT_CACHE = new Map();\nFontCache._MEASURE_CACHE = new Map();\n\n;// ./Graphics/Font.ts\n\n\n\n\n\n\n\n/**\n * Represents a system or web font in Excalibur\n *\n * If no options specified, the system sans-serif 10 pixel is used\n *\n * If loading a custom web font be sure to have the font loaded before you use it https://erikonarheim.com/posts/dont-test-fonts/\n */\nclass Font extends Graphic {\n    constructor(options = {}) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v;\n        super(options); // <- Graphics properties\n        /**\n         * Set the font filtering mode, by default set to {@apilink ImageFiltering.Blended} regardless of the engine default smoothing\n         *\n         * If you have a pixel style font that may be a reason to switch this to {@apilink ImageFiltering.Pixel}\n         */\n        this.filtering = ImageFiltering.Blended;\n        /**\n         * Font quality determines the size of the underlying raster text, higher quality means less jagged edges.\n         * If quality is set to 1, then just enough raster bitmap is generated to render the text.\n         *\n         * You can think of quality as how zoomed in to the text you can get before seeing jagged edges.\n         *\n         * (Default 2)\n         */\n        this.quality = 2;\n        // Raster properties for fonts\n        this.padding = 2;\n        this.smoothing = false;\n        this.lineWidth = 1;\n        this.lineDash = [];\n        this.color = Color.Black;\n        this.family = 'sans-serif';\n        this.style = FontStyle.Normal;\n        this.bold = false;\n        this.unit = FontUnit.Px;\n        this.textAlign = TextAlign.Left;\n        this.baseAlign = BaseAlign.Top;\n        this.direction = Direction.LeftToRight;\n        /**\n         * Font line height in pixels, default line height if unset\n         */\n        this.lineHeight = undefined;\n        this.size = 10;\n        this._textBounds = new BoundingBox();\n        this._textMeasurement = new FontTextInstance(this, '', Color.Black);\n        // Raster properties\n        this.smoothing = (_a = options === null || options === void 0 ? void 0 : options.smoothing) !== null && _a !== void 0 ? _a : this.smoothing;\n        this.padding = (_b = options === null || options === void 0 ? void 0 : options.padding) !== null && _b !== void 0 ? _b : this.padding;\n        this.color = (_c = options === null || options === void 0 ? void 0 : options.color) !== null && _c !== void 0 ? _c : this.color;\n        this.strokeColor = (_d = options === null || options === void 0 ? void 0 : options.strokeColor) !== null && _d !== void 0 ? _d : this.strokeColor;\n        this.lineDash = (_e = options === null || options === void 0 ? void 0 : options.lineDash) !== null && _e !== void 0 ? _e : this.lineDash;\n        this.lineWidth = (_f = options === null || options === void 0 ? void 0 : options.lineWidth) !== null && _f !== void 0 ? _f : this.lineWidth;\n        this.filtering = (_g = options === null || options === void 0 ? void 0 : options.filtering) !== null && _g !== void 0 ? _g : this.filtering;\n        // Font specific properties\n        this.family = (_h = options === null || options === void 0 ? void 0 : options.family) !== null && _h !== void 0 ? _h : this.family;\n        this.style = (_j = options === null || options === void 0 ? void 0 : options.style) !== null && _j !== void 0 ? _j : this.style;\n        this.bold = (_k = options === null || options === void 0 ? void 0 : options.bold) !== null && _k !== void 0 ? _k : this.bold;\n        this.size = (_l = options === null || options === void 0 ? void 0 : options.size) !== null && _l !== void 0 ? _l : this.size;\n        this.unit = (_m = options === null || options === void 0 ? void 0 : options.unit) !== null && _m !== void 0 ? _m : this.unit;\n        this.textAlign = (_o = options === null || options === void 0 ? void 0 : options.textAlign) !== null && _o !== void 0 ? _o : this.textAlign;\n        this.baseAlign = (_p = options === null || options === void 0 ? void 0 : options.baseAlign) !== null && _p !== void 0 ? _p : this.baseAlign;\n        this.direction = (_q = options === null || options === void 0 ? void 0 : options.direction) !== null && _q !== void 0 ? _q : this.direction;\n        this.lineHeight = (_r = options === null || options === void 0 ? void 0 : options.lineHeight) !== null && _r !== void 0 ? _r : this.lineHeight;\n        this.quality = (_s = options === null || options === void 0 ? void 0 : options.quality) !== null && _s !== void 0 ? _s : this.quality;\n        if (options === null || options === void 0 ? void 0 : options.shadow) {\n            this.shadow = {};\n            this.shadow.blur = (_t = options.shadow.blur) !== null && _t !== void 0 ? _t : this.shadow.blur;\n            this.shadow.offset = (_u = options.shadow.offset) !== null && _u !== void 0 ? _u : this.shadow.offset;\n            this.shadow.color = (_v = options.shadow.color) !== null && _v !== void 0 ? _v : this.shadow.color;\n        }\n    }\n    clone() {\n        return new Font({\n            ...this.cloneGraphicOptions(),\n            size: this.size,\n            unit: this.unit,\n            family: this.family,\n            style: this.style,\n            bold: this.bold,\n            textAlign: this.textAlign,\n            baseAlign: this.baseAlign,\n            direction: this.direction,\n            shadow: this.shadow\n                ? {\n                    blur: this.shadow.blur,\n                    offset: this.shadow.offset,\n                    color: this.shadow.color\n                }\n                : undefined\n        });\n    }\n    get fontString() {\n        return `${this.style} ${this.bold ? 'bold' : ''} ${this.size}${this.unit} ${this.family}`;\n    }\n    get localBounds() {\n        return this._textBounds;\n    }\n    _drawImage(_ex, _x, _y) {\n        // TODO weird vestigial drawimage\n    }\n    _rotate(ex) {\n        var _a;\n        // TODO this needs to change depending on the bounding box...\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : this._textBounds.center;\n        ex.translate(origin.x, origin.y);\n        ex.rotate(this.rotation);\n        ex.translate(-origin.x, -origin.y);\n    }\n    _flip(ex) {\n        if (this.flipHorizontal) {\n            ex.translate(this._textBounds.width / this.scale.x, 0);\n            ex.scale(-1, 1);\n        }\n        if (this.flipVertical) {\n            ex.translate(0, -this._textBounds.height / 2 / this.scale.y);\n            ex.scale(1, -1);\n        }\n    }\n    measureTextWithoutCache(text, maxWidth) {\n        return this._textMeasurement.measureText(text, maxWidth);\n    }\n    /**\n     * Returns a BoundingBox that is the total size of the text including multiple lines\n     *\n     * Does not include any padding or adjustment\n     * @param text\n     * @returns BoundingBox\n     */\n    measureText(text, maxWidth) {\n        return FontCache.measureText(text, this, maxWidth);\n    }\n    _postDraw(ex) {\n        ex.restore();\n    }\n    render(ex, text, colorOverride, x, y, maxWidth) {\n        const textInstance = FontCache.getTextInstance(text, this, colorOverride);\n        // Apply affine transformations\n        this._textBounds = textInstance.dimensions;\n        this._preDraw(ex, x, y);\n        textInstance.render(ex, x, y, maxWidth);\n        this._postDraw(ex);\n    }\n}\n\n;// ./Graphics/Text.ts\n\n\n\n/**\n * Represent Text graphics in excalibur\n *\n * Useful for in game labels, ui, or overlays\n */\nclass Text extends Graphic {\n    constructor(options) {\n        var _a, _b;\n        super(options);\n        this._text = '';\n        this._textWidth = 0;\n        this._textHeight = 0;\n        // This order is important font, color, then text\n        this.font = (_a = options.font) !== null && _a !== void 0 ? _a : new Font();\n        this.color = (_b = options.color) !== null && _b !== void 0 ? _b : this.color;\n        this.text = options.text;\n        this.maxWidth = options.maxWidth;\n    }\n    clone() {\n        var _a, _b;\n        return new Text({\n            text: this.text.slice(),\n            color: (_b = (_a = this.color) === null || _a === void 0 ? void 0 : _a.clone()) !== null && _b !== void 0 ? _b : Color.Black,\n            font: this.font.clone(),\n            maxWidth: this.maxWidth\n        });\n    }\n    get text() {\n        return this._text;\n    }\n    set text(value) {\n        this._text = value;\n        this._calculateDimension();\n    }\n    get font() {\n        return this._font;\n    }\n    set font(font) {\n        this._font = font;\n    }\n    get width() {\n        if (this._textWidth === 0) {\n            this._calculateDimension();\n        }\n        return this._textWidth * this.scale.x;\n    }\n    get height() {\n        if (this._textHeight === 0) {\n            this._calculateDimension();\n        }\n        return this._textHeight * this.scale.y;\n    }\n    _calculateDimension() {\n        const { width, height } = this.font.measureText(this._text, this.maxWidth);\n        this._textWidth = width;\n        this._textHeight = height;\n    }\n    get localBounds() {\n        return this.font.measureText(this._text, this.maxWidth).scale(this.scale);\n    }\n    _rotate(_ex) {\n        // None this is delegated to font\n        // This override erases the default behavior\n    }\n    _flip(_ex) {\n        // None this is delegated to font\n        // This override erases the default behavior\n    }\n    _preDraw(ex, x, y) {\n        if (this.isStale() || this.font.isStale()) {\n            this.font.flipHorizontal = this.flipHorizontal;\n            this.font.flipVertical = this.flipVertical;\n            this.font.rotation = this.rotation;\n            this.font.origin = this.origin;\n            this.font.opacity = this.opacity;\n        }\n        this.font.tint = this.tint;\n        super._preDraw(ex, x, y);\n    }\n    _drawImage(ex, x, y) {\n        var _a;\n        let color = Color.Black;\n        if (this.font instanceof Font) {\n            color = (_a = this.color) !== null && _a !== void 0 ? _a : this.font.color;\n        }\n        const { width, height } = this.font.measureText(this._text, this.maxWidth);\n        this._textWidth = width;\n        this._textHeight = height;\n        this.font.render(ex, this._text, color, x, y, this.maxWidth);\n        if (this.font.showDebug) {\n            ex.debug.drawRect(x - width, y - height, width * 2, height * 2);\n            if (this.maxWidth != null) {\n                ex.debug.drawRect(x, y, this.maxWidth, this.height, {\n                    color: Color.Yellow\n                });\n            }\n        }\n    }\n}\n\n;// ./Graphics/GraphicsComponent.ts\n\n\n\n\n\n\n\n\n\n\n/**\n * Type guard for checking if a Graphic HasTick (used for graphics that change over time like animations)\n * @param graphic\n */\nfunction hasGraphicsTick(graphic) {\n    return !!graphic.tick;\n}\n/**\n * Component to manage drawings, using with the position component\n */\nclass GraphicsComponent extends Component {\n    /**\n     * Sets or gets wether any drawing should be visible in this component\n     * @deprecated use isVisible\n     */\n    get visible() {\n        return this.isVisible;\n    }\n    /**\n     * Sets or gets wether any drawing should be visible in this component\n     * @deprecated use isVisible\n     */\n    set visible(val) {\n        this.isVisible = val;\n    }\n    /**\n     * Offset to apply to graphics by default\n     */\n    get offset() {\n        return this._offset;\n    }\n    set offset(value) {\n        this._offset = new WatchVector(value, () => this.recalculateBounds());\n        this.recalculateBounds();\n    }\n    /**\n     * Anchor to apply to graphics by default\n     */\n    get anchor() {\n        return this._anchor;\n    }\n    set anchor(value) {\n        this._anchor = new WatchVector(value, () => this.recalculateBounds());\n        this.recalculateBounds();\n    }\n    /**\n     * Sets the color of the actor's current graphic\n     */\n    get color() {\n        return this._color;\n    }\n    set color(v) {\n        if (v) {\n            this._color = v.clone();\n            const currentGraphic = this.graphics.current;\n            if (currentGraphic instanceof Raster || currentGraphic instanceof Text) {\n                currentGraphic.color = this._color;\n            }\n        }\n    }\n    constructor(options) {\n        super();\n        this._logger = Logger.getInstance();\n        this._current = 'default';\n        this._graphics = {};\n        this._options = {};\n        this.material = null;\n        /**\n         * Sets or gets wether any drawing should be visible in this component\n         */\n        this.isVisible = true;\n        /**\n         * Optionally force the graphic onscreen, default false. Not recommend to use for perf reasons, only if you known what you're doing.\n         */\n        this.forceOnScreen = false;\n        /**\n         * Sets or gets wither all drawings should have an opacity applied\n         */\n        this.opacity = 1;\n        this._offset = new WatchVector(Vector.Zero, () => this.recalculateBounds());\n        this._anchor = new WatchVector(Vector.Half, () => this.recalculateBounds());\n        /**\n         * Flip all graphics horizontally along the y-axis\n         */\n        this.flipHorizontal = false;\n        /**\n         * Flip all graphics vertically along the x-axis\n         */\n        this.flipVertical = false;\n        /**\n         * If set to true graphics added to the component will be copied. This can effect performance, but is useful if you don't want\n         * changes to a graphic to effect all the places it is used.\n         */\n        this.copyGraphics = false;\n        // Defaults\n        options = {\n            visible: this.isVisible,\n            graphics: {},\n            ...options\n        };\n        const { current, anchor, color, opacity, visible, graphics, offset, copyGraphics, onPreDraw, onPostDraw, onPreTransformDraw, onPostTransformDraw } = options;\n        for (const [key, graphicOrOptions] of Object.entries(graphics)) {\n            if (graphicOrOptions instanceof Graphic) {\n                this._graphics[key] = graphicOrOptions;\n            }\n            else {\n                this._graphics[key] = graphicOrOptions.graphic;\n                this._options[key] = graphicOrOptions.options;\n            }\n        }\n        this.offset = offset !== null && offset !== void 0 ? offset : this.offset;\n        this.opacity = opacity !== null && opacity !== void 0 ? opacity : this.opacity;\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : this.anchor;\n        this.color = color !== null && color !== void 0 ? color : this.color;\n        this.copyGraphics = copyGraphics !== null && copyGraphics !== void 0 ? copyGraphics : this.copyGraphics;\n        this.onPreDraw = onPreDraw !== null && onPreDraw !== void 0 ? onPreDraw : this.onPreDraw;\n        this.onPostDraw = onPostDraw !== null && onPostDraw !== void 0 ? onPostDraw : this.onPostDraw;\n        this.onPreDraw = onPreTransformDraw !== null && onPreTransformDraw !== void 0 ? onPreTransformDraw : this.onPreTransformDraw;\n        this.onPostTransformDraw = onPostTransformDraw !== null && onPostTransformDraw !== void 0 ? onPostTransformDraw : this.onPostTransformDraw;\n        this.isVisible = !!visible;\n        this._current = current !== null && current !== void 0 ? current : this._current;\n        if (current && this._graphics[current]) {\n            this.use(current);\n        }\n    }\n    getGraphic(name) {\n        return this._graphics[name];\n    }\n    getOptions(name) {\n        return this._options[name];\n    }\n    /**\n     * Get registered graphics names\n     */\n    getNames() {\n        return Object.keys(this._graphics);\n    }\n    /**\n     * Returns the currently displayed graphic\n     */\n    get current() {\n        return this._graphics[this._current];\n    }\n    /**\n     * Returns the currently displayed graphic offsets\n     */\n    get currentOptions() {\n        return this._options[this._current];\n    }\n    /**\n     * Returns all graphics associated with this component\n     */\n    get graphics() {\n        return this._graphics;\n    }\n    /**\n     * Returns all graphics options associated with this component\n     */\n    get options() {\n        return this._options;\n    }\n    add(nameOrGraphic, graphicOrOptions, options) {\n        let name = 'default';\n        let graphicToSet = null;\n        let optionsToSet = undefined;\n        if (typeof nameOrGraphic === 'string' && graphicOrOptions instanceof Graphic) {\n            name = nameOrGraphic;\n            graphicToSet = graphicOrOptions;\n            optionsToSet = options;\n        }\n        if (nameOrGraphic instanceof Graphic && !(graphicOrOptions instanceof Graphic)) {\n            graphicToSet = nameOrGraphic;\n            optionsToSet = graphicOrOptions;\n        }\n        if (!graphicToSet) {\n            throw new Error('Need to provide a graphic or valid graphic string');\n        }\n        this._graphics[name] = this.copyGraphics ? graphicToSet.clone() : graphicToSet;\n        this._options[name] = this.copyGraphics ? { ...optionsToSet } : optionsToSet;\n        if (name === 'default') {\n            this.use('default');\n        }\n        return graphicToSet;\n    }\n    /**\n     * Removes a registered graphic, if the removed graphic is the current it will switch to the default\n     * @param name\n     */\n    remove(name) {\n        delete this._graphics[name];\n        delete this._options[name];\n        if (this._current === name) {\n            this._current = 'default';\n            this.recalculateBounds();\n        }\n    }\n    /**\n     * Use a graphic only, will set the default graphic. Returns the new {@apilink Graphic}\n     *\n     * Optionally override the stored options\n     * @param nameOrGraphic\n     * @param options\n     */\n    use(nameOrGraphic, options) {\n        var _a;\n        if (nameOrGraphic instanceof Graphic) {\n            let graphic = nameOrGraphic;\n            if (this.copyGraphics) {\n                graphic = nameOrGraphic.clone();\n            }\n            this._current = 'default';\n            this._graphics[this._current] = graphic;\n            this._options[this._current] = options;\n        }\n        else {\n            this._current = nameOrGraphic;\n            this._options[this._current] = options;\n            if (!(this._current in this._graphics)) {\n                this._logger.warn(`Graphic ${this._current} is not registered with the graphics component owned by ${(_a = this.owner) === null || _a === void 0 ? void 0 : _a.name}. Nothing will be drawn.`);\n            }\n        }\n        this.recalculateBounds();\n        return this.current;\n    }\n    /**\n     * Hide currently shown graphic\n     */\n    hide() {\n        this._current = 'ex.none';\n    }\n    set localBounds(bounds) {\n        this._localBounds = bounds;\n    }\n    recalculateBounds() {\n        let bb = new BoundingBox();\n        const graphic = this._graphics[this._current];\n        const options = this._options[this._current];\n        if (!graphic) {\n            this._localBounds = bb;\n            return;\n        }\n        let anchor = this.anchor;\n        let offset = this.offset;\n        if (options === null || options === void 0 ? void 0 : options.anchor) {\n            anchor = options.anchor;\n        }\n        if (options === null || options === void 0 ? void 0 : options.offset) {\n            offset = options.offset;\n        }\n        const bounds = graphic.localBounds;\n        const offsetX = -bounds.width * anchor.x + offset.x;\n        const offsetY = -bounds.height * anchor.y + offset.y;\n        if (graphic instanceof GraphicsGroup && !graphic.useAnchor) {\n            bb = graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.combine(bb);\n        }\n        else {\n            bb = graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(vec(offsetX, offsetY)).combine(bb);\n        }\n        this._localBounds = bb;\n    }\n    /**\n     * Get local bounds of graphics component\n     */\n    get localBounds() {\n        if (!this._localBounds || this._localBounds.hasZeroDimensions()) {\n            this.recalculateBounds();\n        }\n        return this._localBounds; // recalc guarantees type\n    }\n    /**\n     * Get world bounds of graphics component\n     */\n    get bounds() {\n        let bounds = this.localBounds;\n        if (this.owner) {\n            const tx = this.owner.get(TransformComponent);\n            if (tx) {\n                bounds = bounds.transform(tx.get().matrix);\n            }\n        }\n        return bounds;\n    }\n    /**\n     * Update underlying graphics if necessary, called internally\n     * @param elapsed\n     * @internal\n     */\n    update(elapsed, idempotencyToken = 0) {\n        const graphic = this.current;\n        if (graphic && hasGraphicsTick(graphic)) {\n            graphic.tick(elapsed, idempotencyToken);\n        }\n    }\n    clone() {\n        const graphics = new GraphicsComponent();\n        graphics._graphics = { ...this._graphics };\n        graphics._options = { ...this._options };\n        graphics.offset = this.offset.clone();\n        if (this.color) {\n            graphics.color = this.color.clone();\n        }\n        graphics.opacity = this.opacity;\n        graphics.anchor = this.anchor.clone();\n        graphics.copyGraphics = this.copyGraphics;\n        graphics.onPreDraw = this.onPreDraw;\n        graphics.onPostDraw = this.onPostDraw;\n        graphics.isVisible = this.isVisible;\n        return graphics;\n    }\n}\n\n;// ./Events.ts\nvar EventTypes;\n(function (EventTypes) {\n    EventTypes[\"Kill\"] = \"kill\";\n    EventTypes[\"PreKill\"] = \"prekill\";\n    EventTypes[\"PostKill\"] = \"postkill\";\n    EventTypes[\"PreDraw\"] = \"predraw\";\n    EventTypes[\"PostDraw\"] = \"postdraw\";\n    EventTypes[\"PreDebugDraw\"] = \"predebugdraw\";\n    EventTypes[\"PostDebugDraw\"] = \"postdebugdraw\";\n    EventTypes[\"PreUpdate\"] = \"preupdate\";\n    EventTypes[\"PostUpdate\"] = \"postupdate\";\n    EventTypes[\"PreFrame\"] = \"preframe\";\n    EventTypes[\"PostFrame\"] = \"postframe\";\n    EventTypes[\"PreCollision\"] = \"precollision\";\n    EventTypes[\"CollisionStart\"] = \"collisionstart\";\n    EventTypes[\"CollisionEnd\"] = \"collisionend\";\n    EventTypes[\"PostCollision\"] = \"postcollision\";\n    EventTypes[\"Initialize\"] = \"initialize\";\n    EventTypes[\"Activate\"] = \"activate\";\n    EventTypes[\"Deactivate\"] = \"deactivate\";\n    EventTypes[\"ExitViewport\"] = \"exitviewport\";\n    EventTypes[\"EnterViewport\"] = \"enterviewport\";\n    EventTypes[\"ExitTrigger\"] = \"exit\";\n    EventTypes[\"EnterTrigger\"] = \"enter\";\n    EventTypes[\"Connect\"] = \"connect\";\n    EventTypes[\"Disconnect\"] = \"disconnect\";\n    EventTypes[\"Button\"] = \"button\";\n    EventTypes[\"Axis\"] = \"axis\";\n    EventTypes[\"Visible\"] = \"visible\";\n    EventTypes[\"Hidden\"] = \"hidden\";\n    EventTypes[\"Start\"] = \"start\";\n    EventTypes[\"Stop\"] = \"stop\";\n    EventTypes[\"PointerUp\"] = \"pointerup\";\n    EventTypes[\"PointerDown\"] = \"pointerdown\";\n    EventTypes[\"PointerMove\"] = \"pointermove\";\n    EventTypes[\"PointerEnter\"] = \"pointerenter\";\n    EventTypes[\"PointerLeave\"] = \"pointerleave\";\n    EventTypes[\"PointerCancel\"] = \"pointercancel\";\n    EventTypes[\"PointerWheel\"] = \"pointerwheel\";\n    EventTypes[\"Up\"] = \"up\";\n    EventTypes[\"Down\"] = \"down\";\n    EventTypes[\"Move\"] = \"move\";\n    EventTypes[\"Enter\"] = \"enter\";\n    EventTypes[\"Leave\"] = \"leave\";\n    EventTypes[\"Cancel\"] = \"cancel\";\n    EventTypes[\"Wheel\"] = \"wheel\";\n    EventTypes[\"Press\"] = \"press\";\n    EventTypes[\"Release\"] = \"release\";\n    EventTypes[\"Hold\"] = \"hold\";\n    EventTypes[\"PointerDragStart\"] = \"pointerdragstart\";\n    EventTypes[\"PointerDragEnd\"] = \"pointerdragend\";\n    EventTypes[\"PointerDragEnter\"] = \"pointerdragenter\";\n    EventTypes[\"PointerDragLeave\"] = \"pointerdragleave\";\n    EventTypes[\"PointerDragMove\"] = \"pointerdragmove\";\n    EventTypes[\"ActionStart\"] = \"actionstart\";\n    EventTypes[\"ActionComplete\"] = \"actioncomplete\";\n    EventTypes[\"Add\"] = \"add\";\n    EventTypes[\"Remove\"] = \"remove\";\n})(EventTypes || (EventTypes = {}));\n/**\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\n * some events are unique to a type, others are not.\n *\n */\nclass GameEvent {\n    constructor() {\n        /**\n         * Other target object for this event\n         */\n        this.other = null;\n        this._bubbles = true;\n    }\n    /**\n     * If set to false, prevents event from propagating to other actors. If true it will be propagated\n     * to all actors that apply.\n     */\n    get bubbles() {\n        return this._bubbles;\n    }\n    set bubbles(value) {\n        this._bubbles = value;\n    }\n    /**\n     * Prevents event from bubbling\n     */\n    stopPropagation() {\n        this.bubbles = false;\n    }\n}\n/**\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\n */\nclass KillEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'prekill' event is emitted directly before an actor is killed.\n */\nclass PreKillEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postkill' event is emitted directly after the actor is killed.\n */\nclass PostKillEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'start' event is emitted on engine when has started and is ready for interaction.\n */\nclass GameStartEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\n */\nclass GameStopEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nclass PreDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nclass PostDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'pretransformdraw' event is emitted on actors/entities before any graphics transforms have taken place.\n * Useful if you need to completely customize the draw or modify the transform before drawing in the draw step (for example needing\n * latest camera positions)\n *\n */\nclass PreTransformDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'posttransformdraw' event is emitted on actors/entities after all graphics have been draw and transforms reset.\n * Useful if you need to completely custom the draw after everything is done.\n *\n */\nclass PostTransformDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\n */\nclass PreDebugDrawEvent extends GameEvent {\n    constructor(ctx, self) {\n        super();\n        this.ctx = ctx;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\n */\nclass PostDebugDrawEvent extends GameEvent {\n    constructor(ctx, self) {\n        super();\n        this.ctx = ctx;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\n */\nclass PreUpdateEvent extends GameEvent {\n    constructor(engine, elapsed, self) {\n        super();\n        this.engine = engine;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\n */\nclass PostUpdateEvent extends GameEvent {\n    constructor(engine, elapsed, self) {\n        super();\n        this.engine = engine;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'preframe' event is emitted on the engine, before the frame begins.\n */\nclass PreFrameEvent extends GameEvent {\n    constructor(engine, prevStats) {\n        super();\n        this.engine = engine;\n        this.prevStats = prevStats;\n        this.target = engine;\n    }\n}\n/**\n * The 'postframe' event is emitted on the engine, after a frame ends.\n */\nclass PostFrameEvent extends GameEvent {\n    constructor(engine, stats) {\n        super();\n        this.engine = engine;\n        this.stats = stats;\n        this.target = engine;\n    }\n}\n/**\n * Event received when a gamepad is connected to Excalibur. {@apilink Gamepads} receives this event.\n */\nclass GamepadConnectEvent extends GameEvent {\n    constructor(index, gamepad) {\n        super();\n        this.index = index;\n        this.gamepad = gamepad;\n        this.target = gamepad;\n    }\n}\n/**\n * Event received when a gamepad is disconnected from Excalibur. {@apilink Gamepads} receives this event.\n */\nclass GamepadDisconnectEvent extends GameEvent {\n    constructor(index, gamepad) {\n        super();\n        this.index = index;\n        this.gamepad = gamepad;\n        this.target = gamepad;\n    }\n}\n/**\n * Gamepad button event. See {@apilink Gamepads} for information on responding to controller input. {@apilink Gamepad} instances receive this event;\n */\nclass GamepadButtonEvent extends GameEvent {\n    /**\n     * @param button  The Gamepad {@apilink Buttons} if not known by excalibur {@apilink Buttons.Unknown} is returned, use index to disambiguate.\n     * @param index   The canonical index of the gamepad button from the system\n     * @param value   A numeric value between 0 and 1\n     * @param self    Reference to the gamepad\n     */\n    constructor(\n    /**\n     * The Gamepad {@apilink Buttons} if not known by excalibur {@apilink Buttons.Unknown} is returned, use index to disambiguate.\n     */\n    button, \n    /**\n     * The canonical index of the gamepad button from the system\n     */\n    index, \n    /**\n     * A numeric value between 0 and 1\n     */\n    value, \n    /**\n     * Reference to the gamepad\n     */\n    self) {\n        super();\n        this.button = button;\n        this.index = index;\n        this.value = value;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Gamepad axis event. See {@apilink Gamepads} for information on responding to controller input. {@apilink Gamepad} instances receive this event;\n */\nclass GamepadAxisEvent extends GameEvent {\n    /**\n     * @param axis  The Gamepad axis\n     * @param value A numeric value between -1 and 1\n     * @param self Reference to the gamepad\n     */\n    constructor(\n    /**\n     * The Gamepad {@apilink Axis}\n     */\n    axis, \n    /**\n     * A numeric value between -1 and 1, 0 is the neutral axis position.\n     */\n    value, \n    /**\n     * Reference to the gamepad\n     */\n    self) {\n        super();\n        this.axis = axis;\n        this.value = value;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event received by the {@apilink Engine} when the browser window is visible on a screen.\n */\nclass VisibleEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event received by the {@apilink Engine} when the browser window is hidden from all screens.\n */\nclass HiddenEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor | `actor`} when a collision will occur this frame if it resolves\n */\nclass PreCollisionEvent extends GameEvent {\n    /**\n     * @param self          The actor the event was thrown on\n     * @param other         The actor that will collided with the current actor\n     * @param side          The side that will be collided with the current actor\n     * @param intersection  Intersection vector\n     */\n    constructor(self, other, side, intersection, contact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor | `actor`} when a collision has been resolved (body reacted) this frame\n */\nclass PostCollisionEvent extends GameEvent {\n    /**\n     * @param self          The actor the event was thrown on\n     * @param other         The actor that did collide with the current actor\n     * @param side          The side that did collide with the current actor\n     * @param intersection  Intersection vector\n     */\n    constructor(self, other, side, intersection, contact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n        this.target = self;\n    }\n}\nclass ContactStartEvent {\n    constructor(self, other, side, contact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.contact = contact;\n    }\n}\nclass ContactEndEvent {\n    constructor(self, other, side, lastContact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.lastContact = lastContact;\n    }\n}\nclass CollisionPreSolveEvent {\n    constructor(self, other, side, intersection, contact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n    }\n}\nclass CollisionPostSolveEvent {\n    constructor(self, other, side, intersection, contact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n    }\n}\n/**\n * Event thrown the first time an {@apilink Actor | `actor`} collides with another, after an actor is in contact normal collision events are fired.\n */\nclass CollisionStartEvent extends GameEvent {\n    /**\n     *\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    constructor(self, other, side, contact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.contact = contact;\n        this.target = self;\n    }\n}\n/**\n * Event thrown when the {@apilink Actor | `actor`} is no longer colliding with another\n */\nclass CollisionEndEvent extends GameEvent {\n    /**\n     *\n     */\n    constructor(self, other, side, lastContact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.lastContact = lastContact;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor}, {@apilink Scene}, and {@apilink Engine} only once before the first update call\n */\nclass InitializeEvent extends GameEvent {\n    /**\n     * @param engine  The reference to the current engine\n     */\n    constructor(engine, self) {\n        super();\n        this.engine = engine;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on a {@apilink Scene} on activation\n */\nclass ActivateEvent extends GameEvent {\n    /**\n     * @param context  The context for the scene activation\n     */\n    constructor(context, self) {\n        super();\n        this.context = context;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on a {@apilink Scene} on deactivation\n */\nclass DeactivateEvent extends GameEvent {\n    /**\n     * @param context  The context for the scene deactivation\n     */\n    constructor(context, self) {\n        super();\n        this.context = context;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when the graphics bounds completely leaves the screen.\n */\nclass ExitViewPortEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when any part of the graphics bounds are on screen.\n */\nclass EnterViewPortEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\nclass EnterTriggerEvent extends GameEvent {\n    constructor(self, entity) {\n        super();\n        this.self = self;\n        this.entity = entity;\n        this.target = self;\n    }\n}\nclass ExitTriggerEvent extends GameEvent {\n    constructor(self, entity) {\n        super();\n        this.self = self;\n        this.entity = entity;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when an action starts.\n */\nclass ActionStartEvent extends GameEvent {\n    constructor(action, self) {\n        super();\n        this.action = action;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when an action completes.\n */\nclass ActionCompleteEvent extends GameEvent {\n    constructor(action, self) {\n        super();\n        this.action = action;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an [[Actor]] when an Actor added to scene.\n */\nclass AddEvent extends GameEvent {\n    constructor(engine, self) {\n        super();\n        this.engine = engine;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an [[Actor]] when an Actor removed from scene.\n */\nclass RemoveEvent extends GameEvent {\n    constructor(engine, self) {\n        super();\n        this.engine = engine;\n        this.self = self;\n        this.target = self;\n    }\n}\n\n;// ./EntityComponentSystem/Entity.ts\n\n\n\n\n\n\n\n/**\n * AddedComponent message\n */\nclass AddedComponent {\n    constructor(data) {\n        this.data = data;\n        this.type = 'Component Added';\n    }\n}\n/**\n * Type guard to know if message is f an Added Component\n */\nfunction isAddedComponent(x) {\n    return !!x && x.type === 'Component Added';\n}\n/**\n * RemovedComponent message\n */\nclass RemovedComponent {\n    constructor(data) {\n        this.data = data;\n        this.type = 'Component Removed';\n    }\n}\n/**\n * Type guard to know if message is for a Removed Component\n */\nfunction isRemovedComponent(x) {\n    return !!x && x.type === 'Component Removed';\n}\nconst EntityEvents = {\n    Add: 'add',\n    Remove: 'remove',\n    Initialize: 'initialize',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    Kill: 'kill'\n};\n/**\n * An Entity is the base type of anything that can have behavior in Excalibur, they are part of the built in entity component system\n *\n * Entities can be strongly typed with the components they contain\n *\n * ```typescript\n * const entity = new Entity<ComponentA | ComponentB>();\n * entity.components.a; // Type ComponentA\n * entity.components.b; // Type ComponentB\n * ```\n */\nclass Entity {\n    constructor(componentsOrOptions, name) {\n        /**\n         * The unique identifier for the entity\n         */\n        this.id = Entity._ID++;\n        this.name = `Entity#${this.id}`;\n        /**\n         * Listen to or emit events for an entity\n         */\n        this.events = new EventEmitter();\n        this._tags = new Set();\n        this.componentAdded$ = new Observable();\n        this.componentRemoved$ = new Observable();\n        this.tagAdded$ = new Observable();\n        this.tagRemoved$ = new Observable();\n        /**\n         * Current components on the entity\n         *\n         * **Do not modify**\n         *\n         * Use addComponent/removeComponent otherwise the ECS will not be notified of changes.\n         */\n        this.components = new Map();\n        this.componentValues = [];\n        this._componentsToRemove = [];\n        /**\n         * The current scene that the entity is in, if any\n         */\n        this.scene = null;\n        /**\n         * Whether this entity is active, if set to false it will be reclaimed\n         */\n        this.isActive = true;\n        this._parent = null;\n        this.childrenAdded$ = new Observable();\n        this.childrenRemoved$ = new Observable();\n        this._children = [];\n        this._isInitialized = false;\n        this._isAdded = false;\n        let componentsToAdd;\n        let nameToAdd;\n        let silence = false;\n        if (Array.isArray(componentsOrOptions)) {\n            componentsToAdd = componentsOrOptions;\n            nameToAdd = name;\n        }\n        else if (componentsOrOptions && typeof componentsOrOptions === 'object') {\n            const { components, name, silenceWarnings } = componentsOrOptions;\n            componentsToAdd = components !== null && components !== void 0 ? components : [];\n            nameToAdd = name;\n            silence = !!silenceWarnings;\n        }\n        if (nameToAdd) {\n            this.name = nameToAdd;\n        }\n        if (componentsToAdd) {\n            for (const component of componentsToAdd) {\n                this.addComponent(component);\n            }\n        }\n        if (false) {}\n    }\n    /**\n     * Whether this entity is active, if set to false it will be reclaimed\n     * @deprecated use isActive\n     */\n    get active() {\n        return this.isActive;\n    }\n    /**\n     * Whether this entity is active, if set to false it will be reclaimed\n     * @deprecated use isActive\n     */\n    set active(val) {\n        this.isActive = val;\n    }\n    /**\n     * Kill the entity, means it will no longer be updated. Kills are deferred to the end of the update.\n     * If parented it will be removed from the parent when killed.\n     */\n    kill() {\n        if (this.isActive) {\n            this.isActive = false;\n            this.unparent();\n        }\n        this.emit('kill', new KillEvent(this));\n    }\n    isKilled() {\n        return !this.isActive;\n    }\n    /**\n     * Specifically get the tags on the entity from {@apilink TagsComponent}\n     */\n    get tags() {\n        return this._tags;\n    }\n    /**\n     * Check if a tag exists on the entity\n     * @param tag name to check for\n     */\n    hasTag(tag) {\n        return this._tags.has(tag);\n    }\n    /**\n     * Adds a tag to an entity\n     * @param tag\n     */\n    addTag(tag) {\n        this._tags.add(tag);\n        this.tagAdded$.notifyAll(tag);\n        return this;\n    }\n    /**\n     * Removes a tag on the entity\n     *\n     * Removals are deferred until the end of update\n     * @param tag\n     */\n    removeTag(tag) {\n        this._tags.delete(tag);\n        this.tagRemoved$.notifyAll(tag);\n        return this;\n    }\n    /**\n     * The types of the components on the Entity\n     */\n    get types() {\n        return Array.from(this.components.keys());\n    }\n    /**\n     * Returns all component instances on entity\n     */\n    getComponents() {\n        return Array.from(this.components.values());\n    }\n    /**\n     * Verifies that an entity has all the required types\n     * @param requiredTypes\n     */\n    hasAll(requiredTypes) {\n        for (let i = 0; i < requiredTypes.length; i++) {\n            if (!this.components.has(requiredTypes[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Verifies that an entity has all the required tags\n     * @param requiredTags\n     */\n    hasAllTags(requiredTags) {\n        for (let i = 0; i < requiredTags.length; i++) {\n            if (!this.tags.has(requiredTags[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    get(type) {\n        return this.components.get(type);\n    }\n    get parent() {\n        return this._parent;\n    }\n    /**\n     * Get the direct children of this entity\n     */\n    get children() {\n        return this._children;\n    }\n    /**\n     * Unparents this entity, if there is a parent. Otherwise it does nothing.\n     */\n    unparent() {\n        if (this._parent) {\n            this._parent.removeChild(this);\n            this._parent = null;\n        }\n    }\n    /**\n     * Adds an entity to be a child of this entity\n     * @param entity\n     */\n    addChild(entity) {\n        if (entity.parent === null) {\n            if (this.getAncestors().includes(entity)) {\n                throw new Error('Cycle detected, cannot add entity');\n            }\n            this._children.push(entity);\n            entity._parent = this;\n            this.childrenAdded$.notifyAll(entity);\n        }\n        else {\n            throw new Error('Entity already has a parent, cannot add without unparenting');\n        }\n        return this;\n    }\n    /**\n     * Remove an entity from children if it exists\n     * @param entity\n     */\n    removeChild(entity) {\n        if (entity.parent === this) {\n            removeItemFromArray(entity, this._children);\n            entity._parent = null;\n            this.childrenRemoved$.notifyAll(entity);\n        }\n        return this;\n    }\n    /**\n     * Removes all children from this entity\n     */\n    removeAllChildren() {\n        // Avoid modifying the array issue by walking backwards\n        for (let i = this.children.length - 1; i >= 0; i--) {\n            this.removeChild(this.children[i]);\n        }\n        return this;\n    }\n    /**\n     * Returns a list of parent entities starting with the topmost parent. Includes the current entity.\n     */\n    getAncestors() {\n        const result = [this];\n        let current = this.parent;\n        while (current) {\n            result.push(current);\n            current = current.parent;\n        }\n        return result.reverse();\n    }\n    /**\n     * Returns a list of all the entities that descend from this entity. Includes the current entity.\n     */\n    getDescendants() {\n        let result = [this];\n        let queue = [this];\n        while (queue.length > 0) {\n            const curr = queue.pop();\n            if (curr) {\n                queue = queue.concat(curr.children);\n                result = result.concat(curr.children);\n            }\n        }\n        return result;\n    }\n    /**\n     * Creates a deep copy of the entity and a copy of all its components\n     */\n    clone() {\n        const newEntity = new Entity();\n        for (const c of this.types) {\n            const componentInstance = this.get(c);\n            if (componentInstance) {\n                newEntity.addComponent(componentInstance.clone());\n            }\n        }\n        for (const child of this.children) {\n            newEntity.addChild(child.clone());\n        }\n        return newEntity;\n    }\n    /**\n     * Adds a copy of all the components from another template entity as a \"prefab\"\n     * @param templateEntity Entity to use as a template\n     * @param force Force component replacement if it already exists on the target entity\n     */\n    addTemplate(templateEntity, force = false) {\n        for (const c of templateEntity.getComponents()) {\n            this.addComponent(c.clone(), force);\n        }\n        for (const child of templateEntity.children) {\n            this.addChild(child.clone().addTemplate(child));\n        }\n        return this;\n    }\n    _getClassHierarchyRoot(componentType) {\n        var _a, _b;\n        let current = componentType;\n        let parent = (_a = Object.getPrototypeOf(current.prototype)) === null || _a === void 0 ? void 0 : _a.constructor;\n        while (parent && parent !== Object && parent !== Component) {\n            current = parent;\n            parent = (_b = Object.getPrototypeOf(current.prototype)) === null || _b === void 0 ? void 0 : _b.constructor;\n        }\n        return current;\n    }\n    /**\n     * Adds a component to the entity\n     * @param component Component or Entity to add copy of components from\n     * @param force Optionally overwrite any existing components of the same type\n     */\n    addComponent(component, force = false) {\n        // if component already exists, skip if not forced\n        if (this.has(component.constructor)) {\n            if (force) {\n                // Remove existing component type if exists when forced\n                this.removeComponent(component.constructor, true);\n            }\n            else {\n                // early exit component exits\n                return this;\n            }\n        }\n        // TODO circular dependencies will be a problem\n        if (component.dependencies && component.dependencies.length) {\n            for (const ctor of component.dependencies) {\n                this.addComponent(new ctor());\n            }\n        }\n        component.owner = this;\n        const rootComponent = this._getClassHierarchyRoot(component.constructor);\n        this.components.set(rootComponent, component);\n        this.components.set(component.constructor, component);\n        this.componentValues.push(component);\n        if (component.onAdd) {\n            component.onAdd(this);\n        }\n        this.componentAdded$.notifyAll(component);\n        return this;\n    }\n    /**\n     * Removes a component from the entity, by default removals are deferred to the end of entity update to avoid consistency issues\n     *\n     * Components can be force removed with the `force` flag, the removal is not deferred and happens immediately\n     * @param typeOrInstance\n     * @param force\n     */\n    removeComponent(typeOrInstance, force = false) {\n        let type;\n        if (isComponentCtor(typeOrInstance)) {\n            type = typeOrInstance;\n        }\n        else {\n            type = typeOrInstance.constructor;\n        }\n        if (force) {\n            const componentToRemove = this.components.get(type);\n            if (componentToRemove) {\n                this.componentRemoved$.notifyAll(componentToRemove);\n                componentToRemove.owner = undefined;\n                if (componentToRemove.onRemove) {\n                    componentToRemove.onRemove(this);\n                }\n                const componentIndex = this.componentValues.indexOf(componentToRemove);\n                if (componentIndex > -1) {\n                    this.componentValues.splice(componentIndex, 1);\n                }\n            }\n            const rootComponent = this._getClassHierarchyRoot(type);\n            this.components.delete(rootComponent);\n            this.components.delete(type); // remove after the notify to preserve typing\n        }\n        else {\n            this._componentsToRemove.push(type);\n        }\n        return this;\n    }\n    clearComponents() {\n        const components = this.types;\n        for (const c of components) {\n            this.removeComponent(c);\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    processComponentRemoval() {\n        for (const type of this._componentsToRemove) {\n            this.removeComponent(type, true);\n        }\n        this._componentsToRemove.length = 0;\n    }\n    /**\n     * Check if a component type exists\n     * @param type\n     */\n    has(type) {\n        return this.components.has(type);\n    }\n    /**\n     * Gets whether the actor is Initialized\n     */\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    get isAdded() {\n        return this._isAdded;\n    }\n    /**\n     * Initializes this entity, meant to be called by the Scene before first update not by users of Excalibur.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _initialize(engine) {\n        if (!this.isInitialized) {\n            this.onInitialize(engine);\n            this.events.emit('initialize', new InitializeEvent(engine, this));\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * Adds this Actor, meant to be called by the Scene when Actor is added.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _add(engine) {\n        if (!this.isAdded && this.isActive) {\n            this.onAdd(engine);\n            this.events.emit('add', new AddEvent(engine, this));\n            this._isAdded = true;\n        }\n    }\n    /**\n     * Removes Actor, meant to be called by the Scene when Actor is added.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _remove(engine) {\n        if (this.isAdded && !this.isActive) {\n            this.onRemove(engine);\n            this.events.emit('remove', new RemoveEvent(engine, this));\n            this._isAdded = false;\n        }\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.events.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.events.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n    /**\n     * `onInitialize` is called before the first update of the entity. This method is meant to be\n     * overridden.\n     *\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n     */\n    onInitialize(engine) {\n        // Override me\n    }\n    /**\n     * `onAdd` is called when Actor is added to scene. This method is meant to be\n     * overridden.\n     *\n     * Synonymous with the event handler `.on('add', (evt) => {...})`\n     */\n    onAdd(engine) {\n        // Override me\n    }\n    /**\n     * `onRemove` is called when Actor is added to scene. This method is meant to be\n     * overridden.\n     *\n     * Synonymous with the event handler `.on('remove', (evt) => {...})`\n     */\n    onRemove(engine) {\n        // Override me\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before an entity is updated.\n     */\n    onPreUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after an entity is updated.\n     */\n    onPostUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     *\n     * Entity update lifecycle, called internally\n     * @internal\n     * @param engine\n     * @param elapsed\n     */\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this._add(engine);\n        this._preupdate(engine, elapsed);\n        for (const child of this.children) {\n            child.update(engine, elapsed);\n        }\n        this._postupdate(engine, elapsed);\n        this._remove(engine);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        if (handler) {\n            this.events.off(eventName, handler);\n        }\n        else {\n            this.events.off(eventName);\n        }\n    }\n}\nEntity._ID = 0;\n\n;// ./EntityComponentSystem/Components/MotionComponent.ts\n\n\nclass MotionComponent extends Component {\n    constructor() {\n        super(...arguments);\n        /**\n         * The velocity of an entity in pixels per second\n         */\n        this.vel = Vector.Zero;\n        /**\n         * The acceleration of entity in pixels per second^2\n         */\n        this.acc = Vector.Zero;\n        /**\n         * The scale rate of change in scale units per second\n         */\n        this.scaleFactor = Vector.Zero;\n        /**\n         * The angular velocity which is how quickly the entity is rotating in radians per second\n         */\n        this.angularVelocity = 0;\n        /**\n         * The amount of torque applied to the entity, angular acceleration is torque * inertia\n         */\n        this.torque = 0;\n        /**\n         * Inertia can be thought of as the resistance to motion\n         */\n        this.inertia = 1;\n    }\n}\n\n;// ./Collision/Integrator.ts\n\nclass EulerIntegrator {\n    static integrate(transform, motion, totalAcc, elapsed) {\n        const seconds = elapsed / 1000;\n        // This code looks a little wild, but it's to avoid creating any new Vector instances\n        // integration is done in a tight loop so this is key to avoid GC'ing\n        motion.vel.addEqual(totalAcc.scale(seconds, EulerIntegrator._ACC));\n        transform.pos\n            .add(motion.vel.scale(seconds, EulerIntegrator._VEL), EulerIntegrator._POS)\n            .addEqual(totalAcc.scale(0.5 * seconds * seconds, EulerIntegrator._VEL_ACC));\n        motion.angularVelocity += motion.torque * (1.0 / motion.inertia) * seconds;\n        const rotation = transform.rotation + motion.angularVelocity * seconds;\n        transform.scale.add(motion.scaleFactor.scale(seconds, this._SCALE_FACTOR), EulerIntegrator._SCALE);\n        const tx = transform.get();\n        tx.setTransform(EulerIntegrator._POS, rotation, EulerIntegrator._SCALE);\n    }\n}\n// Scratch vectors to avoid allocation\nEulerIntegrator._POS = new Vector(0, 0);\nEulerIntegrator._SCALE = new Vector(1, 1);\nEulerIntegrator._ACC = new Vector(0, 0);\nEulerIntegrator._VEL = new Vector(0, 0);\nEulerIntegrator._VEL_ACC = new Vector(0, 0);\nEulerIntegrator._SCALE_FACTOR = new Vector(0, 0);\n\n;// ./Particles/Particles.ts\n\n\n\n\n\n\n\n\n\n/**\n/**\n * CPU Particle is used in a {@apilink ParticleEmitter}\n */\nclass Particle extends Entity {\n    constructor(options) {\n        super({ silenceWarnings: true });\n        this.beginColor = Color.White;\n        this.endColor = Color.White;\n        // Life is counted in ms\n        this.life = 300;\n        this.fade = false;\n        // Color transitions\n        this._rRate = 1;\n        this._gRate = 1;\n        this._bRate = 1;\n        this._aRate = 0;\n        this._currentColor = Color.White;\n        this.size = 5;\n        this.sizeRate = 0;\n        this.visible = true;\n        this.isOffscreen = false;\n        this.particleTransform = ParticleTransform.Global;\n        this.name = `Particle#${this.id}`;\n        this.addComponent((this.transform = new TransformComponent()));\n        this.addComponent((this.motion = new MotionComponent()));\n        this.addComponent((this.graphics = new GraphicsComponent()));\n        this.configure(options);\n    }\n    registerEmitter(emitter) {\n        this._emitter = emitter;\n        if (this.particleTransform === ParticleTransform.Global) {\n            const globalPos = this._emitter.transform.globalPos;\n            this.transform.pos = this.transform.pos.add(globalPos);\n            this.motion.vel = this.motion.vel.rotate(this._emitter.transform.globalRotation);\n        }\n    }\n    configure(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        this.particleTransform = (_a = options.transform) !== null && _a !== void 0 ? _a : this.particleTransform;\n        this.life = (_b = options.life) !== null && _b !== void 0 ? _b : this.life;\n        this.fade = (_c = options.fade) !== null && _c !== void 0 ? _c : this.fade;\n        this.size = (_d = options.size) !== null && _d !== void 0 ? _d : this.size;\n        this.endColor = (_e = options.endColor) !== null && _e !== void 0 ? _e : this.endColor.clone();\n        this.beginColor = (_f = options.beginColor) !== null && _f !== void 0 ? _f : this.beginColor.clone();\n        this._currentColor = this.beginColor.clone();\n        this.graphic = options.graphic;\n        this.graphics.opacity = (_g = options.opacity) !== null && _g !== void 0 ? _g : this.graphics.opacity;\n        this.transform.pos = (_h = options.pos) !== null && _h !== void 0 ? _h : this.transform.pos;\n        this.transform.rotation = (_j = options.rotation) !== null && _j !== void 0 ? _j : 0;\n        this.transform.scale = vec(1, 1);\n        this.motion.vel = (_k = options.vel) !== null && _k !== void 0 ? _k : this.motion.vel;\n        this.motion.angularVelocity = (_l = options.angularVelocity) !== null && _l !== void 0 ? _l : 0;\n        this.motion.acc = (_m = options.acc) !== null && _m !== void 0 ? _m : this.motion.acc;\n        this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\n        this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\n        this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\n        this._aRate = this.graphics.opacity / this.life;\n        this.startSize = (_o = options.startSize) !== null && _o !== void 0 ? _o : 0;\n        this.endSize = (_p = options.endSize) !== null && _p !== void 0 ? _p : 0;\n        if (this.endSize > 0 && this.startSize > 0) {\n            this.sizeRate = (this.endSize - this.startSize) / this.life;\n            this.size = this.startSize;\n        }\n        if (this.graphic) {\n            this.graphics.use(this.graphic);\n            this.graphics.onPostDraw = undefined;\n        }\n        else {\n            this.graphics.localBounds = BoundingBox.fromDimension(this.size, this.size, Vector.Half);\n            this.graphics.onPostDraw = (ctx) => {\n                ctx.save();\n                ctx.debug.drawPoint(vec(0, 0), { color: this._currentColor, size: this.size });\n                ctx.restore();\n            };\n        }\n    }\n    kill() {\n        var _a;\n        if ((_a = this._emitter) === null || _a === void 0 ? void 0 : _a.isActive) {\n            this._emitter.removeParticle(this);\n        }\n        else {\n            super.kill();\n        }\n    }\n    update(engine, elapsed) {\n        this.life = this.life - elapsed;\n        if (this.life < 0) {\n            this.kill();\n        }\n        if (this.fade) {\n            this.graphics.opacity = clamp(this._aRate * this.life, 0.0001, 1);\n        }\n        if (this.startSize && this.endSize && this.startSize > 0 && this.endSize > 0) {\n            this.size = clamp(this.sizeRate * elapsed + this.size, Math.min(this.startSize, this.endSize), Math.max(this.startSize, this.endSize));\n        }\n        this._currentColor.r = clamp(this._currentColor.r + this._rRate * elapsed, 0, 255);\n        this._currentColor.g = clamp(this._currentColor.g + this._gRate * elapsed, 0, 255);\n        this._currentColor.b = clamp(this._currentColor.b + this._bRate * elapsed, 0, 255);\n        this._currentColor.a = this.graphics.opacity;\n        let accel = this.motion.acc;\n        if (this.focus) {\n            accel = this.focus\n                .sub(this.transform.pos)\n                .normalize()\n                .scale(this.focusAccel || 0)\n                .scale(elapsed / 1000);\n        }\n        // Update transform and motion based on Euler linear algebra\n        EulerIntegrator.integrate(this.transform, this.motion, accel, elapsed);\n    }\n}\nParticle.DefaultConfig = {\n    beginColor: Color.White,\n    endColor: Color.White,\n    life: 300,\n    fade: false,\n    size: 5,\n    graphic: undefined,\n    startSize: undefined,\n    endSize: undefined\n};\nvar ParticleTransform;\n(function (ParticleTransform) {\n    /**\n     * {@apilink ParticleTransform.Global} is the default and emits particles as if\n     * they were world space objects, useful for most effects.\n     */\n    ParticleTransform[\"Global\"] = \"global\";\n    /**\n     * {@apilink ParticleTransform.Local} particles are children of the emitter and move relative to the emitter\n     * as they would in a parent/child actor relationship.\n     */\n    ParticleTransform[\"Local\"] = \"local\";\n})(ParticleTransform || (ParticleTransform = {}));\n\n;// ./Graphics/Context/particle-renderer/particle-renderer.ts\n\n\n\n\n\n\n\n\n\nclass ParticleRenderer {\n    constructor() {\n        this.type = 'ex.particle';\n        this.priority = 0;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            vertexSource: particle_vertex,\n            fragmentSource: particle_fragment,\n            onPreLink: (program) => {\n                gl.transformFeedbackVaryings(program, ['finalPosition', 'finalVelocity', 'finalRotation', 'finalAngularVelocity', 'finalLifeMs'], gl.INTERLEAVED_ATTRIBS);\n            }\n        });\n        this._shader.compile();\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n    }\n    _getTexture(image) {\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        return texture;\n    }\n    draw(renderer, elapsed) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const gl = this._gl;\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        const transform = renderer.particle.transform === ParticleTransform.Local\n            ? this._context.getTransform()\n            : this._context.getTransform().multiply(renderer.emitter.transform.get().inverse);\n        this._shader.setUniformAffineMatrix('u_transform', transform);\n        this._shader.setUniformBoolean('fade', renderer.particle.fade ? true : false);\n        this._shader.setUniformBoolean('useTexture', renderer.particle.graphic ? true : false);\n        this._shader.setUniformFloat('maxLifeMs', (_a = renderer.particle.life) !== null && _a !== void 0 ? _a : 2000);\n        this._shader.setUniformFloat('deltaMs', elapsed);\n        this._shader.setUniformFloatVector('gravity', (_b = renderer.particle.acc) !== null && _b !== void 0 ? _b : vec(0, 0));\n        this._shader.setUniformFloatColor('beginColor', (_c = renderer.particle.beginColor) !== null && _c !== void 0 ? _c : Color.Transparent);\n        this._shader.setUniformFloatColor('endColor', (_d = renderer.particle.endColor) !== null && _d !== void 0 ? _d : Color.Transparent);\n        let startSize = (_e = renderer.particle.startSize) !== null && _e !== void 0 ? _e : 0;\n        let endSize = (_f = renderer.particle.endSize) !== null && _f !== void 0 ? _f : 0;\n        const size = (_g = renderer.particle.size) !== null && _g !== void 0 ? _g : 0;\n        if (size > 0) {\n            startSize = size;\n            endSize = size;\n        }\n        this._shader.setUniformFloat('startSize', startSize !== null && startSize !== void 0 ? startSize : 10);\n        this._shader.setUniformFloat('endSize', endSize !== null && endSize !== void 0 ? endSize : 10);\n        this._shader.setUniformFloat('startOpacity', (_h = renderer.particle.opacity) !== null && _h !== void 0 ? _h : 1);\n        if (renderer.particle.focus) {\n            this._shader.setUniformFloatVector('focus', renderer.particle.focus);\n            this._shader.setUniformFloat('focusAccel', (_j = renderer.particle.focusAccel) !== null && _j !== void 0 ? _j : 0);\n        }\n        // Particle Graphic (only Sprites right now)\n        if (renderer.particle.graphic) {\n            const graphic = renderer.particle.graphic;\n            const texture = this._getTexture(graphic.image.image);\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            this._shader.setUniformInt('graphic', 0);\n        }\n        // Collision Mask\n        // gl.activeTexture(gl.TEXTURE0 + 1);\n        // gl.bindTexture(gl.TEXTURE_2D, obstacleTex);\n        // gl.uniform1i(u_obstacle, 1);\n        renderer.draw(gl);\n    }\n    hasPendingDraws() {\n        return false;\n    }\n    flush() {\n        // pass\n    }\n    dispose() {\n        // pass\n    }\n}\n\n;// ./Graphics/Context/image-renderer-v2/image-renderer-v2.frag.glsl\n/* harmony default export */ const image_renderer_v2_frag = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// Textures in the current draw\\r\\nuniform sampler2D u_textures[%%count%%];\\r\\n\\r\\nuniform bool u_pixelart;\\r\\n\\r\\nin float v_texture_index;\\r\\n\\r\\nin float v_opacity;\\r\\n\\r\\nin vec4 v_tint;\\r\\n\\r\\n// texture resolution\\r\\nin vec2 v_res;\\r\\n\\r\\nin vec2 v_size;\\r\\n\\r\\nin vec2 v_uv_min;\\r\\nin vec2 v_uv_max;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\n// Inigo Quilez pixel art filter https://jorenjoestar.github.io/post/pixel_art_filtering/\\r\\nvec2 uv_iq(in vec2 uv, in vec2 texture_size) {\\r\\n  vec2 pixel = uv * texture_size;\\r\\n\\r\\n  vec2 seam=floor(pixel+.5);\\r\\n  vec2 dudv=fwidth(pixel);\\r\\n  pixel=seam+clamp((pixel-seam)/dudv,-.5,.5);\\r\\n\\r\\n  return pixel/texture_size;\\r\\n}\\r\\n\\r\\nfloat lerp(float from, float to, float rel){\\r\\n  return ((1. - rel) * from) + (rel * to);\\r\\n}\\r\\n\\r\\nfloat invLerp(float from, float to, float value){\\r\\n  return (value - from) / (to - from);\\r\\n}\\r\\n\\r\\nfloat remap(float origFrom, float origTo, float targetFrom, float targetTo, float value){\\r\\n  float rel = invLerp(origFrom, origTo, value);\\r\\n  return lerp(targetFrom, targetTo, rel);\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n  // In order to support the most efficient sprite batching, we have multiple\\r\\n  // textures loaded into the gpu (usually 8) this picker logic skips over textures\\r\\n  // that do not apply to a particular sprite.\\r\\n\\r\\n  vec4 color=vec4(1.,0,0,1.);\\r\\n  vec2 remapped_uv = v_texcoord;\\r\\n  remapped_uv.x = remap(0.,1., v_uv_min.x, v_uv_max.x, v_texcoord.x);\\r\\n  remapped_uv.y = remap(0.,1., v_uv_min.y, v_uv_max.y, v_texcoord.y);\\r\\n  vec2 uv = u_pixelart ? uv_iq(remapped_uv, v_size) : remapped_uv;\\r\\n\\r\\n  // GLSL is templated out to pick the right texture and set the vec4 color\\r\\n  %%texture_picker%%\\r\\n\\r\\n  color.rgb = color.rgb * v_opacity;\\r\\n  color.a = color.a * v_opacity;\\r\\n  fragColor = color * v_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer-v2/image-renderer-v2.vert.glsl\n/* harmony default export */ const image_renderer_v2_vert = (\"#version 300 es\\r\\nlayout(location=0) in vec2 pos;\\r\\nlayout(location=1) in vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\nlayout(location=2) in vec2 a_offset;\\r\\nlayout(location=3) in vec2 a_mat_column1;\\r\\nlayout(location=4) in vec2 a_mat_column2;\\r\\nlayout(location=5) in vec2 a_mat_column3;\\r\\n\\r\\nlayout(location=6) in float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\n// Texture resolution (could be bigger than a_size)\\r\\nlayout(location=7) in vec2 a_res;\\r\\nout vec2 v_res;\\r\\n\\r\\n// Final size of graphic\\r\\nlayout(location=8) in vec2 a_size;\\r\\nout vec2 v_size;\\r\\n\\r\\nlayout(location=9) in lowp float a_texture_index;\\r\\nout lowp float v_texture_index;\\r\\n\\r\\nlayout(location=10) in vec2 a_uv_min;\\r\\nout vec2 v_uv_min;\\r\\n\\r\\nlayout(location=11) in vec2 a_uv_max;\\r\\nout vec2 v_uv_max;\\r\\n\\r\\nlayout(location=12) in vec4 a_tint;\\r\\nout vec4 v_tint;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main(){\\r\\n  mat4 world_mat = mat4(\\r\\n    a_mat_column1.x, a_mat_column1.y, 0., 0.,\\r\\n    a_mat_column2.x, a_mat_column2.y, 0., 0.,\\r\\n    0.             , 0.             , 1., 0.,\\r\\n    a_mat_column3.x, a_mat_column3.y, 0., 1.\\r\\n  );\\r\\n\\r\\n  vec2 newPos = vec2(pos.x * a_res.x, pos.y * a_res.y);\\r\\n  gl_Position = u_matrix * world_mat * vec4(newPos + a_offset, 0., 1.);\\r\\n\\r\\n  v_opacity = a_opacity;\\r\\n  v_texcoord = a_texcoord;\\r\\n  v_uv_min = a_uv_min;\\r\\n  v_uv_max = a_uv_max;\\r\\n  v_res = a_res;\\r\\n  v_size = a_size;\\r\\n  v_texture_index = a_texture_index;\\r\\n  v_tint = a_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer-v2/image-renderer-v2.ts\n// import { Color } from '../../../Color';\n// import { parseImageFiltering } from '../../Filtering';\n\n\n\n\n\n\n\n\n\n\n\nclass ImageRendererV2 {\n    constructor(options) {\n        this.type = 'ex.image-v2';\n        this.priority = 0;\n        // TODO this could be bigger probably\n        this._maxImages = 20000; // max(uint16) / 6 verts\n        this._maxTextures = 0;\n        this._components = 2 + 2 + 2 + 2 + 1 + 2 + 2 + 1 + 2 + 2 + 4;\n        // Per flush vars\n        this._imageCount = 0;\n        this._textures = [];\n        this._textureIndex = 0;\n        this._textureToIndex = new Map();\n        this._images = new Set();\n        this._vertexIndex = 0;\n        this._imageToWidth = new Map();\n        this._imageToHeight = new Map();\n        this._view = [0, 0, 0, 0];\n        this._dest = [0, 0];\n        this._defaultTint = Color.White;\n        this.pixelArtSampler = options.pixelArtSampler;\n        this.uvPadding = options.uvPadding;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // Transform shader source\n        const maxTexture = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n        const maxComplexity = getMaxShaderComplexity(gl, maxTexture);\n        this._maxTextures = Math.min(maxTexture, maxComplexity);\n        const transformedFrag = this._transformFragmentSource(image_renderer_v2_frag, this._maxTextures);\n        // Compile shader\n        this._shader = new Shader({\n            gl,\n            fragmentSource: transformedFrag,\n            vertexSource: image_renderer_v2_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        // Initialize texture slots to [0, 1, 2, 3, 4, .... maxGPUTextures]\n        this._shader.setUniformIntArray('u_textures', [...Array(this._maxTextures)].map((_, i) => i));\n        this._vao = gl.createVertexArray();\n        gl.bindVertexArray(this._vao);\n        this._quadMesh = new Float32Array([\n            // pos       uv\n            0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0,\n            1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1\n        ]);\n        this._meshBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._meshBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this._quadMesh, gl.STATIC_DRAW);\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 16, 0);\n        gl.enableVertexAttribArray(0);\n        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, 16, 8);\n        gl.enableVertexAttribArray(1);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        // Setup memory layout\n        const components = this._components;\n        this._transformData = new VertexBuffer({\n            gl,\n            size: components * this._maxImages, // components * images\n            type: 'dynamic'\n        });\n        this._transformData.bind();\n        // attributes\n        let offset = 0;\n        let start = 2;\n        const bytesPerFloat = 4;\n        const totalSize = components * 4;\n        // a_offset vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(2);\n        offset += 2 * bytesPerFloat;\n        // a_mat_column1 vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(3);\n        offset += 2 * bytesPerFloat;\n        // a_mat_column2 vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(4);\n        offset += 2 * bytesPerFloat;\n        // a_mat_column3 vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(5);\n        offset += 2 * bytesPerFloat;\n        // a_opacity float - 1\n        gl.vertexAttribPointer(start++, 1, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(6);\n        offset += 1 * bytesPerFloat;\n        // a_res vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(7);\n        offset += 2 * bytesPerFloat;\n        // a_size vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(8);\n        offset += 2 * bytesPerFloat;\n        // a_texture_index - 1\n        gl.vertexAttribPointer(start++, 1, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(9);\n        offset += 1 * bytesPerFloat;\n        // a_uv_min - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(10);\n        offset += 2 * bytesPerFloat;\n        // a_uv_max - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(11);\n        offset += 2 * bytesPerFloat;\n        // a_tint - 4\n        gl.vertexAttribPointer(start++, 4, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(12);\n        offset += 4 * bytesPerFloat;\n        gl.vertexAttribDivisor(2, 1);\n        gl.vertexAttribDivisor(3, 1);\n        gl.vertexAttribDivisor(4, 1);\n        gl.vertexAttribDivisor(5, 1);\n        gl.vertexAttribDivisor(6, 1);\n        gl.vertexAttribDivisor(7, 1);\n        gl.vertexAttribDivisor(8, 1);\n        gl.vertexAttribDivisor(9, 1);\n        gl.vertexAttribDivisor(10, 1);\n        gl.vertexAttribDivisor(11, 1);\n        gl.vertexAttribDivisor(12, 1);\n        gl.bindVertexArray(null);\n    }\n    _bindData(gl) {\n        // Setup memory layout\n        const components = this._components;\n        this._transformData.bind();\n        this._transformData.upload(components * this._imageCount);\n        gl.bindVertexArray(this._vao);\n    }\n    dispose() {\n        this._transformData.dispose();\n        this._shader.dispose();\n        this._textures.length = 0;\n        this._context = null;\n        this._gl = null;\n    }\n    _transformFragmentSource(source, maxTextures) {\n        let newSource = source.replace('%%count%%', maxTextures.toString());\n        let texturePickerBuilder = '';\n        for (let i = 0; i < maxTextures; i++) {\n            if (i === 0) {\n                texturePickerBuilder += `if (v_texture_index <= ${i}.5) {\\n`;\n            }\n            else {\n                texturePickerBuilder += `   else if (v_texture_index <= ${i}.5) {\\n`;\n            }\n            texturePickerBuilder += `      color = texture(u_textures[${i}], uv);\\n`;\n            texturePickerBuilder += `   }\\n`;\n        }\n        newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\n        return newSource;\n    }\n    _addImageAsTexture(image) {\n        if (this._images.has(image)) {\n            return;\n        }\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        if (this._textures.indexOf(texture) === -1) {\n            this._textures.push(texture);\n            this._textureToIndex.set(texture, this._textureIndex++);\n            this._images.add(image);\n        }\n    }\n    _bindTextures(gl) {\n        // Bind textures in the correct order\n        const max = Math.min(this._textureIndex, this._maxTextures);\n        for (let i = 0; i < max; i++) {\n            gl.activeTexture(gl.TEXTURE0 + i);\n            gl.bindTexture(gl.TEXTURE_2D, this._textures[i] || this._textures[0]);\n        }\n    }\n    _getTextureIdForImage(image) {\n        var _a;\n        if (image) {\n            const maybeTexture = this._context.textureLoader.get(image);\n            return (_a = this._textureToIndex.get(maybeTexture)) !== null && _a !== void 0 ? _a : -1; //this._textures.indexOf(maybeTexture);\n        }\n        return -1;\n    }\n    _isFull() {\n        if (this._imageCount >= this._maxImages) {\n            return true;\n        }\n        if (this._textures.length >= this._maxTextures) {\n            return true;\n        }\n        return false;\n    }\n    _getImageWidth(image) {\n        let maybeWidth = this._imageToWidth.get(image);\n        if (maybeWidth === undefined) {\n            maybeWidth = image.width;\n            this._imageToWidth.set(image, maybeWidth);\n        }\n        return maybeWidth;\n    }\n    _getImageHeight(image) {\n        let maybeHeight = this._imageToHeight.get(image);\n        if (maybeHeight === undefined) {\n            maybeHeight = image.height;\n            this._imageToHeight.set(image, maybeHeight);\n        }\n        return maybeHeight;\n    }\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        var _a, _b, _c, _d;\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._imageCount++;\n        // This creates and uploads the texture if not already done\n        this._addImageAsTexture(image);\n        const maybeImageWidth = this._getImageWidth(image);\n        const maybeImageHeight = this._getImageHeight(image);\n        let width = maybeImageWidth || swidth || 0;\n        let height = maybeImageHeight || sheight || 0;\n        this._view[0] = 0;\n        this._view[1] = 0;\n        this._view[2] = (_a = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _a !== void 0 ? _a : 0;\n        this._view[3] = (_b = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _b !== void 0 ? _b : 0;\n        this._dest[0] = sx !== null && sx !== void 0 ? sx : 1;\n        this._dest[1] = sy !== null && sy !== void 0 ? sy : 1;\n        // If destination is specified, update view and dest\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n            this._view[0] = sx !== null && sx !== void 0 ? sx : 1;\n            this._view[1] = sy !== null && sy !== void 0 ? sy : 1;\n            this._view[2] = (_c = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _c !== void 0 ? _c : 0;\n            this._view[3] = (_d = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _d !== void 0 ? _d : 0;\n            this._dest[0] = dx;\n            this._dest[1] = dy;\n            width = dwidth;\n            height = dheight;\n        }\n        sx = this._view[0];\n        sy = this._view[1];\n        const sw = this._view[2];\n        const sh = this._view[3];\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        if (snapToPixel) {\n            this._dest[0] = ~~(this._dest[0] + pixelSnapEpsilon);\n            this._dest[1] = ~~(this._dest[1] + pixelSnapEpsilon);\n        }\n        const tint = this._context.tint || this._defaultTint;\n        const textureId = this._getTextureIdForImage(image);\n        const imageWidth = maybeImageWidth || width;\n        const imageHeight = maybeImageHeight || height;\n        const uvx0 = (sx + this.uvPadding) / imageWidth;\n        const uvy0 = (sy + this.uvPadding) / imageHeight;\n        const uvx1 = (sx + sw - this.uvPadding) / imageWidth;\n        const uvy1 = (sy + sh - this.uvPadding) / imageHeight;\n        const txWidth = maybeImageWidth;\n        const txHeight = maybeImageHeight;\n        // update data\n        const vertexBuffer = this._transformData.bufferData;\n        vertexBuffer[this._vertexIndex++] = this._dest[0];\n        vertexBuffer[this._vertexIndex++] = this._dest[1];\n        vertexBuffer[this._vertexIndex++] = transform.data[0];\n        vertexBuffer[this._vertexIndex++] = transform.data[1];\n        vertexBuffer[this._vertexIndex++] = transform.data[2];\n        vertexBuffer[this._vertexIndex++] = transform.data[3];\n        vertexBuffer[this._vertexIndex++] = transform.data[4];\n        vertexBuffer[this._vertexIndex++] = transform.data[5];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n    }\n    hasPendingDraws() {\n        return this._imageCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._imageCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._bindData(gl);\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Turn on pixel art aa sampler\n        this._shader.setUniformBoolean('u_pixelart', this.pixelArtSampler);\n        // Bind textures to\n        this._bindTextures(gl);\n        // Draw all the quads\n        gl.drawArraysInstanced(gl.TRIANGLES, 0, 6, this._imageCount);\n        GraphicsDiagnostics.DrawnImagesCount += this._imageCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        gl.bindVertexArray(null);\n        // Reset\n        this._imageCount = 0;\n        this._vertexIndex = 0;\n        this._textures.length = 0;\n        this._textureIndex = 0;\n        this._textureToIndex.clear();\n        this._images.clear();\n        this._imageToWidth.clear();\n        this._imageToHeight.clear();\n    }\n}\n\n;// ./Graphics/Context/ExcaliburGraphicsContextWebGL.ts\n\n\n\n\n\n\n\n\n\n// renderers\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst pixelSnapEpsilon = 0.0001;\nclass ExcaliburGraphicsContextWebGLDebug {\n    constructor(_webglCtx) {\n        this._webglCtx = _webglCtx;\n        this._debugText = new DebugText();\n    }\n    /**\n     * Draw a debugging rectangle to the context\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n    drawRect(x, y, width, height, rectOptions = { color: Color.Black }) {\n        this.drawLine(vec(x, y), vec(x + width, y), { ...rectOptions });\n        this.drawLine(vec(x + width, y), vec(x + width, y + height), { ...rectOptions });\n        this.drawLine(vec(x + width, y + height), vec(x, y + height), { ...rectOptions });\n        this.drawLine(vec(x, y + height), vec(x, y), { ...rectOptions });\n    }\n    /**\n     * Draw a debugging line to the context\n     * @param start\n     * @param end\n     * @param lineOptions\n     */\n    drawLine(start, end, lineOptions) {\n        var _a;\n        this._webglCtx.draw('ex.line', start, end, (_a = lineOptions === null || lineOptions === void 0 ? void 0 : lineOptions.color) !== null && _a !== void 0 ? _a : Color.Black);\n    }\n    /**\n     * Draw a debugging point to the context\n     * @param point\n     * @param pointOptions\n     */\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\n        this._webglCtx.draw('ex.point', point, pointOptions.color, pointOptions.size);\n    }\n    drawText(text, pos) {\n        this._debugText.write(this._webglCtx, text, pos);\n    }\n}\nclass ExcaliburGraphicsContextWebGL {\n    get z() {\n        return this._state.current.z;\n    }\n    set z(value) {\n        this._state.current.z = value;\n    }\n    get opacity() {\n        return this._state.current.opacity;\n    }\n    set opacity(value) {\n        this._state.current.opacity = value;\n    }\n    get tint() {\n        return this._state.current.tint;\n    }\n    set tint(color) {\n        this._state.current.tint = color;\n    }\n    get width() {\n        return this.__gl.canvas.width;\n    }\n    get height() {\n        return this.__gl.canvas.height;\n    }\n    get ortho() {\n        return this._ortho;\n    }\n    /**\n     * Checks the underlying webgl implementation if the requested internal resolution is supported\n     * @param dim\n     */\n    checkIfResolutionSupported(dim) {\n        // Slight hack based on this thread https://groups.google.com/g/webgl-dev-list/c/AHONvz3oQTo\n        let supported = true;\n        if (dim.width > 4096 || dim.height > 4096) {\n            supported = false;\n        }\n        return supported;\n    }\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this._renderers = new Map();\n        this._lazyRenderersFactory = new Map();\n        this.imageRenderer = Flags.isEnabled('use-legacy-image-renderer') ? 'ex.image' : 'ex.image-v2';\n        this._isDrawLifecycle = false;\n        this.useDrawSorting = true;\n        this._drawCallPool = new Pool(() => new DrawCall(), undefined, 4000);\n        this._drawCallIndex = 0;\n        this._drawCalls = new Array(4000).fill(null);\n        // Postprocessing is a tuple with 2 render targets, these are flip-flopped during the postprocessing process\n        this._postProcessTargets = [];\n        this._postprocessors = [];\n        this._transform = new TransformStack();\n        this._state = new StateStack();\n        /**\n         * Snaps the drawing x/y coordinate to the nearest whole pixel\n         */\n        this.snapToPixel = false;\n        /**\n         * Native context smoothing\n         */\n        this.smoothing = false;\n        /**\n         * Whether the pixel art sampler is enabled for smooth sub pixel anti-aliasing\n         */\n        this.pixelArtSampler = false;\n        /**\n         * UV padding in pixels to use in internal image rendering to prevent texture bleed\n         *\n         */\n        this.uvPadding = 0.01;\n        this.backgroundColor = Color.ExcaliburBlue;\n        this.multiSampleAntialiasing = true;\n        this.transparency = true;\n        this._isContextLost = false;\n        this._disposed = false;\n        this._imageToWidth = new Map();\n        this._imageToHeight = new Map();\n        this.debug = new ExcaliburGraphicsContextWebGLDebug(this);\n        this._totalPostProcessorTime = 0;\n        const { canvasElement, context, enableTransparency, antialiasing, uvPadding, multiSampleAntialiasing, pixelArtSampler, powerPreference, snapToPixel, backgroundColor, useDrawSorting, garbageCollector, handleContextLost, handleContextRestored } = options;\n        this.__gl =\n            context !== null && context !== void 0 ? context : canvasElement.getContext('webgl2', {\n                antialias: antialiasing !== null && antialiasing !== void 0 ? antialiasing : this.smoothing,\n                premultipliedAlpha: false,\n                alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : this.transparency,\n                depth: false,\n                powerPreference: powerPreference !== null && powerPreference !== void 0 ? powerPreference : 'high-performance'\n            });\n        if (!this.__gl) {\n            throw Error('Failed to retrieve webgl context from browser');\n        }\n        if (handleContextLost) {\n            this.__gl.canvas.addEventListener('webglcontextlost', handleContextLost, false);\n        }\n        if (handleContextRestored) {\n            this.__gl.canvas.addEventListener('webglcontextrestored', handleContextRestored, false);\n        }\n        this.__gl.canvas.addEventListener('webglcontextlost', () => {\n            this._isContextLost = true;\n        });\n        this.__gl.canvas.addEventListener('webglcontextrestored', () => {\n            this._isContextLost = false;\n        });\n        this.textureLoader = new TextureLoader(this.__gl, garbageCollector);\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\n        this.smoothing = antialiasing !== null && antialiasing !== void 0 ? antialiasing : this.smoothing;\n        this.transparency = enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : this.transparency;\n        this.pixelArtSampler = pixelArtSampler !== null && pixelArtSampler !== void 0 ? pixelArtSampler : this.pixelArtSampler;\n        this.uvPadding = uvPadding !== null && uvPadding !== void 0 ? uvPadding : this.uvPadding;\n        this.multiSampleAntialiasing = typeof multiSampleAntialiasing === 'boolean' ? multiSampleAntialiasing : this.multiSampleAntialiasing;\n        this.samples = typeof multiSampleAntialiasing === 'object' ? multiSampleAntialiasing.samples : undefined;\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\n        this.useDrawSorting = useDrawSorting !== null && useDrawSorting !== void 0 ? useDrawSorting : this.useDrawSorting;\n        this._drawCallPool.disableWarnings = true;\n        this._drawCallPool.preallocate();\n        this._init();\n    }\n    dispose() {\n        if (!this._disposed) {\n            this._disposed = true;\n            this.textureLoader.dispose();\n            for (const renderer of this._renderers.values()) {\n                renderer.dispose();\n            }\n            this._renderers.clear();\n            this._drawCallPool.dispose();\n            this._drawCalls.length = 0;\n            this.__gl = null;\n        }\n    }\n    _init() {\n        const gl = this.__gl;\n        // Setup viewport and view matrix\n        this._ortho = Matrix.ortho(0, gl.canvas.width, gl.canvas.height, 0, 400, -400);\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n        // Clear background\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        // Enable alpha blending\n        // https://www.realtimerendering.com/blog/gpus-prefer-premultiplication/\n        gl.enable(gl.BLEND);\n        gl.blendEquation(gl.FUNC_ADD);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n        gl.blendFuncSeparate(gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.depthMask(false);\n        // Setup builtin renderers\n        this.register(new ImageRenderer({\n            uvPadding: this.uvPadding,\n            pixelArtSampler: this.pixelArtSampler\n        }));\n        this.register(new MaterialRenderer());\n        this.register(new RectangleRenderer());\n        this.register(new CircleRenderer());\n        this.register(new PointRenderer());\n        this.register(new LineRenderer());\n        this.lazyRegister('ex.particle', () => new ParticleRenderer());\n        this.register(new ImageRendererV2({\n            uvPadding: this.uvPadding,\n            pixelArtSampler: this.pixelArtSampler\n        }));\n        this.materialScreenTexture = gl.createTexture();\n        if (!this.materialScreenTexture) {\n            throw new Error('Could not create screen texture!');\n        }\n        gl.bindTexture(gl.TEXTURE_2D, this.materialScreenTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this._screenRenderer = new ScreenPassPainter(gl);\n        this._renderTarget = new RenderTarget({\n            gl,\n            transparency: this.transparency,\n            width: gl.canvas.width,\n            height: gl.canvas.height\n        });\n        this._postProcessTargets = [\n            new RenderTarget({\n                gl,\n                transparency: this.transparency,\n                width: gl.canvas.width,\n                height: gl.canvas.height\n            }),\n            new RenderTarget({\n                gl,\n                transparency: this.transparency,\n                width: gl.canvas.width,\n                height: gl.canvas.height\n            })\n        ];\n        this._msaaTarget = new RenderTarget({\n            gl,\n            transparency: this.transparency,\n            width: gl.canvas.width,\n            height: gl.canvas.height,\n            antialias: this.multiSampleAntialiasing,\n            samples: this.samples\n        });\n    }\n    register(renderer) {\n        this._renderers.set(renderer.type, renderer);\n        renderer.initialize(this.__gl, this);\n    }\n    lazyRegister(type, renderer) {\n        this._lazyRenderersFactory.set(type, renderer);\n    }\n    get(rendererName) {\n        let maybeRenderer = this._renderers.get(rendererName);\n        if (!maybeRenderer) {\n            const lazyFactory = this._lazyRenderersFactory.get(rendererName);\n            if (lazyFactory) {\n                this._logger.debug('lazy init renderer:', rendererName);\n                maybeRenderer = lazyFactory();\n                this.register(maybeRenderer);\n            }\n        }\n        return maybeRenderer;\n    }\n    _isCurrentRenderer(renderer) {\n        if (!this._currentRenderer || this._currentRenderer === renderer) {\n            return true;\n        }\n        return false;\n    }\n    beginDrawLifecycle() {\n        this._isDrawLifecycle = true;\n    }\n    endDrawLifecycle() {\n        this._isDrawLifecycle = false;\n    }\n    draw(rendererName, ...args) {\n        if (false) {}\n        if (!this._isDrawLifecycle) {\n            this._logger.warnOnce(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.\\n` +\n                `If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`);\n        }\n        if (this._isContextLost) {\n            this._logger.errorOnce(`Unable to draw ${rendererName}, the webgl context is lost`);\n            return;\n        }\n        const renderer = this.get(rendererName);\n        if (renderer) {\n            if (this.useDrawSorting) {\n                const drawCall = this._drawCallPool.get();\n                drawCall.z = this._state.current.z;\n                drawCall.priority = renderer.priority;\n                drawCall.renderer = rendererName;\n                this.getTransform().clone(drawCall.transform);\n                drawCall.state.z = this._state.current.z;\n                drawCall.state.opacity = this._state.current.opacity;\n                drawCall.state.tint = this._state.current.tint;\n                drawCall.state.material = this._state.current.material;\n                drawCall.args[0] = args[0];\n                drawCall.args[1] = args[1];\n                drawCall.args[2] = args[2];\n                drawCall.args[3] = args[3];\n                drawCall.args[4] = args[4];\n                drawCall.args[5] = args[5];\n                drawCall.args[6] = args[6];\n                drawCall.args[7] = args[7];\n                drawCall.args[8] = args[8];\n                drawCall.args[9] = args[9];\n                this._drawCalls[this._drawCallIndex++] = drawCall;\n            }\n            else {\n                // Set the current renderer if not defined\n                if (!this._currentRenderer) {\n                    this._currentRenderer = renderer;\n                }\n                if (!this._isCurrentRenderer(renderer)) {\n                    // switching graphics means we must flush the previous\n                    this._currentRenderer.flush();\n                }\n                // If we are still using the same renderer we can add to the current batch\n                renderer.draw(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]);\n                this._currentRenderer = renderer;\n            }\n        }\n        else {\n            throw Error(`No renderer with name ${rendererName} has been registered`);\n        }\n    }\n    resetTransform() {\n        this._transform.reset();\n    }\n    updateViewport(resolution) {\n        const gl = this.__gl;\n        this._ortho = this._ortho = Matrix.ortho(0, resolution.width, resolution.height, 0, 400, -400);\n        this._renderTarget.setResolution(gl.canvas.width, gl.canvas.height);\n        this._msaaTarget.setResolution(gl.canvas.width, gl.canvas.height);\n        this._postProcessTargets[0].setResolution(gl.canvas.width, gl.canvas.height);\n        this._postProcessTargets[1].setResolution(gl.canvas.width, gl.canvas.height);\n    }\n    _getImageWidth(image) {\n        let maybeWidth = this._imageToWidth.get(image);\n        if (maybeWidth === undefined) {\n            maybeWidth = image.width;\n            this._imageToWidth.set(image, maybeWidth);\n        }\n        return maybeWidth;\n    }\n    _getImageHeight(image) {\n        let maybeHeight = this._imageToHeight.get(image);\n        if (maybeHeight === undefined) {\n            maybeHeight = image.height;\n            this._imageToHeight.set(image, maybeHeight);\n        }\n        return maybeHeight;\n    }\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        if (swidth === 0 || sheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (dwidth === 0 || dheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (this._getImageWidth(image) === 0 || this._getImageHeight(image) === 0) {\n            return; // zero dimension source exit early\n        }\n        if (!image) {\n            Logger.getInstance().warn('Cannot draw a null or undefined image');\n            // tslint:disable-next-line: no-console\n            if (console.trace) {\n                // tslint:disable-next-line: no-console\n                console.trace();\n            }\n            return;\n        }\n        if (this._state.current.material) {\n            this.draw('ex.material', image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n        }\n        else {\n            if (this.imageRenderer === 'ex.image') {\n                this.draw(this.imageRenderer, image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n            }\n            else {\n                this.draw(this.imageRenderer, image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n            }\n        }\n    }\n    drawLine(start, end, color, thickness = 1) {\n        this.draw('ex.rectangle', start, end, color, thickness);\n    }\n    drawRectangle(pos, width, height, color, stroke, strokeThickness) {\n        this.draw('ex.rectangle', pos, width, height, color, stroke, strokeThickness);\n    }\n    drawCircle(pos, radius, color, stroke, thickness) {\n        this.draw('ex.circle', pos, radius, color, stroke, thickness);\n    }\n    save() {\n        this._transform.save();\n        this._state.save();\n    }\n    restore() {\n        this._transform.restore();\n        this._state.restore();\n    }\n    translate(x, y) {\n        this._transform.translate(this.snapToPixel ? ~~(x + pixelSnapEpsilon) : x, this.snapToPixel ? ~~(y + pixelSnapEpsilon) : y);\n    }\n    rotate(angle) {\n        this._transform.rotate(angle);\n    }\n    scale(x, y) {\n        this._transform.scale(x, y);\n    }\n    transform(matrix) {\n        this._transform.current = matrix;\n    }\n    getTransform() {\n        return this._transform.current;\n    }\n    multiply(m) {\n        this._transform.current.multiply(m, this._transform.current);\n    }\n    addPostProcessor(postprocessor) {\n        this._postprocessors.push(postprocessor);\n        postprocessor.initialize(this.__gl);\n    }\n    removePostProcessor(postprocessor) {\n        const index = this._postprocessors.indexOf(postprocessor);\n        if (index !== -1) {\n            this._postprocessors.splice(index, 1);\n        }\n    }\n    clearPostProcessors() {\n        this._postprocessors.length = 0;\n    }\n    updatePostProcessors(elapsed) {\n        for (const postprocessor of this._postprocessors) {\n            const shader = postprocessor.getShader();\n            shader.use();\n            const uniforms = shader.getUniforms();\n            this._totalPostProcessorTime += elapsed;\n            if (uniforms.find((u) => u.name === 'u_time_ms')) {\n                shader.setUniformFloat('u_time_ms', this._totalPostProcessorTime);\n            }\n            if (uniforms.find((u) => u.name === 'u_elapsed_ms')) {\n                shader.setUniformFloat('u_elapsed_ms', elapsed);\n            }\n            if (uniforms.find((u) => u.name === 'u_resolution')) {\n                shader.setUniformFloatVector('u_resolution', vec(this.width, this.height));\n            }\n            if (postprocessor.onUpdate) {\n                postprocessor.onUpdate(elapsed);\n            }\n        }\n    }\n    set material(material) {\n        this._state.current.material = material;\n    }\n    get material() {\n        return this._state.current.material;\n    }\n    /**\n     * Creates and initializes the material which compiles the internal shader\n     * @param options\n     * @returns Material\n     */\n    createMaterial(options) {\n        const material = new Material({ ...options, graphicsContext: this });\n        return material;\n    }\n    createShader(options) {\n        const gl = this.__gl;\n        const { vertexSource, fragmentSource } = options;\n        const shader = new Shader({\n            gl,\n            vertexSource,\n            fragmentSource\n        });\n        shader.compile();\n        return shader;\n    }\n    clear() {\n        const gl = this.__gl;\n        const currentTarget = this.multiSampleAntialiasing ? this._msaaTarget : this._renderTarget;\n        currentTarget.use();\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n        // Clear the context with the newly set color. This is\n        // the function call that actually does the drawing.\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    /**\n     * Flushes all batched rendering to the screen\n     */\n    flush() {\n        var _a;\n        if (this._isContextLost) {\n            this._logger.errorOnce(`Unable to flush the webgl context is lost`);\n            return;\n        }\n        // render target captures all draws and redirects to the render target\n        let currentTarget = this.multiSampleAntialiasing ? this._msaaTarget : this._renderTarget;\n        currentTarget.use();\n        if (this.useDrawSorting) {\n            // null out unused draw calls\n            for (let i = this._drawCallIndex; i < this._drawCalls.length; i++) {\n                this._drawCalls[i] = null;\n            }\n            // sort draw calls\n            // Find the original order of the first instance of the draw call\n            const originalSort = new Map();\n            for (const [name] of this._renderers) {\n                let firstIndex = 0;\n                for (firstIndex = 0; firstIndex < this._drawCallIndex; firstIndex++) {\n                    if (this._drawCalls[firstIndex].renderer === name) {\n                        break;\n                    }\n                }\n                originalSort.set(name, firstIndex);\n            }\n            this._drawCalls.sort((a, b) => {\n                if (a === null || b === null) {\n                    return 0;\n                }\n                const zIndex = a.z - b.z;\n                const originalSortOrder = originalSort.get(a.renderer) - originalSort.get(b.renderer);\n                const priority = a.priority - b.priority;\n                if (zIndex === 0) {\n                    // sort by z first\n                    if (priority === 0) {\n                        // sort by priority\n                        return originalSortOrder; // use the original order to inform draw call packing to maximally preserve painter order\n                    }\n                    return priority;\n                }\n                return zIndex;\n            });\n            const oldTransform = this._transform.current;\n            const oldState = this._state.current;\n            if (this._drawCalls.length && this._drawCallIndex) {\n                let currentRendererName = this._drawCalls[0].renderer;\n                let currentRenderer = this.get(currentRendererName);\n                for (let i = 0; i < this._drawCallIndex; i++) {\n                    // hydrate the state for renderers\n                    this._transform.current = this._drawCalls[i].transform;\n                    this._state.current = this._drawCalls[i].state;\n                    if (this._drawCalls[i].renderer !== currentRendererName) {\n                        // switching graphics renderer means we must flush the previous\n                        currentRenderer.flush();\n                        currentRendererName = this._drawCalls[i].renderer;\n                        currentRenderer = this.get(currentRendererName);\n                    }\n                    // ! hack to grab screen texture before materials run because they might want it\n                    if (currentRenderer instanceof MaterialRenderer && ((_a = this.material) === null || _a === void 0 ? void 0 : _a.isUsingScreenTexture)) {\n                        currentTarget.copyToTexture(this.materialScreenTexture);\n                        currentTarget.use();\n                    }\n                    // If we are still using the same renderer we can add to the current batch\n                    currentRenderer.draw(...this._drawCalls[i].args);\n                }\n                if (currentRenderer.hasPendingDraws()) {\n                    currentRenderer.flush();\n                }\n            }\n            // reset state\n            this._transform.current = oldTransform;\n            this._state.current = oldState;\n            // reclaim draw calls\n            this._drawCallPool.done();\n            this._drawCallIndex = 0;\n            this._imageToHeight.clear();\n            this._imageToWidth.clear();\n        }\n        else {\n            // This is the final flush at the moment to draw any leftover pending draw\n            for (const renderer of this._renderers.values()) {\n                if (renderer.hasPendingDraws()) {\n                    renderer.flush();\n                }\n            }\n        }\n        currentTarget.disable();\n        // post process step\n        if (this._postprocessors.length > 0) {\n            currentTarget.toRenderSource().use();\n        }\n        // flip flop render targets for post processing\n        for (let i = 0; i < this._postprocessors.length; i++) {\n            currentTarget = this._postProcessTargets[i % 2];\n            this._postProcessTargets[i % 2].use();\n            this._screenRenderer.renderWithPostProcessor(this._postprocessors[i]);\n            this._postProcessTargets[i % 2].toRenderSource().use();\n        }\n        // Final blit to the screen\n        currentTarget.blitToScreen();\n    }\n}\n\n;// ./Graphics/Context/ExcaliburGraphicsContext2DCanvas.ts\n\n\n\n\nconst ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon = 0.0001;\nclass ExcaliburGraphicsContext2DCanvasDebug {\n    constructor(_ex) {\n        this._ex = _ex;\n        this._debugText = new DebugText();\n    }\n    /**\n     * Draw a debug rectangle to the context\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n    drawRect(x, y, width, height) {\n        this._ex.__ctx.save();\n        this._ex.__ctx.strokeStyle = 'red';\n        this._ex.__ctx.strokeRect(this._ex.snapToPixel ? ~~(x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : x, this._ex.snapToPixel ? ~~(y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : y, this._ex.snapToPixel ? ~~(width + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : width, this._ex.snapToPixel ? ~~(height + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : height);\n        this._ex.__ctx.restore();\n    }\n    drawLine(start, end, lineOptions = { color: Color.Black }) {\n        var _a, _b;\n        this._ex.__ctx.save();\n        this._ex.__ctx.beginPath();\n        this._ex.__ctx.strokeStyle = (_b = (_a = lineOptions.color) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '';\n        this._ex.__ctx.moveTo(this._ex.snapToPixel ? ~~(start.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.x, this._ex.snapToPixel ? ~~(start.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.y);\n        this._ex.__ctx.lineTo(this._ex.snapToPixel ? ~~(end.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.x, this._ex.snapToPixel ? ~~(end.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.y);\n        this._ex.__ctx.lineWidth = 2;\n        this._ex.__ctx.stroke();\n        this._ex.__ctx.closePath();\n        this._ex.__ctx.restore();\n    }\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\n        this._ex.__ctx.save();\n        this._ex.__ctx.beginPath();\n        this._ex.__ctx.fillStyle = pointOptions.color.toString();\n        this._ex.__ctx.arc(this._ex.snapToPixel ? ~~(point.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : point.x, this._ex.snapToPixel ? ~~(point.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : point.y, pointOptions.size, 0, Math.PI * 2);\n        this._ex.__ctx.fill();\n        this._ex.__ctx.closePath();\n        this._ex.__ctx.restore();\n    }\n    drawText(text, pos) {\n        this._debugText.write(this._ex, text, pos);\n    }\n}\nclass ExcaliburGraphicsContext2DCanvas {\n    get width() {\n        return this.__ctx.canvas.width;\n    }\n    get height() {\n        return this.__ctx.canvas.height;\n    }\n    get opacity() {\n        return this._state.current.opacity;\n    }\n    set opacity(value) {\n        this._state.current.opacity = value;\n    }\n    get tint() {\n        return this._state.current.tint;\n    }\n    set tint(color) {\n        this._state.current.tint = color;\n    }\n    get smoothing() {\n        return this.__ctx.imageSmoothingEnabled;\n    }\n    set smoothing(value) {\n        this.__ctx.imageSmoothingEnabled = value;\n    }\n    constructor(options) {\n        /**\n         * Unused in Canvas implementation\n         */\n        this.useDrawSorting = false;\n        /**\n         * Unused in Canvas implementation\n         */\n        this.z = 0;\n        this.backgroundColor = Color.ExcaliburBlue;\n        this._state = new StateStack();\n        this.snapToPixel = false;\n        this.debug = new ExcaliburGraphicsContext2DCanvasDebug(this);\n        const { canvasElement, context, enableTransparency, snapToPixel, antialiasing: smoothing, backgroundColor } = options;\n        this.__ctx =\n            context !== null && context !== void 0 ? context : canvasElement.getContext('2d', {\n                alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : true\n            });\n        if (!this.__ctx) {\n            throw new Error('Cannot build new ExcaliburGraphicsContext2D for some reason!');\n        }\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\n        this.smoothing = smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing;\n    }\n    resetTransform() {\n        this.__ctx.resetTransform();\n    }\n    updateViewport(_resolution) {\n        // pass\n    }\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        if (swidth === 0 || sheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (dwidth === 0 || dheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (image.width === 0 || image.height === 0) {\n            return; // zero dimension source exit early\n        }\n        this.__ctx.globalAlpha = this.opacity;\n        const args = [image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight]\n            .filter((a) => a !== undefined)\n            .map((a) => (typeof a === 'number' && this.snapToPixel ? ~~a : a));\n        this.__ctx.drawImage.apply(this.__ctx, args);\n        GraphicsDiagnostics.DrawCallCount++;\n        GraphicsDiagnostics.DrawnImagesCount = 1;\n    }\n    drawLine(start, end, color, thickness = 1) {\n        this.__ctx.save();\n        this.__ctx.beginPath();\n        this.__ctx.strokeStyle = color.toString();\n        this.__ctx.moveTo(this.snapToPixel ? ~~(start.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.x, this.snapToPixel ? ~~(start.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.y);\n        this.__ctx.lineTo(this.snapToPixel ? ~~(end.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.x, this.snapToPixel ? ~~(end.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.y);\n        this.__ctx.lineWidth = thickness;\n        this.__ctx.stroke();\n        this.__ctx.closePath();\n        this.__ctx.restore();\n    }\n    drawRectangle(pos, width, height, color) {\n        this.__ctx.save();\n        this.__ctx.fillStyle = color.toString();\n        this.__ctx.fillRect(this.snapToPixel ? ~~(pos.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.x, this.snapToPixel ? ~~(pos.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.y, this.snapToPixel ? ~~(width + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : width, this.snapToPixel ? ~~(height + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : height);\n        this.__ctx.restore();\n    }\n    drawCircle(pos, radius, color, stroke, thickness) {\n        this.__ctx.save();\n        this.__ctx.beginPath();\n        if (stroke) {\n            this.__ctx.strokeStyle = stroke.toString();\n        }\n        if (thickness) {\n            this.__ctx.lineWidth = thickness;\n        }\n        this.__ctx.fillStyle = color.toString();\n        this.__ctx.arc(this.snapToPixel ? ~~(pos.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.x, this.snapToPixel ? ~~(pos.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.y, radius, 0, Math.PI * 2);\n        this.__ctx.fill();\n        if (stroke) {\n            this.__ctx.stroke();\n        }\n        this.__ctx.closePath();\n        this.__ctx.restore();\n    }\n    /**\n     * Save the current state of the canvas to the stack (transforms and opacity)\n     */\n    save() {\n        this.__ctx.save();\n        this._state.save();\n    }\n    /**\n     * Restore the state of the canvas from the stack\n     */\n    restore() {\n        this.__ctx.restore();\n        this._state.restore();\n    }\n    /**\n     * Translate the origin of the context by an x and y\n     * @param x\n     * @param y\n     */\n    translate(x, y) {\n        this.__ctx.translate(this.snapToPixel ? ~~(x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : x, this.snapToPixel ? ~~(y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : y);\n    }\n    /**\n     * Rotate the context about the current origin\n     */\n    rotate(angle) {\n        this.__ctx.rotate(angle);\n    }\n    /**\n     * Scale the context by an x and y factor\n     * @param x\n     * @param y\n     */\n    scale(x, y) {\n        this.__ctx.scale(x, y);\n    }\n    getTransform() {\n        throw new Error('Not implemented');\n    }\n    multiply(_m) {\n        this.__ctx.setTransform(this.__ctx.getTransform().multiply(_m.toDOMMatrix()));\n    }\n    addPostProcessor(_postprocessor) {\n        // pass\n    }\n    removePostProcessor(_postprocessor) {\n        // pass\n    }\n    clearPostProcessors() {\n        // pass\n    }\n    updatePostProcessors(elapsed) {\n        // pass\n    }\n    beginDrawLifecycle() {\n        // pass\n    }\n    endDrawLifecycle() {\n        // pass\n    }\n    set material(material) {\n        this._state.current.material = material;\n    }\n    get material() {\n        return this._state.current.material;\n    }\n    createMaterial(options) {\n        // pass\n        return null;\n    }\n    clear() {\n        // Clear frame\n        this.__ctx.clearRect(0, 0, this.width, this.height);\n        this.__ctx.fillStyle = this.backgroundColor.toString();\n        this.__ctx.fillRect(0, 0, this.width, this.height);\n        GraphicsDiagnostics.clear();\n    }\n    /**\n     * Flushes the batched draw calls to the screen\n     */\n    flush() {\n        // pass\n    }\n    dispose() {\n        this.__ctx = undefined;\n    }\n}\n\n;// ./Screen.ts\n\n\n\n\n\n\n\n/**\n * Enum representing the different display modes available to Excalibur.\n */\nvar DisplayMode;\n(function (DisplayMode) {\n    /**\n     * Default, use a specified resolution for the game. Like 800x600 pixels for example.\n     */\n    DisplayMode[\"Fixed\"] = \"Fixed\";\n    /**\n     * Fit the aspect ratio given by the game resolution within the container at all times will fill any gaps with canvas.\n     * The displayed area outside the aspect ratio is not guaranteed to be on the screen, only the {@apilink Screen.contentArea}\n     * is guaranteed to be on screen.\n     */\n    DisplayMode[\"FitContainerAndFill\"] = \"FitContainerAndFill\";\n    /**\n     * Fit the aspect ratio given by the game resolution the screen at all times will fill the screen.\n     * This displayed area outside the aspect ratio is not guaranteed to be on the screen, only the {@apilink Screen.contentArea}\n     * is guaranteed to be on screen.\n     */\n    DisplayMode[\"FitScreenAndFill\"] = \"FitScreenAndFill\";\n    /**\n     * Fit the viewport to the parent element maintaining aspect ratio given by the game resolution, but zooms in to avoid the black bars\n     * (letterbox) that would otherwise be present in {@apilink FitContainer}.\n     *\n     * **warning** This will clip some drawable area from the user because of the zoom,\n     * use {@apilink Screen.contentArea} to know the safe to draw area.\n     */\n    DisplayMode[\"FitContainerAndZoom\"] = \"FitContainerAndZoom\";\n    /**\n     * Fit the viewport to the device screen maintaining aspect ratio given by the game resolution, but zooms in to avoid the black bars\n     * (letterbox) that would otherwise be present in {@apilink FitScreen}.\n     *\n     * **warning** This will clip some drawable area from the user because of the zoom,\n     * use {@apilink Screen.contentArea} to know the safe to draw area.\n     */\n    DisplayMode[\"FitScreenAndZoom\"] = \"FitScreenAndZoom\";\n    /**\n     * Fit to screen using as much space as possible while maintaining aspect ratio and resolution.\n     * This is not the same as {@apilink Screen.enterFullscreen} but behaves in a similar way maintaining aspect ratio.\n     *\n     * You may want to center your game here is an example\n     * ```html\n     * <!-- html -->\n     * <body>\n     * <main>\n     *   <canvas id=\"game\"></canvas>\n     * </main>\n     * </body>\n     * ```\n     *\n     * ```css\n     * // css\n     * main {\n     *   display: flex;\n     *   align-items: center;\n     *   justify-content: center;\n     *   height: 100%;\n     *   width: 100%;\n     * }\n     * ```\n     */\n    DisplayMode[\"FitScreen\"] = \"FitScreen\";\n    /**\n     * Fill the entire screen's css width/height for the game resolution dynamically. This means the resolution of the game will\n     * change dynamically as the window is resized. This is not the same as {@apilink Screen.enterFullscreen}\n     */\n    DisplayMode[\"FillScreen\"] = \"FillScreen\";\n    /**\n     * Fit to parent element width/height using as much space as possible while maintaining aspect ratio and resolution.\n     */\n    DisplayMode[\"FitContainer\"] = \"FitContainer\";\n    /**\n     * Use the parent DOM container's css width/height for the game resolution dynamically\n     */\n    DisplayMode[\"FillContainer\"] = \"FillContainer\";\n})(DisplayMode || (DisplayMode = {}));\n/**\n * Convenience class for quick resolutions\n * Mostly sourced from https://emulation.gametechwiki.com/index.php/Resolution\n */\nclass Resolution {\n    /* istanbul ignore next */\n    static get SVGA() {\n        return { width: 800, height: 600 };\n    }\n    /* istanbul ignore next */\n    static get Standard() {\n        return { width: 1920, height: 1080 };\n    }\n    /* istanbul ignore next */\n    static get Atari2600() {\n        return { width: 160, height: 192 };\n    }\n    /* istanbul ignore next */\n    static get GameBoy() {\n        return { width: 160, height: 144 };\n    }\n    /* istanbul ignore next */\n    static get GameBoyAdvance() {\n        return { width: 240, height: 160 };\n    }\n    /* istanbul ignore next */\n    static get NintendoDS() {\n        return { width: 256, height: 192 };\n    }\n    /* istanbul ignore next */\n    static get NES() {\n        return { width: 256, height: 224 };\n    }\n    /* istanbul ignore next */\n    static get SNES() {\n        return { width: 256, height: 244 };\n    }\n}\nconst ScreenEvents = {\n    ScreenResize: 'resize',\n    PixelRatioChange: 'pixelratio',\n    FullScreenChange: 'fullscreen'\n};\n/**\n * The Screen handles all aspects of interacting with the screen for Excalibur.\n */\nclass Screen {\n    constructor(options) {\n        var _a, _b, _c, _d;\n        /**\n         * Listen to screen events {@apilink ScreenEvents}\n         */\n        this.events = new EventEmitter();\n        this._antialiasing = true;\n        this._canvasImageRendering = 'auto';\n        this._resolutionStack = [];\n        this._viewportStack = [];\n        this._pixelRatioOverride = null;\n        this._isFullscreen = false;\n        this._isDisposed = false;\n        this._logger = Logger.getInstance();\n        this._fullscreenChangeHandler = () => {\n            if (this._isDisposed) {\n                return;\n            }\n            this._isFullscreen = !this._isFullscreen;\n            this._logger.debug('Fullscreen Change', this._isFullscreen);\n            this.events.emit('fullscreen', {\n                fullscreen: this.isFullscreen\n            });\n        };\n        this._pixelRatioChangeHandler = () => {\n            if (this._isDisposed) {\n                return;\n            }\n            this._logger.debug('Pixel Ratio Change', window.devicePixelRatio);\n            this._listenForPixelRatio();\n            this._devicePixelRatio = this._calculateDevicePixelRatio();\n            this.applyResolutionAndViewport();\n            this.events.emit('pixelratio', {\n                pixelRatio: this.pixelRatio\n            });\n        };\n        this._resizeHandler = () => {\n            if (this._isDisposed) {\n                return;\n            }\n            const parent = this.parent;\n            this._logger.debug('View port resized');\n            this._setResolutionAndViewportByDisplayMode(parent);\n            this.applyResolutionAndViewport();\n            // Emit resize event\n            this.events.emit('resize', {\n                resolution: this.resolution,\n                viewport: this.viewport\n            });\n        };\n        // Asking the window.devicePixelRatio is expensive we do it once\n        this._devicePixelRatio = this._calculateDevicePixelRatio();\n        this._contentArea = new BoundingBox();\n        this._unsafeArea = new BoundingBox();\n        this.viewport = options.viewport;\n        this.resolution = (_a = options.resolution) !== null && _a !== void 0 ? _a : { ...this.viewport };\n        this._contentResolution = this.resolution;\n        this._displayMode = (_b = options.displayMode) !== null && _b !== void 0 ? _b : DisplayMode.Fixed;\n        this._canvas = options.canvas;\n        this.graphicsContext = options.context;\n        this._antialiasing = (_c = options.antialiasing) !== null && _c !== void 0 ? _c : this._antialiasing;\n        this._canvasImageRendering = (_d = options.canvasImageRendering) !== null && _d !== void 0 ? _d : this._canvasImageRendering;\n        this._browser = options.browser;\n        this._pixelRatioOverride = options.pixelRatio;\n        this._applyDisplayMode();\n        this._listenForPixelRatio();\n        this._canvas.addEventListener('fullscreenchange', this._fullscreenChangeHandler);\n        this.applyResolutionAndViewport();\n    }\n    _listenForPixelRatio() {\n        if (this._mediaQueryList && !this._mediaQueryList.addEventListener) {\n            // Safari <=13.1 workaround, remove any existing handlers\n            this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\n        }\n        this._mediaQueryList = this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n        // Safari <=13.1 workaround\n        if (this._mediaQueryList.addEventListener) {\n            this._mediaQueryList.addEventListener('change', this._pixelRatioChangeHandler, { once: true });\n        }\n        else {\n            this._mediaQueryList.addListener(this._pixelRatioChangeHandler);\n        }\n    }\n    dispose() {\n        if (!this._isDisposed) {\n            // Clean up handlers\n            this._isDisposed = true;\n            this.events.clear();\n            this._browser.window.off('resize', this._resizeHandler);\n            this._browser.window.clear();\n            if (this._resizeObserver) {\n                this._resizeObserver.disconnect();\n            }\n            this.parent.removeEventListener('resize', this._resizeHandler);\n            // Safari <=13.1 workaround\n            if (this._mediaQueryList.removeEventListener) {\n                this._mediaQueryList.removeEventListener('change', this._pixelRatioChangeHandler);\n            }\n            else {\n                this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\n            }\n            this._canvas.removeEventListener('fullscreenchange', this._fullscreenChangeHandler);\n            this._canvas = null;\n        }\n    }\n    _calculateDevicePixelRatio() {\n        if (window.devicePixelRatio < 1) {\n            return 1;\n        }\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        return devicePixelRatio;\n    }\n    /**\n     * Returns the computed pixel ratio, first using any override, then the device pixel ratio\n     */\n    get pixelRatio() {\n        if (this._pixelRatioOverride) {\n            return this._pixelRatioOverride;\n        }\n        return this._devicePixelRatio;\n    }\n    /**\n     * This calculates the ratio between excalibur pixels and the HTML pixels.\n     *\n     * This is useful for scaling HTML UI so that it matches your game.\n     */\n    get worldToPagePixelRatio() {\n        if (this._canvas) {\n            const pageOrigin = this.worldToPageCoordinates(Vector.Zero);\n            const pageDistance = this.worldToPageCoordinates(vec(1, 0)).sub(pageOrigin);\n            const pixelConversion = pageDistance.x;\n            return pixelConversion;\n        }\n        else {\n            return 1;\n        }\n    }\n    /**\n     * Get or set the pixel ratio override\n     *\n     * You will need to call applyResolutionAndViewport() affect change on the screen\n     */\n    get pixelRatioOverride() {\n        return this._pixelRatioOverride;\n    }\n    set pixelRatioOverride(value) {\n        this._pixelRatioOverride = value;\n    }\n    get isHiDpi() {\n        return this.pixelRatio !== 1;\n    }\n    get displayMode() {\n        return this._displayMode;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get parent() {\n        switch (this.displayMode) {\n            case DisplayMode.FillContainer:\n            case DisplayMode.FitContainer:\n            case DisplayMode.FitContainerAndFill:\n            case DisplayMode.FitContainerAndZoom:\n                return this.canvas.parentElement || document.body;\n            default:\n                return window;\n        }\n    }\n    get resolution() {\n        return this._resolution;\n    }\n    set resolution(resolution) {\n        this._resolution = resolution;\n    }\n    /**\n     * Returns screen dimensions in pixels or percentage\n     */\n    get viewport() {\n        if (this._viewport) {\n            return this._viewport;\n        }\n        return this._resolution;\n    }\n    set viewport(viewport) {\n        this._viewport = viewport;\n    }\n    get aspectRatio() {\n        return this._resolution.width / this._resolution.height;\n    }\n    get scaledWidth() {\n        return this._resolution.width * this.pixelRatio;\n    }\n    get scaledHeight() {\n        return this._resolution.height * this.pixelRatio;\n    }\n    setCurrentCamera(camera) {\n        this._camera = camera;\n    }\n    pushResolutionAndViewport() {\n        this._resolutionStack.push(this.resolution);\n        this._viewportStack.push(this.viewport);\n        this.resolution = { ...this.resolution };\n        this.viewport = { ...this.viewport };\n    }\n    peekViewport() {\n        return this._viewportStack[this._viewportStack.length - 1];\n    }\n    peekResolution() {\n        return this._resolutionStack[this._resolutionStack.length - 1];\n    }\n    popResolutionAndViewport() {\n        if (this._resolutionStack.length && this._viewportStack.length) {\n            this.resolution = this._resolutionStack.pop();\n            this.viewport = this._viewportStack.pop();\n        }\n    }\n    applyResolutionAndViewport() {\n        if (this.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            const scaledResolutionSupported = this.graphicsContext.checkIfResolutionSupported({\n                width: this.scaledWidth,\n                height: this.scaledHeight\n            });\n            if (!scaledResolutionSupported) {\n                this._logger.warnOnce(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio})` +\n                    ' are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly.' +\n                    ' Try reducing the resolution or disabling Hi DPI scaling to avoid this' +\n                    ' (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).');\n                // Attempt to recover if the user hasn't configured a specific ratio for up scaling\n                if (!this.pixelRatioOverride) {\n                    let currentPixelRatio = Math.max(1, this.pixelRatio - 0.5);\n                    let newResolutionSupported = false;\n                    while (currentPixelRatio > 1 && !newResolutionSupported) {\n                        currentPixelRatio = Math.max(1, currentPixelRatio - 0.5);\n                        const width = this._resolution.width * currentPixelRatio;\n                        const height = this._resolution.height * currentPixelRatio;\n                        newResolutionSupported = this.graphicsContext.checkIfResolutionSupported({ width, height });\n                    }\n                    this.pixelRatioOverride = currentPixelRatio;\n                    this._logger.warnOnce('Scaled resolution too big attempted recovery!' +\n                        ` Pixel ratio was automatically reduced to (${this.pixelRatio}) to avoid 4k texture limit.` +\n                        ' Setting `ex.Engine({pixelRatio: ...}) will override any automatic recalculation, do so at your own risk.` ' +\n                        ' (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).');\n                }\n            }\n        }\n        this._canvas.width = this.scaledWidth;\n        this._canvas.height = this.scaledHeight;\n        if (this._canvasImageRendering === 'auto') {\n            this._canvas.style.imageRendering = 'auto';\n        }\n        else {\n            this._canvas.style.imageRendering = 'pixelated';\n            // Fall back to 'crisp-edges' if 'pixelated' is not supported\n            // Currently for firefox https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering\n            if (this._canvas.style.imageRendering === '') {\n                this._canvas.style.imageRendering = 'crisp-edges';\n            }\n        }\n        const widthUnit = this.viewport.widthUnit === 'percent' ? '%' : 'px';\n        const heightUnit = this.viewport.heightUnit === 'percent' ? '%' : 'px';\n        this._canvas.style.width = this.viewport.width + widthUnit;\n        this._canvas.style.height = this.viewport.height + heightUnit;\n        // After messing with the canvas width/height the graphics context is invalidated and needs to have some properties reset\n        this.graphicsContext.updateViewport(this.resolution);\n        this.graphicsContext.resetTransform();\n        this.graphicsContext.smoothing = this._antialiasing;\n        if (this.graphicsContext instanceof ExcaliburGraphicsContext2DCanvas) {\n            this.graphicsContext.scale(this.pixelRatio, this.pixelRatio);\n        }\n        // Add the excalibur world pixel to page pixel\n        document.documentElement.style.setProperty('--ex-pixel-ratio', this.worldToPagePixelRatio.toString());\n    }\n    /**\n     * Get or set screen antialiasing,\n     *\n     * If true smoothing is applied\n     */\n    get antialiasing() {\n        return this._antialiasing;\n    }\n    /**\n     * Get or set screen antialiasing\n     */\n    set antialiasing(isSmooth) {\n        this._antialiasing = isSmooth;\n        this.graphicsContext.smoothing = this._antialiasing;\n    }\n    /**\n     * Returns true if excalibur is fullscreen using the browser fullscreen api\n     * @deprecated use isFullscreen()\n     */\n    get isFullScreen() {\n        return this._isFullscreen;\n    }\n    /**\n     * Returns true if excalibur is fullscreen using the browser fullscreen api\n     */\n    get isFullscreen() {\n        return this._isFullscreen;\n    }\n    /**\n     * Requests to go fullscreen using the browser fullscreen api, requires user interaction to be successful.\n     * For example, wire this to a user click handler.\n     *\n     * Optionally specify a target element id to go fullscreen, by default the game canvas is used\n     * @param elementId\n     * @deprecated use enterFullscreen(...)\n     */\n    goFullScreen(elementId) {\n        return this.enterFullscreen(elementId);\n    }\n    /**\n     * Requests to enter fullscreen using the browser fullscreen api, requires user interaction to be successful.\n     * For example, wire this to a user click handler.\n     *\n     * Optionally specify a target element id to go fullscreen, by default the game canvas is used\n     * @param elementId\n     */\n    enterFullscreen(elementId) {\n        var _a, _b, _c, _d, _e, _f;\n        if (elementId) {\n            const maybeElement = document.getElementById(elementId);\n            // workaround for safari partial support\n            if ((maybeElement === null || maybeElement === void 0 ? void 0 : maybeElement.requestFullscreen) || (maybeElement === null || maybeElement === void 0 ? void 0 : maybeElement.webkitRequestFullscreen)) {\n                if (!maybeElement.getAttribute('ex-fullscreen-listener')) {\n                    maybeElement.setAttribute('ex-fullscreen-listener', 'true');\n                    maybeElement.addEventListener('fullscreenchange', this._fullscreenChangeHandler);\n                }\n                if (maybeElement.requestFullscreen) {\n                    return (_a = maybeElement.requestFullscreen()) !== null && _a !== void 0 ? _a : Promise.resolve();\n                }\n                else if (maybeElement.webkitRequestFullscreen) {\n                    return (_b = maybeElement.webkitRequestFullscreen()) !== null && _b !== void 0 ? _b : Promise.resolve();\n                }\n            }\n        }\n        if ((_c = this._canvas) === null || _c === void 0 ? void 0 : _c.requestFullscreen) {\n            return (_e = (_d = this._canvas) === null || _d === void 0 ? void 0 : _d.requestFullscreen()) !== null && _e !== void 0 ? _e : Promise.resolve();\n        }\n        else if (this._canvas.webkitRequestFullscreen) {\n            return (_f = this._canvas.webkitRequestFullscreen()) !== null && _f !== void 0 ? _f : Promise.resolve();\n        }\n        this._logger.warnOnce('Could not go fullscreen, is this an iPhone? Currently Apple does not support fullscreen on iPhones');\n        return Promise.resolve();\n    }\n    /**\n     * Requests to exit fullscreen using the browser fullscreen api\n     * @deprecated use exitFullscreen()\n     */\n    exitFullScreen() {\n        return this.exitFullscreen();\n    }\n    exitFullscreen() {\n        return document.exitFullscreen();\n    }\n    _viewportToPixels(viewport) {\n        return {\n            width: viewport.widthUnit === 'percent' ? this.canvas.offsetWidth : viewport.width,\n            height: viewport.heightUnit === 'percent' ? this.canvas.offsetHeight : viewport.height\n        };\n    }\n    /**\n     * Takes a coordinate in normal html page space, for example from a pointer move event, and translates it to\n     * Excalibur screen space.\n     *\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\n     * bottom right corner (resolutionX, resolutionY). When using *AndFill suffixed display modes screen space\n     * (0, 0) is the top left of the safe content area bounding box not the viewport.\n     * @param point\n     */\n    pageToScreenCoordinates(point) {\n        let newX = point.x;\n        let newY = point.y;\n        if (!this._isFullscreen) {\n            newX -= getPosition(this._canvas).x;\n            newY -= getPosition(this._canvas).y;\n        }\n        const viewport = this._viewportToPixels(this.viewport);\n        // if fullscreen api on it centers with black bars\n        // we need to adjust the screen to world coordinates in this case\n        if (this._isFullscreen) {\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\n                const screenHeight = window.innerWidth / this.aspectRatio;\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\n                newY = ((newY - screenMarginY) / screenHeight) * viewport.height;\n                newX = (newX / window.innerWidth) * viewport.width;\n            }\n            else {\n                const screenWidth = window.innerHeight * this.aspectRatio;\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\n                newX = ((newX - screenMarginX) / screenWidth) * viewport.width;\n                newY = (newY / window.innerHeight) * viewport.height;\n            }\n        }\n        newX = (newX / viewport.width) * this.resolution.width;\n        newY = (newY / viewport.height) * this.resolution.height;\n        // offset by content area\n        newX = newX - this.contentArea.left;\n        newY = newY - this.contentArea.top;\n        return new Vector(newX, newY);\n    }\n    /**\n     * Takes a coordinate in Excalibur screen space, and translates it to normal html page space. For example,\n     * this is where html elements might live if you want to position them relative to Excalibur.\n     *\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\n     * bottom right corner (resolutionX, resolutionY)\n     * @param point\n     */\n    screenToPageCoordinates(point) {\n        let newX = point.x;\n        let newY = point.y;\n        // no need to offset by content area, drawing is already offset by this\n        const viewport = this._viewportToPixels(this.viewport);\n        newX = (newX / this.resolution.width) * viewport.width;\n        newY = (newY / this.resolution.height) * viewport.height;\n        if (this._isFullscreen) {\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\n                const screenHeight = window.innerWidth / this.aspectRatio;\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\n                newY = (newY / viewport.height) * screenHeight + screenMarginY;\n                newX = (newX / viewport.width) * window.innerWidth;\n            }\n            else {\n                const screenWidth = window.innerHeight * this.aspectRatio;\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\n                newX = (newX / viewport.width) * screenWidth + screenMarginX;\n                newY = (newY / viewport.height) * window.innerHeight;\n            }\n        }\n        if (!this._isFullscreen) {\n            newX += getPosition(this._canvas).x;\n            newY += getPosition(this._canvas).y;\n        }\n        return new Vector(newX, newY);\n    }\n    /**\n     * Takes a coordinate in Excalibur screen space, and translates it to Excalibur world space.\n     *\n     * World space is where {@apilink Entity | `entities`} in Excalibur live by default {@apilink CoordPlane.World}\n     * and extends infinitely out relative from the {@apilink Camera}.\n     * @param point  Screen coordinate to convert\n     */\n    screenToWorldCoordinates(point) {\n        // offset by content area\n        point = point.add(vec(this.contentArea.left, this.contentArea.top));\n        // the only difference between screen & world is the camera transform\n        if (this._camera) {\n            return this._camera.inverse.multiply(point);\n        }\n        return point.sub(vec(this.resolution.width / 2, this.resolution.height / 2));\n    }\n    /**\n     * Takes a coordinate in Excalibur world space, and translates it to Excalibur screen space.\n     *\n     * Screen space is where {@apilink ScreenElement | `screen elements`} and {@apilink Entity | `entities`} with {@apilink CoordPlane.Screen} live.\n     * @param point  World coordinate to convert\n     */\n    worldToScreenCoordinates(point) {\n        if (this._camera) {\n            return this._camera.transform.multiply(point);\n        }\n        return point.add(vec(this.resolution.width / 2, this.resolution.height / 2));\n    }\n    pageToWorldCoordinates(point) {\n        const screen = this.pageToScreenCoordinates(point);\n        return this.screenToWorldCoordinates(screen);\n    }\n    worldToPageCoordinates(point) {\n        const screen = this.worldToScreenCoordinates(point);\n        return this.screenToPageCoordinates(screen);\n    }\n    /**\n     * Returns a BoundingBox of the top left corner of the screen\n     * and the bottom right corner of the screen.\n     *\n     * World bounds are in world coordinates, useful for culling objects offscreen that are in world space\n     */\n    getWorldBounds() {\n        const bounds = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Half)\n            .scale(vec(1 / this._camera.zoom, 1 / this._camera.zoom))\n            .rotate(this._camera.rotation)\n            .translate(this._camera.drawPos);\n        return bounds;\n    }\n    /**\n     * Returns a BoundingBox of the top left corner of the screen and the bottom right corner of the screen.\n     *\n     * Screen bounds are in screen coordinates, useful for culling objects offscreen that are in screen space\n     */\n    getScreenBounds() {\n        const bounds = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero, Vector.Zero);\n        return bounds;\n    }\n    /**\n     * The width of the game canvas in pixels (physical width component of the\n     * resolution of the canvas element)\n     */\n    get canvasWidth() {\n        return this.canvas.width;\n    }\n    /**\n     * Returns half width of the game canvas in pixels (half physical width component)\n     */\n    get halfCanvasWidth() {\n        return this.canvas.width / 2;\n    }\n    /**\n     * The height of the game canvas in pixels, (physical height component of\n     * the resolution of the canvas element)\n     */\n    get canvasHeight() {\n        return this.canvas.height;\n    }\n    /**\n     * Returns half height of the game canvas in pixels (half physical height component)\n     */\n    get halfCanvasHeight() {\n        return this.canvas.height / 2;\n    }\n    /**\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawWidth() {\n        if (this._camera) {\n            return this.resolution.width / this._camera.zoom;\n        }\n        return this.resolution.width;\n    }\n    /**\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get width() {\n        if (this._camera) {\n            return this.resolution.width / this._camera.zoom;\n        }\n        return this.resolution.width;\n    }\n    /**\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawWidth() {\n        return this.drawWidth / 2;\n    }\n    /**\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawHeight() {\n        if (this._camera) {\n            return this.resolution.height / this._camera.zoom;\n        }\n        return this.resolution.height;\n    }\n    get height() {\n        if (this._camera) {\n            return this.resolution.height / this._camera.zoom;\n        }\n        return this.resolution.height;\n    }\n    /**\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawHeight() {\n        return this.drawHeight / 2;\n    }\n    /**\n     * Returns screen center coordinates including zoom and device pixel ratio.\n     */\n    get center() {\n        return vec(this.halfDrawWidth, this.halfDrawHeight);\n    }\n    /**\n     * Returns the content area in screen space where it is safe to place content\n     */\n    get contentArea() {\n        return this._contentArea;\n    }\n    /**\n     * Returns the unsafe area in screen space, this is the full screen and some space may not be onscreen.\n     */\n    get unsafeArea() {\n        return this._unsafeArea;\n    }\n    _computeFit() {\n        document.body.style.margin = '0px';\n        document.body.style.overflow = 'hidden';\n        const aspect = this.aspectRatio;\n        let adjustedWidth = 0;\n        let adjustedHeight = 0;\n        if (window.innerWidth / aspect < window.innerHeight) {\n            adjustedWidth = window.innerWidth;\n            adjustedHeight = window.innerWidth / aspect;\n        }\n        else {\n            adjustedWidth = window.innerHeight * aspect;\n            adjustedHeight = window.innerHeight;\n        }\n        this.viewport = {\n            width: adjustedWidth,\n            height: adjustedHeight\n        };\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        this._unsafeArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitScreenAndFill() {\n        document.body.style.margin = '0px';\n        document.body.style.overflow = 'hidden';\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        this._computeFitAndFill(vw, vh);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitContainerAndFill() {\n        this.canvas.style.width = '100%';\n        this.canvas.style.height = '100%';\n        this._computeFitAndFill(this.canvas.offsetWidth, this.canvas.offsetHeight, {\n            width: 100,\n            widthUnit: 'percent',\n            height: 100,\n            heightUnit: 'percent'\n        });\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitAndFill(vw, vh, viewport) {\n        this.viewport = viewport !== null && viewport !== void 0 ? viewport : {\n            width: vw,\n            height: vh\n        };\n        // if the current screen aspectRatio is less than the original aspectRatio\n        if (vw / vh <= this._contentResolution.width / this._contentResolution.height) {\n            // compute new resolution to match the original aspect ratio\n            this.resolution = {\n                width: (vw * this._contentResolution.width) / vw,\n                height: (((vw * this._contentResolution.width) / vw) * vh) / vw\n            };\n            const clip = (this.resolution.height - this._contentResolution.height) / 2;\n            this._contentArea = new BoundingBox({\n                top: clip,\n                left: 0,\n                right: this._contentResolution.width,\n                bottom: this.resolution.height - clip\n            });\n            this._unsafeArea = new BoundingBox({\n                top: -clip,\n                left: 0,\n                right: this._contentResolution.width,\n                bottom: this.resolution.height + clip\n            });\n        }\n        else {\n            this.resolution = {\n                width: (((vh * this._contentResolution.height) / vh) * vw) / vh,\n                height: (vh * this._contentResolution.height) / vh\n            };\n            const clip = (this.resolution.width - this._contentResolution.width) / 2;\n            this._contentArea = new BoundingBox({\n                top: 0,\n                left: clip,\n                right: this.resolution.width - clip,\n                bottom: this._contentResolution.height\n            });\n            this._unsafeArea = new BoundingBox({\n                top: 0,\n                left: -clip,\n                right: this.resolution.width + clip,\n                bottom: this._contentResolution.height\n            });\n        }\n    }\n    _computeFitScreenAndZoom() {\n        document.body.style.margin = '0px';\n        document.body.style.overflow = 'hidden';\n        this.canvas.style.position = 'absolute';\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        this._computeFitAndZoom(vw, vh);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitContainerAndZoom() {\n        this.canvas.style.width = '100%';\n        this.canvas.style.height = '100%';\n        this.canvas.style.position = 'relative';\n        const parent = this.canvas.parentElement;\n        parent.style.overflow = 'hidden';\n        const { offsetWidth: vw, offsetHeight: vh } = this.canvas;\n        this._computeFitAndZoom(vw, vh);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitAndZoom(vw, vh) {\n        const aspect = this.aspectRatio;\n        let adjustedWidth = 0;\n        let adjustedHeight = 0;\n        if (vw / aspect < vh) {\n            adjustedWidth = vw;\n            adjustedHeight = vw / aspect;\n        }\n        else {\n            adjustedWidth = vh * aspect;\n            adjustedHeight = vh;\n        }\n        const scaleX = vw / adjustedWidth;\n        const scaleY = vh / adjustedHeight;\n        const maxScaleFactor = Math.max(scaleX, scaleY);\n        const zoomedWidth = adjustedWidth * maxScaleFactor;\n        const zoomedHeight = adjustedHeight * maxScaleFactor;\n        // Center zoomed dimension if bigger than the screen\n        if (zoomedWidth > vw) {\n            this.canvas.style.left = -(zoomedWidth - vw) / 2 + 'px';\n        }\n        else {\n            this.canvas.style.left = '';\n        }\n        if (zoomedHeight > vh) {\n            this.canvas.style.top = -(zoomedHeight - vh) / 2 + 'px';\n        }\n        else {\n            this.canvas.style.top = '';\n        }\n        this.viewport = {\n            width: zoomedWidth,\n            height: zoomedHeight\n        };\n        const bounds = BoundingBox.fromDimension(this.viewport.width, this.viewport.height, Vector.Zero);\n        // return safe area\n        if (this.viewport.width > vw) {\n            const clip = ((this.viewport.width - vw) / this.viewport.width) * this.resolution.width;\n            bounds.top = 0;\n            bounds.left = clip / 2;\n            bounds.right = this.resolution.width - clip / 2;\n            bounds.bottom = this.resolution.height;\n        }\n        if (this.viewport.height > vh) {\n            const clip = ((this.viewport.height - vh) / this.viewport.height) * this.resolution.height;\n            bounds.top = clip / 2;\n            bounds.left = 0;\n            bounds.bottom = this.resolution.height - clip / 2;\n            bounds.right = this.resolution.width;\n        }\n        this._contentArea = bounds;\n    }\n    _computeFitContainer() {\n        const aspect = this.aspectRatio;\n        let adjustedWidth = 0;\n        let adjustedHeight = 0;\n        let widthUnit = 'pixel';\n        let heightUnit = 'pixel';\n        const parent = this.canvas.parentElement;\n        if (parent.clientWidth / aspect < parent.clientHeight) {\n            this.canvas.style.width = '100%';\n            adjustedWidth = 100;\n            widthUnit = 'percent';\n            adjustedHeight = this.canvas.offsetWidth / aspect;\n        }\n        else {\n            this.canvas.style.height = '100%';\n            adjustedHeight = 100;\n            heightUnit = 'percent';\n            adjustedWidth = this.canvas.offsetHeight * aspect;\n        }\n        this.viewport = {\n            width: adjustedWidth,\n            widthUnit,\n            height: adjustedHeight,\n            heightUnit\n        };\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _applyDisplayMode() {\n        this._setResolutionAndViewportByDisplayMode(this.parent);\n        // watch resizing\n        if (this.parent instanceof Window) {\n            this._browser.window.on('resize', this._resizeHandler);\n        }\n        else {\n            this._resizeObserver = new ResizeObserver(() => {\n                this._resizeHandler();\n            });\n            this._resizeObserver.observe(this.parent);\n        }\n        this.parent.addEventListener('resize', this._resizeHandler);\n    }\n    /**\n     * Sets the resolution and viewport based on the selected display mode.\n     */\n    _setResolutionAndViewportByDisplayMode(parent) {\n        if (this.displayMode === DisplayMode.FillContainer) {\n            this.canvas.style.width = '100%';\n            this.canvas.style.height = '100%';\n            this.viewport = {\n                width: 100,\n                widthUnit: 'percent',\n                height: 100,\n                heightUnit: 'percent'\n            };\n            this.resolution = {\n                width: this.canvas.offsetWidth,\n                height: this.canvas.offsetHeight\n            };\n        }\n        if (this.displayMode === DisplayMode.FillScreen) {\n            document.body.style.margin = '0px';\n            document.body.style.overflow = 'hidden';\n            this.resolution = {\n                width: parent.innerWidth,\n                height: parent.innerHeight\n            };\n            this.viewport = this.resolution;\n        }\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        if (this.displayMode === DisplayMode.FitScreen) {\n            this._computeFit();\n        }\n        if (this.displayMode === DisplayMode.FitContainer) {\n            this._computeFitContainer();\n        }\n        if (this.displayMode === DisplayMode.FitScreenAndFill) {\n            this._computeFitScreenAndFill();\n        }\n        if (this.displayMode === DisplayMode.FitContainerAndFill) {\n            this._computeFitContainerAndFill();\n        }\n        if (this.displayMode === DisplayMode.FitScreenAndZoom) {\n            this._computeFitScreenAndZoom();\n        }\n        if (this.displayMode === DisplayMode.FitContainerAndZoom) {\n            this._computeFitContainerAndZoom();\n        }\n    }\n}\n\n;// ./Resources/Sound/AudioContext.ts\n/**\n * Internal class used to build instances of AudioContext\n */\n/* istanbul ignore next */\nclass AudioContextFactory {\n    static create() {\n        if (!this._INSTANCE) {\n            if (window.AudioContext || window.webkitAudioContext) {\n                this._INSTANCE = new AudioContext();\n            }\n        }\n        return this._INSTANCE;\n    }\n}\n\n;// ./Util/WebAudio.ts\n\n\n/**\n * Patch for detecting legacy web audio in browsers\n * @internal\n * @param source\n */\nfunction isLegacyWebAudioSource(source) {\n    return !!source.playbackState;\n}\nclass WebAudio {\n    /**\n     * Play an empty sound to unlock Safari WebAudio context. Call this function\n     * right after a user interaction event.\n     * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     */\n    static unlock() {\n        const promise = new Promise((resolve, reject) => {\n            if (WebAudio._UNLOCKED || !AudioContextFactory.create()) {\n                return resolve(true);\n            }\n            const unlockTimeoutTimer = setTimeout(() => {\n                Logger.getInstance().warn('Excalibur was unable to unlock the audio context, audio probably will not play in this browser.');\n                resolve(false);\n            }, 200);\n            const audioContext = AudioContextFactory.create();\n            audioContext.resume().then(() => {\n                // create empty buffer and play it\n                const buffer = audioContext.createBuffer(1, 1, 22050);\n                const source = audioContext.createBufferSource();\n                let ended = false;\n                source.buffer = buffer;\n                source.connect(audioContext.destination);\n                source.onended = () => (ended = true);\n                source.start(0);\n                // by checking the play state after some time, we know if we're really unlocked\n                setTimeout(() => {\n                    if (isLegacyWebAudioSource(source)) {\n                        if (source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE) {\n                            WebAudio._UNLOCKED = true;\n                        }\n                    }\n                    else {\n                        if (audioContext.currentTime > 0 || ended) {\n                            WebAudio._UNLOCKED = true;\n                        }\n                    }\n                }, 0);\n                clearTimeout(unlockTimeoutTimer);\n                resolve(true);\n            }, () => {\n                reject();\n            });\n        });\n        return promise;\n    }\n    static isUnlocked() {\n        return this._UNLOCKED;\n    }\n}\nWebAudio._UNLOCKED = false;\n\n;// ./Graphics/Canvas.ts\n\n/**\n * A canvas {@apilink Graphic} to provide an adapter between the 2D Canvas API and the {@apilink ExcaliburGraphicsContext}.\n *\n * The {@apilink Canvas} works by re-rastering a draw handler to a HTMLCanvasElement for every draw which is then passed\n * to the {@apilink ExcaliburGraphicsContext} implementation as a rendered image.\n *\n * **Low performance API**\n */\nclass Canvas extends Raster {\n    /**\n     * Return the 2D graphics context of this canvas\n     */\n    get ctx() {\n        return this._ctx;\n    }\n    constructor(_options = {}) {\n        super(_options);\n        this._options = _options;\n    }\n    clone() {\n        return new Canvas({\n            ...this._options,\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        var _a, _b;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.draw) {\n            (_b = this._options) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n        }\n        if (!this._options.cache) {\n            this.flagDirty();\n        }\n    }\n}\n\n;// ./Interfaces/AudioImplementation.ts\nclass ExResponse {\n}\nExResponse.type = {\n    any: '',\n    blob: 'blob',\n    json: 'json',\n    text: 'text',\n    document: 'document',\n    arraybuffer: 'arraybuffer'\n};\n\n;// ./Util/StateMachine.ts\nclass StateMachine {\n    constructor() {\n        this.states = new Map();\n    }\n    get currentState() {\n        return this._currentState;\n    }\n    set currentState(state) {\n        this._currentState = state;\n    }\n    static create(machineDescription, data) {\n        const machine = new StateMachine();\n        machine.data = data;\n        for (const stateName in machineDescription.states) {\n            machine.states.set(stateName, {\n                name: stateName,\n                ...machineDescription.states[stateName]\n            });\n        }\n        // validate transitions are states\n        for (const state of machine.states.values()) {\n            for (const transitionState of state.transitions) {\n                if (transitionState === '*') {\n                    continue;\n                }\n                if (!machine.states.has(transitionState)) {\n                    throw Error(`Invalid state machine, state [${state.name}] has a transition to another state that doesn't exist [${transitionState}]`);\n                }\n            }\n        }\n        machine.currentState = machine.startState = machine.states.get(machineDescription.start);\n        return machine;\n    }\n    in(state) {\n        return this.currentState.name === state;\n    }\n    go(stateName, eventData) {\n        var _a, _b;\n        if (this.currentState.transitions.includes(stateName) || this.currentState.transitions.includes('*')) {\n            const potentialNewState = this.states.get(stateName);\n            if (this.currentState.onExit) {\n                const canExit = (_a = this.currentState) === null || _a === void 0 ? void 0 : _a.onExit({ to: potentialNewState.name, data: this.data });\n                if (canExit === false) {\n                    return false;\n                }\n            }\n            if (potentialNewState === null || potentialNewState === void 0 ? void 0 : potentialNewState.onEnter) {\n                const canEnter = potentialNewState === null || potentialNewState === void 0 ? void 0 : potentialNewState.onEnter({ from: this.currentState.name, eventData, data: this.data });\n                if (canEnter === false) {\n                    return false;\n                }\n            }\n            this.currentState = potentialNewState;\n            if ((_b = this.currentState) === null || _b === void 0 ? void 0 : _b.onState) {\n                this.currentState.onState();\n            }\n            return true;\n        }\n        return false;\n    }\n    update(elapsed) {\n        if (this.currentState.onUpdate) {\n            this.currentState.onUpdate(this.data, elapsed);\n        }\n    }\n    save(saveKey) {\n        localStorage.setItem(saveKey, JSON.stringify({\n            currentState: this.currentState.name,\n            data: this.data\n        }));\n    }\n    restore(saveKey) {\n        const state = JSON.parse(localStorage.getItem(saveKey));\n        this.currentState = this.states.get(state.currentState);\n        this.data = state.data;\n    }\n}\n\n;// ./Resources/Sound/WebAudioInstance.ts\n\n\n\n\n/**\n * Internal class representing a Web Audio AudioBufferSourceNode instance\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n */\nclass WebAudioInstance {\n    _createNewBufferSource() {\n        this._instance = this._audioContext.createBufferSource();\n        this._instance.buffer = this._src;\n        this._instance.loop = this.loop;\n        this._instance.playbackRate.value = this._playbackRate;\n        this._instance.connect(this._volumeNode);\n        this._volumeNode.connect(this._audioContext.destination);\n    }\n    _handleEnd() {\n        if (!this.loop) {\n            this._instance.onended = () => {\n                this._playingFuture.resolve(true);\n            };\n        }\n    }\n    set loop(value) {\n        this._loop = value;\n        if (this._instance) {\n            this._instance.loop = value;\n            if (!this.loop) {\n                this._instance.onended = () => {\n                    this._playingFuture.resolve(true);\n                };\n            }\n        }\n    }\n    get loop() {\n        return this._loop;\n    }\n    set volume(value) {\n        value = clamp(value, 0, 1.0);\n        this._volume = value;\n        if (this._stateMachine.in('PLAYING') && this._volumeNode.gain.setTargetAtTime) {\n            // https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/setTargetAtTime\n            // After each .1 seconds timestep, the target value will ~63.2% closer to the target value.\n            // This exponential ramp provides a more pleasant transition in gain\n            this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0.1);\n        }\n        else {\n            this._volumeNode.gain.value = value;\n        }\n    }\n    get volume() {\n        return this._volume;\n    }\n    /**\n     * Returns the set duration to play, otherwise returns the total duration if unset\n     */\n    get duration() {\n        var _a;\n        return (_a = this._duration) !== null && _a !== void 0 ? _a : this.getTotalPlaybackDuration();\n    }\n    /**\n     * Set the duration that this audio should play.\n     *\n     * Note: if you seek to a specific point the duration will start from that point, for example\n     *\n     * If you have a 10 second clip, seek to 5 seconds, then set the duration to 2, it will play the clip from 5-7 seconds.\n     */\n    set duration(duration) {\n        this._duration = duration;\n    }\n    constructor(_src) {\n        this._src = _src;\n        this._audioContext = AudioContextFactory.create();\n        this._volumeNode = this._audioContext.createGain();\n        this._playingFuture = new Future();\n        this._stateMachine = StateMachine.create({\n            start: 'STOPPED',\n            states: {\n                PLAYING: {\n                    onEnter: ({ data }) => {\n                        // Buffer nodes are single use\n                        this._createNewBufferSource();\n                        this._handleEnd();\n                        if (this.loop) {\n                            // when looping don't set a duration\n                            this._instance.start(0, data.pausedAt * this._playbackRate);\n                        }\n                        else {\n                            this._instance.start(0, data.pausedAt * this._playbackRate, this.duration);\n                        }\n                        data.startedAt = this._audioContext.currentTime - data.pausedAt;\n                        data.pausedAt = 0;\n                    },\n                    onState: () => this._playStarted(),\n                    onExit: ({ to }) => {\n                        // If you've exited early only resolve if explicitly STOPPED\n                        if (to === 'STOPPED') {\n                            this._playingFuture.resolve(true);\n                        }\n                        // Whenever you're not playing... you stop!\n                        this._instance.onended = null; // disconnect the wired on-end handler\n                        this._instance.disconnect();\n                        this._instance.stop(0);\n                        this._instance = null;\n                    },\n                    transitions: ['STOPPED', 'PAUSED', 'SEEK']\n                },\n                SEEK: {\n                    onEnter: ({ eventData: position, data }) => {\n                        data.pausedAt = (position !== null && position !== void 0 ? position : 0) / this._playbackRate;\n                        data.startedAt = 0;\n                    },\n                    transitions: ['*']\n                },\n                STOPPED: {\n                    onEnter: ({ data }) => {\n                        data.pausedAt = 0;\n                        data.startedAt = 0;\n                        this._playingFuture.resolve(true);\n                    },\n                    transitions: ['PLAYING', 'PAUSED', 'SEEK']\n                },\n                PAUSED: {\n                    onEnter: ({ data }) => {\n                        // Playback rate will be a scale factor of how fast/slow the audio is being played\n                        // default is 1.0\n                        // we need to invert it to get the time scale\n                        data.pausedAt = this._audioContext.currentTime - data.startedAt;\n                    },\n                    transitions: ['PLAYING', 'STOPPED', 'SEEK']\n                }\n            }\n        }, {\n            startedAt: 0,\n            pausedAt: 0\n        });\n        this._volume = 1;\n        this._loop = false;\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        this._playStarted = () => { };\n        this._playbackRate = 1.0;\n        this._createNewBufferSource();\n    }\n    isPlaying() {\n        return this._stateMachine.in('PLAYING');\n    }\n    isPaused() {\n        return this._stateMachine.in('PAUSED') || this._stateMachine.in('SEEK');\n    }\n    isStopped() {\n        return this._stateMachine.in('STOPPED');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    play(playStarted = () => { }) {\n        this._playStarted = playStarted;\n        this._stateMachine.go('PLAYING');\n        return this._playingFuture.promise;\n    }\n    pause() {\n        this._stateMachine.go('PAUSED');\n    }\n    stop() {\n        this._stateMachine.go('STOPPED');\n    }\n    seek(position) {\n        this._stateMachine.go('PAUSED');\n        this._stateMachine.go('SEEK', position);\n    }\n    getTotalPlaybackDuration() {\n        return this._src.duration;\n    }\n    getPlaybackPosition() {\n        const { pausedAt, startedAt } = this._stateMachine.data;\n        if (pausedAt) {\n            return pausedAt * this._playbackRate;\n        }\n        if (startedAt) {\n            return (this._audioContext.currentTime - startedAt) * this._playbackRate;\n        }\n        return 0;\n    }\n    set playbackRate(playbackRate) {\n        this._instance.playbackRate.value = this._playbackRate = playbackRate;\n    }\n    get playbackRate() {\n        return this._instance.playbackRate.value;\n    }\n}\n\n;// ./Events/MediaEvents.ts\n\nclass MediaEvent extends GameEvent {\n    /**\n     * Media event cannot bubble\n     */\n    set bubbles(_value) {\n        // stubbed\n    }\n    /**\n     * Media event cannot bubble\n     */\n    get bubbles() {\n        return false;\n    }\n    /**\n     * Media event cannot bubble, so they have no path\n     */\n    get _path() {\n        return null;\n    }\n    /**\n     * Media event cannot bubble, so they have no path\n     */\n    set _path(_val) {\n        // stubbed\n    }\n    constructor(target, _name = 'MediaEvent') {\n        super();\n        this.target = target;\n        this._name = _name;\n    }\n    /**\n     * Prevents event from bubbling\n     */\n    stopPropagation() {\n        /**\n         * Stub\n         */\n    }\n    /**\n     * Action, that calls when event happens\n     */\n    action() {\n        /**\n         * Stub\n         */\n    }\n    /**\n     * Propagate event further through event path\n     */\n    propagate() {\n        /**\n         * Stub\n         */\n    }\n    layPath(_actor) {\n        /**\n         * Stub\n         */\n    }\n}\nclass NativeSoundEvent extends MediaEvent {\n    constructor(target, track) {\n        super(target, 'NativeSoundEvent');\n        this.track = track;\n    }\n}\nclass NativeSoundProcessedEvent extends MediaEvent {\n    constructor(target, _processedData) {\n        super(target, 'NativeSoundProcessedEvent');\n        this._processedData = _processedData;\n        this.data = this._processedData;\n    }\n}\n\n;// ./Util/Sound.ts\n\n/**\n * Whether or not the browser can play this file as HTML5 Audio\n */\nfunction canPlayFile(file) {\n    try {\n        const a = new Audio();\n        const filetype = /.*\\.([A-Za-z0-9]+)(?:(?:\\?|\\#).*)*$/;\n        const type = file.match(filetype)[1];\n        if (a.canPlayType('audio/' + type)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    catch (e) {\n        Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\n        return false;\n    }\n}\n\n;// ./Resources/Sound/Sound.ts\n\n\n\n\n\n\n\n\nconst SoundEvents = {\n    VolumeChange: 'volumechange',\n    Processed: 'processed',\n    Pause: 'pause',\n    Stop: 'stop',\n    PlaybackEnd: 'playbackend',\n    Resume: 'resume',\n    PlaybackStart: 'playbackstart'\n};\n/**\n * The {@apilink Sound} object allows games built in Excalibur to load audio\n * components, from soundtracks to sound effects. {@apilink Sound} is an {@apilink Loadable}\n * which means it can be passed to a {@apilink Loader} to pre-load before a game or level.\n */\nclass Sound {\n    /**\n     * Indicates whether the clip should loop when complete\n     * @param value  Set the looping flag\n     */\n    set loop(value) {\n        this._loop = value;\n        for (const track of this._tracks) {\n            track.loop = this._loop;\n        }\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\n    }\n    get loop() {\n        return this._loop;\n    }\n    set volume(value) {\n        this._volume = value;\n        for (const track of this._tracks) {\n            track.volume = this._volume;\n        }\n        this.events.emit('volumechange', new NativeSoundEvent(this));\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\n    }\n    get volume() {\n        return this._volume;\n    }\n    /**\n     * Get the duration that this audio should play. If unset the total natural playback duration will be used.\n     */\n    get duration() {\n        return this._duration;\n    }\n    /**\n     * Set the duration that this audio should play. If unset the total natural playback duration will be used.\n     *\n     * Note: if you seek to a specific point the duration will start from that point, for example\n     *\n     * If you have a 10 second clip, seek to 5 seconds, then set the duration to 2, it will play the clip from 5-7 seconds.\n     */\n    set duration(duration) {\n        this._duration = duration;\n    }\n    /**\n     * Return array of Current AudioInstances playing or being paused\n     */\n    get instances() {\n        return this._tracks;\n    }\n    get path() {\n        return this._resource.path;\n    }\n    set path(val) {\n        this._resource.path = val;\n    }\n    /**\n     * Should excalibur add a cache busting querystring? By default false.\n     * Must be set before loading\n     */\n    get bustCache() {\n        return this._resource.bustCache;\n    }\n    set bustCache(val) {\n        this._resource.bustCache = val;\n    }\n    /**\n     * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\n     */\n    constructor(...paths) {\n        this.events = new EventEmitter();\n        this.logger = Logger.getInstance();\n        this._loop = false;\n        this._volume = 1;\n        this._isStopped = false;\n        // private _isPaused = false;\n        this._tracks = [];\n        this._wasPlayingOnHidden = false;\n        this._playbackRate = 1.0;\n        this._audioContext = AudioContextFactory.create();\n        this._resource = new Resource('', ExResponse.type.arraybuffer);\n        /**\n         * Chrome : MP3, WAV, Ogg\n         * Firefox : WAV, Ogg,\n         * IE : MP3, WAV coming soon\n         * Safari MP3, WAV, Ogg\n         */\n        for (const path of paths) {\n            if (canPlayFile(path)) {\n                this.path = path;\n                break;\n            }\n        }\n        if (!this.path) {\n            this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\n            this.logger.warn('Attempting to use', paths[0]);\n            this.path = paths[0]; // select the first specified\n        }\n    }\n    isLoaded() {\n        return !!this.data;\n    }\n    async load() {\n        var _a, _b;\n        if (this.data) {\n            return this.data;\n        }\n        const arraybuffer = await this._resource.load();\n        const audiobuffer = await this.decodeAudio(arraybuffer.slice(0));\n        this._duration = (_b = (_a = this._duration) !== null && _a !== void 0 ? _a : audiobuffer === null || audiobuffer === void 0 ? void 0 : audiobuffer.duration) !== null && _b !== void 0 ? _b : undefined;\n        this.events.emit('processed', new NativeSoundProcessedEvent(this, audiobuffer));\n        return (this.data = audiobuffer);\n    }\n    async decodeAudio(data) {\n        try {\n            return await this._audioContext.decodeAudioData(data.slice(0));\n        }\n        catch (e) {\n            this.logger.error('Unable to decode ' +\n                ' this browser may not fully support this format, or the file may be corrupt, ' +\n                'if this is an mp3 try removing id3 tags and album art from the file.');\n            return await Promise.reject();\n        }\n    }\n    wireEngine(engine) {\n        if (engine) {\n            this._engine = engine;\n            this._engine.on('hidden', () => {\n                if (engine.pauseAudioWhenHidden && this.isPlaying()) {\n                    this._wasPlayingOnHidden = true;\n                    this.pause();\n                }\n            });\n            this._engine.on('visible', () => {\n                if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\n                    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                    this.play();\n                    this._wasPlayingOnHidden = false;\n                }\n            });\n            this._engine.on('start', () => {\n                this._isStopped = false;\n            });\n            this._engine.on('stop', () => {\n                this.stop();\n                this._isStopped = true;\n            });\n        }\n    }\n    /**\n     * Returns how many instances of the sound are currently playing\n     */\n    instanceCount() {\n        return this._tracks.length;\n    }\n    /**\n     * Whether or not the sound is playing right now\n     */\n    isPlaying() {\n        return this._tracks.some((t) => t.isPlaying());\n    }\n    isPaused() {\n        return this._tracks.some((t) => t.isPaused());\n    }\n    isStopped() {\n        return this._tracks.some((t) => t.isStopped());\n    }\n    /**\n     * Play the sound, returns a promise that resolves when the sound is done playing\n     * An optional volume argument can be passed in to play the sound. Max volume is 1.0\n     */\n    play(volume) {\n        if (!this.isLoaded()) {\n            this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\n            return Promise.resolve(true);\n        }\n        if (this._isStopped) {\n            this.logger.warn('Cannot start playing. Engine is in a stopped state.');\n            return Promise.resolve(false);\n        }\n        this.volume = volume || this.volume;\n        if (this.isPaused()) {\n            return this._resumePlayback();\n        }\n        else {\n            return this._startPlayback();\n        }\n    }\n    /**\n     * Stop the sound, and do not rewind\n     */\n    pause() {\n        if (!this.isPlaying()) {\n            return;\n        }\n        for (const track of this._tracks) {\n            track.pause();\n        }\n        this.events.emit('pause', new NativeSoundEvent(this));\n        this.logger.debug('Paused all instances of sound', this.path);\n    }\n    /**\n     * Stop the sound if it is currently playing and rewind the track. If the sound is not playing, rewinds the track.\n     */\n    stop() {\n        for (const track of this._tracks) {\n            track.stop();\n        }\n        this.events.emit('stop', new NativeSoundEvent(this));\n        this._tracks.length = 0;\n        this.logger.debug('Stopped all instances of sound', this.path);\n    }\n    get playbackRate() {\n        return this._playbackRate;\n    }\n    set playbackRate(playbackRate) {\n        this._playbackRate = playbackRate;\n        this._tracks.forEach((t) => {\n            t.playbackRate = this._playbackRate;\n        });\n    }\n    seek(position, trackId = 0) {\n        if (this._tracks.length === 0) {\n            this._getTrackInstance(this.data);\n        }\n        this._tracks[trackId].seek(position);\n    }\n    getTotalPlaybackDuration() {\n        if (!this.isLoaded()) {\n            this.logger.warnOnce(`Sound from ${this.path} is not loaded, cannot return total playback duration.` +\n                `Did you forget to add Sound to a loader? https://excaliburjs.com/docs/loaders/`);\n            return 0;\n        }\n        return this.data.duration;\n    }\n    /**\n     * Return the current playback time of the playing track in seconds from the start.\n     *\n     * Optionally specify the track to query if multiple are playing at once.\n     * @param trackId\n     */\n    getPlaybackPosition(trackId = 0) {\n        if (this._tracks.length) {\n            return this._tracks[trackId].getPlaybackPosition();\n        }\n        return 0;\n    }\n    /**\n     * Get Id of provided AudioInstance in current trackList\n     * @param track {@apilink Audio} which Id is to be given\n     */\n    getTrackId(track) {\n        return this._tracks.indexOf(track);\n    }\n    async _resumePlayback() {\n        if (this.isPaused()) {\n            const resumed = [];\n            // ensure we resume *current* tracks (if paused)\n            for (const track of this._tracks) {\n                resumed.push(track.play().then(() => {\n                    this._tracks.splice(this.getTrackId(track), 1);\n                    return true;\n                }));\n            }\n            this.events.emit('resume', new NativeSoundEvent(this));\n            this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\n            // resolve when resumed tracks are done\n            await Promise.all(resumed);\n        }\n        return true;\n    }\n    /**\n     * Starts playback, returns a promise that resolves when playback is complete\n     */\n    async _startPlayback() {\n        const track = this._getTrackInstance(this.data);\n        const complete = await track.play(() => {\n            this.events.emit('playbackstart', new NativeSoundEvent(this, track));\n            this.logger.debug('Playing new instance for sound', this.path);\n        });\n        this.events.emit('playbackend', new NativeSoundEvent(this, track));\n        // cleanup any done tracks\n        const trackId = this.getTrackId(track);\n        if (trackId !== -1) {\n            this._tracks.splice(trackId, 1);\n        }\n        return complete;\n    }\n    _getTrackInstance(data) {\n        var _a;\n        const newTrack = new WebAudioInstance(data);\n        newTrack.loop = this.loop;\n        newTrack.volume = this.volume;\n        newTrack.duration = (_a = this.duration) !== null && _a !== void 0 ? _a : 0;\n        newTrack.playbackRate = this._playbackRate;\n        this._tracks.push(newTrack);\n        return newTrack;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n}\n\n;// ./Director/DefaultLoader.ts\n\n\n\n\n\n\n\n\n\nconst LoaderEvents = {\n    // Add event types here\n    BeforeLoad: 'beforeload',\n    AfterLoad: 'afterload',\n    UserAction: 'useraction',\n    LoadResourceStart: 'loadresourcestart',\n    LoadResourceEnd: 'loadresourceend'\n};\n/**\n * Returns true if the constructor is for an Excalibur Loader\n */\nfunction isLoaderConstructor(x) {\n    var _a, _b;\n    return !!(x === null || x === void 0 ? void 0 : x.prototype) && !!((_b = (_a = x === null || x === void 0 ? void 0 : x.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.name);\n}\nclass DefaultLoader {\n    get resources() {\n        return this._resources;\n    }\n    /**\n     * @param options Optionally provide the list of resources you want to load at constructor time\n     */\n    constructor(options) {\n        var _a;\n        this.events = new EventEmitter();\n        this.canvas = new Canvas({\n            filtering: ImageFiltering.Blended,\n            smoothing: true,\n            cache: false,\n            draw: this.onDraw.bind(this)\n        });\n        this._resources = [];\n        this._numLoaded = 0;\n        this._totalTimeMs = 0;\n        this._loadingFuture = new Future();\n        if (options && ((_a = options.loadables) === null || _a === void 0 ? void 0 : _a.length)) {\n            this.addResources(options.loadables);\n        }\n    }\n    /**\n     * Called by the engine before loading\n     * @param engine\n     */\n    onInitialize(engine) {\n        this.engine = engine;\n        this.canvas.width = this.engine.screen.resolution.width;\n        this.canvas.height = this.engine.screen.resolution.height;\n    }\n    /**\n     * Return a promise that resolves when the user interacts with the loading screen in some way, usually a click.\n     *\n     * It's important to implement this in order to unlock the audio context in the browser. Browsers automatically prevent\n     * audio from playing until the user performs an action.\n     *\n     */\n    async onUserAction() {\n        return await Promise.resolve();\n    }\n    /**\n     * Overridable lifecycle method, called directly before loading starts\n     */\n    async onBeforeLoad() {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called after loading has completed\n     */\n    async onAfterLoad() {\n        // override me\n        await delay(500, this.engine.clock); // avoid a flicker\n    }\n    /**\n     * Add a resource to the loader to load\n     * @param loadable  Resource to add\n     */\n    addResource(loadable) {\n        this._resources.push(loadable);\n    }\n    /**\n     * Add a list of resources to the loader to load\n     * @param loadables  The list of resources to load\n     */\n    addResources(loadables) {\n        let i = 0;\n        const len = loadables.length;\n        for (i; i < len; i++) {\n            this.addResource(loadables[i]);\n        }\n    }\n    markResourceComplete() {\n        this._numLoaded++;\n    }\n    /**\n     * Returns the progress of the loader as a number between [0, 1] inclusive.\n     */\n    get progress() {\n        const total = this._resources.length;\n        return total > 0 ? clamp(this._numLoaded, 0, total) / total : 1;\n    }\n    /**\n     * Returns true if the loader has completely loaded all resources\n     */\n    isLoaded() {\n        return this._numLoaded === this._resources.length;\n    }\n    /**\n     * Optionally override the onUpdate\n     * @param engine\n     * @param elapsed\n     */\n    onUpdate(engine, elapsed) {\n        this._totalTimeMs += elapsed;\n        // override me\n    }\n    /**\n     * Optionally override the onDraw\n     */\n    onDraw(ctx) {\n        const seconds = this._totalTimeMs / 1000;\n        ctx.fillStyle = Color.Black.toRGBA();\n        ctx.fillRect(0, 0, this.engine.screen.resolution.width, this.engine.screen.resolution.height);\n        ctx.save();\n        ctx.translate(this.engine.screen.resolution.width / 2, this.engine.screen.resolution.height / 2);\n        const speed = seconds * 10;\n        ctx.strokeStyle = 'white';\n        ctx.lineWidth = 10;\n        ctx.lineCap = 'round';\n        ctx.arc(0, 0, 40, speed, speed + (Math.PI * 3) / 2);\n        ctx.stroke();\n        ctx.fillStyle = 'white';\n        ctx.font = '16px sans-serif';\n        const text = (this.progress * 100).toFixed(0) + '%';\n        const textbox = ctx.measureText(text);\n        const width = Math.abs(textbox.actualBoundingBoxLeft) + Math.abs(textbox.actualBoundingBoxRight);\n        const height = Math.abs(textbox.actualBoundingBoxAscent) + Math.abs(textbox.actualBoundingBoxDescent);\n        ctx.fillText(text, -width / 2, height / 2); // center\n        ctx.restore();\n    }\n    areResourcesLoaded() {\n        if (this._resources.length === 0) {\n            // special case no resources mean loaded;\n            return Promise.resolve();\n        }\n        return this._loadingFuture.promise;\n    }\n    /**\n     * Not meant to be overridden\n     *\n     * Begin loading all of the supplied resources, returning a promise\n     * that resolves when loading of all is complete AND the user has interacted with the loading screen\n     */\n    async load() {\n        await this.onBeforeLoad();\n        this.events.emit('beforeload');\n        this.canvas.flagDirty();\n        await Promise.all(this._resources.map(async (r) => {\n            this.events.emit('loadresourcestart', r);\n            await r.load().finally(() => {\n                // capture progress\n                this._numLoaded++;\n                this.canvas.flagDirty();\n                this.events.emit('loadresourceend', r);\n            });\n        }));\n        // Wire all sound to the engine\n        for (const resource of this._resources) {\n            if (resource instanceof Sound) {\n                resource.wireEngine(this.engine);\n            }\n        }\n        this._loadingFuture.resolve();\n        this.canvas.flagDirty();\n        // Unlock browser AudioContext in after user gesture\n        // See: https://github.com/excaliburjs/Excalibur/issues/262\n        // See: https://github.com/excaliburjs/Excalibur/issues/1031\n        await this.onUserAction();\n        this.events.emit('useraction');\n        await WebAudio.unlock();\n        await this.onAfterLoad();\n        this.events.emit('afterload');\n        return (this.data = this._resources);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n}\n\n;// ./Director/Loader.logo.png\n/* harmony default export */ const Loader_logo = (\"data:image/png;base64,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\");\n// EXTERNAL MODULE: ./Director/Loader.css\nvar Director_Loader = __webpack_require__(851);\n;// ./Director/Loader.ts\n\n\n\n\n\n\n\n\n\n/**\n * Pre-loading assets\n *\n * The loader provides a mechanism to preload multiple resources at\n * one time. The loader must be passed to the engine in order to\n * trigger the loading progress bar.\n *\n * The {@apilink Loader} itself implements {@apilink Loadable} so you can load loaders.\n *\n * ## Example: Pre-loading resources for a game\n *\n * ```js\n * // create a loader\n * var loader = new ex.Loader();\n *\n * // create a resource dictionary (best practice is to keep a separate file)\n * var resources = {\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\n * };\n *\n * // loop through dictionary and add to loader\n * for (var loadable in resources) {\n *   if (resources.hasOwnProperty(loadable)) {\n *     loader.addResource(resources[loadable]);\n *   }\n * }\n *\n * // start game\n * game.start(loader).then(function () {\n *   console.log(\"Game started!\");\n * });\n * ```\n *\n * ## Customize the Loader\n *\n * The loader can be customized to show different, text, logo, background color, and button.\n *\n * ```typescript\n * const loader = new ex.Loader([playerTexture]);\n *\n * // The loaders button text can simply modified using this\n * loader.playButtonText = 'Start the best game ever';\n *\n * // The logo can be changed by inserting a base64 image string here\n *\n * loader.logo = 'data:image/png;base64,iVBORw...';\n * loader.logoWidth = 15;\n * loader.logoHeight = 14;\n *\n * // The background color can be changed like so by supplying a valid CSS color string\n *\n * loader.backgroundColor = 'red'\n * loader.backgroundColor = '#176BAA'\n *\n * // To build a completely new button\n * loader.startButtonFactory = () => {\n *     let myButton = document.createElement('button');\n *     myButton.textContent = 'The best button';\n *     return myButton;\n * };\n *\n * engine.start(loader).then(() => {});\n * ```\n */\nclass Loader extends DefaultLoader {\n    get _image() {\n        if (!this._imageElement) {\n            this._imageElement = new Image();\n            this._imageElement.onload = () => this._imageLoaded.resolve();\n            this._imageElement.src = this.logo;\n        }\n        return this._imageElement;\n    }\n    get playButtonRootElement() {\n        return this._playButtonRootElement;\n    }\n    get playButtonElement() {\n        return this._playButtonElement;\n    }\n    get _playButton() {\n        const existingRoot = document.getElementById('excalibur-play-root');\n        if (existingRoot) {\n            this._playButtonRootElement = existingRoot;\n        }\n        if (!this._playButtonRootElement) {\n            this._playButtonRootElement = document.createElement('div');\n            this._playButtonRootElement.id = 'excalibur-play-root';\n            this._playButtonRootElement.style.position = 'absolute';\n            document.body.appendChild(this._playButtonRootElement);\n        }\n        if (!this._styleBlock) {\n            this._styleBlock = document.createElement('style');\n            this._styleBlock.textContent = this._playButtonStyles;\n            document.head.appendChild(this._styleBlock);\n        }\n        if (!this._playButtonElement) {\n            this._playButtonElement = this.startButtonFactory();\n            this._playButtonRootElement.appendChild(this._playButtonElement);\n        }\n        return this._playButtonElement;\n    }\n    constructor(loadablesOrOptions) {\n        const options = Array.isArray(loadablesOrOptions)\n            ? {\n                loadables: loadablesOrOptions\n            }\n            : loadablesOrOptions;\n        super(options);\n        this._logger = Logger.getInstance();\n        this._originalOptions = { loadables: [] };\n        this.events = new EventEmitter();\n        this._playButtonShown = false;\n        // logo drawing stuff\n        // base64 string encoding of the excalibur logo (logo-white.png)\n        this.logo = Loader_logo;\n        this.logoWidth = 468;\n        this.logoHeight = 118;\n        /**\n         * Gets or sets the color of the loading bar, default is {@apilink Color.White}\n         */\n        this.loadingBarColor = Color.White;\n        /**\n         * Gets or sets the background color of the loader as a hex string\n         */\n        this.backgroundColor = '#176BAA';\n        this._imageLoaded = new Future();\n        this.suppressPlayButton = false;\n        /** Loads the css from Loader.css */\n        this._playButtonStyles = Director_Loader/* default */.A.toString();\n        /**\n         * Get/set play button text\n         */\n        this.playButtonText = 'Play game';\n        /**\n         * Return a html button element for excalibur to use as a play button\n         */\n        this.startButtonFactory = () => {\n            let buttonElement = document.getElementById('excalibur-play');\n            if (!buttonElement) {\n                buttonElement = document.createElement('button');\n            }\n            buttonElement.id = 'excalibur-play';\n            buttonElement.textContent = this.playButtonText;\n            buttonElement.style.display = 'none';\n            return buttonElement;\n        };\n        this._originalOptions = { ...Loader._DEFAULT_LOADER_OPTIONS, ...options };\n    }\n    onInitialize(engine) {\n        this.engine = engine;\n        this.screen = engine.screen;\n        this.canvas.width = this.engine.canvas.width;\n        this.canvas.height = this.engine.canvas.height;\n        this.screen.events.on('resize', () => {\n            this.canvas.width = this.engine.canvas.width;\n            this.canvas.height = this.engine.canvas.height;\n        });\n    }\n    /**\n     * Shows the play button and returns a promise that resolves when clicked\n     */\n    async showPlayButton() {\n        var _a, _b;\n        if (this.suppressPlayButton) {\n            this.hidePlayButton();\n            // Delay is to give the logo a chance to show, otherwise don't delay\n            await delay(500, (_a = this.engine) === null || _a === void 0 ? void 0 : _a.clock);\n        }\n        else {\n            const resizeHandler = () => {\n                try {\n                    this._positionPlayButton();\n                }\n                catch (_a) {\n                    // swallow if can't position\n                }\n            };\n            if ((_b = this.engine) === null || _b === void 0 ? void 0 : _b.browser) {\n                this.engine.browser.window.on('resize', resizeHandler);\n            }\n            this._playButtonShown = true;\n            this._playButton.style.display = 'block';\n            document.body.addEventListener('keyup', (evt) => {\n                if (evt.key === 'Enter') {\n                    this._playButton.click();\n                }\n            });\n            this._positionPlayButton();\n            const playButtonClicked = new Promise((resolve) => {\n                const startButtonHandler = (e) => {\n                    var _a;\n                    // We want to stop propagation to keep bubbling to the engine pointer handlers\n                    e.stopPropagation();\n                    // Hide Button after click\n                    this.hidePlayButton();\n                    if ((_a = this.engine) === null || _a === void 0 ? void 0 : _a.browser) {\n                        this.engine.browser.window.off('resize', resizeHandler);\n                    }\n                    if (this._originalOptions.fullscreenAfterLoad) {\n                        try {\n                            this._logger.info('requesting fullscreen');\n                            if (this._originalOptions.fullscreenContainer instanceof HTMLElement) {\n                                this._originalOptions.fullscreenContainer.requestFullscreen();\n                            }\n                            else {\n                                this.engine.screen.enterFullscreen(this._originalOptions.fullscreenContainer);\n                            }\n                        }\n                        catch (error) {\n                            this._logger.error('could not go fullscreen', error);\n                        }\n                    }\n                    resolve();\n                };\n                this._playButton.addEventListener('click', startButtonHandler);\n                this._playButton.addEventListener('touchend', startButtonHandler);\n                this._playButton.addEventListener('pointerup', startButtonHandler);\n                if (this.engine) {\n                    this.engine.input.gamepads.once('button', () => startButtonHandler(new Event('button')));\n                }\n            });\n            return await playButtonClicked;\n        }\n    }\n    hidePlayButton() {\n        this._playButtonShown = false;\n        this._playButton.style.display = 'none';\n    }\n    /**\n     * Clean up generated elements for the loader\n     */\n    dispose() {\n        if (this._playButtonRootElement.parentElement) {\n            this._playButtonRootElement.removeChild(this._playButtonElement);\n            document.body.removeChild(this._playButtonRootElement);\n            document.head.removeChild(this._styleBlock);\n            this._playButtonRootElement = null;\n            this._playButtonElement = null;\n            this._styleBlock = null;\n        }\n    }\n    async onUserAction() {\n        var _a;\n        // short delay in showing the button for aesthetics\n        await delay(200, (_a = this.engine) === null || _a === void 0 ? void 0 : _a.clock);\n        this.canvas.flagDirty();\n        // show play button\n        await this.showPlayButton();\n    }\n    async onBeforeLoad() {\n        this.screen.pushResolutionAndViewport();\n        this.screen.resolution = { width: this.canvas.width, height: this.canvas.height };\n        this.screen.applyResolutionAndViewport();\n        const image = this._image;\n        await this._imageLoaded.promise;\n        await (image === null || image === void 0 ? void 0 : image.decode()); // decode logo if it exists\n    }\n    // eslint-disable-next-line require-await\n    async onAfterLoad() {\n        this.screen.popResolutionAndViewport();\n        this.screen.applyResolutionAndViewport();\n        this.dispose();\n    }\n    _positionPlayButton() {\n        if (this.engine) {\n            const { x: left, y: top, width: screenWidth, height: screenHeight } = this.engine.canvas.getBoundingClientRect();\n            if (this._playButtonRootElement) {\n                const buttonWidth = this._playButton.clientWidth;\n                const buttonHeight = this._playButton.clientHeight;\n                if (this.playButtonPosition) {\n                    this._playButtonRootElement.style.left = `${this.playButtonPosition.x}px`;\n                    this._playButtonRootElement.style.top = `${this.playButtonPosition.y}px`;\n                }\n                else {\n                    this._playButtonRootElement.style.left = `${left + screenWidth / 2 - buttonWidth / 2}px`;\n                    this._playButtonRootElement.style.top = `${top + screenHeight / 2 - buttonHeight / 2 + 100}px`;\n                }\n            }\n        }\n    }\n    /**\n     * Loader draw function. Draws the default Excalibur loading screen.\n     * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\n     * to customize the drawing, or just override entire method.\n     */\n    onDraw(ctx) {\n        const canvasHeight = this.engine.canvasHeight / this.engine.pixelRatio;\n        const canvasWidth = this.engine.canvasWidth / this.engine.pixelRatio;\n        this._positionPlayButton();\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n        let logoY = canvasHeight / 2;\n        const width = Math.min(this.logoWidth, canvasWidth * 0.75);\n        let logoX = canvasWidth / 2 - width / 2;\n        if (this.logoPosition) {\n            logoX = this.logoPosition.x;\n            logoY = this.logoPosition.y;\n        }\n        const imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\n        const oldAntialias = this.engine.screen.antialiasing;\n        this.engine.screen.antialiasing = true;\n        if (!this.logoPosition) {\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY - imageHeight - 20, width, imageHeight);\n        }\n        else {\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY, width, imageHeight);\n        }\n        // loading box\n        if (!this.suppressPlayButton && this._playButtonShown) {\n            this.engine.screen.antialiasing = oldAntialias;\n            return;\n        }\n        let loadingX = logoX;\n        let loadingY = logoY;\n        if (this.loadingBarPosition) {\n            loadingX = this.loadingBarPosition.x;\n            loadingY = this.loadingBarPosition.y;\n        }\n        ctx.lineWidth = 2;\n        roundRect(ctx, loadingX, loadingY, width, 20, 10, this.loadingBarColor);\n        const progress = width * this.progress;\n        const margin = 5;\n        const progressWidth = progress - margin * 2;\n        const height = 20 - margin * 2;\n        roundRect(ctx, loadingX + margin, loadingY + margin, progressWidth > 10 ? progressWidth : 10, height, 5, null, this.loadingBarColor);\n        this.engine.screen.antialiasing = oldAntialias;\n    }\n}\nLoader._DEFAULT_LOADER_OPTIONS = {\n    loadables: [],\n    fullscreenAfterLoad: false,\n    fullscreenContainer: undefined\n};\n\n;// ./Util/Detector.ts\n\n/**\n * This is the list of features that will be used to log the supported\n * features to the console when Detector.logBrowserFeatures() is called.\n */\nconst REPORTED_FEATURES = {\n    webgl: 'WebGL',\n    webaudio: 'WebAudio',\n    gamepadapi: 'Gamepad API'\n};\n/**\n * Excalibur internal feature detection helper class\n */\nclass Detector {\n    constructor() {\n        this._features = null;\n        this.failedTests = [];\n        // critical browser features required for ex to run\n        this._criticalTests = {\n            // Test canvas/2d context support\n            canvasSupport: function () {\n                const elem = document.createElement('canvas');\n                return !!(elem.getContext && elem.getContext('2d'));\n            },\n            // Test array buffer support ex uses for downloading binary data\n            arrayBufferSupport: function () {\n                const xhr = new XMLHttpRequest();\n                xhr.open('GET', '/');\n                try {\n                    xhr.responseType = 'arraybuffer';\n                }\n                catch (e) {\n                    return false;\n                }\n                return xhr.responseType === 'arraybuffer';\n            },\n            // Test data urls ex uses for sprites\n            dataUrlSupport: function () {\n                const canvas = document.createElement('canvas');\n                return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\n            },\n            // Test object url support for loading\n            objectUrlSupport: function () {\n                return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\n            },\n            // RGBA support for colors\n            rgbaSupport: function () {\n                const style = document.createElement('a').style;\n                style.cssText = 'background-color:rgba(150,255,150,.5)';\n                return ('' + style.backgroundColor).indexOf('rgba') > -1;\n            }\n        };\n        // warnings excalibur performance will be degraded\n        this._warningTest = {\n            webAudioSupport: function () {\n                return !!(window.AudioContext ||\n                    window.webkitAudioContext ||\n                    window.mozAudioContext ||\n                    window.msAudioContext ||\n                    window.oAudioContext);\n            },\n            webglSupport: function () {\n                const elem = document.createElement('canvas');\n                return !!(elem.getContext && elem.getContext('webgl'));\n            }\n        };\n        this._features = this._loadBrowserFeatures();\n    }\n    /**\n     * Returns a map of currently supported browser features. This method\n     * treats the features as a singleton and will only calculate feature\n     * support if it has not previously been done.\n     */\n    getBrowserFeatures() {\n        if (this._features === null) {\n            this._features = this._loadBrowserFeatures();\n        }\n        return this._features;\n    }\n    /**\n     * Report on non-critical browser support for debugging purposes.\n     * Use native browser console colors for visibility.\n     */\n    logBrowserFeatures() {\n        let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\n        const args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\n        const supported = this.getBrowserFeatures();\n        for (const feature of Object.keys(REPORTED_FEATURES)) {\n            if (supported[feature]) {\n                msg += '(%c\\u2713%c)'; // (✓)\n                args.push('font-weight: bold; color: green');\n                args.push('font-weight: normal; color: inherit');\n            }\n            else {\n                msg += '(%c\\u2717%c)'; // (✗)\n                args.push('font-weight: bold; color: red');\n                args.push('font-weight: normal; color: inherit');\n            }\n            msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\n        }\n        args.unshift(msg);\n        // eslint-disable-next-line no-console\n        console.log.apply(console, args);\n    }\n    /**\n     * Executes several IIFE's to get a constant reference to supported\n     * features within the current execution context.\n     */\n    _loadBrowserFeatures() {\n        return {\n            // IIFE to check canvas support\n            canvas: (() => {\n                return this._criticalTests.canvasSupport();\n            })(),\n            // IIFE to check arraybuffer support\n            arraybuffer: (() => {\n                return this._criticalTests.arrayBufferSupport();\n            })(),\n            // IIFE to check dataurl support\n            dataurl: (() => {\n                return this._criticalTests.dataUrlSupport();\n            })(),\n            // IIFE to check objecturl support\n            objecturl: (() => {\n                return this._criticalTests.objectUrlSupport();\n            })(),\n            // IIFE to check rgba support\n            rgba: (() => {\n                return this._criticalTests.rgbaSupport();\n            })(),\n            // IIFE to check webaudio support\n            webaudio: (() => {\n                return this._warningTest.webAudioSupport();\n            })(),\n            // IIFE to check webgl support\n            webgl: (() => {\n                return this._warningTest.webglSupport();\n            })(),\n            // IIFE to check gamepadapi support\n            gamepadapi: (() => {\n                return !!navigator.getGamepads;\n            })()\n        };\n    }\n    test() {\n        // Critical test will for ex not to run\n        let failedCritical = false;\n        for (const test in this._criticalTests) {\n            if (!this._criticalTests[test].call(this)) {\n                this.failedTests.push(test);\n                Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\n                failedCritical = true;\n            }\n        }\n        if (failedCritical) {\n            return false;\n        }\n        // Warning tests do not for ex to return false to compatibility\n        for (const warning in this._warningTest) {\n            if (!this._warningTest[warning]()) {\n                Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\n            }\n        }\n        return true;\n    }\n}\n\n;// ./Collision/CollisionType.ts\n/**\n * An enum that describes the types of collisions bodies can participate in\n */\nvar CollisionType;\n(function (CollisionType) {\n    /**\n     * Bodies with the `PreventCollision` setting do not participate in any\n     * collisions and do not raise collision events.\n     */\n    CollisionType[\"PreventCollision\"] = \"PreventCollision\";\n    /**\n     * Bodies with the `Passive` setting only raise collision events, but are not\n     * influenced or moved by other bodies and do not influence or move other bodies.\n     * This is useful for use in trigger type behavior.\n     */\n    CollisionType[\"Passive\"] = \"Passive\";\n    /**\n     * Bodies with the `Active` setting raise collision events and participate\n     * in collisions with other bodies and will be push or moved by bodies sharing\n     * the `Active` or `Fixed` setting.\n     */\n    CollisionType[\"Active\"] = \"Active\";\n    /**\n     * Bodies with the `Fixed` setting raise collision events and participate in\n     * collisions with other bodies. Actors with the `Fixed` setting will not be\n     * pushed or moved by other bodies sharing the `Fixed`. Think of Fixed\n     * bodies as \"immovable/unstoppable\" objects. If two `Fixed` bodies meet they will\n     * not be pushed or moved by each other, they will not interact except to throw\n     * collision events.\n     */\n    CollisionType[\"Fixed\"] = \"Fixed\";\n})(CollisionType || (CollisionType = {}));\n\n;// ./Collision/Group/CollisionGroupManager.ts\n\n/**\n * Static class for managing collision groups in excalibur, there is a maximum of 32 collision groups possible in excalibur\n */\nclass CollisionGroupManager {\n    /**\n     * Create a new named collision group up to a max of 32.\n     * @param name Name for the collision group\n     * @param mask Optionally provide your own 32-bit mask, if none is provide the manager will generate one\n     */\n    static create(name, mask) {\n        if (this._CURRENT_GROUP > this._MAX_GROUPS) {\n            throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);\n        }\n        if (this._GROUPS.get(name)) {\n            const existingGroup = this._GROUPS.get(name);\n            if (existingGroup.mask === mask) {\n                return existingGroup;\n            }\n            throw new Error(`Collision group ${name} already exists with a different mask!`);\n        }\n        const group = new CollisionGroup(name, this._CURRENT_BIT, mask !== undefined ? mask : ~this._CURRENT_BIT);\n        this._CURRENT_BIT = (this._CURRENT_BIT << 1) | 0;\n        this._CURRENT_GROUP++;\n        this._GROUPS.set(name, group);\n        return group;\n    }\n    /**\n     * Get all collision groups currently tracked by excalibur\n     */\n    static get groups() {\n        return Array.from(this._GROUPS.values());\n    }\n    /**\n     * Get a collision group by it's name\n     * @param name\n     */\n    static groupByName(name) {\n        return this._GROUPS.get(name);\n    }\n    /**\n     * Resets the managers internal group management state\n     */\n    static reset() {\n        this._GROUPS = new Map();\n        this._CURRENT_BIT = this._STARTING_BIT;\n        this._CURRENT_GROUP = 1;\n    }\n}\n// using bitmasking the maximum number of groups is 32, because that is the highest 32bit integer that JS can present.\nCollisionGroupManager._STARTING_BIT = 0b1 | 0;\nCollisionGroupManager._MAX_GROUPS = 32;\nCollisionGroupManager._CURRENT_GROUP = 1;\nCollisionGroupManager._CURRENT_BIT = CollisionGroupManager._STARTING_BIT;\nCollisionGroupManager._GROUPS = new Map();\n\n;// ./Collision/Group/CollisionGroup.ts\n\n/**\n * CollisionGroups indicate like members that do not collide with each other. Use {@apilink CollisionGroupManager} to create {@apilink CollisionGroup}s\n *\n * For example:\n *\n * Players have collision group \"player\"\n *\n * ![Player Collision Group](/assets/images/docs/CollisionGroupsPlayer.png)\n *\n * Enemies have collision group \"enemy\"\n *\n * ![Enemy Collision Group](/assets/images/docs/CollisionGroupsEnemy.png)\n *\n * Blocks have collision group \"ground\"\n *\n * ![Ground collision group](/assets/images/docs/CollisionGroupsGround.png)\n *\n * Players don't collide with each other, but enemies and blocks. Likewise, enemies don't collide with each other but collide\n * with players and blocks.\n *\n * This is done with bitmasking, see the following pseudo-code\n *\n * PlayerGroup = `0b001`\n * PlayerGroupMask = `0b110`\n *\n * EnemyGroup = `0b010`\n * EnemyGroupMask = `0b101`\n *\n * BlockGroup = `0b100`\n * BlockGroupMask = `0b011`\n *\n * Should Players collide? No because the bitwise mask evaluates to 0\n * `(player1.group & player2.mask) === 0`\n * `(0b001 & 0b110) === 0`\n *\n * Should Players and Enemies collide? Yes because the bitwise mask is non-zero\n * `(player1.group & enemy1.mask) === 1`\n * `(0b001 & 0b101) === 1`\n *\n * Should Players and Blocks collide? Yes because the bitwise mask is non-zero\n * `(player1.group & blocks1.mask) === 1`\n * `(0b001 & 0b011) === 1`\n */\nclass CollisionGroup {\n    /**\n     * STOP!!** It is preferred that {@apilink CollisionGroupManager.create} is used to create collision groups\n     *  unless you know how to construct the proper bitmasks. See https://github.com/excaliburjs/Excalibur/issues/1091 for more info.\n     * @param name Name of the collision group\n     * @param category 32 bit category for the group, should be a unique power of 2. For example `0b001` or `0b010`\n     * @param mask 32 bit mask of category, or `~category` generally. For a category of `0b001`, the mask would be `0b110`\n     */\n    constructor(name, category, mask) {\n        this._name = name;\n        this._category = category;\n        this._mask = mask;\n    }\n    /**\n     * Get the name of the collision group\n     */\n    get name() {\n        return this._name;\n    }\n    /**\n     * Get the category of the collision group, a 32 bit number which should be a unique power of 2\n     */\n    get category() {\n        return this._category;\n    }\n    /**\n     * Get the mask for this collision group\n     */\n    get mask() {\n        return this._mask;\n    }\n    /**\n     * Evaluates whether 2 collision groups can collide\n     *\n     * This means the mask has the same bit set the other category and vice versa\n     * @param other  CollisionGroup\n     */\n    canCollide(other) {\n        const overlap1 = this.category & other.mask;\n        const overlap2 = this.mask & other.category;\n        return overlap1 !== 0 && overlap2 !== 0;\n    }\n    /**\n     * Inverts the collision group. For example, if before the group specified \"players\",\n     * inverting would specify all groups except players\n     * @returns CollisionGroup\n     */\n    invert() {\n        const group = CollisionGroupManager.create('~(' + this.name + ')', ~this.mask | 0);\n        group._category = ~this.category;\n        return group;\n    }\n    /**\n     * Combine collision groups with each other. The new group includes all of the previous groups.\n     * @param collisionGroups\n     */\n    static combine(collisionGroups) {\n        const combinedName = collisionGroups.map((c) => c.name).join('+');\n        const combinedCategory = collisionGroups.reduce((current, g) => g.category | current, 0b0);\n        const combinedMask = ~combinedCategory;\n        return CollisionGroupManager.create(combinedName, combinedMask);\n    }\n    /**\n     * Creates a collision group that collides with the listed groups\n     * @param collisionGroups\n     */\n    static collidesWith(collisionGroups) {\n        const combinedName = `collidesWith(${collisionGroups.map((c) => c.name).join('+')})`;\n        const combinedMask = collisionGroups.reduce((current, g) => g.category | current, 0b0);\n        return CollisionGroupManager.create(combinedName, combinedMask);\n    }\n    toString() {\n        return `\r\ncategory: ${this.category.toString(2).padStart(32, '0')}\r\nmask:     ${(this.mask >>> 0).toString(2).padStart(32, '0')}\r\n    `;\n    }\n}\n/**\n * The `All` {@apilink CollisionGroup} is a special group that collides with all other groups including itself,\n * it is the default collision group on colliders.\n */\nCollisionGroup.All = new CollisionGroup('Collide with all groups', -1, -1);\n\n;// ./Collision/Detection/Pair.ts\n\n\n/**\n * Models a potential collision between 2 colliders\n */\nclass Pair {\n    constructor(colliderA, colliderB) {\n        this.colliderA = colliderA;\n        this.colliderB = colliderB;\n        this.id = null;\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\n    }\n    /**\n     * Returns whether a it is allowed for 2 colliders in a Pair to collide\n     * @param colliderA\n     * @param colliderB\n     */\n    static canCollide(colliderA, colliderB) {\n        var _a, _b;\n        // Prevent self collision\n        if (colliderA.id === colliderB.id) {\n            return false;\n        }\n        // Colliders with the same owner do not collide (composite colliders)\n        if (colliderA.owner && colliderB.owner && colliderA.owner.id === colliderB.owner.id) {\n            return false;\n        }\n        // if the pair has a member with zero dimension don't collide\n        if (colliderA.localBounds.hasZeroDimensions() || colliderB.localBounds.hasZeroDimensions()) {\n            return false;\n        }\n        const bodyA = (_a = colliderA === null || colliderA === void 0 ? void 0 : colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        const bodyB = (_b = colliderB === null || colliderB === void 0 ? void 0 : colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n        // Body's needed for collision in the current state\n        // TODO can we collide without a body?\n        if (!bodyA || !bodyB) {\n            return false;\n        }\n        // If both are in the same collision group short circuit\n        if (!bodyA.group.canCollide(bodyB.group)) {\n            return false;\n        }\n        // if both are fixed short circuit\n        if (bodyA.collisionType === CollisionType.Fixed && bodyB.collisionType === CollisionType.Fixed) {\n            return false;\n        }\n        // if the either is prevent collision short circuit\n        if (bodyB.collisionType === CollisionType.PreventCollision || bodyA.collisionType === CollisionType.PreventCollision) {\n            return false;\n        }\n        // if either is dead short circuit\n        if (!bodyA.isActive || !bodyB.isActive) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Returns whether or not it is possible for the pairs to collide\n     */\n    get canCollide() {\n        const colliderA = this.colliderA;\n        const colliderB = this.colliderB;\n        return Pair.canCollide(colliderA, colliderB);\n    }\n    /**\n     * Runs the collision intersection logic on the members of this pair\n     */\n    collide() {\n        return this.colliderA.collide(this.colliderB);\n    }\n    /**\n     * Check if the collider is part of the pair\n     * @param collider\n     */\n    hasCollider(collider) {\n        return collider === this.colliderA || collider === this.colliderB;\n    }\n    /**\n     * Calculates the unique pair hash id for this collision pair (owning id)\n     */\n    static calculatePairHash(idA, idB) {\n        if (idA.value < idB.value) {\n            return `#${idA.value}+${idB.value}`;\n        }\n        else {\n            return `#${idB.value}+${idA.value}`;\n        }\n    }\n}\n\n;// ./Math/projection.ts\n/**\n * A 1 dimensional projection on an axis, used to test overlaps\n */\nclass Projection {\n    constructor(min, max) {\n        this.min = min;\n        this.max = max;\n    }\n    overlaps(projection) {\n        return this.max > projection.min && projection.max > this.min;\n    }\n    getOverlap(projection) {\n        if (this.overlaps(projection)) {\n            if (this.max > projection.max) {\n                return projection.max - this.min;\n            }\n            else {\n                return this.max - projection.min;\n            }\n        }\n        return 0;\n    }\n}\n\n;// ./Collision/Detection/DynamicTree.ts\n\n\n\n\n/**\n * Dynamic Tree Node used for tracking bounds within the tree\n */\nclass TreeNode {\n    constructor(parent) {\n        this.parent = parent;\n        this.parent = parent || null;\n        this.data = null;\n        this.bounds = new BoundingBox();\n        this.left = null;\n        this.right = null;\n        this.height = 0;\n    }\n    isLeaf() {\n        return !this.left && !this.right;\n    }\n}\n/**\n * The DynamicTrees provides a spatial partitioning data structure for quickly querying for overlapping bounding boxes for\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\n *\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\n * Every non-leaf node is a bounding box that contains child bounding boxes.\n */\nclass DynamicTree {\n    constructor(_config, worldBounds = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE)) {\n        this._config = _config;\n        this.worldBounds = worldBounds;\n        this.root = null;\n        this.nodes = {};\n    }\n    /**\n     * Inserts a node into the dynamic tree\n     */\n    _insert(leaf) {\n        // If there are no nodes in the tree, make this the root leaf\n        if (this.root === null) {\n            this.root = leaf;\n            this.root.parent = null;\n            return;\n        }\n        // Search the tree for a node that is not a leaf and find the best place to insert\n        const leafAABB = leaf.bounds;\n        let currentRoot = this.root;\n        while (!currentRoot.isLeaf()) {\n            const left = currentRoot.left;\n            const right = currentRoot.right;\n            const area = currentRoot.bounds.getPerimeter();\n            const combinedAABB = currentRoot.bounds.combine(leafAABB);\n            const combinedArea = combinedAABB.getPerimeter();\n            // Calculate cost heuristic for creating a new parent and leaf\n            const cost = 2 * combinedArea;\n            // Minimum cost of pushing the leaf down the tree\n            const inheritanceCost = 2 * (combinedArea - area);\n            // Cost of descending\n            let leftCost = 0;\n            const leftCombined = leafAABB.combine(left.bounds);\n            let newArea;\n            let oldArea;\n            if (left.isLeaf()) {\n                leftCost = leftCombined.getPerimeter() + inheritanceCost;\n            }\n            else {\n                oldArea = left.bounds.getPerimeter();\n                newArea = leftCombined.getPerimeter();\n                leftCost = newArea - oldArea + inheritanceCost;\n            }\n            let rightCost = 0;\n            const rightCombined = leafAABB.combine(right.bounds);\n            if (right.isLeaf()) {\n                rightCost = rightCombined.getPerimeter() + inheritanceCost;\n            }\n            else {\n                oldArea = right.bounds.getPerimeter();\n                newArea = rightCombined.getPerimeter();\n                rightCost = newArea - oldArea + inheritanceCost;\n            }\n            // cost is acceptable\n            if (cost < leftCost && cost < rightCost) {\n                break;\n            }\n            // Descend to the depths\n            if (leftCost < rightCost) {\n                currentRoot = left;\n            }\n            else {\n                currentRoot = right;\n            }\n        }\n        // Create the new parent node and insert into the tree\n        const oldParent = currentRoot.parent;\n        const newParent = new TreeNode(oldParent);\n        newParent.bounds = leafAABB.combine(currentRoot.bounds);\n        newParent.height = currentRoot.height + 1;\n        if (oldParent !== null) {\n            // The sibling node was not the root\n            if (oldParent.left === currentRoot) {\n                oldParent.left = newParent;\n            }\n            else {\n                oldParent.right = newParent;\n            }\n            newParent.left = currentRoot;\n            newParent.right = leaf;\n            currentRoot.parent = newParent;\n            leaf.parent = newParent;\n        }\n        else {\n            // The sibling node was the root\n            newParent.left = currentRoot;\n            newParent.right = leaf;\n            currentRoot.parent = newParent;\n            leaf.parent = newParent;\n            this.root = newParent;\n        }\n        // Walk up the tree fixing heights and AABBs\n        let currentNode = leaf.parent;\n        while (currentNode) {\n            currentNode = this._balance(currentNode);\n            if (!currentNode.left) {\n                throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\n            }\n            if (!currentNode.right) {\n                throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\n            }\n            currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n            currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n            currentNode = currentNode.parent;\n        }\n    }\n    /**\n     * Removes a node from the dynamic tree\n     */\n    _remove(leaf) {\n        if (leaf === this.root) {\n            this.root = null;\n            return;\n        }\n        const parent = leaf.parent;\n        const grandParent = parent.parent;\n        let sibling;\n        if (parent.left === leaf) {\n            sibling = parent.right;\n        }\n        else {\n            sibling = parent.left;\n        }\n        if (grandParent) {\n            if (grandParent.left === parent) {\n                grandParent.left = sibling;\n            }\n            else {\n                grandParent.right = sibling;\n            }\n            sibling.parent = grandParent;\n            let currentNode = grandParent;\n            while (currentNode) {\n                currentNode = this._balance(currentNode);\n                currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n                currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n                currentNode = currentNode.parent;\n            }\n        }\n        else {\n            this.root = sibling;\n            sibling.parent = null;\n        }\n    }\n    /**\n     * Tracks a body in the dynamic tree\n     */\n    trackCollider(collider) {\n        const node = new TreeNode();\n        node.data = collider;\n        node.bounds = collider.bounds;\n        node.bounds.left -= 2;\n        node.bounds.top -= 2;\n        node.bounds.right += 2;\n        node.bounds.bottom += 2;\n        this.nodes[collider.id.value] = node;\n        this._insert(node);\n    }\n    /**\n     * Updates the dynamic tree given the current bounds of each body being tracked\n     */\n    updateCollider(collider) {\n        var _a;\n        const node = this.nodes[collider.id.value];\n        if (!node) {\n            return false;\n        }\n        const b = collider.bounds;\n        // if the body is outside the world no longer update it\n        if (!this.worldBounds.contains(b)) {\n            Logger.getInstance().warn('Collider with id ' + collider.id.value + ' is outside the world bounds and will no longer be tracked for physics');\n            this.untrackCollider(collider);\n            return false;\n        }\n        if (node.bounds.contains(b)) {\n            return false;\n        }\n        this._remove(node);\n        b.left -= this._config.boundsPadding;\n        b.top -= this._config.boundsPadding;\n        b.right += this._config.boundsPadding;\n        b.bottom += this._config.boundsPadding;\n        // THIS IS CAUSING UNNECESSARY CHECKS\n        if (collider.owner) {\n            const body = (_a = collider.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n            if (body) {\n                const multdx = ((body.vel.x * 32) / 1000) * this._config.velocityMultiplier;\n                const multdy = ((body.vel.y * 32) / 1000) * this._config.velocityMultiplier;\n                if (multdx < 0) {\n                    b.left += multdx;\n                }\n                else {\n                    b.right += multdx;\n                }\n                if (multdy < 0) {\n                    b.top += multdy;\n                }\n                else {\n                    b.bottom += multdy;\n                }\n            }\n        }\n        node.bounds = b;\n        this._insert(node);\n        return true;\n    }\n    /**\n     * Untracks a body from the dynamic tree\n     */\n    untrackCollider(collider) {\n        const node = this.nodes[collider.id.value];\n        if (!node) {\n            return;\n        }\n        this._remove(node);\n        this.nodes[collider.id.value] = null;\n        delete this.nodes[collider.id.value];\n    }\n    /**\n     * Balances the tree about a node\n     */\n    _balance(node) {\n        if (node === null) {\n            throw new Error('Cannot balance at null node');\n        }\n        if (node.isLeaf() || node.height < 2) {\n            return node;\n        }\n        const left = node.left;\n        const right = node.right;\n        const a = node;\n        const b = left;\n        const c = right;\n        const d = left.left;\n        const e = left.right;\n        const f = right.left;\n        const g = right.right;\n        const balance = c.height - b.height;\n        // Rotate c node up\n        if (balance > 1) {\n            // Swap the right node with it's parent\n            c.left = a;\n            c.parent = a.parent;\n            a.parent = c;\n            // The original node's old parent should point to the right node\n            // this is mega confusing\n            if (c.parent) {\n                if (c.parent.left === a) {\n                    c.parent.left = c;\n                }\n                else {\n                    c.parent.right = c;\n                }\n            }\n            else {\n                this.root = c;\n            }\n            // Rotate\n            if (f.height > g.height) {\n                c.right = f;\n                a.right = g;\n                g.parent = a;\n                a.bounds = b.bounds.combine(g.bounds);\n                c.bounds = a.bounds.combine(f.bounds);\n                a.height = 1 + Math.max(b.height, g.height);\n                c.height = 1 + Math.max(a.height, f.height);\n            }\n            else {\n                c.right = g;\n                a.right = f;\n                f.parent = a;\n                a.bounds = b.bounds.combine(f.bounds);\n                c.bounds = a.bounds.combine(g.bounds);\n                a.height = 1 + Math.max(b.height, f.height);\n                c.height = 1 + Math.max(a.height, g.height);\n            }\n            return c;\n        }\n        // Rotate left node up\n        if (balance < -1) {\n            // swap\n            b.left = a;\n            b.parent = a.parent;\n            a.parent = b;\n            // node's old parent should point to b\n            if (b.parent) {\n                if (b.parent.left === a) {\n                    b.parent.left = b;\n                }\n                else {\n                    if (b.parent.right !== a) {\n                        throw 'Error rotating Dynamic Tree';\n                    }\n                    b.parent.right = b;\n                }\n            }\n            else {\n                this.root = b;\n            }\n            // rotate\n            if (d.height > e.height) {\n                b.right = d;\n                a.left = e;\n                e.parent = a;\n                a.bounds = c.bounds.combine(e.bounds);\n                b.bounds = a.bounds.combine(d.bounds);\n                a.height = 1 + Math.max(c.height, e.height);\n                b.height = 1 + Math.max(a.height, d.height);\n            }\n            else {\n                b.right = e;\n                a.left = d;\n                d.parent = a;\n                a.bounds = c.bounds.combine(d.bounds);\n                b.bounds = a.bounds.combine(e.bounds);\n                a.height = 1 + Math.max(c.height, d.height);\n                b.height = 1 + Math.max(a.height, e.height);\n            }\n            return b;\n        }\n        return node;\n    }\n    /**\n     * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\n     */\n    getHeight() {\n        if (this.root === null) {\n            return 0;\n        }\n        return this.root.height;\n    }\n    /**\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\n     *\n     * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\n     * that you are complete with your query and you do not want to continue. Returning false will continue searching\n     * the tree until all possible colliders have been returned.\n     */\n    query(collider, callback) {\n        const bounds = collider.bounds;\n        const helper = (currentNode) => {\n            if (currentNode && currentNode.bounds.overlaps(bounds)) {\n                if (currentNode.isLeaf() && currentNode.data !== collider) {\n                    if (callback.call(collider, currentNode.data)) {\n                        return true;\n                    }\n                }\n                else {\n                    return helper(currentNode.left) || helper(currentNode.right);\n                }\n            }\n            return false;\n        };\n        helper(this.root);\n    }\n    /**\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\n     * long ray to test the tree specified by `max`.\n     *\n     * In the query callback, it will be passed a potential body that intersects with the raycast. Returning true from this\n     * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\n     * the tree until all possible bodies that would intersect with the ray have been returned.\n     */\n    rayCastQuery(ray, max = Infinity, callback) {\n        const helper = (currentNode) => {\n            if (currentNode && currentNode.bounds.rayCast(ray, max)) {\n                if (currentNode.isLeaf()) {\n                    if (callback.call(ray, currentNode.data)) {\n                        // ray hit a leaf! return the body\n                        return true;\n                    }\n                }\n                else {\n                    // ray hit but not at a leaf, recurse deeper\n                    return helper(currentNode.left) || helper(currentNode.right);\n                }\n            }\n            return false; // ray missed\n        };\n        helper(this.root);\n    }\n    getNodes() {\n        const helper = (currentNode) => {\n            if (currentNode) {\n                return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\n            }\n            else {\n                return [];\n            }\n        };\n        return helper(this.root);\n    }\n    debug(ex) {\n        // draw all the nodes in the Dynamic Tree\n        const helper = (currentNode) => {\n            if (currentNode) {\n                if (currentNode.isLeaf()) {\n                    currentNode.bounds.draw(ex, Color.Green);\n                }\n                else {\n                    currentNode.bounds.draw(ex, Color.White);\n                }\n                if (currentNode.left) {\n                    helper(currentNode.left);\n                }\n                if (currentNode.right) {\n                    helper(currentNode.right);\n                }\n            }\n        };\n        helper(this.root);\n    }\n}\n\n;// ./Math/ray.ts\n/**\n * A 2D ray that can be cast into the scene to do collision detection\n */\nclass Ray {\n    /**\n     * @param pos The starting position for the ray\n     * @param dir The vector indicating the direction of the ray\n     */\n    constructor(pos, dir) {\n        this.pos = pos;\n        this.dir = dir.normalize();\n    }\n    /**\n     * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\n     * This number indicates the mathematical intersection time.\n     * @param line  The line to test\n     */\n    intersect(line) {\n        const numerator = line.begin.sub(this.pos);\n        // Test is line and ray are parallel and non intersecting\n        if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\n            return -1;\n        }\n        // Lines are parallel\n        const divisor = this.dir.cross(line.getSlope());\n        if (divisor === 0) {\n            return -1;\n        }\n        const t = numerator.cross(line.getSlope()) / divisor;\n        if (t >= 0) {\n            const u = numerator.cross(this.dir) / divisor / line.getLength();\n            if (u >= 0 && u <= 1) {\n                return t;\n            }\n        }\n        return -1;\n    }\n    intersectPoint(line) {\n        const time = this.intersect(line);\n        if (time < 0) {\n            return null;\n        }\n        return this.getPoint(time);\n    }\n    /**\n     * Returns the point of intersection given the intersection time\n     */\n    getPoint(time) {\n        return this.pos.add(this.dir.scale(time));\n    }\n}\n\n;// ./Collision/Detection/DynamicTreeCollisionProcessor.ts\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Responsible for performing the collision broadphase (locating potential collisions) and\n * the narrowphase (actual collision contacts)\n */\nclass DynamicTreeCollisionProcessor {\n    constructor(_config) {\n        this._config = _config;\n        this._pairs = new Set();\n        this._collisionPairCache = [];\n        this._colliders = [];\n        this._dynamicCollisionTree = new DynamicTree(_config.dynamicTree);\n    }\n    getColliders() {\n        return this._colliders;\n    }\n    query(pointOrBounds) {\n        const results = [];\n        if (pointOrBounds instanceof BoundingBox) {\n            this._dynamicCollisionTree.query({\n                id: createId('collider', -1),\n                owner: null,\n                bounds: pointOrBounds\n            }, (other) => {\n                results.push(other);\n                return false;\n            });\n        }\n        else {\n            this._dynamicCollisionTree.query({\n                id: createId('collider', -1),\n                owner: null,\n                bounds: new BoundingBox(pointOrBounds.x, pointOrBounds.y, pointOrBounds.x, pointOrBounds.y)\n            }, (other) => {\n                results.push(other);\n                return false;\n            });\n        }\n        return results;\n    }\n    rayCast(ray, options) {\n        var _a, _b, _c;\n        const results = [];\n        const maxDistance = (_a = options === null || options === void 0 ? void 0 : options.maxDistance) !== null && _a !== void 0 ? _a : Infinity;\n        const collisionGroup = options === null || options === void 0 ? void 0 : options.collisionGroup;\n        const collisionMask = !collisionGroup ? (_b = options === null || options === void 0 ? void 0 : options.collisionMask) !== null && _b !== void 0 ? _b : CollisionGroup.All.category : collisionGroup.category;\n        const searchAllColliders = (_c = options === null || options === void 0 ? void 0 : options.searchAllColliders) !== null && _c !== void 0 ? _c : false;\n        this._dynamicCollisionTree.rayCastQuery(ray, maxDistance, (collider) => {\n            const owner = collider.owner;\n            const maybeBody = owner.get(BodyComponent);\n            if ((options === null || options === void 0 ? void 0 : options.ignoreCollisionGroupAll) && maybeBody.group === CollisionGroup.All) {\n                return false;\n            }\n            const canCollide = (collisionMask & maybeBody.group.category) !== 0;\n            // Early exit if not the right group\n            if ((maybeBody === null || maybeBody === void 0 ? void 0 : maybeBody.group) && !canCollide) {\n                return false;\n            }\n            const hit = collider.rayCast(ray, maxDistance);\n            if (hit) {\n                if (options === null || options === void 0 ? void 0 : options.filter) {\n                    if (options.filter(hit)) {\n                        results.push(hit);\n                        if (!searchAllColliders) {\n                            // returning true exits the search\n                            return true;\n                        }\n                    }\n                }\n                else {\n                    results.push(hit);\n                    if (!searchAllColliders) {\n                        // returning true exits the search\n                        return true;\n                    }\n                }\n            }\n            return false;\n        });\n        return results;\n    }\n    /**\n     * Tracks a physics body for collisions\n     */\n    track(target) {\n        if (!target) {\n            Logger.getInstance().warn('Cannot track null collider');\n            return;\n        }\n        if (target instanceof CompositeCollider) {\n            const colliders = target.getColliders();\n            for (const c of colliders) {\n                c.owner = target.owner;\n                this._colliders.push(c);\n                this._dynamicCollisionTree.trackCollider(c);\n            }\n        }\n        else {\n            this._colliders.push(target);\n            this._dynamicCollisionTree.trackCollider(target);\n        }\n    }\n    /**\n     * Untracks a physics body\n     */\n    untrack(target) {\n        if (!target) {\n            Logger.getInstance().warn('Cannot untrack a null collider');\n            return;\n        }\n        if (target instanceof CompositeCollider) {\n            const colliders = target.getColliders();\n            for (const c of colliders) {\n                const index = this._colliders.indexOf(c);\n                if (index !== -1) {\n                    this._colliders.splice(index, 1);\n                }\n                this._dynamicCollisionTree.untrackCollider(c);\n            }\n        }\n        else {\n            const index = this._colliders.indexOf(target);\n            if (index !== -1) {\n                this._colliders.splice(index, 1);\n            }\n            this._dynamicCollisionTree.untrackCollider(target);\n        }\n    }\n    _pairExists(colliderA, colliderB) {\n        // if the collision pair has been calculated already short circuit\n        const hash = Pair.calculatePairHash(colliderA.id, colliderB.id);\n        return this._pairs.has(hash);\n    }\n    /**\n     * Detects potential collision pairs in a broadphase approach with the dynamic AABB tree strategy\n     */\n    broadphase(targets, elapsed, stats) {\n        const seconds = elapsed / 1000;\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\n        const potentialColliders = targets.filter((other) => {\n            var _a, _b;\n            const body = (_a = other.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n            return ((_b = other.owner) === null || _b === void 0 ? void 0 : _b.isActive) && body.collisionType !== CollisionType.PreventCollision;\n        });\n        // clear old list of collision pairs\n        this._collisionPairCache = [];\n        this._pairs.clear();\n        // check for normal collision pairs\n        let collider;\n        for (let j = 0, l = potentialColliders.length; j < l; j++) {\n            collider = potentialColliders[j];\n            // Query the collision tree for potential colliders\n            this._dynamicCollisionTree.query(collider, (other) => {\n                if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\n                    const pair = new Pair(collider, other);\n                    this._pairs.add(pair.id);\n                    this._collisionPairCache.push(pair);\n                }\n                // Always return false, to query whole tree. Returning true in the query method stops searching\n                return false;\n            });\n        }\n        if (stats) {\n            stats.physics.pairs = this._collisionPairCache.length;\n        }\n        // Check dynamic tree for fast moving objects\n        // Fast moving objects are those moving at least there smallest bound per frame\n        if (this._config.continuous.checkForFastBodies) {\n            for (const collider of potentialColliders) {\n                const body = collider.owner.get(BodyComponent);\n                // Skip non-active objects. Does not make sense on other collision types\n                if (body.collisionType !== CollisionType.Active) {\n                    continue;\n                }\n                // Maximum travel distance next frame\n                const updateDistance = body.vel.magnitude * seconds + // velocity term\n                    body.acc.magnitude * 0.5 * seconds * seconds; // acc term\n                // Find the minimum dimension\n                const minDimension = Math.min(collider.bounds.height, collider.bounds.width);\n                if (this._config.continuous.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\n                    if (stats) {\n                        stats.physics.fastBodies++;\n                    }\n                    // start with the oldPos because the integration for actors has already happened\n                    // objects resting on a surface may be slightly penetrating in the current position\n                    const updateVec = body.globalPos.sub(body.oldPos);\n                    const centerPoint = collider.center;\n                    const furthestPoint = collider.getFurthestPoint(body.vel);\n                    const origin = furthestPoint.sub(updateVec);\n                    const ray = new Ray(origin, body.vel);\n                    // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\n                    ray.pos = ray.pos.add(ray.dir.scale(-2 * this._config.continuous.surfaceEpsilon));\n                    let minCollider;\n                    let minTranslate = new Vector(Infinity, Infinity);\n                    this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + this._config.continuous.surfaceEpsilon * 2, (other) => {\n                        if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\n                            const hit = other.rayCast(ray, updateDistance + this._config.continuous.surfaceEpsilon * 10);\n                            if (hit) {\n                                const translate = hit.point.sub(origin);\n                                if (translate.magnitude < minTranslate.magnitude) {\n                                    minTranslate = translate;\n                                    minCollider = other;\n                                }\n                            }\n                        }\n                        return false;\n                    });\n                    if (minCollider && Vector.isValid(minTranslate)) {\n                        const pair = new Pair(collider, minCollider);\n                        if (!this._pairs.has(pair.id)) {\n                            this._pairs.add(pair.id);\n                            this._collisionPairCache.push(pair);\n                        }\n                        // move the fast moving object to the other body\n                        // need to push into the surface by ex.Physics.surfaceEpsilon\n                        const shift = centerPoint.sub(furthestPoint);\n                        body.globalPos = origin\n                            .add(shift)\n                            .add(minTranslate)\n                            .add(ray.dir.scale(10 * this._config.continuous.surfaceEpsilon)); // needed to push the shape slightly into contact\n                        collider.update(body.transform.get());\n                        if (stats) {\n                            stats.physics.fastBodyCollisions++;\n                        }\n                    }\n                }\n            }\n        }\n        // return cache\n        return this._collisionPairCache;\n    }\n    /**\n     * Applies narrow phase on collision pairs to find actual area intersections\n     * Adds actual colliding pairs to stats' Frame data\n     */\n    narrowphase(pairs, stats) {\n        let contacts = [];\n        for (let i = 0; i < pairs.length; i++) {\n            const newContacts = pairs[i].collide();\n            contacts = contacts.concat(newContacts);\n            if (stats && newContacts.length > 0) {\n                for (const c of newContacts) {\n                    stats.physics.contacts.set(c.id, c);\n                }\n            }\n        }\n        if (stats) {\n            stats.physics.collisions += contacts.length;\n        }\n        return contacts;\n    }\n    /**\n     * Update the dynamic tree positions\n     */\n    update(targets) {\n        let updated = 0;\n        const len = targets.length;\n        for (let i = 0; i < len; i++) {\n            if (this._dynamicCollisionTree.updateCollider(targets[i])) {\n                updated++;\n            }\n        }\n        return updated;\n    }\n    debug(ex) {\n        this._dynamicCollisionTree.debug(ex);\n    }\n}\n\n;// ./Collision/Colliders/Collider.ts\n\n\n\n/**\n * A collision collider specifies the geometry that can detect when other collision colliders intersect\n * for the purposes of colliding 2 objects in excalibur.\n */\nclass Collider {\n    constructor() {\n        this.id = createId('collider', Collider._ID++);\n        /**\n         * Composite collider if any this collider is attached to\n         *\n         * **WARNING** do not tamper with this property\n         */\n        this.composite = null;\n        this.events = new EventEmitter();\n        /**\n         * Pixel offset of the collision collider relative to the collider, by default (0, 0) meaning the collider is positioned\n         * on top of the collider.\n         */\n        this.offset = Vector.Zero;\n    }\n    /**\n     * Returns a boolean indicating whether this body collided with\n     * or was in stationary contact with\n     * the body of the other {@apilink Collider}\n     */\n    touching(other) {\n        const contact = this.collide(other);\n        if (contact) {\n            return true;\n        }\n        return false;\n    }\n}\nCollider._ID = 0;\n\n;// ./Collision/SolverStrategy.ts\n/**\n * Possible collision resolution strategies\n *\n * The default is {@apilink SolverStrategy.Arcade} which performs simple axis aligned arcade style physics. This is useful for things\n * like platformers or top down games.\n *\n * More advanced rigid body physics are enabled by setting {@apilink SolverStrategy.Realistic} which allows for complicated\n * simulated physical interactions.\n */\nvar SolverStrategy;\n(function (SolverStrategy) {\n    SolverStrategy[\"Arcade\"] = \"arcade\";\n    SolverStrategy[\"Realistic\"] = \"realistic\";\n})(SolverStrategy || (SolverStrategy = {}));\n\n;// ./Collision/Solver/ContactBias.ts\n/**\n * Tells the Arcade collision solver to prefer certain contacts over others\n */\nvar ContactSolveBias;\n(function (ContactSolveBias) {\n    ContactSolveBias[\"None\"] = \"none\";\n    ContactSolveBias[\"VerticalFirst\"] = \"vertical-first\";\n    ContactSolveBias[\"HorizontalFirst\"] = \"horizontal-first\";\n})(ContactSolveBias || (ContactSolveBias = {}));\n/**\n * Vertical First contact solve bias Used by the {@apilink ArcadeSolver} to sort contacts\n */\nconst VerticalFirst = {\n    vertical: 1,\n    horizontal: 2\n};\n/**\n * Horizontal First contact solve bias Used by the {@apilink ArcadeSolver} to sort contacts\n */\nconst HorizontalFirst = {\n    horizontal: 1,\n    vertical: 2\n};\n/**\n * None value, {@apilink ArcadeSolver} sorts contacts using distance by default\n */\nconst None = {\n    horizontal: 0,\n    vertical: 0\n};\n\n;// ./Collision/Detection/SpatialPartitionStrategy.ts\n/**\n * Possible collision resolution strategies\n *\n * The default is {@apilink SolverStrategy.Arcade} which performs simple axis aligned arcade style physics. This is useful for things\n * like platformers or top down games.\n *\n * More advanced rigid body physics are enabled by setting {@apilink SolverStrategy.Realistic} which allows for complicated\n * simulated physical interactions.\n */\nvar SpatialPartitionStrategy;\n(function (SpatialPartitionStrategy) {\n    SpatialPartitionStrategy[\"DynamicTree\"] = \"dynamic-tree\";\n    SpatialPartitionStrategy[\"SparseHashGrid\"] = \"sparse-hash-grid\";\n})(SpatialPartitionStrategy || (SpatialPartitionStrategy = {}));\n\n;// ./Collision/PhysicsConfig.ts\n\n\n\n\nconst getDefaultPhysicsConfig = () => ({\n    enabled: true,\n    gravity: vec(0, 0).clone(),\n    solver: SolverStrategy.Arcade,\n    substep: 1,\n    colliders: {\n        compositeStrategy: 'together'\n    },\n    continuous: {\n        checkForFastBodies: true,\n        disableMinimumSpeedForFastBody: false,\n        surfaceEpsilon: 0.1\n    },\n    bodies: {\n        canSleepByDefault: false,\n        sleepEpsilon: 0.07,\n        wakeThreshold: 0.07 * 3,\n        sleepBias: 0.9,\n        defaultMass: 10\n    },\n    spatialPartition: SpatialPartitionStrategy.SparseHashGrid,\n    sparseHashGrid: {\n        size: 100\n    },\n    dynamicTree: {\n        boundsPadding: 5,\n        velocityMultiplier: 2\n    },\n    arcade: {\n        contactSolveBias: ContactSolveBias.None\n    },\n    realistic: {\n        contactSolveBias: ContactSolveBias.None,\n        positionIterations: 3,\n        velocityIterations: 8,\n        slop: 1,\n        steeringFactor: 0.2,\n        warmStart: true\n    }\n});\n\n;// ./Collision/Colliders/CompositeCollider.ts\n\n\n\n\n\n\n\n\n\nclass CompositeCollider extends Collider {\n    /**\n     * Treat composite collider's member colliders as either separate colliders for the purposes of onCollisionStart/onCollision\n     * or as a single collider together.\n     *\n     * This property can be overridden on individual {@apilink CompositeColliders}.\n     *\n     * For composites without gaps or small groups of colliders, you probably want 'together'\n     *\n     * For composites with deliberate gaps, like a platforming level layout, you probably want 'separate'\n     *\n     * Default is 'together' if unset\n     */\n    set compositeStrategy(value) {\n        this._compositeStrategy = value;\n    }\n    get compositeStrategy() {\n        return this._compositeStrategy;\n    }\n    constructor(colliders) {\n        super();\n        this._collisionProcessor = new DynamicTreeCollisionProcessor({\n            ...getDefaultPhysicsConfig()\n        });\n        this._dynamicAABBTree = new DynamicTree({\n            boundsPadding: 5,\n            velocityMultiplier: 2\n        });\n        this._colliders = [];\n        for (const c of colliders) {\n            this.addCollider(c);\n        }\n    }\n    clearColliders() {\n        this._colliders = [];\n    }\n    addCollider(collider) {\n        let colliders;\n        if (collider instanceof CompositeCollider) {\n            colliders = collider.getColliders();\n            colliders.forEach((c) => c.offset.addEqual(collider.offset));\n        }\n        else {\n            colliders = [collider];\n        }\n        // Flatten composites\n        for (const c of colliders) {\n            c.events.pipe(this.events);\n            c.composite = this;\n            this._colliders.push(c);\n            this._collisionProcessor.track(c);\n            this._dynamicAABBTree.trackCollider(c);\n        }\n    }\n    removeCollider(collider) {\n        collider.events.pipe(this.events);\n        collider.composite = null;\n        removeItemFromArray(collider, this._colliders);\n        this._collisionProcessor.untrack(collider);\n        this._dynamicAABBTree.untrackCollider(collider);\n    }\n    getColliders() {\n        return this._colliders;\n    }\n    get worldPos() {\n        var _a, _b;\n        return ((_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero).add(this.offset);\n    }\n    get center() {\n        var _a, _b;\n        return ((_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero).add(this.offset);\n    }\n    get bounds() {\n        var _a, _b;\n        // TODO cache this\n        const colliders = this.getColliders();\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.bounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox().translate(this.worldPos));\n        return results.translate(this.offset);\n    }\n    get localBounds() {\n        var _a, _b;\n        // TODO cache this\n        const colliders = this.getColliders();\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.localBounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox());\n        return results;\n    }\n    get axes() {\n        // TODO cache this\n        const colliders = this.getColliders();\n        let axes = [];\n        for (const collider of colliders) {\n            axes = axes.concat(collider.axes);\n        }\n        return axes;\n    }\n    getFurthestPoint(direction) {\n        const colliders = this.getColliders();\n        const furthestPoints = [];\n        for (const collider of colliders) {\n            furthestPoints.push(collider.getFurthestPoint(direction));\n        }\n        // Pick best point from all colliders\n        let bestPoint = furthestPoints[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (const point of furthestPoints) {\n            const distance = point.dot(direction);\n            if (distance > maxDistance) {\n                bestPoint = point;\n                maxDistance = distance;\n            }\n        }\n        return bestPoint;\n    }\n    getInertia(mass) {\n        const colliders = this.getColliders();\n        let totalInertia = 0;\n        for (const collider of colliders) {\n            totalInertia += collider.getInertia(mass);\n        }\n        return totalInertia;\n    }\n    collide(other) {\n        let otherColliders = [other];\n        if (other instanceof CompositeCollider) {\n            otherColliders = other.getColliders();\n        }\n        const pairs = [];\n        for (const c of otherColliders) {\n            this._dynamicAABBTree.query(c, (potentialCollider) => {\n                pairs.push(new Pair(c, potentialCollider));\n                return false;\n            });\n        }\n        let contacts = [];\n        for (const p of pairs) {\n            contacts = contacts.concat(p.collide());\n        }\n        return contacts;\n    }\n    getClosestLineBetween(other) {\n        const colliders = this.getColliders();\n        const lines = [];\n        if (other instanceof CompositeCollider) {\n            const otherColliders = other.getColliders();\n            for (const colliderA of colliders) {\n                for (const colliderB of otherColliders) {\n                    const maybeLine = colliderA.getClosestLineBetween(colliderB);\n                    if (maybeLine) {\n                        lines.push(maybeLine);\n                    }\n                }\n            }\n        }\n        else {\n            for (const collider of colliders) {\n                const maybeLine = other.getClosestLineBetween(collider);\n                if (maybeLine) {\n                    lines.push(maybeLine);\n                }\n            }\n        }\n        if (lines.length) {\n            let minLength = lines[0].getLength();\n            let minLine = lines[0];\n            for (const line of lines) {\n                const length = line.getLength();\n                if (length < minLength) {\n                    minLength = length;\n                    minLine = line;\n                }\n            }\n            return minLine;\n        }\n        return null;\n    }\n    contains(point) {\n        const colliders = this.getColliders();\n        for (const collider of colliders) {\n            if (collider.contains(point)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    rayCast(ray, max) {\n        const colliders = this.getColliders();\n        const hits = [];\n        for (const collider of colliders) {\n            const hit = collider.rayCast(ray, max);\n            if (hit) {\n                hits.push(hit);\n            }\n        }\n        if (hits.length) {\n            let minHit = hits[0];\n            let minDistance = minHit.point.dot(ray.dir);\n            for (const hit of hits) {\n                const distance = ray.dir.dot(hit.point);\n                if (distance < minDistance) {\n                    minHit = hit;\n                    minDistance = distance;\n                }\n            }\n            return minHit;\n        }\n        return null;\n    }\n    project(axis) {\n        const colliders = this.getColliders();\n        const projections = [];\n        for (const collider of colliders) {\n            const proj = collider.project(axis);\n            if (proj) {\n                projections.push(proj);\n            }\n        }\n        // Merge all proj's on the same axis\n        if (projections.length) {\n            const newProjection = new Projection(projections[0].min, projections[0].max);\n            for (const proj of projections) {\n                newProjection.min = Math.min(proj.min, newProjection.min);\n                newProjection.max = Math.max(proj.max, newProjection.max);\n            }\n            return newProjection;\n        }\n        return null;\n    }\n    update(transform) {\n        if (transform) {\n            const colliders = this.getColliders();\n            for (const collider of colliders) {\n                collider.owner = this.owner;\n                collider.update(transform);\n            }\n        }\n    }\n    debug(ex, color, options) {\n        const colliders = this.getColliders();\n        ex.save();\n        ex.translate(this.offset.x, this.offset.y);\n        for (const collider of colliders) {\n            collider.debug(ex, color, options);\n        }\n        ex.restore();\n    }\n    clone() {\n        const result = new CompositeCollider(this._colliders.map((c) => c.clone()));\n        result.offset = this.offset.clone();\n        return result;\n    }\n}\n\n;// ./Math/line-segment.ts\n\n/**\n * A 2D line segment\n */\nclass LineSegment {\n    /**\n     * @param begin  The starting point of the line segment\n     * @param end  The ending point of the line segment\n     */\n    constructor(begin, end) {\n        this.begin = begin;\n        this.end = end;\n    }\n    clone(dest) {\n        const result = dest || new LineSegment(this.begin.clone(), this.end.clone());\n        result.begin = this.begin.clone(result.begin);\n        result.end = this.end.clone(result.end);\n        return result;\n    }\n    transform(matrix, dest) {\n        const result = dest || new LineSegment(Vector.Zero, Vector.Zero);\n        result.begin = matrix.multiply(this.begin, result.begin);\n        result.end = matrix.multiply(this.end, result.end);\n        return result;\n    }\n    /**\n     * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\n     */\n    get slope() {\n        return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\n    }\n    /**\n     * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\n     */\n    get intercept() {\n        return this.begin.y - this.slope * this.begin.x;\n    }\n    /**\n     * Gets the normal of the line\n     */\n    normal() {\n        if (this._normal) {\n            return this._normal;\n        }\n        return (this._normal = this.end.sub(this.begin).normal());\n    }\n    dir() {\n        if (this._dir) {\n            return this._dir;\n        }\n        return (this._dir = this.end.sub(this.begin));\n    }\n    getPoints() {\n        return [this.begin, this.end];\n    }\n    /**\n     * Returns the slope of the line in the form of a vector of length 1\n     */\n    getSlope() {\n        if (this._slope) {\n            return this._slope;\n        }\n        const begin = this.begin;\n        const end = this.end;\n        const distance = begin.distance(end);\n        return (this._slope = end.sub(begin).scale(1 / distance));\n    }\n    /**\n     * Returns the edge of the line as vector, the length of the vector is the length of the edge\n     */\n    getEdge() {\n        const begin = this.begin;\n        const end = this.end;\n        return end.sub(begin);\n    }\n    /**\n     * Returns the length of the line segment in pixels\n     */\n    getLength() {\n        const begin = this.begin;\n        const end = this.end;\n        const distance = begin.distance(end);\n        return distance;\n    }\n    /**\n     * Returns the midpoint of the edge\n     */\n    get midpoint() {\n        return this.begin.add(this.end).scale(0.5);\n    }\n    /**\n     * Flips the direction of the line segment\n     */\n    flip() {\n        return new LineSegment(this.end, this.begin);\n    }\n    /**\n     * Tests if a given point is below the line, points in the normal direction above the line are considered above.\n     * @param point\n     */\n    below(point) {\n        const above2 = (this.end.x - this.begin.x) * (point.y - this.begin.y) - (this.end.y - this.begin.y) * (point.x - this.begin.x);\n        return above2 >= 0;\n    }\n    /**\n     * Returns the clip point\n     * @param sideVector Vector that traces the line\n     * @param length Length to clip along side\n     */\n    clip(sideVector, length, normalize = true) {\n        let dir = sideVector;\n        if (normalize) {\n            dir = dir.normalize();\n        }\n        const near = dir.dot(this.begin) - length;\n        const far = dir.dot(this.end) - length;\n        const results = [];\n        if (near <= 0) {\n            results.push(this.begin);\n        }\n        if (far <= 0) {\n            results.push(this.end);\n        }\n        if (near * far < 0) {\n            const clipTime = near / (near - far);\n            results.push(this.begin.add(this.end.sub(this.begin).scale(clipTime)));\n        }\n        if (results.length !== 2) {\n            return null;\n        }\n        return new LineSegment(results[0], results[1]);\n    }\n    /**\n     * Find the perpendicular distance from the line to a point\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n     * @param point\n     */\n    distanceToPoint(point, signed = false) {\n        const x0 = point.x;\n        const y0 = point.y;\n        const l = this.getLength();\n        const dy = this.end.y - this.begin.y;\n        const dx = this.end.x - this.begin.x;\n        const distance = (dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\n        return signed ? distance : Math.abs(distance);\n    }\n    /**\n     * Find the perpendicular line from the line to a point\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n     * (a - p) - ((a - p) * n)n\n     * a is a point on the line\n     * p is the arbitrary point above the line\n     * n is a unit vector in direction of the line\n     * @param point\n     */\n    findVectorToPoint(point) {\n        const aMinusP = this.begin.sub(point);\n        const n = this.getSlope();\n        return aMinusP.sub(n.scale(aMinusP.dot(n)));\n    }\n    /**\n     * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\n     * a new point with the calculated Y value and vice-versa.\n     * @param x The known X value of the target point\n     * @param y The known Y value of the target point\n     * @returns A new point with the other calculated axis value\n     */\n    findPoint(x = null, y = null) {\n        const m = this.slope;\n        const b = this.intercept;\n        if (x !== null) {\n            return new Vector(x, m * x + b);\n        }\n        else if (y !== null) {\n            return new Vector((y - b) / m, y);\n        }\n        else {\n            throw new Error('You must provide an X or a Y value');\n        }\n    }\n    /**\n     * @see http://stackoverflow.com/a/11908158/109458\n     */\n    hasPoint() {\n        let currPoint;\n        let threshold = 0;\n        if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\n            currPoint = new Vector(arguments[0], arguments[1]);\n            threshold = arguments[2] || 0;\n        }\n        else if (arguments[0] instanceof Vector) {\n            currPoint = arguments[0];\n            threshold = arguments[1] || 0;\n        }\n        else {\n            throw 'Could not determine the arguments for Vector.hasPoint';\n        }\n        const dxc = currPoint.x - this.begin.x;\n        const dyc = currPoint.y - this.begin.y;\n        const dx1 = this.end.x - this.begin.x;\n        const dy1 = this.end.y - this.begin.y;\n        const cross = dxc * dy1 - dyc * dx1;\n        // check whether point lines on the line\n        if (Math.abs(cross) > threshold) {\n            return false;\n        }\n        // check whether point lies in-between start and end\n        if (Math.abs(dx1) >= Math.abs(dy1)) {\n            return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\n        }\n        else {\n            return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\n        }\n    }\n}\n\n;// ./Collision/Colliders/ClosestLineJumpTable.ts\n\n\n\n\n/**\n * Finds the closest line segment between two given line segments.\n */\nfunction ClosestLine(line1, line2) {\n    // https://math.stackexchange.com/questions/1993953/closest-points-between-2-lines-in-2d\n    const EPSILON = 1e-9;\n    const line1Dir = line1.dir();\n    const line2Dir = line2.dir();\n    const d1Squared = line1Dir.dot(line1Dir);\n    const d2Squared = line2Dir.dot(line2Dir);\n    if (d1Squared < EPSILON && d2Squared < EPSILON) {\n        return new LineSegment(line1.begin, line2.begin);\n    }\n    if (d1Squared < EPSILON) {\n        const t = clamp(line2Dir.dot(line1.begin.sub(line2.begin)) / d2Squared, 0, 1);\n        const closestPoint = line2.begin.add(line2Dir.scale(t));\n        return new LineSegment(line1.begin, closestPoint);\n    }\n    if (d2Squared < EPSILON) {\n        const t = clamp(line1Dir.dot(line2.begin.sub(line1.begin)) / d1Squared, 0, 1);\n        const closestPoint = line1.begin.add(line1Dir.scale(t));\n        return new LineSegment(closestPoint, line2.begin);\n    }\n    const r = line1.begin.sub(line2.begin);\n    const a = d1Squared;\n    const e = d2Squared;\n    const f = line2Dir.dot(r);\n    const denom = a * e - Math.pow(line1Dir.dot(line2Dir), 2);\n    let s = 0;\n    let t = 0;\n    if (Math.abs(denom) > EPSILON) {\n        s = clamp((line1Dir.dot(line2Dir) * f - e * line1Dir.dot(r)) / denom, 0, 1);\n    }\n    else {\n        // lines are parallel\n        s = clamp(line1Dir.dot(r) / a, 0, 1);\n    }\n    if (Math.abs(e) > EPSILON) {\n        t = clamp((line1Dir.dot(line2Dir) * s + f) / e, 0, 1);\n    }\n    else {\n        // line2 is a degenerate point\n        t = 0;\n    }\n    const closestPointOnLine1 = line1.begin.add(line1Dir.scale(s));\n    const closestPointOnLine2 = line2.begin.add(line2Dir.scale(t));\n    return new LineSegment(closestPointOnLine1, closestPointOnLine2);\n}\nconst ClosestLineJumpTable = {\n    PolygonPolygonClosestLine(polygonA, polygonB) {\n        const aSides = polygonA.getSides();\n        const bSides = polygonB.getSides();\n        let minDistance = Number.MAX_VALUE;\n        let closestLine = null;\n        for (let i = 0; i < aSides.length; i++) {\n            for (let j = 0; j < bSides.length; j++) {\n                const line = ClosestLine(aSides[i], bSides[j]);\n                const distance = line.getLength();\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    closestLine = line;\n                }\n            }\n        }\n        return closestLine;\n    },\n    PolygonEdgeClosestLine(polygon, edge) {\n        // Find the 2 closest faces on each polygon\n        const otherWorldPos = edge.worldPos;\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection);\n        const thisPoint = polygon.rayCast(rayTowardsOther).point.add(rayTowardsOther.dir.scale(0.1));\n        const thisFace = polygon.getClosestFace(thisPoint);\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n        const edgeLine = edge.asLine();\n        return ClosestLine(thisFace.face, edgeLine);\n    },\n    PolygonCircleClosestLine(polygon, circle) {\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n        // Find the 2 closest faces on each polygon\n        const otherWorldPos = circle.worldPos;\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection.normalize());\n        const thisPoint = polygon.rayCast(rayTowardsOther).point.add(rayTowardsOther.dir.scale(0.1));\n        const thisFace = polygon.getClosestFace(thisPoint);\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        const p0 = thisFace.face.begin;\n        const u = thisFace.face.getEdge();\n        // Time of minimum distance\n        let t = (u.x * (otherWorldPos.x - p0.x) + u.y * (otherWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n        // If time of minimum is past the edge clamp\n        if (t > 1) {\n            t = 1;\n        }\n        else if (t < 0) {\n            t = 0;\n        }\n        // Minimum distance\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - otherWorldPos.x, 2) + Math.pow(p0.y + u.y * t - otherWorldPos.y, 2)) - circle.radius;\n        const circlex = ((p0.x + u.x * t - otherWorldPos.x) * circle.radius) / (circle.radius + d);\n        const circley = ((p0.y + u.y * t - otherWorldPos.y) * circle.radius) / (circle.radius + d);\n        return new LineSegment(u.scale(t).add(p0), new Vector(otherWorldPos.x + circlex, otherWorldPos.y + circley));\n    },\n    CircleCircleClosestLine(circleA, circleB) {\n        // Find the 2 closest faces on each polygon\n        const otherWorldPos = circleB.worldPos;\n        const otherDirection = otherWorldPos.sub(circleA.worldPos);\n        const thisWorldPos = circleA.worldPos;\n        const thisDirection = thisWorldPos.sub(circleB.worldPos);\n        const rayTowardsOther = new Ray(circleA.worldPos, otherDirection);\n        const rayTowardsThis = new Ray(circleB.worldPos, thisDirection);\n        const thisPoint = circleA.rayCast(rayTowardsOther);\n        const otherPoint = circleB.rayCast(rayTowardsThis);\n        return new LineSegment(thisPoint.point, otherPoint.point);\n    },\n    CircleEdgeClosestLine(circle, edge) {\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n        const circleWorldPos = circle.worldPos;\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        const edgeLine = edge.asLine();\n        const edgeStart = edgeLine.begin;\n        const edgeVector = edgeLine.getEdge();\n        const p0 = edgeStart;\n        const u = edgeVector;\n        // Time of minimum distance\n        let t = (u.x * (circleWorldPos.x - p0.x) + u.y * (circleWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n        // If time of minimum is past the edge clamp to edge\n        if (t > 1) {\n            t = 1;\n        }\n        else if (t < 0) {\n            t = 0;\n        }\n        // Minimum distance\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - circleWorldPos.x, 2) + Math.pow(p0.y + u.y * t - circleWorldPos.y, 2)) - circle.radius;\n        const circlex = ((p0.x + u.x * t - circleWorldPos.x) * circle.radius) / (circle.radius + d);\n        const circley = ((p0.y + u.y * t - circleWorldPos.y) * circle.radius) / (circle.radius + d);\n        return new LineSegment(u.scale(t).add(p0), new Vector(circleWorldPos.x + circlex, circleWorldPos.y + circley));\n    },\n    EdgeEdgeClosestLine(edgeA, edgeB) {\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        const edgeLineA = edgeA.asLine();\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n        const edgeLineB = edgeB.asLine();\n        return ClosestLine(edgeLineA, edgeLineB);\n    }\n};\n\n;// ./Collision/Colliders/CircleCollider.ts\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This is a circle collider for the excalibur rigid body physics simulation\n */\nclass CircleCollider extends Collider {\n    get worldPos() {\n        return this._globalMatrix.getPosition();\n    }\n    /**\n     * Get the radius of the circle\n     */\n    get radius() {\n        var _a;\n        if (this._radius) {\n            return this._radius;\n        }\n        const tx = this._transform;\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\n        return (this._radius = this._naturalRadius * Math.min(scale.x, scale.y));\n    }\n    /**\n     * Set the radius of the circle\n     */\n    set radius(val) {\n        var _a;\n        const tx = this._transform;\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\n        this._naturalRadius = val / Math.min(scale.x, scale.y);\n        this._localBoundsDirty = true;\n        this._radius = val;\n    }\n    constructor(options) {\n        super();\n        /**\n         * Position of the circle relative to the collider, by default (0, 0).\n         */\n        this.offset = Vector.Zero;\n        this._globalMatrix = AffineMatrix.identity();\n        this._localBoundsDirty = true;\n        this.offset = options.offset || Vector.Zero;\n        this.radius = options.radius || 0;\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\n    }\n    /**\n     * Returns a clone of this shape, not associated with any collider\n     */\n    clone() {\n        return new CircleCollider({\n            offset: this.offset.clone(),\n            radius: this.radius\n        });\n    }\n    /**\n     * Get the center of the collider in world coordinates\n     */\n    get center() {\n        return this._globalMatrix.getPosition();\n    }\n    /**\n     * Tests if a point is contained in this collider\n     */\n    contains(point) {\n        var _a, _b;\n        const pos = (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : this.offset;\n        const distance = pos.distance(point);\n        if (distance <= this.radius) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Casts a ray at the Circle collider and returns the nearest point of collision\n     * @param ray\n     */\n    rayCast(ray, max = Infinity) {\n        var _a, _b;\n        // https://en.wikipedia.org/wiki/Intersection_(geometry)#A_line_and_a_circle\n        const c = this.center;\n        const dir = ray.dir;\n        const orig = ray.pos;\n        const u = c.sub(orig);\n        const u1 = dir.scale(u.dot(dir));\n        const u2 = u.sub(u1);\n        const d = u2.magnitude;\n        if (d > this.radius) {\n            return null;\n        }\n        else {\n            // tangent case\n            let toi = 0;\n            if (approximatelyEqual(d, this.radius, 0.0001)) {\n                toi = -dir.dot(orig.sub(c));\n                if (toi > 0 && toi < max) {\n                    const point = ray.getPoint(toi);\n                    return {\n                        point,\n                        normal: point.sub(c).normalize(),\n                        collider: this,\n                        body: (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent),\n                        distance: toi\n                    };\n                }\n                return null;\n            }\n            else {\n                // two point\n                const discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\n                const toi1 = -dir.dot(orig.sub(c)) + discriminant;\n                const toi2 = -dir.dot(orig.sub(c)) - discriminant;\n                const positiveToi = [];\n                if (toi1 >= 0) {\n                    positiveToi.push(toi1);\n                }\n                if (toi2 >= 0) {\n                    positiveToi.push(toi2);\n                }\n                const minToi = Math.min(...positiveToi);\n                if (minToi <= max) {\n                    const point = ray.getPoint(minToi);\n                    return {\n                        point,\n                        normal: point.sub(c).normalize(),\n                        collider: this,\n                        body: (_b = this.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent),\n                        distance: minToi\n                    };\n                }\n                return null;\n            }\n        }\n    }\n    getClosestLineBetween(shape) {\n        if (shape instanceof CircleCollider) {\n            return ClosestLineJumpTable.CircleCircleClosestLine(this, shape);\n        }\n        else if (shape instanceof PolygonCollider) {\n            return ClosestLineJumpTable.PolygonCircleClosestLine(shape, this).flip();\n        }\n        else if (shape instanceof EdgeCollider) {\n            return ClosestLineJumpTable.CircleEdgeClosestLine(this, shape).flip();\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    collide(collider) {\n        if (collider instanceof CircleCollider) {\n            return CollisionJumpTable.CollideCircleCircle(this, collider);\n        }\n        else if (collider instanceof PolygonCollider) {\n            return CollisionJumpTable.CollideCirclePolygon(this, collider);\n        }\n        else if (collider instanceof EdgeCollider) {\n            return CollisionJumpTable.CollideCircleEdge(this, collider);\n        }\n        else {\n            throw new Error(`Circle could not collide with unknown CollisionShape ${typeof collider}`);\n        }\n    }\n    /**\n     * Find the point on the collider furthest in the direction specified\n     */\n    getFurthestPoint(direction) {\n        return this.center.add(direction.normalize().scale(this.radius));\n    }\n    /**\n     * Find the local point on the shape in the direction specified\n     * @param direction\n     */\n    getFurthestLocalPoint(direction) {\n        const dir = direction.normalize();\n        return dir.scale(this.radius);\n    }\n    /**\n     * Get the axis aligned bounding box for the circle collider in world coordinates\n     */\n    get bounds() {\n        return this.localBounds.transform(this._globalMatrix);\n    }\n    /**\n     * Get the axis aligned bounding box for the circle collider in local coordinates\n     */\n    get localBounds() {\n        if (this._localBoundsDirty) {\n            this._localBounds = new BoundingBox(-this._naturalRadius, -this._naturalRadius, +this._naturalRadius, +this._naturalRadius);\n            this._localBoundsDirty = false;\n        }\n        return this._localBounds;\n    }\n    /**\n     * Get axis not implemented on circles, since there are infinite axis in a circle\n     */\n    get axes() {\n        return [];\n    }\n    /**\n     * Returns the moment of inertia of a circle given it's mass\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n     */\n    getInertia(mass) {\n        return (mass * this.radius * this.radius) / 2;\n    }\n    /* istanbul ignore next */\n    update(transform) {\n        var _a;\n        this._transform = transform;\n        const globalMat = (_a = transform.matrix) !== null && _a !== void 0 ? _a : this._globalMatrix;\n        globalMat.clone(this._globalMatrix);\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\n        this._radius = undefined;\n    }\n    /**\n     * Project the circle along a specified axis\n     */\n    project(axis) {\n        const scalars = [];\n        const point = this.center;\n        const dotProduct = point.dot(axis);\n        scalars.push(dotProduct);\n        scalars.push(dotProduct + this.radius);\n        scalars.push(dotProduct - this.radius);\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n    }\n    debug(ex, color, options) {\n        var _a, _b, _c, _d;\n        const { lineWidth } = { ...{ lineWidth: 1 }, ...options };\n        const tx = this._transform;\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\n        const pos = (_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero;\n        ex.save();\n        ex.translate(pos.x, pos.y);\n        ex.rotate(rotation);\n        ex.scale(scale.x, scale.y);\n        ex.drawCircle((_d = this.offset) !== null && _d !== void 0 ? _d : Vector.Zero, this._naturalRadius, Color.Transparent, color, lineWidth);\n        ex.restore();\n    }\n}\n\n;// ./Collision/Detection/CollisionContact.ts\n\n\n\n/**\n * Collision contacts are used internally by Excalibur to resolve collision between colliders. This\n * Pair prevents collisions from being evaluated more than one time\n */\nclass CollisionContact {\n    constructor(colliderA, colliderB, mtv, normal, tangent, points, localPoints, info) {\n        var _a, _b, _c, _d, _e, _f;\n        this._canceled = false;\n        this.bodyA = null;\n        this.bodyB = null;\n        this.colliderA = colliderA;\n        this.colliderB = colliderB;\n        this.mtv = mtv;\n        this.normal = normal;\n        this.tangent = tangent;\n        this.points = points;\n        this.localPoints = localPoints;\n        this.info = info;\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\n        if (colliderA.composite || colliderB.composite) {\n            // Add on the parent composite pair for start/end contact if 'together\n            const colliderAId = ((_a = colliderA.composite) === null || _a === void 0 ? void 0 : _a.compositeStrategy) === 'separate' ? colliderA.id : (_c = (_b = colliderA.composite) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : colliderA.id;\n            const colliderBId = ((_d = colliderB.composite) === null || _d === void 0 ? void 0 : _d.compositeStrategy) === 'separate' ? colliderB.id : (_f = (_e = colliderB.composite) === null || _e === void 0 ? void 0 : _e.id) !== null && _f !== void 0 ? _f : colliderB.id;\n            this.id += '|' + Pair.calculatePairHash(colliderAId, colliderBId);\n        }\n        if (this.colliderA.owner) {\n            this.bodyA = this.colliderA.owner.get(BodyComponent);\n        }\n        if (this.colliderB.owner) {\n            this.bodyB = this.colliderB.owner.get(BodyComponent);\n        }\n    }\n    /**\n     * Match contact awake state, except if body's are Fixed\n     */\n    matchAwake() {\n        const bodyA = this.bodyA;\n        const bodyB = this.bodyB;\n        if (bodyA && bodyB) {\n            if (bodyA.isSleeping !== bodyB.isSleeping) {\n                if (bodyA.isSleeping && bodyA.collisionType !== CollisionType.Fixed && bodyB.sleepMotion >= bodyA.wakeThreshold) {\n                    bodyA.isSleeping = false;\n                }\n                if (bodyB.isSleeping && bodyB.collisionType !== CollisionType.Fixed && bodyA.sleepMotion >= bodyB.wakeThreshold) {\n                    bodyB.isSleeping = false;\n                }\n            }\n        }\n    }\n    isCanceled() {\n        return this._canceled;\n    }\n    cancel() {\n        this._canceled = true;\n    }\n    /**\n     * Biases the contact so that the given collider is colliderA\n     */\n    bias(collider) {\n        if (collider !== this.colliderA && collider !== this.colliderB) {\n            throw new Error('Collider must be either colliderA or colliderB from this contact');\n        }\n        if (collider === this.colliderA) {\n            return this;\n        }\n        const colliderA = this.colliderA;\n        const colliderB = this.colliderB;\n        this.colliderB = colliderA;\n        this.colliderA = colliderB;\n        this.mtv = this.mtv.negate();\n        this.normal = this.normal.negate();\n        this.tangent = this.tangent.negate();\n        return this;\n    }\n}\n\n;// ./Collision/Colliders/SeparatingAxis.ts\n\n\n\n\n/**\n * Specific information about a contact and it's separation\n */\nclass SeparationInfo {\n    constructor() {\n        /**\n         * Axis of separation from the collider's perspective\n         */\n        this.axis = vec(0, 0);\n        /**\n         * Local axis of separation from the collider's perspective\n         */\n        this.localAxis = vec(0, 0);\n        /**\n         * Side of separation (reference) from the collider's perspective\n         */\n        this.side = new LineSegment(vec(0, 0), vec(0, 0));\n        /**\n         * Local side of separation (reference) from the collider's perspective\n         */\n        this.localSide = new LineSegment(vec(0, 0), vec(0, 0));\n        /**\n         * Point on collider B (incident point)\n         */\n        this.point = vec(0, 0);\n        /**\n         * Local point on collider B (incident point)\n         */\n        this.localPoint = vec(0, 0);\n    }\n}\nclass SeparatingAxis {\n    static findPolygonPolygonSeparation(polyA, polyB) {\n        // if polyB has 0 scale we need to hop back to degenerate separation\n        if (polyB.transform.matrix.determinant() === 0) {\n            return SeparatingAxis.findPolygonPolygonSeparationDegenerate(polyA, polyB);\n        }\n        // Multi contact from SAT\n        // https://gamedev.stackexchange.com/questions/111390/multiple-contacts-for-sat-collision-detection\n        // do a SAT test to find a min axis if it exists\n        let bestSeparation = -Number.MAX_VALUE;\n        let bestSideIndex = -1;\n        let localPoint;\n        // Work inside polyB reference frame\n        // inv polyB converts to local space from polyA world space\n        const toPolyBSpace = polyB.transform.inverse.multiply(polyA.transform.matrix, SeparatingAxis._SCRATCH_MATRIX);\n        const toPolyBSpaceRotation = toPolyBSpace.getRotation();\n        const normalsA = polyA.normals;\n        const pointsA = polyA.points;\n        const pointsB = polyB.points;\n        for (let pointsAIndex = 0; pointsAIndex < pointsA.length; pointsAIndex++) {\n            const normal = normalsA[pointsAIndex].rotate(toPolyBSpaceRotation, SeparatingAxis._ZERO, SeparatingAxis._SCRATCH_NORMAL);\n            const point = toPolyBSpace.multiply(pointsA[pointsAIndex], SeparatingAxis._SCRATCH_POINT);\n            // For every point in polyB\n            // We want to see how much overlap there is on the axis provided by the normal\n            // We want to find the minimum overlap among all points\n            let smallestPointDistance = Number.MAX_VALUE;\n            let smallestLocalPoint;\n            for (let pointsBIndex = 0; pointsBIndex < pointsB.length; pointsBIndex++) {\n                const distance = normal.dot(pointsB[pointsBIndex].sub(point, SeparatingAxis._SCRATCH_SUB_POINT));\n                if (distance < smallestPointDistance) {\n                    smallestPointDistance = distance;\n                    smallestLocalPoint = pointsB[pointsBIndex];\n                }\n            }\n            // We take the maximum overlap as the separation between the\n            // A negative separation means there were no gaps between the two shapes\n            if (smallestPointDistance > bestSeparation) {\n                bestSeparation = smallestPointDistance;\n                bestSideIndex = pointsAIndex;\n                localPoint = smallestLocalPoint;\n            }\n        }\n        // TODO can we avoid applying world space transforms?\n        const bestSide2 = (bestSideIndex + 1) % pointsA.length;\n        const separationInfo = SeparatingAxis.SeparationPool.get();\n        separationInfo.collider = polyA;\n        separationInfo.separation = bestSeparation;\n        if (bestSeparation > 0) {\n            // early out because if separation is > 0 then no local point\n            return separationInfo;\n        }\n        normalsA[bestSideIndex].clone(separationInfo.localAxis);\n        normalsA[bestSideIndex].rotate(polyA.transform.rotation, SeparatingAxis._ZERO, separationInfo.axis);\n        polyA.transform.matrix.multiply(pointsA[bestSideIndex], separationInfo.side.begin);\n        polyA.transform.matrix.multiply(pointsA[bestSide2], separationInfo.side.end);\n        polyB.transform.matrix.multiply(localPoint, separationInfo.point);\n        separationInfo.sideId = bestSideIndex;\n        localPoint.clone(separationInfo.localPoint);\n        pointsA[bestSideIndex].clone(separationInfo.localSide.begin);\n        pointsA[bestSide2].clone(separationInfo.localSide.end);\n        return separationInfo;\n    }\n    static findCirclePolygonSeparation(circle, polygon) {\n        const axes = polygon.axes;\n        const pc = polygon.center;\n        // Special SAT with circles\n        const polyDir = pc.sub(circle.worldPos);\n        const closestPointOnPoly = polygon.getFurthestPoint(polyDir.negate());\n        axes.push(closestPointOnPoly.sub(circle.worldPos).normalize());\n        let minOverlap = Number.MAX_VALUE;\n        let minAxis = null;\n        let minIndex = -1;\n        for (let i = 0; i < axes.length; i++) {\n            const proj1 = polygon.project(axes[i]);\n            const proj2 = circle.project(axes[i]);\n            const overlap = proj1.getOverlap(proj2);\n            if (overlap <= 0) {\n                return null;\n            }\n            else {\n                if (overlap < minOverlap) {\n                    minOverlap = overlap;\n                    minAxis = axes[i];\n                    minIndex = i;\n                }\n            }\n        }\n        if (minIndex < 0) {\n            return null;\n        }\n        return minAxis.normalize().scale(minOverlap);\n    }\n    static findPolygonPolygonSeparationDegenerate(polyA, polyB) {\n        let bestSeparation = -Number.MAX_VALUE;\n        let bestSide = null;\n        let bestAxis = null;\n        let bestSideIndex = -1;\n        let bestOtherPoint = null;\n        const sides = polyA.getSides();\n        const localSides = polyA.getLocalSides();\n        for (let i = 0; i < sides.length; i++) {\n            const side = sides[i];\n            const axis = side.normal();\n            const vertB = polyB.getFurthestPoint(axis.negate());\n            // Separation on side i's axis\n            // We are looking for the largest separation between poly A's sides\n            const vertSeparation = side.distanceToPoint(vertB, true);\n            if (vertSeparation > bestSeparation) {\n                bestSeparation = vertSeparation;\n                bestSide = side;\n                bestAxis = axis;\n                bestSideIndex = i;\n                bestOtherPoint = vertB;\n            }\n        }\n        return {\n            collider: polyA,\n            separation: bestAxis ? bestSeparation : 99,\n            axis: bestAxis,\n            side: bestSide,\n            localSide: localSides[bestSideIndex],\n            sideId: bestSideIndex,\n            point: bestOtherPoint,\n            localPoint: bestAxis ? polyB.getFurthestLocalPoint(bestAxis.negate()) : null\n        };\n    }\n}\nSeparatingAxis.SeparationPool = new Pool(() => new SeparationInfo(), (i) => i, // no recycle\n500);\nSeparatingAxis._ZERO = vec(0, 0);\nSeparatingAxis._SCRATCH_POINT = vec(0, 0);\nSeparatingAxis._SCRATCH_SUB_POINT = vec(0, 0);\nSeparatingAxis._SCRATCH_NORMAL = vec(0, 0);\nSeparatingAxis._SCRATCH_MATRIX = AffineMatrix.identity();\nSeparatingAxis.SeparationPool.disableWarnings = true;\n\n;// ./Collision/Colliders/CollisionJumpTable.ts\n\n\n\n\n\n\n\n\n\n\nconst ScratchZero = Vector.Zero; // TODO constant vector\nconst ScratchNormal = Vector.Zero; // TODO constant vector\nconst ScratchMatrix = AffineMatrix.identity();\nconst CollisionJumpTable = {\n    CollideCircleCircle(circleA, circleB) {\n        const circleAPos = circleA.worldPos;\n        const circleBPos = circleB.worldPos;\n        const combinedRadius = circleA.radius + circleB.radius;\n        const distance = circleAPos.distance(circleBPos);\n        if (distance > combinedRadius) {\n            return [];\n        }\n        // negative means overlap\n        const separation = combinedRadius - distance;\n        // Normal points from A -> B\n        const normal = circleBPos.sub(circleAPos).normalize();\n        const tangent = normal.perpendicular();\n        const mvt = normal.scale(separation);\n        const point = circleA.getFurthestPoint(normal);\n        const local = circleA.getFurthestLocalPoint(normal);\n        const info = {\n            collider: circleA,\n            separation,\n            axis: normal,\n            point: point\n        };\n        return [new CollisionContact(circleA, circleB, mvt, normal, tangent, [point], [local], info)];\n    },\n    CollideCirclePolygon(circle, polygon) {\n        var _a, _b;\n        let minAxis = SeparatingAxis.findCirclePolygonSeparation(circle, polygon);\n        if (!minAxis) {\n            return [];\n        }\n        // make sure that the minAxis is pointing away from circle\n        const sameDir = minAxis.dot(polygon.center.sub(circle.center));\n        minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\n        const point = circle.getFurthestPoint(minAxis);\n        const xf = (_b = (_a = circle.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\n        const local = xf.applyInverse(point);\n        const normal = minAxis.normalize();\n        const info = {\n            collider: circle,\n            separation: -minAxis.magnitude,\n            axis: normal,\n            point: point,\n            localPoint: local,\n            side: polygon.findSide(normal.negate()),\n            localSide: polygon.findLocalSide(normal.negate())\n        };\n        return [new CollisionContact(circle, polygon, minAxis, normal, normal.perpendicular(), [point], [local], info)];\n    },\n    CollideCircleEdge(circle, edge) {\n        // TODO not sure this actually abides by local/world collisions\n        // Are edge.begin and edge.end local space or world space? I think they should be local\n        // center of the circle in world pos\n        const cc = circle.center;\n        // vector in the direction of the edge\n        const edgeWorld = edge.asLine();\n        const e = edgeWorld.end.sub(edgeWorld.begin);\n        // amount of overlap with the circle's center along the edge direction\n        const u = e.dot(edgeWorld.end.sub(cc));\n        const v = e.dot(cc.sub(edgeWorld.begin));\n        const side = edge.asLine();\n        const localSide = edge.asLocalLine();\n        // Potential region A collision (circle is on the left side of the edge, before the beginning)\n        if (v <= 0) {\n            const da = edgeWorld.begin.sub(cc);\n            const dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\n            // save some sqrts\n            if (dda > circle.radius * circle.radius) {\n                return []; // no collision\n            }\n            const normal = da.normalize();\n            const separation = circle.radius - Math.sqrt(dda);\n            const info = {\n                collider: circle,\n                separation: separation,\n                axis: normal,\n                point: side.begin,\n                side: side,\n                localSide: localSide\n            };\n            return [\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.begin], [localSide.begin], info)\n            ];\n        }\n        // Potential region B collision (circle is on the right side of the edge, after the end)\n        if (u <= 0) {\n            const db = edgeWorld.end.sub(cc);\n            const ddb = db.dot(db);\n            if (ddb > circle.radius * circle.radius) {\n                return [];\n            }\n            const normal = db.normalize();\n            const separation = circle.radius - Math.sqrt(ddb);\n            const info = {\n                collider: circle,\n                separation: separation,\n                axis: normal,\n                point: side.end,\n                side: side,\n                localSide: localSide\n            };\n            return [\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.end], [localSide.end], info)\n            ];\n        }\n        // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\n        const den = e.dot(e);\n        const pointOnEdge = edgeWorld.begin\n            .scale(u)\n            .add(edgeWorld.end.scale(v))\n            .scale(1 / den);\n        const d = cc.sub(pointOnEdge);\n        const dd = d.dot(d);\n        if (dd > circle.radius * circle.radius) {\n            return []; // no collision\n        }\n        let normal = e.perpendicular();\n        // flip correct direction\n        if (normal.dot(cc.sub(edgeWorld.begin)) < 0) {\n            normal.x = -normal.x;\n            normal.y = -normal.y;\n        }\n        normal = normal.normalize();\n        const separation = circle.radius - Math.sqrt(dd);\n        const mvt = normal.scale(separation);\n        const info = {\n            collider: circle,\n            separation: separation,\n            axis: normal,\n            point: pointOnEdge,\n            side: side,\n            localSide: localSide\n        };\n        return [\n            new CollisionContact(circle, edge, mvt, normal.negate(), normal.negate().perpendicular(), [pointOnEdge], [pointOnEdge.sub(edge.worldPos)], info)\n        ];\n    },\n    CollideEdgeEdge() {\n        // Edge-edge collision doesn't make sense\n        return [];\n    },\n    CollidePolygonEdge(polygon, edge) {\n        var _a;\n        const pc = polygon.center;\n        const ec = edge.center;\n        const dir = ec.sub(pc).normalize();\n        // build a temporary polygon from the edge to use SAT\n        const linePoly = new PolygonCollider({\n            points: [edge.begin, edge.end, edge.end.add(dir.scale(100)), edge.begin.add(dir.scale(100))],\n            offset: edge.offset\n        });\n        linePoly.owner = edge.owner;\n        const tx = (_a = edge.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\n        if (tx) {\n            linePoly.update(edge.owner.get(TransformComponent).get());\n        }\n        // Gross hack but poly-poly works well\n        const contact = this.CollidePolygonPolygon(polygon, linePoly);\n        if (contact.length) {\n            // Fudge the contact back to edge\n            contact[0].colliderB = edge;\n            contact[0].id = Pair.calculatePairHash(polygon.id, edge.id);\n        }\n        return contact;\n    },\n    CollidePolygonPolygon(polyA, polyB) {\n        // Multi contact from SAT\n        // https://gamedev.stackexchange.com/questions/111390/multiple-contacts-for-sat-collision-detection\n        // do a SAT test to find a min axis if it exists\n        const separationA = SeparatingAxis.findPolygonPolygonSeparation(polyA, polyB);\n        // If there is no overlap from boxA's perspective we can end early\n        if (separationA.separation > 0) {\n            return [];\n        }\n        const separationB = SeparatingAxis.findPolygonPolygonSeparation(polyB, polyA);\n        // If there is no overlap from boxB's perspective exit now\n        if (separationB.separation > 0) {\n            return [];\n        }\n        // Separations are both negative, we want to pick the least negative (minimal movement)\n        const separation = separationA.separation > separationB.separation ? separationA : separationB;\n        // The incident side is the most opposite from the axes of collision on the other collider\n        const other = separation.collider === polyA ? polyB : polyA;\n        const main = separation.collider === polyA ? polyA : polyB;\n        const toIncidentFrame = other.transform.inverse.multiply(main.transform.matrix, ScratchMatrix);\n        const toIncidentFrameRotation = toIncidentFrame.getRotation();\n        const referenceEdgeNormal = main.normals[separation.sideId].rotate(toIncidentFrameRotation, ScratchZero, ScratchNormal);\n        let minEdge = Number.MAX_VALUE;\n        let incidentEdgeIndex = 0;\n        for (let i = 0; i < other.normals.length; i++) {\n            const value = referenceEdgeNormal.dot(other.normals[i]);\n            if (value < minEdge) {\n                minEdge = value;\n                incidentEdgeIndex = i;\n            }\n        }\n        // FIXME temporary to prevent a crash, invalid separation\n        if (!separation.localSide || !separation.localAxis || !separation.axis) {\n            return [];\n        }\n        // Clip incident side by the perpendicular lines at each end of the reference side\n        // https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm\n        const referenceSide = separation.localSide.transform(toIncidentFrame);\n        const referenceDirection = separation.localAxis.perpendicular().negate().rotate(toIncidentFrameRotation);\n        const incidentSide = new LineSegment(other.points[incidentEdgeIndex], other.points[(incidentEdgeIndex + 1) % other.points.length]);\n        const clipRight = incidentSide.clip(referenceDirection.negate(), -referenceDirection.dot(referenceSide.begin), false);\n        let clipLeft = null;\n        if (clipRight) {\n            clipLeft = clipRight.clip(referenceDirection, referenceDirection.dot(referenceSide.end), false);\n        }\n        if (clipLeft) {\n            const localPoints = [];\n            const points = [];\n            const clipPoints = clipLeft.getPoints();\n            for (let i = 0; i < clipPoints.length; i++) {\n                const p = clipPoints[i];\n                if (referenceSide.below(p)) {\n                    localPoints.push(p);\n                    points.push(other.transform.apply(p));\n                }\n            }\n            let normal = separation.axis;\n            let tangent = normal.perpendicular();\n            // Point Contact A -> B\n            if (polyB.center.sub(polyA.center).dot(normal) < 0) {\n                normal = normal.negate();\n                tangent = normal.perpendicular();\n            }\n            return [new CollisionContact(polyA, polyB, normal.scale(-separation.separation), normal, tangent, points, localPoints, separation)];\n        }\n        return [];\n    },\n    FindContactSeparation(contact, localPoint) {\n        var _a, _b, _c, _d;\n        const shapeA = contact.colliderA;\n        const txA = (_b = (_a = contact.bodyA) === null || _a === void 0 ? void 0 : _a.transform) !== null && _b !== void 0 ? _b : new TransformComponent();\n        const shapeB = contact.colliderB;\n        const txB = (_d = (_c = contact.bodyB) === null || _c === void 0 ? void 0 : _c.transform) !== null && _d !== void 0 ? _d : new TransformComponent();\n        // both are circles\n        if (shapeA instanceof CircleCollider && shapeB instanceof CircleCollider) {\n            const combinedRadius = shapeA.radius + shapeB.radius;\n            const distance = txA.pos.distance(txB.pos);\n            const separation = combinedRadius - distance;\n            return -separation;\n        }\n        // both are polygons\n        if (shapeA instanceof PolygonCollider && shapeB instanceof PolygonCollider) {\n            if (contact.info.localSide) {\n                let side;\n                let worldPoint;\n                if (contact.info.collider === shapeA) {\n                    side = new LineSegment(txA.apply(contact.info.localSide.begin).add(shapeA.offset), txA.apply(contact.info.localSide.end).add(shapeA.offset));\n                    worldPoint = txB.apply(localPoint).add(shapeB.offset);\n                }\n                else {\n                    side = new LineSegment(txB.apply(contact.info.localSide.begin).add(shapeB.offset), txB.apply(contact.info.localSide.end).add(shapeB.offset));\n                    worldPoint = txA.apply(localPoint).add(shapeA.offset);\n                }\n                return side.distanceToPoint(worldPoint, true);\n            }\n        }\n        // polygon v circle\n        if ((shapeA instanceof PolygonCollider && shapeB instanceof CircleCollider) ||\n            (shapeB instanceof PolygonCollider && shapeA instanceof CircleCollider)) {\n            const worldPoint = txA.apply(localPoint);\n            if (contact.info.side) {\n                return contact.info.side.distanceToPoint(worldPoint, true);\n            }\n        }\n        // polygon v edge\n        if ((shapeA instanceof EdgeCollider && shapeB instanceof PolygonCollider) ||\n            (shapeB instanceof EdgeCollider && shapeA instanceof PolygonCollider)) {\n            let worldPoint;\n            if (contact.info.collider === shapeA) {\n                worldPoint = txB.apply(localPoint);\n            }\n            else {\n                worldPoint = txA.apply(localPoint);\n            }\n            if (contact.info.side) {\n                return contact.info.side.distanceToPoint(worldPoint, true);\n            }\n        }\n        // circle v edge\n        if ((shapeA instanceof CircleCollider && shapeB instanceof EdgeCollider) ||\n            (shapeB instanceof CircleCollider && shapeA instanceof EdgeCollider)) {\n            // Local point is always on the edge which is always shapeB\n            const worldPoint = txB.apply(localPoint);\n            let circlePoint;\n            if (shapeA instanceof CircleCollider) {\n                circlePoint = shapeA.getFurthestPoint(contact.normal);\n            }\n            const dist = worldPoint.distance(circlePoint);\n            if (contact.info.side) {\n                return dist > 0 ? -dist : 0;\n            }\n        }\n        return 0;\n    }\n};\n\n;// ./Collision/Colliders/EdgeCollider.ts\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Edge is a single line collider to create collisions with a single line.\n */\nclass EdgeCollider extends Collider {\n    constructor(options) {\n        var _a;\n        super();\n        this._globalMatrix = AffineMatrix.identity();\n        this.begin = options.begin || Vector.Zero;\n        this.end = options.end || Vector.Zero;\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\n    }\n    /**\n     * Returns a clone of this Edge, not associated with any collider\n     */\n    clone() {\n        return new EdgeCollider({\n            begin: this.begin.clone(),\n            end: this.end.clone()\n        });\n    }\n    get worldPos() {\n        var _a;\n        const tx = this._transform;\n        return (_a = tx === null || tx === void 0 ? void 0 : tx.globalPos.add(this.offset)) !== null && _a !== void 0 ? _a : this.offset;\n    }\n    /**\n     * Get the center of the collision area in world coordinates\n     */\n    get center() {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        const pos = begin.average(end);\n        return pos;\n    }\n    _getTransformedBegin() {\n        return this._globalMatrix.multiply(this.begin);\n    }\n    _getTransformedEnd() {\n        return this._globalMatrix.multiply(this.end);\n    }\n    /**\n     * Returns the slope of the line in the form of a vector\n     */\n    getSlope() {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        const distance = begin.distance(end);\n        return end.sub(begin).scale(1 / distance);\n    }\n    /**\n     * Returns the length of the line segment in pixels\n     */\n    getLength() {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        const distance = begin.distance(end);\n        return distance;\n    }\n    /**\n     * Tests if a point is contained in this collision area\n     */\n    contains() {\n        return false;\n    }\n    /**\n     * @inheritdoc\n     */\n    rayCast(ray, max = Infinity) {\n        var _a;\n        const numerator = this._getTransformedBegin().sub(ray.pos);\n        // Test is line and ray are parallel and non intersecting\n        if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\n            return null;\n        }\n        // Lines are parallel\n        const divisor = ray.dir.cross(this.getSlope());\n        if (divisor === 0) {\n            return null;\n        }\n        const t = numerator.cross(this.getSlope()) / divisor;\n        if (t >= 0 && t <= max) {\n            const u = numerator.cross(ray.dir) / divisor / this.getLength();\n            if (u >= 0 && u <= 1) {\n                return {\n                    distance: t,\n                    normal: this.asLine().normal(),\n                    collider: this,\n                    body: (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent),\n                    point: ray.getPoint(t)\n                };\n            }\n        }\n        return null;\n    }\n    /**\n     * Returns the closes line between this and another collider, from this -> collider\n     * @param shape\n     */\n    getClosestLineBetween(shape) {\n        if (shape instanceof CircleCollider) {\n            return ClosestLineJumpTable.CircleEdgeClosestLine(shape, this);\n        }\n        else if (shape instanceof PolygonCollider) {\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(shape, this).flip();\n        }\n        else if (shape instanceof EdgeCollider) {\n            return ClosestLineJumpTable.EdgeEdgeClosestLine(this, shape);\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    collide(shape) {\n        if (shape instanceof CircleCollider) {\n            return CollisionJumpTable.CollideCircleEdge(shape, this);\n        }\n        else if (shape instanceof PolygonCollider) {\n            return CollisionJumpTable.CollidePolygonEdge(shape, this);\n        }\n        else if (shape instanceof EdgeCollider) {\n            return CollisionJumpTable.CollideEdgeEdge();\n        }\n        else {\n            throw new Error(`Edge could not collide with unknown CollisionShape ${typeof shape}`);\n        }\n    }\n    /**\n     * Find the point on the collider furthest in the direction specified\n     */\n    getFurthestPoint(direction) {\n        const transformedBegin = this._getTransformedBegin();\n        const transformedEnd = this._getTransformedEnd();\n        if (direction.dot(transformedBegin) > 0) {\n            return transformedBegin;\n        }\n        else {\n            return transformedEnd;\n        }\n    }\n    _boundsFromBeginEnd(begin, end, padding = 10) {\n        // A perfectly vertical or horizontal edge would have a bounds 0 width or height\n        // this causes problems for the collision system so we give them some padding\n        return new BoundingBox(Math.min(begin.x, end.x) - padding, Math.min(begin.y, end.y) - padding, Math.max(begin.x, end.x) + padding, Math.max(begin.y, end.y) + padding);\n    }\n    /**\n     * Get the axis aligned bounding box for the edge collider in world space\n     */\n    get bounds() {\n        const transformedBegin = this._getTransformedBegin();\n        const transformedEnd = this._getTransformedEnd();\n        return this._boundsFromBeginEnd(transformedBegin, transformedEnd);\n    }\n    /**\n     * Get the axis aligned bounding box for the edge collider in local space\n     */\n    get localBounds() {\n        return this._boundsFromBeginEnd(this.begin, this.end);\n    }\n    /**\n     * Returns this edge represented as a line in world coordinates\n     */\n    asLine() {\n        return new LineSegment(this._getTransformedBegin(), this._getTransformedEnd());\n    }\n    /**\n     * Return this edge as a line in local line coordinates (relative to the position)\n     */\n    asLocalLine() {\n        return new LineSegment(this.begin, this.end);\n    }\n    /**\n     * Get the axis associated with the edge\n     */\n    get axes() {\n        const e = this._getTransformedEnd().sub(this._getTransformedBegin());\n        const edgeNormal = e.normal();\n        const axes = [];\n        axes.push(edgeNormal);\n        axes.push(edgeNormal.negate());\n        axes.push(edgeNormal.normal());\n        axes.push(edgeNormal.normal().negate());\n        return axes;\n    }\n    /**\n     * Get the moment of inertia for an edge\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n     */\n    getInertia(mass) {\n        const length = this.end.sub(this.begin).distance() / 2;\n        return mass * length * length;\n    }\n    /**\n     * @inheritdoc\n     */\n    update(transform) {\n        var _a;\n        this._transform = transform;\n        const globalMat = (_a = transform.matrix) !== null && _a !== void 0 ? _a : this._globalMatrix;\n        globalMat.clone(this._globalMatrix);\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\n    }\n    /**\n     * Project the edge along a specified axis\n     */\n    project(axis) {\n        const scalars = [];\n        const points = [this._getTransformedBegin(), this._getTransformedEnd()];\n        const len = points.length;\n        for (let i = 0; i < len; i++) {\n            scalars.push(points[i].dot(axis));\n        }\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n    }\n    debug(ex, color) {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        ex.drawLine(begin, end, color, 2);\n        ex.drawCircle(begin, 2, color);\n        ex.drawCircle(end, 2, color);\n    }\n}\n\n;// ./Graphics/Debug.ts\n\nclass Debug {\n    static registerGraphicsContext(ctx) {\n        Debug._ctx = ctx;\n    }\n    static draw(debugDrawCall) {\n        this._drawCalls.push(debugDrawCall);\n    }\n    static drawPoint(point, options) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawPoint(point, options);\n        });\n    }\n    static drawLine(start, end, options) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawLine(start, end, options);\n        });\n    }\n    static drawLines(points, options) {\n        if (points.length > 1) {\n            Debug.draw((ctx) => {\n                for (let i = 0; i < points.length - 1; i++) {\n                    ctx.debug.drawLine(points[i], points[i + 1], options);\n                }\n            });\n        }\n    }\n    static drawText(text, pos) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawText(text, pos);\n        });\n    }\n    static drawPolygon(points, options) {\n        if (points.length > 1) {\n            Debug.draw((ctx) => {\n                const firstPoint = points[0];\n                const polygon = [...points, firstPoint];\n                for (let i = 0; i < polygon.length - 1; i++) {\n                    ctx.debug.drawLine(polygon[i], polygon[i + 1], options);\n                }\n            });\n        }\n    }\n    static drawCircle(center, radius, options) {\n        const { color, strokeColor, width } = {\n            color: Color.Black,\n            strokeColor: undefined,\n            width: undefined,\n            ...options\n        };\n        Debug.draw((ctx) => {\n            ctx.drawCircle(center, radius, color, strokeColor, width);\n        });\n    }\n    static drawBounds(boundingBox, options) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawRect(boundingBox.left, boundingBox.top, boundingBox.width, boundingBox.height, options);\n        });\n    }\n    static drawRay(ray, options) {\n        const { distance, color } = {\n            color: Color.Blue,\n            distance: 10,\n            ...options\n        };\n        Debug.draw((ctx) => {\n            const start = ray.pos;\n            const end = ray.pos.add(ray.dir.scale(distance));\n            ctx.debug.drawLine(start, end, { color });\n        });\n    }\n    static flush(ctx) {\n        ctx.save();\n        ctx.z = Debug.z;\n        for (const drawCall of Debug._drawCalls) {\n            drawCall(ctx);\n        }\n        ctx.restore();\n        Debug.clear();\n    }\n    static clear() {\n        Debug._drawCalls.length = 0;\n    }\n}\nDebug._drawCalls = [];\nDebug.z = Infinity;\n\n;// ./Collision/Colliders/PolygonCollider.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Polygon collider for detecting collisions\n */\nclass PolygonCollider extends Collider {\n    flagDirty() {\n        this._localBoundsDirty = true;\n        this._localSidesDirty = true;\n        this._transformedPointsDirty = true;\n        this._sidesDirty = true;\n    }\n    get normals() {\n        return this._normals;\n    }\n    /**\n     * Points in the polygon in order around the perimeter in local coordinates. These are relative from the body transform position.\n     * Excalibur stores these in counter-clockwise order\n     */\n    set points(points) {\n        if (points.length < 3) {\n            throw new Error('PolygonCollider cannot be created with less that 3 points');\n        }\n        this._points = points;\n        this._checkAndUpdateWinding(this._points);\n        this._calculateNormals();\n        this.flagDirty();\n    }\n    _calculateNormals() {\n        const normals = [];\n        for (let i = 0; i < this._points.length; i++) {\n            normals.push(this._points[(i + 1) % this._points.length].sub(this._points[i]).normal());\n        }\n        this._normals = normals;\n    }\n    /**\n     * Points in the polygon in order around the perimeter in local coordinates. These are relative from the body transform position.\n     * Excalibur stores these in counter-clockwise order\n     */\n    get points() {\n        return this._points;\n    }\n    get transform() {\n        return this._transform;\n    }\n    constructor(options) {\n        var _a;\n        super();\n        this._logger = Logger.getInstance();\n        this._transform = new transform_Transform();\n        this._transformedPoints = [];\n        this._sides = [];\n        this._localSides = [];\n        this._transformedPointsDirty = true;\n        this._sidesDirty = true;\n        this._localSidesDirty = true;\n        this._localBoundsDirty = true;\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\n        this._transform.pos.x += this.offset.x;\n        this._transform.pos.y += this.offset.y;\n        this.points = options.points;\n        if (!this.isConvex()) {\n            if (!options.suppressConvexWarning) {\n                this._logger.warn('Excalibur only supports convex polygon colliders and will not behave properly.' +\n                    'Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles');\n            }\n        }\n        // calculate initial transformation\n        this._calculateTransformation();\n    }\n    _checkAndUpdateWinding(points) {\n        const counterClockwise = this._isCounterClockwiseWinding(points);\n        if (!counterClockwise) {\n            points.reverse();\n        }\n    }\n    _isCounterClockwiseWinding(points) {\n        // https://stackoverflow.com/a/1165943\n        let sum = 0;\n        for (let i = 0; i < points.length; i++) {\n            sum += (points[(i + 1) % points.length].x - points[i].x) * (points[(i + 1) % points.length].y + points[i].y);\n        }\n        return sum < 0;\n    }\n    /**\n     * Returns if the polygon collider is convex, Excalibur does not handle non-convex collision shapes.\n     * Call {@apilink Polygon.triangulate} to generate a {@apilink CompositeCollider} from this non-convex shape\n     */\n    isConvex() {\n        // From SO: https://stackoverflow.com/a/45372025\n        if (this.points.length < 3) {\n            return false;\n        }\n        let oldPoint = this.points[this.points.length - 2];\n        let newPoint = this.points[this.points.length - 1];\n        let direction = Math.atan2(newPoint.y - oldPoint.y, newPoint.x - oldPoint.x);\n        let oldDirection = 0;\n        let orientation = 0;\n        let angleSum = 0;\n        for (const [i, point] of this.points.entries()) {\n            oldPoint = newPoint;\n            oldDirection = direction;\n            newPoint = point;\n            direction = Math.atan2(newPoint.y - oldPoint.y, newPoint.x - oldPoint.x);\n            if (oldPoint.equals(newPoint)) {\n                return false; // repeat point\n            }\n            let angle = direction - oldDirection;\n            if (angle <= -Math.PI) {\n                angle += Math.PI * 2;\n            }\n            else if (angle > Math.PI) {\n                angle -= Math.PI * 2;\n            }\n            if (i === 0) {\n                if (angle === 0.0) {\n                    return false;\n                }\n                orientation = angle > 0 ? 1 : -1;\n            }\n            else {\n                if (orientation * angle <= 0) {\n                    return false;\n                }\n            }\n            angleSum += angle;\n        }\n        return Math.abs(Math.round(angleSum / (Math.PI * 2))) === 1;\n    }\n    /**\n     * Tessellates the polygon into a triangle fan as a {@apilink CompositeCollider} of triangle polygons\n     */\n    tessellate() {\n        const polygons = [];\n        for (let i = 1; i < this.points.length - 2; i++) {\n            polygons.push([this.points[0], this.points[i + 1], this.points[i + 2]]);\n        }\n        polygons.push([this.points[0], this.points[1], this.points[2]]);\n        return new CompositeCollider(polygons.map((points) => Shape.Polygon(points)));\n    }\n    /**\n     * Triangulate the polygon collider using the \"Ear Clipping\" algorithm.\n     * Returns a new {@apilink CompositeCollider} made up of smaller triangles.\n     */\n    triangulate() {\n        // https://www.youtube.com/watch?v=hTJFcHutls8\n        if (this.points.length < 3) {\n            throw Error('Invalid polygon');\n        }\n        const triangles = [];\n        // algorithm likes clockwise\n        const vertices = [...this.points].reverse();\n        let vertexCount = vertices.length;\n        /**\n         * Returns the previous index based on the current vertex\n         */\n        function getPrevIndex(index) {\n            return index === 0 ? vertexCount - 1 : index - 1;\n        }\n        /**\n         * Retrieves the next index based on the current vertex\n         */\n        function getNextIndex(index) {\n            return index === vertexCount - 1 ? 0 : index + 1;\n        }\n        /**\n         * Whether or not the angle at this vertex index is convex\n         */\n        function isConvex(index) {\n            const prev = getPrevIndex(index);\n            const next = getNextIndex(index);\n            const va = vertices[prev];\n            const vb = vertices[index];\n            const vc = vertices[next];\n            // Check convexity\n            const leftArm = va.sub(vb);\n            const rightArm = vc.sub(vb);\n            // Positive cross product is convex\n            if (leftArm.cross(rightArm) < 0) {\n                return false;\n            }\n            return true;\n        }\n        const convexVertices = vertices.map((_, i) => isConvex(i));\n        /**\n         * Quick test for point in triangle\n         */\n        function isPointInTriangle(point, a, b, c) {\n            const ab = b.sub(a);\n            const bc = c.sub(b);\n            const ca = a.sub(c);\n            const ap = point.sub(a);\n            const bp = point.sub(b);\n            const cp = point.sub(c);\n            const cross1 = ab.cross(ap);\n            const cross2 = bc.cross(bp);\n            const cross3 = ca.cross(cp);\n            if (cross1 > 0 || cross2 > 0 || cross3 > 0) {\n                return false;\n            }\n            return true;\n        }\n        /**\n         * Calculate the area of the triangle\n         */\n        // function triangleArea(a: Vector, b: Vector, c: Vector) {\n        //   return Math.abs(a.x * (b.y - c.y) + b.x * (c.y - a.y) + c.x * (a.y - c.y))/2;\n        // }\n        /**\n         * Find the next suitable ear tip\n         */\n        function findEarTip() {\n            for (let i = 0; i < vertexCount; i++) {\n                if (convexVertices[i]) {\n                    const prev = getPrevIndex(i);\n                    const next = getNextIndex(i);\n                    const va = vertices[prev];\n                    const vb = vertices[i];\n                    const vc = vertices[next];\n                    let isEar = true;\n                    // Check that if any vertices are in the triangle a, b, c\n                    for (let j = 0; j < vertexCount; j++) {\n                        // We can skip these verts because they are the triangle we are testing\n                        if (j === i || j === prev || j === next) {\n                            continue;\n                        }\n                        const point = vertices[j];\n                        if (isPointInTriangle(point, va, vb, vc)) {\n                            isEar = false;\n                            break;\n                        }\n                    }\n                    // Add ear to polygon list and remove from list\n                    if (isEar) {\n                        return i;\n                    }\n                }\n            }\n            // Fall back to any convex vertex\n            for (let i = 0; i < vertexCount; i++) {\n                if (convexVertices[i]) {\n                    return i;\n                }\n            }\n            // bail and return the first one?\n            return 0;\n        }\n        /**\n         * Cut the ear and produce a triangle, update internal state\n         */\n        function cutEarTip(index) {\n            const prev = getPrevIndex(index);\n            const next = getNextIndex(index);\n            const va = vertices[prev];\n            const vb = vertices[index];\n            const vc = vertices[next];\n            // Clockwise winding\n            // if (triangleArea(va, vb, vc) > 0) {\n            triangles.push([va, vb, vc]);\n            // }\n            vertices.splice(index, 1);\n            convexVertices.splice(index, 1);\n            vertexCount--;\n        }\n        // Loop over all the vertices finding ears\n        while (vertexCount > 3) {\n            const earIndex = findEarTip();\n            cutEarTip(earIndex);\n            // reclassify vertices\n            for (let i = 0; i < vertexCount; i++) {\n                convexVertices[i] = isConvex(i);\n            }\n        }\n        // Last triangle after the loop\n        triangles.push([vertices[0], vertices[1], vertices[2]]);\n        // FIXME: there is a colinear triangle that sneaks in here sometimes\n        return new CompositeCollider(triangles.map((points) => Shape.Polygon(points, Vector.Zero, true)));\n    }\n    /**\n     * Returns a clone of this ConvexPolygon, not associated with any collider\n     */\n    clone() {\n        return new PolygonCollider({\n            offset: this.offset.clone(),\n            points: this.points.map((p) => p.clone())\n        });\n    }\n    /**\n     * Returns the world position of the collider, which is the current body transform plus any defined offset\n     */\n    get worldPos() {\n        return this._transform.pos;\n    }\n    /**\n     * Get the center of the collider in world coordinates\n     */\n    get center() {\n        return this.bounds.center;\n    }\n    /**\n     * Calculates the underlying transformation from the body relative space to world space\n     */\n    _calculateTransformation() {\n        const points = this.points;\n        const len = points.length;\n        this._transformedPoints.length = 0; // clear out old transform\n        for (let i = 0; i < len; i++) {\n            this._transformedPoints[i] = this._transform.apply(points[i].clone());\n        }\n    }\n    /**\n     * Gets the points that make up the polygon in world space, from actor relative space (if specified)\n     */\n    getTransformedPoints() {\n        if (this._transformedPointsDirty) {\n            this._calculateTransformation();\n            this._transformedPointsDirty = false;\n        }\n        return this._transformedPoints;\n    }\n    /**\n     * Gets the sides of the polygon in world space\n     */\n    getSides() {\n        if (this._sidesDirty) {\n            const lines = [];\n            const points = this.getTransformedPoints();\n            const len = points.length;\n            for (let i = 0; i < len; i++) {\n                // This winding is important\n                lines.push(new LineSegment(points[i], points[(i + 1) % len]));\n            }\n            this._sides = lines;\n            this._sidesDirty = false;\n        }\n        return this._sides;\n    }\n    /**\n     * Returns the local coordinate space sides\n     */\n    getLocalSides() {\n        if (this._localSidesDirty) {\n            const lines = [];\n            const points = this.points;\n            const len = points.length;\n            for (let i = 0; i < len; i++) {\n                // This winding is important\n                lines.push(new LineSegment(points[i], points[(i + 1) % len]));\n            }\n            this._localSides = lines;\n            this._localSidesDirty = false;\n        }\n        return this._localSides;\n    }\n    /**\n     * Given a direction vector find the world space side that is most in that direction\n     * @param direction\n     */\n    findSide(direction) {\n        const sides = this.getSides();\n        let bestSide = sides[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (let side = 0; side < sides.length; side++) {\n            const currentSide = sides[side];\n            const sideNormal = currentSide.normal();\n            const mostDirection = sideNormal.dot(direction);\n            if (mostDirection > maxDistance) {\n                bestSide = currentSide;\n                maxDistance = mostDirection;\n            }\n        }\n        return bestSide;\n    }\n    /**\n     * Given a direction vector find the local space side that is most in that direction\n     * @param direction\n     */\n    findLocalSide(direction) {\n        const sides = this.getLocalSides();\n        let bestSide = sides[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (let side = 0; side < sides.length; side++) {\n            const currentSide = sides[side];\n            const sideNormal = currentSide.normal();\n            const mostDirection = sideNormal.dot(direction);\n            if (mostDirection > maxDistance) {\n                bestSide = currentSide;\n                maxDistance = mostDirection;\n            }\n        }\n        return bestSide;\n    }\n    /**\n     * Get the axis associated with the convex polygon\n     */\n    get axes() {\n        const axes = [];\n        const sides = this.getSides();\n        for (let i = 0; i < sides.length; i++) {\n            axes.push(sides[i].normal());\n        }\n        return axes;\n    }\n    /**\n     * Updates the transform for the collision geometry\n     *\n     * Collision geometry (points/bounds) will not change until this is called.\n     * @param transform\n     */\n    update(transform) {\n        if (transform) {\n            // This change means an update must be performed in order for geometry to update\n            transform.cloneWithParent(this._transform);\n            this._transformedPointsDirty = true;\n            this._sidesDirty = true;\n            if (this.offset.x !== 0 || this.offset.y !== 0) {\n                this._transform.pos.x += this.offset.x;\n                this._transform.pos.y += this.offset.y;\n            }\n            if (this._transform.isMirrored()) {\n                // negative transforms really mess with things in collision local space\n                // flatten out the negatives by applying to geometry\n                this.points = this.points.map((p) => vec(p.x * sign(this._transform.scale.x), p.y * sign(this._transform.scale.y)));\n                this._transform.scale.x = Math.abs(this._transform.scale.x);\n                this._transform.scale.y = Math.abs(this._transform.scale.y);\n            }\n        }\n    }\n    /**\n     * Tests if a point is contained in this collider in world space\n     */\n    contains(point) {\n        // Always cast to the right, as long as we cast in a consistent fixed direction we\n        // will be fine\n        const localPoint = this._transform.applyInverse(point);\n        const testRay = new Ray(localPoint, new Vector(1, 0));\n        let intersectCount = 0;\n        const sides = this.getLocalSides();\n        for (let sideIndex = 0; sideIndex < sides.length; sideIndex++) {\n            const side = sides[sideIndex];\n            if (testRay.intersect(side) >= 0) {\n                intersectCount++;\n            }\n        }\n        if (intersectCount % 2 === 0) {\n            return false;\n        }\n        return true;\n    }\n    getClosestLineBetween(collider) {\n        if (collider instanceof CircleCollider) {\n            return ClosestLineJumpTable.PolygonCircleClosestLine(this, collider);\n        }\n        else if (collider instanceof PolygonCollider) {\n            return ClosestLineJumpTable.PolygonPolygonClosestLine(this, collider);\n        }\n        else if (collider instanceof EdgeCollider) {\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(this, collider);\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\n        }\n    }\n    /**\n     * Returns a collision contact if the 2 colliders collide, otherwise collide will\n     * return null.\n     * @param collider\n     */\n    collide(collider) {\n        if (collider instanceof CircleCollider) {\n            return CollisionJumpTable.CollideCirclePolygon(collider, this);\n        }\n        else if (collider instanceof PolygonCollider) {\n            return CollisionJumpTable.CollidePolygonPolygon(this, collider);\n        }\n        else if (collider instanceof EdgeCollider) {\n            return CollisionJumpTable.CollidePolygonEdge(this, collider);\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\n        }\n    }\n    /**\n     * Find the point on the collider furthest in the direction specified\n     */\n    getFurthestPoint(direction) {\n        const pts = this.getTransformedPoints();\n        let furthestPoint = null;\n        let maxDistance = -Number.MAX_VALUE;\n        for (let i = 0; i < pts.length; i++) {\n            const distance = direction.dot(pts[i]);\n            if (distance > maxDistance) {\n                maxDistance = distance;\n                furthestPoint = pts[i];\n            }\n        }\n        return furthestPoint;\n    }\n    /**\n     * Find the local point on the collider furthest in the direction specified\n     * @param direction\n     */\n    getFurthestLocalPoint(direction) {\n        const pts = this.points;\n        let furthestPoint = pts[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (let i = 0; i < pts.length; i++) {\n            const distance = direction.dot(pts[i]);\n            if (distance > maxDistance) {\n                maxDistance = distance;\n                furthestPoint = pts[i];\n            }\n        }\n        return furthestPoint;\n    }\n    /**\n     * Finds the closes face to the point using perpendicular distance\n     * @param point point to test against polygon\n     */\n    getClosestFace(point) {\n        const sides = this.getSides();\n        let min = Number.POSITIVE_INFINITY;\n        let faceIndex = -1;\n        let distance = -1;\n        for (let i = 0; i < sides.length; i++) {\n            const dist = sides[i].distanceToPoint(point);\n            if (dist < min) {\n                min = dist;\n                faceIndex = i;\n                distance = dist;\n            }\n        }\n        if (faceIndex !== -1) {\n            return {\n                distance: sides[faceIndex].normal().scale(distance),\n                face: sides[faceIndex]\n            };\n        }\n        return null;\n    }\n    /**\n     * Get the axis aligned bounding box for the polygon collider in world coordinates\n     */\n    get bounds() {\n        return this.localBounds.transform(this._transform.matrix);\n    }\n    /**\n     * Get the axis aligned bounding box for the polygon collider in local coordinates\n     */\n    get localBounds() {\n        if (this._localBoundsDirty) {\n            this._localBounds = BoundingBox.fromPoints(this.points);\n            this._localBoundsDirty = false;\n        }\n        return this._localBounds;\n    }\n    /**\n     * Get the moment of inertia for an arbitrary polygon\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n     */\n    getInertia(mass) {\n        if (this._cachedMass === mass && this._cachedInertia) {\n            return this._cachedInertia;\n        }\n        let numerator = 0;\n        let denominator = 0;\n        const points = this.points;\n        for (let i = 0; i < points.length; i++) {\n            const iplusone = (i + 1) % points.length;\n            const crossTerm = points[iplusone].cross(points[i]);\n            numerator += crossTerm * (points[i].dot(points[i]) + points[i].dot(points[iplusone]) + points[iplusone].dot(points[iplusone]));\n            denominator += crossTerm;\n        }\n        this._cachedMass = mass;\n        return (this._cachedInertia = (mass / 6) * (numerator / denominator));\n    }\n    /**\n     * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\n     */\n    rayCast(ray, max = Infinity) {\n        var _a;\n        // find the minimum contact time greater than 0\n        // contact times less than 0 are behind the ray and we don't want those\n        const sides = this.getSides();\n        const len = sides.length;\n        let minContactTime = Number.MAX_VALUE;\n        let contactSide;\n        let contactIndex = -1;\n        for (let i = 0; i < len; i++) {\n            const contactTime = ray.intersect(sides[i]);\n            if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\n                minContactTime = contactTime;\n                contactSide = sides[i];\n                contactIndex = i;\n            }\n        }\n        // contact was found\n        if (contactIndex >= 0) {\n            return {\n                collider: this,\n                distance: minContactTime,\n                body: (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent),\n                point: ray.getPoint(minContactTime),\n                normal: contactSide.normal()\n            };\n        }\n        // no contact found\n        return null;\n    }\n    /**\n     * Project the edges of the polygon along a specified axis\n     */\n    project(axis) {\n        const points = this.getTransformedPoints();\n        const len = points.length;\n        let min = Number.MAX_VALUE;\n        let max = -Number.MAX_VALUE;\n        for (let i = 0; i < len; i++) {\n            const scalar = points[i].dot(axis);\n            min = Math.min(min, scalar);\n            max = Math.max(max, scalar);\n        }\n        return new Projection(min, max);\n    }\n    debug(ex, color, options) {\n        const points = this.getTransformedPoints();\n        Debug.drawPolygon(points, { color });\n    }\n}\n\n;// ./Collision/Colliders/Shape.ts\n\n\n\n\n\n\n\n/**\n * Excalibur helper for defining colliders quickly\n */\nclass Shape {\n    /**\n     * Creates a box collider, under the hood defines a {@apilink PolygonCollider} collider\n     * @param width Width of the box\n     * @param height Height of the box\n     * @param anchor Anchor of the box (default (.5, .5)) which positions the box relative to the center of the collider's position\n     * @param offset Optional offset relative to the collider in local coordinates\n     */\n    static Box(width, height, anchor = Vector.Half, offset = Vector.Zero) {\n        return new PolygonCollider({\n            points: new BoundingBox(-width * anchor.x, -height * anchor.y, width - width * anchor.x, height - height * anchor.y).getPoints(),\n            offset: offset\n        });\n    }\n    /**\n     * Creates a new {@apilink PolygonCollider | `arbitrary polygon`} collider\n     *\n     * PolygonColliders are useful for creating convex polygon shapes\n     * @param points Points specified in counter clockwise\n     * @param offset Optional offset relative to the collider in local coordinates\n     */\n    static Polygon(points, offset = Vector.Zero, suppressConvexWarning = false) {\n        return new PolygonCollider({\n            points: points,\n            offset: offset,\n            suppressConvexWarning\n        });\n    }\n    /**\n     * Creates a new {@apilink CircleCollider | `circle`} collider\n     *\n     * Circle colliders are useful for balls, or to make collisions more forgiving on sharp edges\n     * @param radius Radius of the circle collider\n     * @param offset Optional offset relative to the collider in local coordinates\n     */\n    static Circle(radius, offset = Vector.Zero) {\n        return new CircleCollider({\n            radius: radius,\n            offset: offset\n        });\n    }\n    /**\n     * Creates a new {@apilink EdgeCollider | `edge`} collider\n     *\n     * Edge colliders are useful for  floors, walls, and other barriers\n     * @param begin Beginning of the edge in local coordinates to the collider\n     * @param end Ending of the edge in local coordinates to the collider\n     */\n    static Edge(begin, end) {\n        return new EdgeCollider({\n            begin: begin,\n            end: end\n        });\n    }\n    /**\n     * Creates a new capsule shaped {@apilink CompositeCollider} using 2 circles and a box\n     *\n     * Capsule colliders are useful for platformers with incline or jagged floors to have a smooth\n     * player experience.\n     * @param width\n     * @param height\n     * @param offset Optional offset\n     */\n    static Capsule(width, height, offset = Vector.Zero) {\n        const logger = Logger.getInstance();\n        if (width === height) {\n            logger.warn('A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider');\n        }\n        const vertical = height >= width;\n        if (vertical) {\n            // height > width, if equal maybe use a circle\n            const capsule = new CompositeCollider([\n                Shape.Circle(width / 2, vec(0, -height / 2 + width / 2).add(offset)),\n                Shape.Box(width, height - width, Vector.Half, offset),\n                Shape.Circle(width / 2, vec(0, height / 2 - width / 2).add(offset))\n            ]);\n            return capsule;\n        }\n        else {\n            // width > height, if equal maybe use a circle\n            const capsule = new CompositeCollider([\n                Shape.Circle(height / 2, vec(-width / 2 + height / 2, 0).add(offset)),\n                Shape.Box(width - height, height, Vector.Half, offset),\n                Shape.Circle(height / 2, vec(width / 2 - height / 2, 0).add(offset))\n            ]);\n            return capsule;\n        }\n    }\n}\n\n;// ./Collision/ColliderComponent.ts\n\n\n\n\n\n\n\n\n\n\nclass ColliderComponent extends Component {\n    constructor(collider) {\n        super();\n        this.events = new EventEmitter();\n        /**\n         * Observable that notifies when a collider is added to the body\n         */\n        this.$colliderAdded = new Observable();\n        /**\n         * Observable that notifies when a collider is removed from the body\n         */\n        this.$colliderRemoved = new Observable();\n        this._collidersToRemove = [];\n        this.set(collider);\n    }\n    /**\n     * Get the current collider geometry\n     */\n    get() {\n        return this._collider;\n    }\n    /**\n     * Set the collider geometry\n     * @param collider\n     * @returns the collider you set\n     */\n    set(collider) {\n        this.clear();\n        if (collider) {\n            this._collider = collider;\n            this._collider.owner = this.owner;\n            collider.events.pipe(this.events);\n            this.$colliderAdded.notifyAll(collider);\n            this.update();\n        }\n        return collider;\n    }\n    /**\n     * Remove collider geometry from collider component\n     */\n    clear() {\n        if (this._collider) {\n            this._collidersToRemove.push(this._collider);\n            this._collider = null;\n        }\n    }\n    processColliderRemoval() {\n        for (const collider of this._collidersToRemove) {\n            collider.events.unpipe(this.events);\n            this.$colliderRemoved.notifyAll(collider);\n            collider.owner = null;\n        }\n    }\n    clone() {\n        const clone = new ColliderComponent(this._collider.clone());\n        return clone;\n    }\n    /**\n     * Return world space bounds\n     */\n    get bounds() {\n        var _a, _b;\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox();\n    }\n    /**\n     * Return local space bounds\n     */\n    get localBounds() {\n        var _a, _b;\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox();\n    }\n    /**\n     * Update the collider's transformed geometry\n     */\n    update() {\n        var _a;\n        const tx = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\n        if (this._collider) {\n            this._collider.owner = this.owner;\n            if (tx) {\n                this._collider.update(tx.get());\n            }\n        }\n    }\n    /**\n     * Collide component with another\n     * @param other\n     */\n    collide(other) {\n        let colliderA = this._collider;\n        let colliderB = other._collider;\n        if (!colliderA || !colliderB) {\n            return [];\n        }\n        // If we have a composite left hand side :(\n        // Might bite us, but to avoid updating all the handlers make composite always left side\n        let flipped = false;\n        if (colliderB instanceof CompositeCollider) {\n            colliderA = colliderB;\n            colliderB = this._collider;\n            flipped = true;\n        }\n        if (this._collider) {\n            const contacts = colliderA.collide(colliderB);\n            if (contacts) {\n                if (flipped) {\n                    contacts.forEach((contact) => {\n                        contact.mtv = contact.mtv.negate();\n                        contact.normal = contact.normal.negate();\n                        contact.tangent = contact.normal.perpendicular();\n                        contact.colliderA = this._collider;\n                        contact.colliderB = other._collider;\n                    });\n                }\n                return contacts;\n            }\n            return [];\n        }\n        return [];\n    }\n    onAdd(entity) {\n        if (this._collider) {\n            this.update();\n        }\n        // Wire up the collider events to the owning entity\n        this.events.on('precollision', (evt) => {\n            const precollision = evt;\n            entity.events.emit('precollision', new PreCollisionEvent(precollision.self, precollision.other, precollision.side, precollision.intersection, precollision.contact));\n            if (entity instanceof Actor) {\n                entity.onPreCollisionResolve(precollision.self, precollision.other, precollision.side, precollision.contact);\n            }\n        });\n        this.events.on('postcollision', (evt) => {\n            const postcollision = evt;\n            entity.events.emit('postcollision', new PostCollisionEvent(postcollision.self, postcollision.other, postcollision.side, postcollision.intersection, postcollision.contact));\n            if (entity instanceof Actor) {\n                entity.onPostCollisionResolve(postcollision.self, postcollision.other, postcollision.side, postcollision.contact);\n            }\n        });\n        this.events.on('collisionstart', (evt) => {\n            const start = evt;\n            entity.events.emit('collisionstart', new CollisionStartEvent(start.self, start.other, start.side, start.contact));\n            if (entity instanceof Actor) {\n                entity.onCollisionStart(start.self, start.other, start.side, start.contact);\n            }\n        });\n        this.events.on('collisionend', (evt) => {\n            const end = evt;\n            entity.events.emit('collisionend', new CollisionEndEvent(end.self, end.other, end.side, end.lastContact));\n            if (entity instanceof Actor) {\n                entity.onCollisionEnd(end.self, end.other, end.side, end.lastContact);\n            }\n        });\n    }\n    onRemove() {\n        this.events.clear();\n        this.$colliderRemoved.notifyAll(this._collider);\n    }\n    /**\n     * Sets up a box geometry based on the current bounds of the associated actor of this physics body.\n     *\n     * If no width/height are specified the body will attempt to use the associated actor's width/height.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    useBoxCollider(width, height, anchor = Vector.Half, center = Vector.Zero) {\n        const collider = Shape.Box(width, height, anchor, center);\n        return this.set(collider);\n    }\n    /**\n     * Sets up a {@apilink PolygonCollider | `polygon`} collision geometry based on a list of of points relative\n     *  to the anchor of the associated actor\n     * of this physics body.\n     *\n     * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    usePolygonCollider(points, center = Vector.Zero) {\n        const poly = Shape.Polygon(points, center);\n        return this.set(poly);\n    }\n    /**\n     * Sets up a {@apilink Circle | `circle collision geometry`} as the only collider with a specified radius in pixels.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    useCircleCollider(radius, center = Vector.Zero) {\n        const collider = Shape.Circle(radius, center);\n        return this.set(collider);\n    }\n    /**\n     * Sets up an {@apilink Edge | `edge collision geometry`} with a start point and an end point relative to the anchor of the associated actor\n     * of this physics body.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    useEdgeCollider(begin, end) {\n        const collider = Shape.Edge(begin, end);\n        return this.set(collider);\n    }\n    /**\n     * Setups up a {@apilink CompositeCollider} which can define any arbitrary set of excalibur colliders\n     * @param colliders\n     */\n    useCompositeCollider(colliders) {\n        return this.set(new CompositeCollider(colliders));\n    }\n}\n\n;// ./Collision/BodyComponent.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar DegreeOfFreedom;\n(function (DegreeOfFreedom) {\n    DegreeOfFreedom[\"Rotation\"] = \"rotation\";\n    DegreeOfFreedom[\"X\"] = \"x\";\n    DegreeOfFreedom[\"Y\"] = \"y\";\n})(DegreeOfFreedom || (DegreeOfFreedom = {}));\n/**\n * Body describes all the physical properties pos, vel, acc, rotation, angular velocity for the purpose of\n * of physics simulation.\n */\nclass BodyComponent extends Component {\n    constructor(options) {\n        var _a, _b, _c;\n        super();\n        this.dependencies = [TransformComponent, MotionComponent];\n        this.id = createId('body', BodyComponent._ID++);\n        this.events = new EventEmitter();\n        this.oldTransform = new transform_Transform();\n        /**\n         * Indicates whether the old transform has been captured at least once for interpolation\n         * @internal\n         */\n        this.__oldTransformCaptured = false;\n        /**\n         * Enable or disabled the fixed update interpolation, by default interpolation is on.\n         */\n        this.enableFixedUpdateInterpolate = true;\n        /**\n         * Collision type for the rigidbody physics simulation, by default {@apilink CollisionType.PreventCollision}\n         */\n        this.collisionType = CollisionType.PreventCollision;\n        /**\n         * The collision group for the body's colliders, by default body colliders collide with everything\n         */\n        this.group = CollisionGroup.All;\n        this._sleeping = false;\n        /**\n         * The also known as coefficient of restitution of this actor, represents the amount of energy preserved after collision or the\n         * bounciness. If 1, it is 100% bouncy, 0 it completely absorbs.\n         */\n        this.bounciness = 0.2;\n        /**\n         * The coefficient of friction on this actor.\n         *\n         * The {@apilink SolverStrategy.Arcade} does not support this property.\n         *\n         */\n        this.friction = 0.99;\n        /**\n         * Should use global gravity {@apilink Physics.gravity} in it's physics simulation, default is true\n         */\n        this.useGravity = true;\n        /**\n         * Degrees of freedom to limit\n         *\n         * Note: this only limits responses in the realistic solver, if velocity/angularVelocity is set the actor will still respond\n         */\n        this.limitDegreeOfFreedom = [];\n        this._oldGlobalPos = Vector.Zero;\n        /**\n         * The velocity of the actor last frame (vx, vy) in pixels/second\n         */\n        this.oldVel = new Vector(0, 0);\n        /**\n         * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc {@apilink Physics.acc}.\n         */\n        this.oldAcc = Vector.Zero;\n        this._impulseScratch = vec(0, 0);\n        this._distanceFromCenterScratch = vec(0, 0);\n        if (options) {\n            this.collisionType = (_a = options.type) !== null && _a !== void 0 ? _a : this.collisionType;\n            this.group = (_b = options.group) !== null && _b !== void 0 ? _b : this.group;\n            this.useGravity = (_c = options.useGravity) !== null && _c !== void 0 ? _c : this.useGravity;\n            this._bodyConfig = {\n                ...getDefaultPhysicsConfig().bodies,\n                ...options.config\n            };\n        }\n        else {\n            this._bodyConfig = {\n                ...getDefaultPhysicsConfig().bodies\n            };\n        }\n        this.updatePhysicsConfig(this._bodyConfig);\n        this._mass = BodyComponent._DEFAULT_CONFIG.defaultMass;\n    }\n    get matrix() {\n        return this.transform.get().matrix;\n    }\n    /**\n     * Called by excalibur to update physics config defaults if they change\n     * @param config\n     */\n    updatePhysicsConfig(config) {\n        this._bodyConfig = {\n            ...getDefaultPhysicsConfig().bodies,\n            ...config\n        };\n        this.canSleep = this._bodyConfig.canSleepByDefault;\n        this.sleepMotion = this._bodyConfig.sleepEpsilon * 5;\n        this.wakeThreshold = this._bodyConfig.wakeThreshold;\n    }\n    /**\n     * Called by excalibur to update defaults\n     * @param config\n     */\n    static updateDefaultPhysicsConfig(config) {\n        BodyComponent._DEFAULT_CONFIG = config;\n    }\n    get mass() {\n        return this._mass;\n    }\n    set mass(newMass) {\n        this._mass = newMass;\n        this._cachedInertia = undefined;\n        this._cachedInverseInertia = undefined;\n    }\n    /**\n     * The inverse mass (1/mass) of the body. If {@apilink CollisionType.Fixed} this is 0, meaning \"infinite\" mass\n     */\n    get inverseMass() {\n        return this.collisionType === CollisionType.Fixed ? 0 : 1 / this.mass;\n    }\n    /**\n     * Whether this body is sleeping or not\n     * @deprecated use isSleeping\n     */\n    get sleeping() {\n        return this.isSleeping;\n    }\n    /**\n     * Whether this body is sleeping or not\n     */\n    get isSleeping() {\n        return this._sleeping;\n    }\n    /**\n     * Set the sleep state of the body\n     * @param sleeping\n     * @deprecated use isSleeping\n     */\n    setSleeping(sleeping) {\n        this.isSleeping = sleeping;\n    }\n    set isSleeping(sleeping) {\n        this._sleeping = sleeping;\n        if (!sleeping) {\n            // Give it a kick to keep it from falling asleep immediately\n            this.sleepMotion = this._bodyConfig.sleepEpsilon * 5;\n        }\n        else {\n            this.vel = Vector.Zero;\n            this.acc = Vector.Zero;\n            this.angularVelocity = 0;\n            this.sleepMotion = 0;\n        }\n    }\n    /**\n     * Update body's {@apilink BodyComponent.sleepMotion} for the purpose of sleeping\n     */\n    updateMotion() {\n        if (this._sleeping) {\n            this.isSleeping = true;\n        }\n        const currentMotion = this.vel.magnitude * this.vel.magnitude + Math.abs(this.angularVelocity * this.angularVelocity);\n        const bias = this._bodyConfig.sleepBias;\n        this.sleepMotion = bias * this.sleepMotion + (1 - bias) * currentMotion;\n        this.sleepMotion = clamp(this.sleepMotion, 0, 10 * this._bodyConfig.sleepEpsilon);\n        if (this.canSleep && this.sleepMotion < this._bodyConfig.sleepEpsilon) {\n            this.isSleeping = true;\n        }\n    }\n    /**\n     * Get the moment of inertia from the {@apilink ColliderComponent}\n     */\n    get inertia() {\n        if (this._cachedInertia) {\n            return this._cachedInertia;\n        }\n        // Inertia is a property of the geometry, so this is a little goofy but seems to be okay?\n        const collider = this.owner.get(ColliderComponent);\n        if (collider) {\n            collider.$colliderAdded.subscribe(() => {\n                this._cachedInertia = null;\n            });\n            collider.$colliderRemoved.subscribe(() => {\n                this._cachedInertia = null;\n            });\n            const maybeCollider = collider.get();\n            if (maybeCollider) {\n                return (this._cachedInertia = maybeCollider.getInertia(this.mass));\n            }\n        }\n        return 0;\n    }\n    /**\n     * Get the inverse moment of inertial from the {@apilink ColliderComponent}. If {@apilink CollisionType.Fixed} this is 0, meaning \"infinite\" mass\n     */\n    get inverseInertia() {\n        if (this._cachedInverseInertia) {\n            return this._cachedInverseInertia;\n        }\n        return (this._cachedInverseInertia = this.collisionType === CollisionType.Fixed ? 0 : 1 / this.inertia);\n    }\n    /**\n     * Returns if the owner is active\n     * @deprecated use isActive\n     */\n    get active() {\n        var _a;\n        return !!((_a = this.owner) === null || _a === void 0 ? void 0 : _a.isActive);\n    }\n    /**\n     * Returns if the owner is active\n     */\n    get isActive() {\n        var _a;\n        return !!((_a = this.owner) === null || _a === void 0 ? void 0 : _a.isActive);\n    }\n    /**\n     * @deprecated Use globalPos\n     */\n    get center() {\n        return this.globalPos;\n    }\n    onAdd(owner) {\n        var _a, _b;\n        this.transform = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\n        this.motion = (_b = this.owner) === null || _b === void 0 ? void 0 : _b.get(MotionComponent);\n    }\n    get pos() {\n        return this.transform.pos;\n    }\n    set pos(val) {\n        this.transform.pos = val;\n    }\n    /**\n     * The (x, y) position of the actor this will be in the middle of the actor if the\n     * {@apilink Actor.anchor} is set to (0.5, 0.5) which is default.\n     * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\n     */\n    get globalPos() {\n        return this.transform.globalPos;\n    }\n    set globalPos(val) {\n        this.transform.globalPos = val;\n    }\n    /**\n     * The position of the actor last frame (x, y) in pixels\n     */\n    get oldPos() {\n        return this.oldTransform.pos;\n    }\n    /**\n     * The global position of the actor last frame (x, y) in pixels\n     */\n    get oldGlobalPos() {\n        return this._oldGlobalPos;\n    }\n    /**\n     * The current velocity vector (vx, vy) of the actor in pixels/second\n     */\n    get vel() {\n        return this.motion.vel;\n    }\n    set vel(val) {\n        this.motion.vel = val;\n    }\n    /**\n     * The current acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\n     * be useful to simulate a gravitational effect.\n     */\n    get acc() {\n        return this.motion.acc;\n    }\n    set acc(val) {\n        this.motion.acc = val;\n    }\n    /**\n     * The current torque applied to the actor\n     */\n    get torque() {\n        return this.motion.torque;\n    }\n    set torque(val) {\n        this.motion.torque = val;\n    }\n    /**\n     * Gets/sets the rotation of the body from the last frame.\n     */\n    get oldRotation() {\n        return this.oldTransform.rotation;\n    }\n    /**\n     * The rotation of the body in radians\n     */\n    get rotation() {\n        return this.transform.globalRotation;\n    }\n    set rotation(val) {\n        this.transform.globalRotation = val;\n    }\n    /**\n     * The scale vector of the actor\n     */\n    get scale() {\n        return this.transform.globalScale;\n    }\n    set scale(val) {\n        this.transform.globalScale = val;\n    }\n    /**\n     * The scale of the actor last frame\n     */\n    get oldScale() {\n        return this.oldTransform.scale;\n    }\n    /**\n     * The scale rate of change of the actor in scale/second\n     */\n    get scaleFactor() {\n        return this.motion.scaleFactor;\n    }\n    set scaleFactor(scaleFactor) {\n        this.motion.scaleFactor = scaleFactor;\n    }\n    /**\n     * Get the angular velocity in radians/second\n     */\n    get angularVelocity() {\n        return this.motion.angularVelocity;\n    }\n    /**\n     * Set the angular velocity in radians/second\n     */\n    set angularVelocity(value) {\n        this.motion.angularVelocity = value;\n    }\n    /**\n     * Apply a specific impulse to the body\n     * @param point\n     * @param impulse\n     */\n    applyImpulse(point, impulse) {\n        if (this.collisionType !== CollisionType.Active) {\n            return; // only active objects participate in the simulation\n        }\n        const finalImpulse = impulse.scale(this.inverseMass, this._impulseScratch);\n        if (this.limitDegreeOfFreedom.indexOf(DegreeOfFreedom.X) > -1) {\n            finalImpulse.x = 0;\n        }\n        if (this.limitDegreeOfFreedom.indexOf(DegreeOfFreedom.Y) > -1) {\n            finalImpulse.y = 0;\n        }\n        this.vel.addEqual(finalImpulse);\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n            const distanceFromCenter = point.sub(this.globalPos, this._distanceFromCenterScratch);\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\n        }\n    }\n    /**\n     * Apply only linear impulse to the body\n     * @param impulse\n     */\n    applyLinearImpulse(impulse) {\n        if (this.collisionType !== CollisionType.Active) {\n            return; // only active objects participate in the simulation\n        }\n        const finalImpulse = impulse.scale(this.inverseMass);\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\n            finalImpulse.x = 0;\n        }\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\n            finalImpulse.y = 0;\n        }\n        this.vel = this.vel.add(finalImpulse);\n    }\n    /**\n     * Apply only angular impulse to the body\n     * @param point\n     * @param impulse\n     */\n    applyAngularImpulse(point, impulse) {\n        if (this.collisionType !== CollisionType.Active) {\n            return; // only active objects participate in the simulation\n        }\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n            const distanceFromCenter = point.sub(this.globalPos);\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\n        }\n    }\n    /**\n     * Sets the old versions of pos, vel, acc, and scale.\n     */\n    captureOldTransform() {\n        // Capture old values before integration step updates them\n        this.__oldTransformCaptured = true;\n        const tx = this.transform.get();\n        tx.clone(this.oldTransform);\n        this.oldTransform.parent = tx.parent; // also grab parent\n        this.oldVel.setTo(this.vel.x, this.vel.y);\n        this.oldAcc.setTo(this.acc.x, this.acc.y);\n        this.oldGlobalPos.setTo(this.globalPos.x, this.globalPos.y);\n    }\n    clone() {\n        const component = super.clone();\n        return component;\n    }\n}\nBodyComponent._ID = 0;\nBodyComponent._DEFAULT_CONFIG = {\n    ...getDefaultPhysicsConfig().bodies\n};\n\n;// ./Graphics/Rectangle.ts\n\n/**\n * A Rectangle {@apilink Graphic} for drawing rectangles to the {@apilink ExcaliburGraphicsContext}\n */\nclass Rectangle extends Raster {\n    constructor(options) {\n        super(options);\n        this.width = options.width;\n        this.height = options.height;\n        this.rasterize();\n    }\n    clone() {\n        return new Rectangle({\n            width: this.width,\n            height: this.height,\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        if (this.color) {\n            ctx.fillRect(0, 0, this.width, this.height);\n        }\n        if (this.strokeColor) {\n            ctx.strokeRect(0, 0, this.width, this.height);\n        }\n    }\n}\n\n;// ./Graphics/Circle.ts\n\n\n/**\n * A circle {@apilink Graphic} for drawing circles to the {@apilink ExcaliburGraphicsContext}\n *\n * Circles default to {@apilink ImageFiltering.Blended}\n */\nclass Circle extends Raster {\n    get radius() {\n        return this._radius;\n    }\n    set radius(value) {\n        this._radius = value;\n        this.width = this._radius * 2;\n        this.height = this._radius * 2;\n        this.flagDirty();\n    }\n    constructor(options) {\n        var _a, _b, _c;\n        super(options);\n        this._radius = 0;\n        const lineWidth = (_a = options.lineWidth) !== null && _a !== void 0 ? _a : (options.strokeColor ? 1 : 0); // default lineWidth in canvas is 1px\n        this.padding = (_b = options.padding) !== null && _b !== void 0 ? _b : 2 + lineWidth / 2; // default 2 padding for circles looks nice\n        this.radius = options.radius;\n        this.filtering = (_c = options.filtering) !== null && _c !== void 0 ? _c : ImageFiltering.Blended;\n        this.rasterize();\n    }\n    clone() {\n        return new Circle({\n            radius: this.radius,\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        if (this.radius > 0) {\n            ctx.beginPath();\n            ctx.arc(this.radius, this.radius, this.radius, 0, Math.PI * 2);\n            if (this.color) {\n                ctx.fill();\n            }\n            if (this.strokeColor) {\n                ctx.stroke();\n            }\n        }\n    }\n}\n\n;// ./Input/PointerComponent.ts\n\n/**\n * Add this component to optionally configure how the pointer\n * system detects pointer events.\n *\n * By default the collider shape is used and graphics bounds is not.\n *\n * If both collider shape and graphics bounds are enabled it will fire events if either or\n * are intersecting the pointer.\n */\nclass PointerComponent extends Component {\n    constructor(options) {\n        var _a, _b;\n        super();\n        /**\n         * Use any existing Collider component geometry for pointer events. This is useful if you want\n         * user pointer events only to trigger on the same collision geometry used in the collider component\n         * for collision resolution. Default is `true`.\n         */\n        this.useColliderShape = true;\n        /**\n         * Use any existing Graphics component bounds for pointers. This is useful if you want the axis aligned\n         * bounds around the graphic to trigger pointer events. Default is `true`.\n         */\n        this.useGraphicsBounds = true;\n        this.useColliderShape = (_a = options === null || options === void 0 ? void 0 : options.useColliderShape) !== null && _a !== void 0 ? _a : this.useColliderShape;\n        this.useGraphicsBounds = (_b = options === null || options === void 0 ? void 0 : options.useGraphicsBounds) !== null && _b !== void 0 ? _b : this.useGraphicsBounds;\n        this.localBounds = options === null || options === void 0 ? void 0 : options.localBounds;\n    }\n}\n\n;// ./Util/EasingFunctions.ts\n\n/**\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\n * Given a time, the function will return a value from positive startValue to positive endValue.\n *\n * ```js\n * function Linear (t) {\n *    return t * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInQuad (t) {\n *    return t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutQuad (t) {\n *    return t * (2 - t);\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutQuad (t) {\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInCubic (t) {\n *    return t * t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutCubic (t) {\n *    return (--t) * t * t + 1;\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutCubic (t) {\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n * }\n * ```\n */\nclass EasingFunctions {\n    static CreateReversibleEasingFunction(easing) {\n        return (time, start, end, duration) => {\n            if (end < start) {\n                return start - (easing(time, end, start, duration) - end);\n            }\n            else {\n                return easing(time, start, end, duration);\n            }\n        };\n    }\n    static CreateVectorEasingFunction(easing) {\n        return (time, start, end, duration) => {\n            return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\n        };\n    }\n}\nEasingFunctions.Linear = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    return (endValue * currentTime) / duration + startValue;\n});\nEasingFunctions.EaseInQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    return endValue * currentTime * currentTime + startValue;\n});\nEasingFunctions.EaseOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    return -endValue * currentTime * (currentTime - 2) + startValue;\n});\nEasingFunctions.EaseInOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration / 2;\n    if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime + startValue;\n    }\n    currentTime--;\n    return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\n});\nEasingFunctions.EaseInCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    return endValue * currentTime * currentTime * currentTime + startValue;\n});\nEasingFunctions.EaseOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    currentTime--;\n    return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\n});\nEasingFunctions.EaseInOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration / 2;\n    if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\n    }\n    currentTime -= 2;\n    return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\n});\n\n;// ./Actions/ActionQueue.ts\n\n/**\n * Action Queues represent an ordered sequence of actions\n *\n * Action queues are part of the {@apilink ActionContext | `Action API`} and\n * store the list of actions to be executed for an {@apilink Actor}.\n *\n * Actors implement {@apilink Actor.actions} which can be manipulated by\n * advanced users to adjust the actions currently being executed in the\n * queue.\n */\nclass ActionQueue {\n    constructor(entity) {\n        this._actions = [];\n        this._currentAction = null;\n        this._completedActions = [];\n        this._entity = entity;\n    }\n    /**\n     * Add an action to the sequence\n     * @param action\n     */\n    add(action) {\n        this._actions.push(action);\n    }\n    /**\n     * Remove an action by reference from the sequence\n     * @param action\n     */\n    remove(action) {\n        const index = this._actions.indexOf(action);\n        this._actions.splice(index, 1);\n    }\n    /**\n     * Removes all actions from this sequence\n     */\n    clearActions() {\n        this._actions.length = 0;\n        this._completedActions.length = 0;\n        if (this._currentAction) {\n            this._currentAction.stop();\n        }\n    }\n    /**\n     *\n     * @returns The total list of actions in this sequence complete or not\n     */\n    getActions() {\n        return this._actions.concat(this._completedActions);\n    }\n    getIncompleteActions() {\n        return this._actions;\n    }\n    getCurrentAction() {\n        return this._currentAction;\n    }\n    /**\n     *\n     * @returns `true` if there are more actions to process in the sequence\n     */\n    hasNext() {\n        return this._actions.length > 0;\n    }\n    /**\n     * @returns `true` if the current sequence of actions is done\n     */\n    isComplete() {\n        return this._actions.length === 0;\n    }\n    /**\n     * Resets the sequence of actions, this is used to restart a sequence from the beginning\n     */\n    reset() {\n        this._actions = this.getActions();\n        const len = this._actions.length;\n        for (let i = 0; i < len; i++) {\n            this._actions[i].reset();\n        }\n        this._completedActions = [];\n    }\n    /**\n     * Update the queue which updates actions and handles completing actions\n     * @param elapsed\n     */\n    update(elapsed) {\n        if (this._actions.length > 0) {\n            if (this._currentAction !== this._actions[0]) {\n                this._currentAction = this._actions[0];\n                this._entity.emit('actionstart', new ActionStartEvent(this._currentAction, this._entity));\n            }\n            this._currentAction.update(elapsed);\n            if (this._currentAction.isComplete(this._entity)) {\n                this._entity.emit('actioncomplete', new ActionCompleteEvent(this._currentAction, this._entity));\n                const complete = this._actions.shift();\n                if (complete) {\n                    this._completedActions.push(complete);\n                }\n            }\n        }\n    }\n}\n\n;// ./Actions/Action.ts\nlet _ACTION_ID = 0;\n/**\n *\n */\nfunction nextActionId() {\n    return _ACTION_ID++;\n}\n\n;// ./Actions/Action/Repeat.ts\n\n\nclass Repeat {\n    constructor(entity, repeatBuilder, repeat) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._repeatBuilder = repeatBuilder;\n        this._repeatContext = new ActionContext(entity);\n        this._actionQueue = this._repeatContext.getQueue();\n        this._repeat = repeat;\n        this._originalRepeat = repeat;\n        this._repeatBuilder(this._repeatContext);\n        this._repeat--; // current execution is the first repeat\n    }\n    update(elapsed) {\n        if (this._actionQueue.isComplete()) {\n            this._actionQueue.clearActions();\n            this._repeatBuilder(this._repeatContext);\n            this._repeat--;\n        }\n        this._actionQueue.update(elapsed);\n    }\n    isComplete() {\n        return this._stopped || (this._repeat <= 0 && this._actionQueue.isComplete());\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._repeat = this._originalRepeat;\n    }\n}\n\n;// ./Actions/Action/RepeatForever.ts\n\n\n/**\n * RepeatForever Action implementation, it is recommended you use the fluent action\n * context API.\n *\n *\n */\nclass RepeatForever {\n    constructor(entity, repeatBuilder) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._repeatBuilder = repeatBuilder;\n        this._repeatContext = new ActionContext(entity);\n        this._actionQueue = this._repeatContext.getQueue();\n        this._repeatBuilder(this._repeatContext);\n    }\n    update(elapsed) {\n        if (this._stopped) {\n            return;\n        }\n        if (this._actionQueue.isComplete()) {\n            this._actionQueue.clearActions();\n            this._repeatBuilder(this._repeatContext);\n        }\n        this._actionQueue.update(elapsed);\n    }\n    isComplete() {\n        return this._stopped;\n    }\n    stop() {\n        this._stopped = true;\n        this._actionQueue.clearActions();\n    }\n    reset() {\n        return;\n    }\n}\n\n;// ./Math/lerp.ts\n\n\n/**\n * Linear interpolation between `a` and `b`, at `time = 0` the value will be `a` at `time = 1` the value will be `b`\n * @param a\n * @param b\n * @param time\n */\nfunction lerp(a, b, time) {\n    return (1 - time) * a + b * time;\n}\n/**\n * Linear interpolation between angles in radians\n * @param startAngle\n * @param endAngle\n * @param rotationType\n * @param time\n */\nfunction lerpAngle(startAngle, endAngle, rotationType, time) {\n    const shortestPathIsPositive = (startAngle - endAngle + TwoPI) % TwoPI >= Math.PI;\n    const distance1 = Math.abs(endAngle - startAngle);\n    const distance2 = TwoPI - distance1;\n    let shortDistance = 0;\n    let longDistance = 0;\n    if (distance1 > distance2) {\n        shortDistance = distance2;\n        longDistance = distance1;\n    }\n    else {\n        shortDistance = distance1;\n        longDistance = distance2;\n    }\n    let distance = 0;\n    let direction = 1;\n    switch (rotationType) {\n        case RotationType.ShortestPath:\n            distance = shortDistance;\n            direction = shortestPathIsPositive ? 1 : -1;\n            break;\n        case RotationType.LongestPath:\n            distance = longDistance;\n            direction = shortestPathIsPositive ? -1 : 1;\n            break;\n        case RotationType.Clockwise:\n            direction = 1;\n            distance = shortestPathIsPositive ? shortDistance : longDistance;\n            break;\n        case RotationType.CounterClockwise:\n            direction = -1;\n            distance = shortestPathIsPositive ? longDistance : shortDistance;\n            break;\n    }\n    return startAngle + direction * (distance * time);\n}\n/**\n * Linear interpolation between `a` and `b`, at `time = 0` the value will be `a` at `time = 1` the value will be `b`\n * @param a\n * @param b\n * @param time\n */\nfunction lerpVector(a, b, time) {\n    return a.scale(1 - time).add(b.scale(time));\n}\n/**\n * Inverse of a linear interpolation, given a `value` in between `a` and `b` return how close to `a` or `b` the `value` is.\n *\n * Example: `a=1`, `b=5`, `value=4` will return `.75`\n * @param a\n * @param b\n * @param value\n */\nfunction inverseLerp(a, b, value) {\n    return (value - a) / (b - a);\n}\n/**\n * Inverse of a linear interpolation, given a `value` in between `a` and `b` return how close to `a` or `b` the `value` is.\n *\n * **Warning** assumes that the `value` vector is co-linear with vector `a` and `b`\n *\n * Example: `a=1`, `b=5`, `value=4` will return `.75`\n * @param a\n * @param b\n * @param value\n */\nfunction inverseLerpVector(a, b, value) {\n    const numerator = value.sub(a);\n    const denominator = b.sub(a);\n    const x = numerator.x / denominator.x;\n    const y = numerator.y / denominator.y;\n    return Math.min(x, y);\n}\n/**\n * Remaps a value from a source domain to a destination\n * @param minSource\n * @param maxSource\n * @param minDestination\n * @param maxDestination\n * @param value\n */\nfunction remap(minSource, maxSource, minDestination, maxDestination, value) {\n    const time = inverseLerp(minSource, maxSource, value);\n    return lerp(minDestination, maxDestination, time);\n}\n/**\n * Remaps a value from a source domain to a destination\n *\n * **Warning** assumes that the `value` vector is co-linear with vector `minSource` and `maxSource`\n * @param minSource\n * @param maxSource\n * @param minDestination\n * @param maxDestination\n * @param value\n */\nfunction remapVector(minSource, maxSource, minDestination, maxDestination, value) {\n    const time = inverseLerpVector(minSource, maxSource, value);\n    return lerpVector(minDestination, maxDestination, time);\n}\n\n;// ./Actions/Action/MoveBy.ts\n\n\n\n\n\n\n\n/**\n *\n */\nfunction isMoveByOptions(x) {\n    return x.offset instanceof Vector && typeof x.duration === 'number';\n}\nclass MoveByWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._easing = EasingFunctions.Linear;\n        this._offset = options.offset;\n        this._easing = (_a = options.easing) !== null && _a !== void 0 ? _a : this._easing;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only MoveBy on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._start = this._tx.pos.clone();\n            this._end = this._start.add(this._offset);\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const currentPos = this._tx.pos;\n        const newPosX = this._easing(t, this._start.x, this._end.x, 1);\n        const newPosY = this._easing(t, this._start.y, this._end.y, 1);\n        const velX = (newPosX - currentPos.x) / (elapsed / 1000);\n        const velY = (newPosY - currentPos.y) / (elapsed / 1000);\n        this._motion.vel.x = velX;\n        this._motion.vel.y = velY;\n        if (this.isComplete(this.entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass MoveBy {\n    constructor(entity, offsetX, offsetY, speed) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._entity = entity;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._speed = speed;\n        this._offset = new Vector(offsetX, offsetY);\n        if (speed <= 0) {\n            Logger.getInstance().error('Attempted to moveBy with speed less than or equal to zero : ' + speed);\n            throw new Error('Speed must be greater than 0 pixels per second');\n        }\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\n            this._end = this._start.add(this._offset);\n            this._distance = this._offset.magnitude;\n            this._dir = this._end.sub(this._start).normalize();\n        }\n        if (this.isComplete(this._entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n        else {\n            this._motion.vel = this._dir.scale(this._speed);\n        }\n    }\n    isComplete(entity) {\n        const tx = entity.get(TransformComponent);\n        return this._stopped || tx.pos.distance(this._start) >= this._distance;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/MoveTo.ts\n\n\n\n\n\n\n/**\n *\n */\nfunction isMoveToOptions(x) {\n    return x.pos instanceof Vector && typeof x.duration === 'number';\n}\nclass MoveToWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._easing = EasingFunctions.Linear;\n        this._end = options.pos;\n        this._easing = (_a = options.easing) !== null && _a !== void 0 ? _a : this._easing;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only moveTo on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._start = this._tx.pos.clone();\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const currentPos = this._tx.pos;\n        const newPosX = this._easing(t, this._start.x, this._end.x, 1);\n        const newPosY = this._easing(t, this._start.y, this._end.y, 1);\n        const velX = (newPosX - currentPos.x) / (elapsed / 1000);\n        const velY = (newPosY - currentPos.y) / (elapsed / 1000);\n        this._motion.vel.x = velX;\n        this._motion.vel.y = velY;\n        if (this.isComplete(this.entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass MoveTo {\n    constructor(entity, destX, destY, speed) {\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._end = new Vector(destX, destY);\n        this._speed = speed;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\n            this._distance = this._start.distance(this._end);\n            this._dir = this._end.sub(this._start).normalize();\n        }\n        const m = this._dir.scale(this._speed);\n        this._motion.vel = vec(m.x, m.y);\n        if (this.isComplete(this.entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete(entity) {\n        const tx = entity.get(TransformComponent);\n        return this._stopped || new Vector(tx.pos.x, tx.pos.y).distance(this._start) >= this._distance;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/RotateTo.ts\n\n\n\n\n\n\n/**\n *\n */\nfunction isRotateToOptions(x) {\n    return typeof x.angle === 'number' && typeof x.duration === 'number';\n}\nclass RotateToWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._endAngle = 0;\n        this._startAngle = 0;\n        this._endAngle = options.angle;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only RotateTo on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._rotationType = (_a = options.rotationType) !== null && _a !== void 0 ? _a : RotationType.ShortestPath;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startAngle = this._tx.rotation;\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newAngle = lerpAngle(this._startAngle, this._endAngle, this._rotationType, t);\n        const currentAngle = this._tx.rotation;\n        const rx = (newAngle - currentAngle) / (elapsed / 1000);\n        this._motion.angularVelocity = rx;\n        if (this.isComplete(this.entity)) {\n            this._tx.rotation = this._endAngle;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass RotateTo {\n    constructor(entity, angle, speed, rotationType) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._end = angle;\n        this._speed = speed;\n        this._rotationType = rotationType || RotationType.ShortestPath;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = this._tx.rotation;\n            this._currentNonCannonAngle = this._tx.rotation;\n            const distance1 = Math.abs(this._end - this._start);\n            const distance2 = TwoPI - distance1;\n            if (distance1 > distance2) {\n                this._shortDistance = distance2;\n                this._longDistance = distance1;\n            }\n            else {\n                this._shortDistance = distance1;\n                this._longDistance = distance2;\n            }\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\n            switch (this._rotationType) {\n                case RotationType.ShortestPath:\n                    this._distance = this._shortDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = 1;\n                    }\n                    else {\n                        this._direction = -1;\n                    }\n                    break;\n                case RotationType.LongestPath:\n                    this._distance = this._longDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = -1;\n                    }\n                    else {\n                        this._direction = 1;\n                    }\n                    break;\n                case RotationType.Clockwise:\n                    this._direction = 1;\n                    if (this._shortestPathIsPositive) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n                case RotationType.CounterClockwise:\n                    this._direction = -1;\n                    if (!this._shortestPathIsPositive) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n            }\n        }\n        this._motion.angularVelocity = this._direction * this._speed;\n        this._currentNonCannonAngle += this._direction * this._speed * (elapsed / 1000);\n        if (this.isComplete()) {\n            this._tx.rotation = this._end;\n            this._motion.angularVelocity = 0;\n            this._stopped = true;\n        }\n    }\n    isComplete() {\n        const distanceTraveled = Math.abs(this._currentNonCannonAngle - this._start);\n        return this._stopped || distanceTraveled >= Math.abs(this._distance);\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/RotateBy.ts\n\n\n\n\n\n/**\n *\n */\nfunction isRotateByOptions(x) {\n    return typeof x.angleRadiansOffset === 'number' && typeof x.duration === 'number';\n}\nclass RotateByWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._offset = 0;\n        this._startAngle = 0;\n        this._endAngle = 0;\n        this._offset = options.angleRadiansOffset;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only RotateBy on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._rotationType = (_a = options.rotationType) !== null && _a !== void 0 ? _a : RotationType.ShortestPath;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startAngle = this._tx.rotation;\n            this._endAngle = canonicalizeAngle(this._startAngle + this._offset);\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newAngle = lerpAngle(this._startAngle, this._endAngle, this._rotationType, t);\n        const currentAngle = this._tx.rotation;\n        const rx = (newAngle - currentAngle) / (elapsed / 1000);\n        this._motion.angularVelocity = rx;\n        if (this.isComplete()) {\n            this._tx.rotation = this._endAngle;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass RotateBy {\n    constructor(entity, angleRadiansOffset, speed, rotationType) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._speed = speed;\n        this._offset = angleRadiansOffset;\n        this._rotationType = rotationType || RotationType.ShortestPath;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = this._tx.rotation;\n            this._currentNonCannonAngle = this._tx.rotation;\n            this._end = this._start + this._offset;\n            const distance1 = Math.abs(this._end - this._start);\n            const distance2 = TwoPI - distance1;\n            if (distance1 > distance2) {\n                this._shortDistance = distance2;\n                this._longDistance = distance1;\n            }\n            else {\n                this._shortDistance = distance1;\n                this._longDistance = distance2;\n            }\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\n            switch (this._rotationType) {\n                case RotationType.ShortestPath:\n                    this._distance = this._shortDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = 1;\n                    }\n                    else {\n                        this._direction = -1;\n                    }\n                    break;\n                case RotationType.LongestPath:\n                    this._distance = this._longDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = -1;\n                    }\n                    else {\n                        this._direction = 1;\n                    }\n                    break;\n                case RotationType.Clockwise:\n                    this._direction = 1;\n                    if (this._shortDistance >= 0) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n                case RotationType.CounterClockwise:\n                    this._direction = -1;\n                    if (this._shortDistance <= 0) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n            }\n        }\n        this._motion.angularVelocity = this._direction * this._speed;\n        this._currentNonCannonAngle += this._direction * this._speed * (elapsed / 1000);\n        if (this.isComplete()) {\n            this._tx.rotation = this._end;\n            this._motion.angularVelocity = 0;\n            this._stopped = true;\n        }\n    }\n    isComplete() {\n        const distanceTraveled = Math.abs(this._currentNonCannonAngle - this._start);\n        return this._stopped || distanceTraveled >= Math.abs(this._distance);\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._start = undefined;\n        this._currentNonCannonAngle = undefined;\n        this._distance = undefined;\n    }\n}\n\n;// ./Actions/Action/ScaleTo.ts\n\n\n\n\n\n/**\n *\n */\nfunction isScaleToOptions(x) {\n    return typeof x.scale === 'object' && typeof x.duration === 'number';\n}\nclass ScaleToWithOptions {\n    constructor(entity, options) {\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._endScale = vec(1, 1);\n        this._startScale = vec(1, 1);\n        this._endScale = options.scale;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only ScaleTo on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startScale = this._tx.scale;\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newScale = lerpVector(this._startScale, this._endScale, t);\n        const currentScale = this._tx.scale;\n        const sx = newScale.sub(currentScale).scale(1 / (elapsed / 1000));\n        this._motion.scaleFactor = sx;\n        if (this.isComplete()) {\n            this._tx.scale = this._endScale;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.scaleFactor = Vector.Zero;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass ScaleTo {\n    constructor(entity, scaleX, scaleY, speedX, speedY) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._endX = scaleX;\n        this._endY = scaleY;\n        this._speedX = speedX;\n        this._speedY = speedY;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._startX = this._tx.scale.x;\n            this._startY = this._tx.scale.y;\n            this._distanceX = Math.abs(this._endX - this._startX);\n            this._distanceY = Math.abs(this._endY - this._startY);\n        }\n        if (!(Math.abs(this._tx.scale.x - this._startX) >= this._distanceX)) {\n            const directionX = this._endY < this._startY ? -1 : 1;\n            this._motion.scaleFactor.x = this._speedX * directionX;\n        }\n        else {\n            this._motion.scaleFactor.x = 0;\n        }\n        if (!(Math.abs(this._tx.scale.y - this._startY) >= this._distanceY)) {\n            const directionY = this._endY < this._startY ? -1 : 1;\n            this._motion.scaleFactor.y = this._speedY * directionY;\n        }\n        else {\n            this._motion.scaleFactor.y = 0;\n        }\n        if (this.isComplete()) {\n            this._tx.scale = vec(this._endX, this._endY);\n            this._motion.scaleFactor.x = 0;\n            this._motion.scaleFactor.y = 0;\n        }\n    }\n    isComplete() {\n        return (this._stopped ||\n            (Math.abs(this._tx.scale.x - this._startX) >= this._distanceX - 0.01 &&\n                Math.abs(this._tx.scale.y - this._startY) >= this._distanceY - 0.01));\n    }\n    stop() {\n        this._motion.scaleFactor.x = 0;\n        this._motion.scaleFactor.y = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/ScaleBy.ts\n\n\n\n\n\n/**\n *\n */\nfunction isScaleByOptions(x) {\n    return typeof x.scaleOffset === 'object' && typeof x.duration === 'number';\n}\nclass ScaleByWithOptions {\n    constructor(entity, options) {\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._endScale = vec(1, 1);\n        this._scaleOffset = vec(0, 0);\n        this._startScale = vec(1, 1);\n        this._scaleOffset = options.scaleOffset;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only ScaleBy on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startScale = this._tx.scale;\n            this._endScale = this._startScale.add(this._scaleOffset);\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newScale = lerpVector(this._startScale, this._endScale, t);\n        const currentScale = this._tx.scale;\n        const sx = newScale.sub(currentScale).scale(1 / (elapsed / 1000));\n        this._motion.scaleFactor = sx;\n        if (this.isComplete()) {\n            this._tx.scale = this._endScale;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.scaleFactor = Vector.Zero;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass ScaleBy {\n    constructor(entity, scaleOffsetX, scaleOffsetY, speed) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._offset = new Vector(scaleOffsetX, scaleOffsetY);\n        this._speedX = this._speedY = speed;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._startScale = this._tx.scale.clone();\n            this._endScale = this._startScale.add(this._offset);\n            this._distanceX = Math.abs(this._endScale.x - this._startScale.x);\n            this._distanceY = Math.abs(this._endScale.y - this._startScale.y);\n            this._directionX = this._endScale.x < this._startScale.x ? -1 : 1;\n            this._directionY = this._endScale.y < this._startScale.y ? -1 : 1;\n        }\n        this._motion.scaleFactor.x = this._speedX * this._directionX;\n        this._motion.scaleFactor.y = this._speedY * this._directionY;\n        if (this.isComplete()) {\n            this._tx.scale = this._endScale;\n            this._motion.scaleFactor.x = 0;\n            this._motion.scaleFactor.y = 0;\n        }\n    }\n    isComplete() {\n        return (this._stopped ||\n            (Math.abs(this._tx.scale.x - this._startScale.x) >= this._distanceX - 0.01 &&\n                Math.abs(this._tx.scale.y - this._startScale.y) >= this._distanceY - 0.01));\n    }\n    stop() {\n        this._motion.scaleFactor.x = 0;\n        this._motion.scaleFactor.y = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/CallMethod.ts\n\nclass CallMethod {\n    constructor(method) {\n        this.id = nextActionId();\n        this._hasBeenCalled = false;\n        this._method = method;\n    }\n    update(elapsed) {\n        this._method();\n        this._hasBeenCalled = true;\n    }\n    isComplete() {\n        return this._hasBeenCalled;\n    }\n    reset() {\n        this._hasBeenCalled = false;\n    }\n    stop() {\n        this._hasBeenCalled = true;\n    }\n}\n\n;// ./Actions/Action/EaseTo.ts\n\n\n\n\n/**\n * @deprecated use moveTo({pos: Vector, duration: number, easing: EasingFunction})\n */\nclass EaseTo {\n    constructor(entity, x, y, duration, easingFcn) {\n        this.easingFcn = easingFcn;\n        this.id = nextActionId();\n        this._currentLerpTime = 0;\n        this._lerpDuration = 1 * 1000; // 1 second\n        this._lerpStart = new Vector(0, 0);\n        this._lerpEnd = new Vector(0, 0);\n        this._initialized = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._lerpDuration = duration;\n        this._lerpEnd = new Vector(x, y);\n    }\n    _initialize() {\n        this._lerpStart = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._currentLerpTime = 0;\n    }\n    update(elapsed) {\n        if (!this._initialized) {\n            this._initialize();\n            this._initialized = true;\n        }\n        // Need to update lerp time first, otherwise the first update will always be zero\n        this._currentLerpTime += elapsed;\n        let newX = this._tx.pos.x;\n        let newY = this._tx.pos.y;\n        if (this._currentLerpTime < this._lerpDuration) {\n            if (this._lerpEnd.x < this._lerpStart.x) {\n                newX =\n                    this._lerpStart.x -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\n            }\n            else {\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\n            }\n            if (this._lerpEnd.y < this._lerpStart.y) {\n                newY =\n                    this._lerpStart.y -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\n            }\n            else {\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\n            }\n            // Given the lerp position figure out the velocity in pixels per second\n            this._motion.vel = vec((newX - this._tx.pos.x) / (elapsed / 1000), (newY - this._tx.pos.y) / (elapsed / 1000));\n        }\n        else {\n            this._tx.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\n            this._motion.vel = Vector.Zero;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentLerpTime >= this._lerpDuration;\n    }\n    reset() {\n        this._initialized = false;\n        this._stopped = false;\n        this._currentLerpTime = 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n}\n\n;// ./Actions/Action/EaseBy.ts\n\n\n\n\n/**\n * @deprecated use moveBy({offset: Vector, duration: number, easing: EasingFunction})\n */\nclass EaseBy {\n    constructor(entity, offsetX, offsetY, duration, easingFcn) {\n        this.easingFcn = easingFcn;\n        this.id = nextActionId();\n        this._currentLerpTime = 0;\n        this._lerpDuration = 1 * 1000; // 1 second\n        this._lerpStart = new Vector(0, 0);\n        this._lerpEnd = new Vector(0, 0);\n        this._initialized = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._lerpDuration = duration;\n        this._offset = new Vector(offsetX, offsetY);\n    }\n    _initialize() {\n        this._lerpStart = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._currentLerpTime = 0;\n        this._lerpEnd = this._lerpStart.add(this._offset);\n    }\n    update(elapsed) {\n        if (!this._initialized) {\n            this._initialize();\n            this._initialized = true;\n        }\n        // Need to update lerp time first, otherwise the first update will always be zero\n        this._currentLerpTime += elapsed;\n        let newX = this._tx.pos.x;\n        let newY = this._tx.pos.y;\n        if (this._currentLerpTime < this._lerpDuration) {\n            if (this._lerpEnd.x < this._lerpStart.x) {\n                newX =\n                    this._lerpStart.x -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\n            }\n            else {\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\n            }\n            if (this._lerpEnd.y < this._lerpStart.y) {\n                newY =\n                    this._lerpStart.y -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\n            }\n            else {\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\n            }\n            // Given the lerp position figure out the velocity in pixels per second\n            this._motion.vel = vec((newX - this._tx.pos.x) / (elapsed / 1000), (newY - this._tx.pos.y) / (elapsed / 1000));\n        }\n        else {\n            this._tx.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\n            this._motion.vel = Vector.Zero;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentLerpTime >= this._lerpDuration;\n    }\n    reset() {\n        this._initialized = false;\n        this._stopped = false;\n        this._currentLerpTime = 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n}\n\n;// ./Actions/Action/Blink.ts\n\n\nclass Blink {\n    constructor(entity, timeVisible, timeNotVisible, numBlinks = 1) {\n        this.id = nextActionId();\n        this._timeVisible = 0;\n        this._timeNotVisible = 0;\n        this._elapsedTime = 0;\n        this._totalTime = 0;\n        this._stopped = false;\n        this._started = false;\n        this._graphics = entity.get(GraphicsComponent);\n        this._timeVisible = timeVisible;\n        this._timeNotVisible = timeNotVisible;\n        this._duration = (timeVisible + timeNotVisible) * numBlinks;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._elapsedTime = 0;\n            this._totalTime = 0;\n        }\n        if (!this._graphics) {\n            return;\n        }\n        this._elapsedTime += elapsed;\n        this._totalTime += elapsed;\n        if (this._graphics.isVisible && this._elapsedTime >= this._timeVisible) {\n            this._graphics.isVisible = false;\n            this._elapsedTime = 0;\n        }\n        if (!this._graphics.isVisible && this._elapsedTime >= this._timeNotVisible) {\n            this._graphics.isVisible = true;\n            this._elapsedTime = 0;\n        }\n        if (this.isComplete()) {\n            this._graphics.isVisible = true;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._totalTime >= this._duration;\n    }\n    stop() {\n        if (this._graphics) {\n            this._graphics.isVisible = true;\n        }\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._elapsedTime = 0;\n        this._totalTime = 0;\n    }\n}\n\n;// ./Actions/Action/Fade.ts\n\n\n\nclass Fade {\n    constructor(entity, endOpacity, duration) {\n        this.id = nextActionId();\n        this._multiplier = 1;\n        this._started = false;\n        this._stopped = false;\n        this._graphics = entity.get(GraphicsComponent);\n        this._endOpacity = endOpacity;\n        this._remainingTime = this._originalTime = duration;\n    }\n    update(elapsed) {\n        if (!this._graphics) {\n            return;\n        }\n        if (!this._started) {\n            this._started = true;\n            this._remainingTime = this._originalTime;\n            // determine direction when we start\n            if (this._endOpacity < this._graphics.opacity) {\n                this._multiplier = -1;\n            }\n            else {\n                this._multiplier = 1;\n            }\n        }\n        if (this._remainingTime > 0) {\n            this._graphics.opacity += (this._multiplier * (Math.abs(this._graphics.opacity - this._endOpacity) * elapsed)) / this._remainingTime;\n        }\n        this._remainingTime -= elapsed;\n        if (this.isComplete()) {\n            this._graphics.opacity = this._endOpacity;\n        }\n        Logger.getInstance().debug('[Action fade] Actor opacity:', this._graphics.opacity);\n    }\n    isComplete() {\n        return this._stopped || this._remainingTime <= 0;\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._remainingTime = this._originalTime;\n    }\n}\n\n;// ./Actions/Action/Delay.ts\n\nclass Delay {\n    constructor(duration) {\n        this.id = nextActionId();\n        this._elapsedTime = 0;\n        this._started = false;\n        this._stopped = false;\n        this._delay = duration;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n        }\n        this._elapsedTime += elapsed;\n    }\n    isComplete() {\n        return this._stopped || this._elapsedTime >= this._delay;\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._elapsedTime = 0;\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/Die.ts\n\n\nclass Die {\n    constructor(entity) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._entity = entity;\n    }\n    update(elapsed) {\n        this._entity.get(ActionsComponent).clearActions();\n        this._entity.kill();\n        this._stopped = true;\n    }\n    isComplete() {\n        return this._stopped;\n    }\n    stop() {\n        return;\n    }\n    reset() {\n        return;\n    }\n}\n\n;// ./Actions/Action/Follow.ts\n\n\n\n\nclass Follow {\n    constructor(entity, entityToFollow, followDistance) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._followTx = entityToFollow.get(TransformComponent);\n        this._followMotion = entityToFollow.get(MotionComponent);\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._end = new Vector(this._followTx.pos.x, this._followTx.pos.y);\n        this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\n        this._speed = 0;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._distanceBetween = this._current.distance(this._end);\n            this._dir = this._end.sub(this._current).normalize();\n        }\n        const actorToFollowSpeed = Math.sqrt(Math.pow(this._followMotion.vel.x, 2) + Math.pow(this._followMotion.vel.y, 2));\n        if (actorToFollowSpeed !== 0) {\n            this._speed = actorToFollowSpeed;\n        }\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\n        this._end = vec(this._followTx.pos.x, this._followTx.pos.y);\n        this._distanceBetween = this._current.distance(this._end);\n        this._dir = this._end.sub(this._current).normalize();\n        if (this._distanceBetween >= this._maximumDistance) {\n            const m = this._dir.scale(this._speed);\n            this._motion.vel = vec(m.x, m.y);\n        }\n        else {\n            this._motion.vel = vec(0, 0);\n        }\n        if (this.isComplete()) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    isComplete() {\n        // the actor following should never stop unless specified to do so\n        return this._stopped;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/Meet.ts\n\n\n\n\nclass Meet {\n    constructor(actor, actorToMeet, speed) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._speedWasSpecified = false;\n        this._tx = actor.get(TransformComponent);\n        this._motion = actor.get(MotionComponent);\n        this._meetTx = actorToMeet.get(TransformComponent);\n        this._meetMotion = actorToMeet.get(MotionComponent);\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._end = new Vector(this._meetTx.pos.x, this._meetTx.pos.y);\n        this._speed = speed || 0;\n        if (speed !== undefined) {\n            this._speedWasSpecified = true;\n        }\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._distanceBetween = this._current.distance(this._end);\n            this._dir = this._end.sub(this._current).normalize();\n        }\n        const actorToMeetSpeed = Math.sqrt(Math.pow(this._meetMotion.vel.x, 2) + Math.pow(this._meetMotion.vel.y, 2));\n        if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\n            this._speed = actorToMeetSpeed;\n        }\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\n        this._end = vec(this._meetTx.pos.x, this._meetTx.pos.y);\n        this._distanceBetween = this._current.distance(this._end);\n        this._dir = this._end.sub(this._current).normalize();\n        const m = this._dir.scale(this._speed);\n        this._motion.vel = vec(m.x, m.y);\n        if (this.isComplete()) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete() {\n        return this._stopped || this._distanceBetween <= 1;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._distanceBetween = Infinity;\n    }\n}\n\n;// ./Actions/Action/Flash.ts\n\n\nclass Flash {\n    constructor(entity, color, duration = 1000) {\n        var _a;\n        this.id = nextActionId();\n        this._stopped = false;\n        this._started = false;\n        this._total = 0;\n        this._currentDuration = 0;\n        this._graphics = entity.get(GraphicsComponent);\n        this._duration = duration;\n        this._entity = entity;\n        this._material = (_a = entity.scene) === null || _a === void 0 ? void 0 : _a.engine.graphicsContext.createMaterial({\n            name: 'flash-material',\n            color,\n            fragmentSource: `#version 300 es\r\n    \r\n        precision mediump float;\r\n        uniform float u_blend;\r\n        uniform sampler2D u_graphic;\r\n        uniform vec4 u_color;\r\n    \r\n        in vec2 v_uv; \r\n        out vec4 color;\r\n    \r\n        void main() { \r\n            vec4 textureColor = texture(u_graphic, v_uv); \r\n            color = mix(textureColor, u_color, u_blend * textureColor.a);\r\n            color.rgb = color.rgb * color.a;\r\n        }`\n        });\n        this._total = duration;\n    }\n    update(elapsed) {\n        var _a;\n        if (!this._started) {\n            this._started = true;\n            this._total = this._duration;\n            this._currentDuration = this._duration;\n            this._entity.graphics.material = this._material;\n        }\n        if (!this._graphics) {\n            return;\n        }\n        this._currentDuration -= elapsed;\n        if (this._graphics) {\n            (_a = this._material) === null || _a === void 0 ? void 0 : _a.update((shader) => {\n                shader.trySetUniformFloat('u_blend', this._currentDuration / this._total);\n            });\n        }\n        if (this.isComplete()) {\n            this._entity.graphics.material = null;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentDuration <= 0;\n    }\n    stop() {\n        if (this._graphics) {\n            this._graphics.isVisible = true;\n        }\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Math/bezier-curve.ts\n\n/**\n * BezierCurve that supports cubic Bezier curves.\n */\nclass BezierCurve {\n    constructor(options) {\n        var _a;\n        // Thanks Freya! https://www.youtube.com/watch?v=aVwxzDHniEw\n        this._distLookup = [];\n        this.quality = 4;\n        if (options.controlPoints.length !== 4) {\n            throw new Error('Only cubic bezier curves are supported');\n        }\n        this._controlPoints = [...options.controlPoints];\n        this.quality = (_a = options.quality) !== null && _a !== void 0 ? _a : this.quality;\n        this._calculateLookup();\n    }\n    get arcLength() {\n        return this._arcLength;\n    }\n    get controlPoints() {\n        return this._controlPoints;\n    }\n    set controlPoints(points) {\n        this._controlPoints = [...points];\n        this._calculateLookup();\n    }\n    setControlPoint(index, point) {\n        this._controlPoints[index] = point;\n        this._calculateLookup();\n    }\n    _calculateLookup() {\n        let totalLength = 0;\n        this._distLookup.length = 0;\n        let prev = this.controlPoints[0];\n        const n = this.controlPoints.length * this.quality;\n        for (let i = 0; i < n; i++) {\n            const t = i / (n - 1);\n            const pt = this.getPoint(t);\n            const diff = prev.distance(pt);\n            totalLength += diff;\n            this._distLookup.push(totalLength);\n            prev = pt;\n        }\n        this._arcLength = totalLength;\n    }\n    _getTimeGivenDistance(distance) {\n        const n = this._distLookup.length;\n        const arcLength = this.arcLength;\n        if (distance >= 0 && distance < arcLength) {\n            for (let i = 0; i < n - 1; i++) {\n                if (this._distLookup[i] <= distance && distance < this._distLookup[i + 1]) {\n                    return remap(this._distLookup[i], this._distLookup[i + 1], i / (n - 1), (i + 1) / (n - 1), distance);\n                }\n            }\n        }\n        return distance / arcLength;\n    }\n    /**\n     * Get the point on the Bezier curve at a certain time\n     * @param time Between 0-1\n     */\n    getPoint(time) {\n        const points = [...this.controlPoints];\n        for (let r = 1; r < points.length; r++) {\n            for (let i = 0; i < points.length - r; i++) {\n                points[i] = lerpVector(points[i], points[i + 1], time);\n            }\n        }\n        return points[0];\n    }\n    /**\n     * Get the tangent of the Bezier curve at a certain time\n     * @param time Between 0-1\n     */\n    getTangent(time) {\n        const timeSquared = time * time;\n        const p0 = this.controlPoints[0];\n        const p1 = this.controlPoints[1];\n        const p2 = this.controlPoints[2];\n        const p3 = this.controlPoints[3];\n        // Derivative of Bernstein polynomial\n        const pPrime = p0\n            .scale(-3 * timeSquared + 6 * time - 3)\n            .add(p1.scale(9 * timeSquared - 12 * time + 3).add(p2.scale(-9 * timeSquared + 6 * time).add(p3.scale(3 * timeSquared))));\n        return pPrime.normalize();\n    }\n    /**\n     * Get the tangent of the Bezier curve where the distance is uniformly distributed over time\n     * @param time\n     */\n    getUniformTangent(time) {\n        const desiredDistance = time * this.arcLength;\n        const uniformTime = this._getTimeGivenDistance(desiredDistance);\n        return this.getTangent(uniformTime);\n    }\n    /**\n     * Get the normal of the Bezier curve at a certain time\n     * @param time Between 0-1\n     */\n    getNormal(time) {\n        return this.getTangent(time).normal();\n    }\n    /**\n     * Get the normal of the Bezier curve where the distance is uniformly distributed over time\n     * @param time\n     */\n    getUniformNormal(time) {\n        return this.getUniformTangent(time).normal();\n    }\n    /**\n     * Points are spaced uniformly across the length of the curve over time\n     * @param time\n     */\n    getUniformPoint(time) {\n        const desiredDistance = time * this.arcLength;\n        const uniformTime = this._getTimeGivenDistance(desiredDistance);\n        return this.getPoint(uniformTime);\n    }\n    clone() {\n        return new BezierCurve({\n            controlPoints: [...this.controlPoints],\n            quality: this.quality\n        });\n    }\n}\n\n;// ./Actions/Action/CurveTo.ts\n\n\n\nclass CurveTo {\n    constructor(entity, options) {\n        var _a;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._mode = 'dynamic';\n        this._entity = entity;\n        this._tx = this._entity.get(TransformComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only curveTo on Entities with TransformComponents.`);\n        }\n        this._curve = new BezierCurve({\n            controlPoints: [vec(0, 0), ...options.controlPoints],\n            quality: options.quality\n        });\n        this._durationMs = options.duration;\n        this._mode = (_a = options.mode) !== null && _a !== void 0 ? _a : this._mode;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._curve.setControlPoint(0, this._tx.globalPos.clone());\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        if (this._mode === 'dynamic') {\n            this._tx.pos = this._curve.getPoint(t);\n        }\n        else {\n            this._tx.pos = this._curve.getUniformPoint(t);\n        }\n        if (this.isComplete(this._entity)) {\n            if (this._mode === 'dynamic') {\n                this._tx.pos = this._curve.getPoint(1);\n            }\n            else {\n                this._tx.pos = this._curve.getUniformPoint(1);\n            }\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n    stop() {\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n}\n\n;// ./Actions/Action/CurveBy.ts\n\n\n\nclass CurveBy {\n    constructor(entity, options) {\n        var _a;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._mode = 'dynamic';\n        this._entity = entity;\n        this._tx = this._entity.get(TransformComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only curveTo on Entities with TransformComponents.`);\n        }\n        this._curve = this._curve = new BezierCurve({\n            controlPoints: [vec(0, 0), ...options.controlPoints],\n            quality: options.quality\n        });\n        this._durationMs = options.duration;\n        this._mode = (_a = options.mode) !== null && _a !== void 0 ? _a : this._mode;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._curve.setControlPoint(0, this._tx.globalPos);\n            this._curve.setControlPoint(1, this._curve.controlPoints[1].add(this._tx.globalPos));\n            this._curve.setControlPoint(2, this._curve.controlPoints[2].add(this._tx.globalPos));\n            this._curve.setControlPoint(3, this._curve.controlPoints[3].add(this._tx.globalPos));\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        if (this._mode === 'dynamic') {\n            this._tx.pos = this._curve.getPoint(t);\n        }\n        else {\n            this._tx.pos = this._curve.getUniformPoint(t);\n        }\n        if (this.isComplete(this._entity)) {\n            if (this._mode === 'dynamic') {\n                this._tx.pos = this._curve.getPoint(1);\n            }\n            else {\n                this._tx.pos = this._curve.getUniformPoint(1);\n            }\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n    stop() {\n        this._stopped = true;\n    }\n}\n\n;// ./Actions/ActionContext.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The fluent Action API allows you to perform \"actions\" on\n * {@apilink Actor | `actors`} such as following, moving, rotating, and\n * more. You can implement your own actions by implementing\n * the {@apilink Action} interface.\n */\nclass ActionContext {\n    constructor(entity) {\n        this._entity = entity;\n        this._queue = new ActionQueue(entity);\n    }\n    getQueue() {\n        return this._queue;\n    }\n    update(elapsed) {\n        this._queue.update(elapsed);\n    }\n    /**\n     * Clears all queued actions from the Actor\n     */\n    clearActions() {\n        this._queue.clearActions();\n    }\n    runAction(action) {\n        action.reset();\n        this._queue.add(action);\n        return this;\n    }\n    /**\n     * Animates an actor with a specified bezier curve by an offset to the current position, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveBy(options) {\n        this._queue.add(new CurveBy(this._entity, options));\n        return this;\n    }\n    /**\n     * Animates an actor with a specified bezier curve to an absolute world space coordinate, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveTo(options) {\n        this._queue.add(new CurveTo(this._entity, options));\n        return this;\n    }\n    easeTo(...args) {\n        var _a, _b;\n        let x = 0;\n        let y = 0;\n        let duration = 0;\n        let easingFcn = EasingFunctions.Linear;\n        if (args[0] instanceof Vector) {\n            x = args[0].x;\n            y = args[0].y;\n            duration = args[1];\n            easingFcn = (_a = args[2]) !== null && _a !== void 0 ? _a : easingFcn;\n        }\n        else {\n            x = args[0];\n            y = args[1];\n            duration = args[2];\n            easingFcn = (_b = args[3]) !== null && _b !== void 0 ? _b : easingFcn;\n        }\n        this._queue.add(new EaseTo(this._entity, x, y, duration, easingFcn));\n        return this;\n    }\n    easeBy(...args) {\n        var _a, _b;\n        let offsetX = 0;\n        let offsetY = 0;\n        let duration = 0;\n        let easingFcn = EasingFunctions.Linear;\n        if (args[0] instanceof Vector) {\n            offsetX = args[0].x;\n            offsetY = args[0].y;\n            duration = args[1];\n            easingFcn = (_a = args[2]) !== null && _a !== void 0 ? _a : easingFcn;\n        }\n        else {\n            offsetX = args[0];\n            offsetY = args[1];\n            duration = args[2];\n            easingFcn = (_b = args[3]) !== null && _b !== void 0 ? _b : easingFcn;\n        }\n        this._queue.add(new EaseBy(this._entity, offsetX, offsetY, duration, easingFcn));\n        return this;\n    }\n    moveTo(xOrPosOrOptions, yOrSpeed, speedOrUndefined) {\n        let x = 0;\n        let y = 0;\n        let speed = 0;\n        if (xOrPosOrOptions instanceof Vector) {\n            x = xOrPosOrOptions.x;\n            y = xOrPosOrOptions.y;\n            speed = +(yOrSpeed !== null && yOrSpeed !== void 0 ? yOrSpeed : 0);\n            this._queue.add(new MoveTo(this._entity, x, y, speed));\n        }\n        else if (typeof xOrPosOrOptions === 'number' && typeof yOrSpeed === 'number' && typeof speedOrUndefined === 'number') {\n            x = xOrPosOrOptions;\n            y = yOrSpeed;\n            speed = speedOrUndefined;\n            this._queue.add(new MoveTo(this._entity, x, y, speed));\n        }\n        else if (isMoveToOptions(xOrPosOrOptions)) {\n            this._queue.add(new MoveToWithOptions(this._entity, xOrPosOrOptions));\n        }\n        return this;\n    }\n    moveBy(xOffsetOrVectorOrOptions, yOffsetOrSpeed, speedOrUndefined) {\n        let xOffset = 0;\n        let yOffset = 0;\n        let speed = 0;\n        if (xOffsetOrVectorOrOptions instanceof Vector && typeof yOffsetOrSpeed === 'number') {\n            xOffset = xOffsetOrVectorOrOptions.x;\n            yOffset = xOffsetOrVectorOrOptions.y;\n            speed = yOffsetOrSpeed;\n            this._queue.add(new MoveBy(this._entity, xOffset, yOffset, speed));\n        }\n        else if (typeof xOffsetOrVectorOrOptions === 'number' && typeof yOffsetOrSpeed === 'number' && typeof speedOrUndefined === 'number') {\n            xOffset = xOffsetOrVectorOrOptions;\n            yOffset = yOffsetOrSpeed;\n            speed = speedOrUndefined;\n            this._queue.add(new MoveBy(this._entity, xOffset, yOffset, speed));\n        }\n        else if (isMoveByOptions(xOffsetOrVectorOrOptions)) {\n            this._queue.add(new MoveByWithOptions(this._entity, xOffsetOrVectorOrOptions));\n        }\n        return this;\n    }\n    rotateTo(angleRadiansOrOptions, speed, rotationType) {\n        if (typeof angleRadiansOrOptions === 'number' && typeof speed === 'number') {\n            this._queue.add(new RotateTo(this._entity, angleRadiansOrOptions, speed, rotationType));\n        }\n        else if (typeof angleRadiansOrOptions === 'object') {\n            this._queue.add(new RotateToWithOptions(this._entity, angleRadiansOrOptions));\n        }\n        return this;\n    }\n    rotateBy(angleRadiansOffsetOrOptions, speed, rotationType) {\n        if (typeof angleRadiansOffsetOrOptions === 'object') {\n            this._queue.add(new RotateByWithOptions(this._entity, angleRadiansOffsetOrOptions));\n        }\n        else {\n            this._queue.add(new RotateBy(this._entity, angleRadiansOffsetOrOptions, speed, rotationType));\n        }\n        return this;\n    }\n    scaleTo(sizeXOrVectorOrOptions, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\n        let sizeX = 1;\n        let sizeY = 1;\n        let speedX = 0;\n        let speedY = 0;\n        if (isScaleToOptions(sizeXOrVectorOrOptions)) {\n            this._queue.add(new ScaleToWithOptions(this._entity, sizeXOrVectorOrOptions));\n            return this;\n        }\n        if (sizeXOrVectorOrOptions instanceof Vector && sizeYOrSpeed instanceof Vector) {\n            sizeX = sizeXOrVectorOrOptions.x;\n            sizeY = sizeXOrVectorOrOptions.y;\n            speedX = sizeYOrSpeed.x;\n            speedY = sizeYOrSpeed.y;\n        }\n        if (typeof sizeXOrVectorOrOptions === 'number' && typeof sizeYOrSpeed === 'number') {\n            sizeX = sizeXOrVectorOrOptions;\n            sizeY = sizeYOrSpeed;\n            speedX = speedXOrUndefined;\n            speedY = speedYOrUndefined;\n        }\n        this._queue.add(new ScaleTo(this._entity, sizeX, sizeY, speedX, speedY));\n        return this;\n    }\n    scaleBy(sizeOffsetXOrVectorOrOptions, sizeOffsetYOrSpeed, speed) {\n        if (isScaleByOptions(sizeOffsetXOrVectorOrOptions)) {\n            this._queue.add(new ScaleByWithOptions(this._entity, sizeOffsetXOrVectorOrOptions));\n            return this;\n        }\n        let sizeOffsetX = 1;\n        let sizeOffsetY = 1;\n        if (sizeOffsetXOrVectorOrOptions instanceof Vector) {\n            sizeOffsetX = sizeOffsetXOrVectorOrOptions.x;\n            sizeOffsetY = sizeOffsetXOrVectorOrOptions.y;\n            speed = sizeOffsetYOrSpeed;\n        }\n        if (typeof sizeOffsetXOrVectorOrOptions === 'number' && typeof sizeOffsetYOrSpeed === 'number') {\n            sizeOffsetX = sizeOffsetXOrVectorOrOptions;\n            sizeOffsetY = sizeOffsetYOrSpeed;\n        }\n        this._queue.add(new ScaleBy(this._entity, sizeOffsetX, sizeOffsetY, speed));\n        return this;\n    }\n    /**\n     * This method will cause an actor to blink (become visible and not\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\n     * the actor should be visible per blink, and the amount of time not visible.\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\n     * @param numBlinks       The number of times to blink\n     */\n    blink(timeVisible, timeNotVisible, numBlinks = 1) {\n        this._queue.add(new Blink(this._entity, timeVisible, timeNotVisible, numBlinks));\n        return this;\n    }\n    /**\n     * This method will cause an actor's opacity to change from its current value\n     * to the provided value by a specified time (in milliseconds). This method is\n     * part of the actor 'Action' fluent API allowing action chaining.\n     * @param opacity  The ending opacity\n     * @param duration     The time it should take to fade the actor (in milliseconds)\n     */\n    fade(opacity, duration) {\n        this._queue.add(new Fade(this._entity, opacity, duration));\n        return this;\n    }\n    /**\n     * This will cause an actor to flash a specific color for a period of time\n     * @param color\n     * @param duration The duration in milliseconds\n     */\n    flash(color, duration = 1000) {\n        this._queue.add(new Flash(this._entity, color, duration));\n        return this;\n    }\n    /**\n     * This method will delay the next action from executing for a certain\n     * amount of time (in milliseconds). This method is part of the actor\n     * 'Action' fluent API allowing action chaining.\n     * @param duration  The amount of time to delay the next action in the queue from executing in milliseconds\n     */\n    delay(duration) {\n        this._queue.add(new Delay(duration));\n        return this;\n    }\n    /**\n     * This method will add an action to the queue that will remove the actor from the\n     * scene once it has completed its previous  Any actions on the\n     * action queue after this action will not be executed.\n     */\n    die() {\n        this._queue.add(new Die(this._entity));\n        return this;\n    }\n    /**\n     * This method allows you to call an arbitrary method as the next action in the\n     * action queue. This is useful if you want to execute code in after a specific\n     * action, i.e An actor arrives at a destination after traversing a path\n     */\n    callMethod(method) {\n        this._queue.add(new CallMethod(method));\n        return this;\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\n     * will repeat forever\n     */\n    repeat(repeatBuilder, times) {\n        if (!times) {\n            this.repeatForever(repeatBuilder);\n            return this;\n        }\n        this._queue.add(new Repeat(this._entity, repeatBuilder, times));\n        return this;\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     */\n    repeatForever(repeatBuilder) {\n        this._queue.add(new RepeatForever(this._entity, repeatBuilder));\n        return this;\n    }\n    /**\n     * This method will cause the entity to follow another at a specified distance\n     * @param entity           The entity to follow\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\n     */\n    follow(entity, followDistance) {\n        if (followDistance === undefined) {\n            this._queue.add(new Follow(this._entity, entity));\n        }\n        else {\n            this._queue.add(new Follow(this._entity, entity, followDistance));\n        }\n        return this;\n    }\n    /**\n     * This method will cause the entity to move towards another until they\n     * collide \"meet\" at a specified speed.\n     * @param entity  The entity to meet\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\n     */\n    meet(entity, speed) {\n        if (speed === undefined) {\n            this._queue.add(new Meet(this._entity, entity));\n        }\n        else {\n            this._queue.add(new Meet(this._entity, entity, speed));\n        }\n        return this;\n    }\n    /**\n     * Returns a promise that resolves when the current action queue up to now\n     * is finished.\n     */\n    toPromise() {\n        const temp = new Promise((resolve) => {\n            this._queue.add(new CallMethod(() => {\n                resolve();\n            }));\n        });\n        return temp;\n    }\n}\n\n;// ./Actions/ActionsComponent.ts\n\n\n\n\nclass ActionsComponent extends Component {\n    constructor() {\n        super(...arguments);\n        this.dependencies = [TransformComponent, MotionComponent];\n        this._ctx = null;\n    }\n    onAdd(entity) {\n        this._ctx = new ActionContext(entity);\n    }\n    onRemove() {\n        this._ctx = null;\n    }\n    _getCtx() {\n        if (!this._ctx) {\n            throw new Error('Actions component not attached to an entity, no context available');\n        }\n        return this._ctx;\n    }\n    /**\n     * Returns the internal action queue\n     * @returns action queue\n     */\n    getQueue() {\n        if (!this._ctx) {\n            throw new Error('Actions component not attached to an entity, no queue available');\n        }\n        return this._ctx.getQueue();\n    }\n    /**\n     * Runs a specific action in the action queue\n     * @param action\n     */\n    runAction(action) {\n        if (!this._ctx) {\n            throw new Error('Actions component not attached to an entity, cannot run action');\n        }\n        return this._ctx.runAction(action);\n    }\n    /**\n     * Updates the internal action context, performing action and moving through the internal queue\n     * @param elapsed\n     */\n    update(elapsed) {\n        var _a;\n        return (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.update(elapsed);\n    }\n    /**\n     * Clears all queued actions from the Actor\n     */\n    clearActions() {\n        var _a;\n        (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.clearActions();\n    }\n    /**\n     * Animates an actor with a specified bezier curve by an offset to the current position, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveBy(options) {\n        return this._getCtx().curveBy.apply(this._ctx, [options]);\n    }\n    /**\n     * Animates an actor with a specified bezier curve to an absolute world space coordinate, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveTo(options) {\n        return this._getCtx().curveTo.apply(this._ctx, [options]);\n    }\n    easeTo(...args) {\n        return this._getCtx().easeTo.apply(this._ctx, args);\n    }\n    easeBy(...args) {\n        return this._getCtx().easeBy.apply(this._ctx, args);\n    }\n    moveTo(xOrPosOrOptions, yOrSpeed, speedOrUndefined) {\n        return this._getCtx().moveTo.apply(this._ctx, [xOrPosOrOptions, yOrSpeed, speedOrUndefined]);\n    }\n    moveBy(xOffsetOrVectorOptions, yOffsetOrSpeed, speedOrUndefined) {\n        return this._getCtx().moveBy.apply(this._ctx, [xOffsetOrVectorOptions, yOffsetOrSpeed, speedOrUndefined]);\n    }\n    rotateTo(angle, speed, rotationType) {\n        return this._getCtx().rotateTo.apply(this._ctx, [angle, speed, rotationType]);\n    }\n    rotateBy(angleRadiansOffsetOrOptions, speed, rotationType) {\n        return this._getCtx().rotateBy.apply(this._ctx, [angleRadiansOffsetOrOptions, speed, rotationType]);\n    }\n    scaleTo(sizeXOrVectorOrOptions, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\n        return this._getCtx().scaleTo.apply(this._ctx, [sizeXOrVectorOrOptions, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined]);\n    }\n    scaleBy(sizeOffsetXOrVectorOrOptions, sizeOffsetYOrSpeed, speed) {\n        return this._getCtx().scaleBy.apply(this._ctx, [sizeOffsetXOrVectorOrOptions, sizeOffsetYOrSpeed, speed]);\n    }\n    /**\n     * This method will cause an actor to blink (become visible and not\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\n     * the actor should be visible per blink, and the amount of time not visible.\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\n     * @param numBlinks       The number of times to blink\n     */\n    blink(timeVisible, timeNotVisible, numBlinks) {\n        return this._getCtx().blink(timeVisible, timeNotVisible, numBlinks);\n    }\n    /**\n     * This method will cause an actor's opacity to change from its current value\n     * to the provided value by a specified time (in milliseconds). This method is\n     * part of the actor 'Action' fluent API allowing action chaining.\n     * @param opacity  The ending opacity\n     * @param duration     The time it should take to fade the actor (in milliseconds)\n     */\n    fade(opacity, duration) {\n        return this._getCtx().fade(opacity, duration);\n    }\n    /**\n     * This will cause an actor to flash a specific color for a period of time\n     * @param color\n     * @param duration The duration in milliseconds\n     */\n    flash(color, duration = 1000) {\n        return this._getCtx().flash(color, duration);\n    }\n    /**\n     * This method will delay the next action from executing for a certain\n     * amount of time (in milliseconds). This method is part of the actor\n     * 'Action' fluent API allowing action chaining.\n     * @param duration  The amount of time to delay the next action in the queue from executing in milliseconds\n     */\n    delay(duration) {\n        return this._getCtx().delay(duration);\n    }\n    /**\n     * This method will add an action to the queue that will remove the actor from the\n     * scene once it has completed its previous  Any actions on the\n     * action queue after this action will not be executed.\n     */\n    die() {\n        return this._getCtx().die();\n    }\n    /**\n     * This method allows you to call an arbitrary method as the next action in the\n     * action queue. This is useful if you want to execute code in after a specific\n     * action, i.e An actor arrives at a destination after traversing a path\n     */\n    callMethod(method) {\n        return this._getCtx().callMethod(method);\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\n     * will repeat forever\n     */\n    repeat(repeatBuilder, times) {\n        return this._getCtx().repeat(repeatBuilder, times);\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     */\n    repeatForever(repeatBuilder) {\n        return this._getCtx().repeatForever(repeatBuilder);\n    }\n    /**\n     * This method will cause the entity to follow another at a specified distance\n     * @param entity           The entity to follow\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\n     */\n    follow(entity, followDistance) {\n        return this._getCtx().follow(entity, followDistance);\n    }\n    /**\n     * This method will cause the entity to move towards another until they\n     * collide \"meet\" at a specified speed.\n     * @param entity  The entity to meet\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\n     */\n    meet(entity, speed) {\n        return this._getCtx().meet(entity, speed);\n    }\n    /**\n     * Returns a promise that resolves when the current action queue up to now\n     * is finished.\n     */\n    toPromise() {\n        return this._getCtx().toPromise();\n    }\n}\n\n;// ./Actor.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Type guard for checking if something is an Actor\n * @param x\n */\nfunction isActor(x) {\n    return x instanceof Actor;\n}\nconst ActorEvents = {\n    CollisionStart: 'collisionstart',\n    CollisionEnd: 'collisionend',\n    PreCollision: 'precollision',\n    PostCollision: 'postcollision',\n    Kill: 'kill',\n    PreKill: 'prekill',\n    PostKill: 'postkill',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw',\n    PreTransformDraw: 'pretransformdraw',\n    PostTransformDraw: 'posttransformdraw',\n    PreDebugDraw: 'predebugdraw',\n    PostDebugDraw: 'postdebugdraw',\n    PointerUp: 'pointerup',\n    PointerDown: 'pointerdown',\n    PointerEnter: 'pointerenter',\n    PointerLeave: 'pointerleave',\n    PointerMove: 'pointermove',\n    PointerCancel: 'pointercancel',\n    Wheel: 'pointerwheel',\n    PointerDrag: 'pointerdragstart',\n    PointerDragEnd: 'pointerdragend',\n    PointerDragEnter: 'pointerdragenter',\n    PointerDragLeave: 'pointerdragleave',\n    PointerDragMove: 'pointerdragmove',\n    EnterViewPort: 'enterviewport',\n    ExitViewPort: 'exitviewport',\n    ActionStart: 'actionstart',\n    ActionComplete: 'actioncomplete'\n};\n/**\n * The most important primitive in Excalibur is an `Actor`. Anything that\n * can move on the screen, collide with another `Actor`, respond to events,\n * or interact with the current scene, must be an actor. An `Actor` **must**\n * be part of a {@apilink Scene} for it to be drawn to the screen.\n */\nclass Actor extends Entity {\n    /**\n     * Gets the position vector of the actor in pixels\n     */\n    get pos() {\n        return this.transform.pos;\n    }\n    /**\n     * Sets the position vector of the actor in pixels\n     */\n    set pos(thePos) {\n        this.transform.pos = thePos.clone();\n    }\n    /**\n     * Gets the position vector of the actor from the last frame\n     */\n    get oldPos() {\n        return this.body.oldPos;\n    }\n    /**\n     * Gets the global position vector of the actor from the last frame\n     */\n    get oldGlobalPos() {\n        return this.body.oldGlobalPos;\n    }\n    /**\n     * Sets the position vector of the actor in the last frame\n     */\n    set oldPos(thePos) {\n        this.body.oldPos.setTo(thePos.x, thePos.y);\n    }\n    /**\n     * Gets the velocity vector of the actor in pixels/sec\n     */\n    get vel() {\n        return this.motion.vel;\n    }\n    /**\n     * Sets the velocity vector of the actor in pixels/sec\n     */\n    set vel(theVel) {\n        this.motion.vel = theVel.clone();\n    }\n    /**\n     * Gets the velocity vector of the actor from the last frame\n     */\n    get oldVel() {\n        return this.body.oldVel;\n    }\n    /**\n     * Sets the velocity vector of the actor from the last frame\n     */\n    set oldVel(theVel) {\n        this.body.oldVel.setTo(theVel.x, theVel.y);\n    }\n    /**\n     * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\n     * useful to simulate a gravitational effect.\n     */\n    get acc() {\n        return this.motion.acc;\n    }\n    /**\n     * Sets the acceleration vector of teh actor in pixels/second/second\n     */\n    set acc(theAcc) {\n        this.motion.acc = theAcc.clone();\n    }\n    /**\n     * Sets the acceleration of the actor from the last frame. This does not include the global acc {@apilink Physics.acc}.\n     */\n    set oldAcc(theAcc) {\n        this.body.oldAcc.setTo(theAcc.x, theAcc.y);\n    }\n    /**\n     * Gets the acceleration of the actor from the last frame. This does not include the global acc {@apilink Physics.acc}.\n     */\n    get oldAcc() {\n        return this.body.oldAcc;\n    }\n    /**\n     * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n     */\n    get rotation() {\n        return this.transform.rotation;\n    }\n    /**\n     * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n     */\n    set rotation(theAngle) {\n        this.transform.rotation = theAngle;\n    }\n    /**\n     * Gets the rotational velocity of the actor in radians/second\n     */\n    get angularVelocity() {\n        return this.motion.angularVelocity;\n    }\n    /**\n     * Sets the rotational velocity of the actor in radians/sec\n     */\n    set angularVelocity(angularVelocity) {\n        this.motion.angularVelocity = angularVelocity;\n    }\n    get scale() {\n        return this.get(TransformComponent).scale;\n    }\n    set scale(scale) {\n        this.get(TransformComponent).scale = scale;\n    }\n    /**\n     * The anchor to apply all actor related transformations like rotation,\n     * translation, and scaling. By default the anchor is in the center of\n     * the actor. By default it is set to the center of the actor (.5, .5)\n     *\n     * An anchor of (.5, .5) will ensure that drawings are centered.\n     *\n     * Use `anchor.setTo` to set the anchor to a different point using\n     * values between 0 and 1. For example, anchoring to the top-left would be\n     * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\n     */\n    get anchor() {\n        return this._anchor;\n    }\n    set anchor(vec) {\n        this._anchor = watch(vec, (v) => this._handleAnchorChange(v));\n        this._handleAnchorChange(vec);\n    }\n    _handleAnchorChange(v) {\n        if (this.graphics) {\n            this.graphics.anchor = v;\n        }\n    }\n    /**\n     * The offset in pixels to apply to all actor graphics\n     *\n     * Default offset of (0, 0)\n     */\n    get offset() {\n        return this._offset;\n    }\n    set offset(vec) {\n        this._offset = watch(vec, (v) => this._handleOffsetChange(v));\n        this._handleOffsetChange(vec);\n    }\n    _handleOffsetChange(v) {\n        if (this.graphics) {\n            this.graphics.offset = v;\n        }\n    }\n    /**\n     * Indicates whether the actor is physically in the viewport\n     */\n    get isOffScreen() {\n        return this.hasTag('ex.offscreen');\n    }\n    get draggable() {\n        return this._draggable;\n    }\n    set draggable(isDraggable) {\n        if (isDraggable) {\n            if (isDraggable && !this._draggable) {\n                this.events.on('pointerdragstart', this._pointerDragStartHandler);\n                this.events.on('pointerdragend', this._pointerDragEndHandler);\n                this.events.on('pointerdragmove', this._pointerDragMoveHandler);\n                this.events.on('pointerdragleave', this._pointerDragLeaveHandler);\n            }\n            else if (!isDraggable && this._draggable) {\n                this.events.off('pointerdragstart', this._pointerDragStartHandler);\n                this.events.off('pointerdragend', this._pointerDragEndHandler);\n                this.events.off('pointerdragmove', this._pointerDragMoveHandler);\n                this.events.off('pointerdragleave', this._pointerDragLeaveHandler);\n            }\n            this._draggable = isDraggable;\n        }\n    }\n    /**\n     * Sets the color of the actor's current graphic\n     */\n    get color() {\n        return this.graphics.color;\n    }\n    set color(v) {\n        this.graphics.color = v;\n    }\n    // #endregion\n    /**\n     *\n     * @param config\n     */\n    constructor(config) {\n        super();\n        this.events = new EventEmitter();\n        this._anchor = watch(Vector.Half, (v) => this._handleAnchorChange(v));\n        this._offset = watch(Vector.Zero, (v) => this._handleOffsetChange(v));\n        /**\n         * Convenience reference to the global logger\n         */\n        this.logger = Logger.getInstance();\n        /**\n         * Draggable helper\n         */\n        this._draggable = false;\n        this._dragging = false;\n        this._pointerDragStartHandler = () => {\n            this._dragging = true;\n        };\n        this._pointerDragEndHandler = () => {\n            this._dragging = false;\n        };\n        this._pointerDragMoveHandler = (pe) => {\n            if (this._dragging) {\n                this.pos = pe.worldPos;\n            }\n        };\n        this._pointerDragLeaveHandler = (pe) => {\n            if (this._dragging) {\n                this.pos = pe.worldPos;\n            }\n        };\n        const { name, x, y, pos, coordPlane, scale, width, height, radius, collider, vel, acc, rotation, angularVelocity, z, color, visible, opacity, anchor, offset, collisionType, collisionGroup, silenceWarnings } = {\n            ...config\n        };\n        this.name = name !== null && name !== void 0 ? name : this.name;\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : Actor.defaults.anchor.clone();\n        this.offset = offset !== null && offset !== void 0 ? offset : Vector.Zero;\n        this.transform = new TransformComponent();\n        this.addComponent(this.transform);\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\n        this.rotation = rotation !== null && rotation !== void 0 ? rotation : 0;\n        this.scale = scale !== null && scale !== void 0 ? scale : vec(1, 1);\n        this.z = z !== null && z !== void 0 ? z : 0;\n        this.transform.coordPlane = coordPlane !== null && coordPlane !== void 0 ? coordPlane : CoordPlane.World;\n        this._silenceWarnings = silenceWarnings !== null && silenceWarnings !== void 0 ? silenceWarnings : false;\n        this.pointer = new PointerComponent();\n        this.addComponent(this.pointer);\n        this.graphics = new GraphicsComponent({\n            anchor: this.anchor,\n            offset: this.offset,\n            opacity: opacity\n        });\n        this.addComponent(this.graphics);\n        this.motion = new MotionComponent();\n        this.addComponent(this.motion);\n        this.vel = vel !== null && vel !== void 0 ? vel : Vector.Zero;\n        this.acc = acc !== null && acc !== void 0 ? acc : Vector.Zero;\n        this.angularVelocity = angularVelocity !== null && angularVelocity !== void 0 ? angularVelocity : 0;\n        this.actions = new ActionsComponent();\n        this.addComponent(this.actions);\n        this.body = new BodyComponent();\n        this.addComponent(this.body);\n        this.body.collisionType = collisionType !== null && collisionType !== void 0 ? collisionType : CollisionType.Passive;\n        if (collisionGroup) {\n            this.body.group = collisionGroup;\n        }\n        if (color) {\n            this.color = color;\n        }\n        if (collider) {\n            this.collider = new ColliderComponent(collider);\n            this.addComponent(this.collider);\n        }\n        else if (radius) {\n            this.collider = new ColliderComponent(Shape.Circle(radius));\n            this.addComponent(this.collider);\n            if (color) {\n                this.graphics.add(new Circle({\n                    color: color,\n                    radius\n                }));\n            }\n        }\n        else {\n            if (width > 0 && height > 0) {\n                this.collider = new ColliderComponent(Shape.Box(width, height, this.anchor));\n                this.addComponent(this.collider);\n                if (color && width && height) {\n                    this.graphics.add(new Rectangle({\n                        color: color,\n                        width,\n                        height\n                    }));\n                }\n            }\n            else {\n                this.collider = new ColliderComponent();\n                this.addComponent(this.collider); // no collider\n            }\n        }\n        this.graphics.isVisible = visible !== null && visible !== void 0 ? visible : true;\n    }\n    clone() {\n        const clone = new Actor({\n            silenceWarnings: this._silenceWarnings,\n            color: this.color.clone(),\n            anchor: this.anchor.clone(),\n            offset: this.offset.clone()\n        });\n        clone.clearComponents();\n        clone.processComponentRemoval();\n        // Clone builtins, order is important, same as ctor\n        clone.addComponent((clone.transform = this.transform.clone()), true);\n        clone.addComponent((clone.pointer = this.pointer.clone()), true);\n        clone.addComponent((clone.graphics = this.graphics.clone()), true);\n        clone.addComponent((clone.motion = this.motion.clone()), true);\n        clone.addComponent((clone.actions = this.actions.clone()), true);\n        clone.addComponent((clone.body = this.body.clone()), true);\n        clone.addComponent((clone.collider = this.collider.clone()), true);\n        const builtInComponents = [\n            this.transform,\n            this.pointer,\n            this.graphics,\n            this.motion,\n            this.actions,\n            this.body,\n            this.collider\n        ];\n        // Clone non-builtin the current actors components\n        const components = this.getComponents();\n        for (const c of components) {\n            if (!builtInComponents.includes(c)) {\n                clone.addComponent(c.clone(), true);\n            }\n        }\n        return clone;\n    }\n    /**\n     * `onInitialize` is called before the first update of the actor. This method is meant to be\n     * overridden. This is where initialization of child actors should take place.\n     *\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n     */\n    onInitialize(engine) {\n        // Override me\n    }\n    /**\n     * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _initialize(engine) {\n        super._initialize(engine);\n        for (const child of this.children) {\n            child._initialize(engine);\n        }\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    // #endregion\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _prekill handler for {@apilink onPreKill} lifecycle event\n     * @internal\n     */\n    _prekill(scene) {\n        this.events.emit('prekill', new PreKillEvent(this));\n        this.onPreKill(scene);\n    }\n    /**\n     * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\n     *\n     * `onPreKill` is called directly before an actor is killed and removed from its current {@apilink Scene}.\n     */\n    onPreKill(scene) {\n        // Override me\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _prekill handler for {@apilink onPostKill} lifecycle event\n     * @internal\n     */\n    _postkill(scene) {\n        this.events.emit('postkill', new PostKillEvent(this));\n        this.onPostKill(scene);\n    }\n    /**\n     * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\n     *\n     * `onPostKill` is called directly after an actor is killed and remove from its current {@apilink Scene}.\n     */\n    onPostKill(scene) {\n        // Override me\n    }\n    /**\n     * If the current actor is a member of the scene, this will remove\n     * it from the scene graph. It will no longer be drawn or updated.\n     */\n    kill() {\n        if (this.scene) {\n            this._prekill(this.scene);\n            this.events.emit('kill', new KillEvent(this));\n            super.kill();\n            this._postkill(this.scene);\n        }\n        else {\n            this.logger.warn(`Cannot kill actor named \"${this.name}\", it was never added to the Scene`);\n        }\n    }\n    /**\n     * If the current actor is killed, it will now not be killed.\n     */\n    unkill() {\n        this.isActive = true;\n    }\n    /**\n     * Indicates wether the actor has been killed.\n     */\n    isKilled() {\n        return !this.isActive;\n    }\n    /**\n     * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\n     */\n    get z() {\n        return this.get(TransformComponent).z;\n    }\n    /**\n     * Sets the z-index of an actor and updates it in the drawing list for the scene.\n     * The z-index determines the relative order an actor is drawn in.\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\n     * @param newZ new z-index to assign\n     */\n    set z(newZ) {\n        this.get(TransformComponent).z = newZ;\n    }\n    /**\n     * Get the center point of an actor (global position)\n     */\n    get center() {\n        const globalPos = this.getGlobalPos();\n        return new Vector(globalPos.x + this.width / 2 - this.anchor.x * this.width, globalPos.y + this.height / 2 - this.anchor.y * this.height);\n    }\n    /**\n     * Get the local center point of an actor\n     */\n    get localCenter() {\n        return new Vector(this.pos.x + this.width / 2 - this.anchor.x * this.width, this.pos.y + this.height / 2 - this.anchor.y * this.height);\n    }\n    get width() {\n        return this.collider.localBounds.width * this.getGlobalScale().x;\n    }\n    get height() {\n        return this.collider.localBounds.height * this.getGlobalScale().y;\n    }\n    /**\n     * Gets this actor's rotation taking into account any parent relationships\n     * @returns Rotation angle in radians\n     * @deprecated Use {@apilink globalRotation} instead\n     */\n    getGlobalRotation() {\n        return this.get(TransformComponent).globalRotation;\n    }\n    /**\n     * The actor's rotation (in radians) taking into account any parent relationships\n     */\n    get globalRotation() {\n        return this.get(TransformComponent).globalRotation;\n    }\n    /**\n     * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\n     * @returns Position in world coordinates\n     * @deprecated Use {@apilink globalPos} instead\n     */\n    getGlobalPos() {\n        return this.get(TransformComponent).globalPos;\n    }\n    /**\n     * The actor's world position taking into account parent relationships, scaling, rotation, and translation\n     */\n    get globalPos() {\n        return this.get(TransformComponent).globalPos;\n    }\n    /**\n     * Gets the global scale of the Actor\n     * @deprecated Use {@apilink globalScale} instead\n     */\n    getGlobalScale() {\n        return this.get(TransformComponent).globalScale;\n    }\n    /**\n     * The global scale of the Actor\n     */\n    get globalScale() {\n        return this.get(TransformComponent).globalScale;\n    }\n    /**\n     * The global z-index of the actor\n     */\n    get globalZ() {\n        return this.get(TransformComponent).globalZ;\n    }\n    // #region Collision\n    /**\n     * Tests whether the x/y specified are contained in the actor\n     * @param x  X coordinate to test (in world coordinates)\n     * @param y  Y coordinate to test (in world coordinates)\n     * @param recurse checks whether the x/y are contained in any child actors (if they exist).\n     */\n    contains(x, y, recurse = false) {\n        const point = vec(x, y);\n        const collider = this.get(ColliderComponent);\n        collider.update();\n        const geom = collider.get();\n        if (!geom) {\n            return false;\n        }\n        const containment = geom.contains(point);\n        if (recurse) {\n            return (containment ||\n                this.children.some((child) => {\n                    return child.contains(x, y, true);\n                }));\n        }\n        return containment;\n    }\n    /**\n     * Returns true if the two actor.collider's surfaces are less than or equal to the distance specified from each other\n     * @param actor     Actor to test\n     * @param distance  Distance in pixels to test\n     */\n    within(actor, distance) {\n        const collider = this.get(ColliderComponent);\n        const otherCollider = actor.get(ColliderComponent);\n        const me = collider.get();\n        const other = otherCollider.get();\n        if (me && other) {\n            return me.getClosestLineBetween(other).getLength() <= distance;\n        }\n        return false;\n    }\n    // #endregion\n    // #region Update\n    /**\n     * Called by the Engine, updates the state of the actor\n     * @internal\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this._add(engine);\n        this._preupdate(engine, elapsed);\n        this._postupdate(engine, elapsed);\n        this._remove(engine);\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before an actor is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPreUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after an actor is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPostUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Fires before every collision resolution for a confirmed contact\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    onPreCollisionResolve(self, other, side, contact) {\n        // Override me\n    }\n    /**\n     * Fires after every resolution for a confirmed contact.\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    onPostCollisionResolve(self, other, side, contact) {\n        // Override me\n    }\n    /**\n     * Fires once when 2 entities with a ColliderComponent first start colliding or touching, if the Colliders stay in contact this\n     * does not continue firing until they separate and re-collide.\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    onCollisionStart(self, other, side, contact) {\n        // Override me\n    }\n    /**\n     * Fires once when 2 entities with a ColliderComponent separate after having been in contact.\n     * @param self\n     * @param other\n     * @param side\n     * @param lastContact\n     */\n    onCollisionEnd(self, other, side, lastContact) {\n        // Override me\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.events.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.events.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n}\n// #region Properties\n/**\n * Set defaults for all Actors\n */\nActor.defaults = {\n    anchor: Vector.Half\n};\n\n;// ./ScreenElement.ts\n\n\n\n\n\n/**\n * Type guard to detect a screen element\n */\nfunction isScreenElement(actor) {\n    return actor instanceof ScreenElement;\n}\n/**\n * Helper {@apilink Actor} primitive for drawing UI's, optimized for UI drawing. Does\n * not participate in collisions. Drawn on top of all other actors.\n */\nclass ScreenElement extends Actor {\n    constructor(config) {\n        var _a, _b;\n        super({ ...config });\n        this.get(TransformComponent).coordPlane = CoordPlane.Screen;\n        this.anchor = (_a = config === null || config === void 0 ? void 0 : config.anchor) !== null && _a !== void 0 ? _a : vec(0, 0);\n        this.body.collisionType = (_b = config === null || config === void 0 ? void 0 : config.collisionType) !== null && _b !== void 0 ? _b : CollisionType.PreventCollision;\n        this.pointer.useGraphicsBounds = true;\n        this.pointer.useColliderShape = false;\n        if (!(config === null || config === void 0 ? void 0 : config.collider) && (config === null || config === void 0 ? void 0 : config.width) > 0 && (config === null || config === void 0 ? void 0 : config.height) > 0) {\n            this.collider.useBoxCollider(this.width, this.height, this.anchor);\n        }\n    }\n    _initialize(engine) {\n        this._engine = engine;\n        super._initialize(engine);\n    }\n    contains(x, y, useWorld = true) {\n        if (useWorld) {\n            return super.contains(x, y);\n        }\n        const coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\n        return super.contains(coords.x, coords.y);\n    }\n}\n\n;// ./Timer.ts\n\n\n/**\n * The Excalibur timer hooks into the internal timer and fires callbacks,\n * after a certain interval, optionally repeating.\n */\nclass Timer {\n    get complete() {\n        return this._complete;\n    }\n    constructor(options) {\n        var _a;\n        this._logger = Logger.getInstance();\n        this.id = 0;\n        this._elapsedTime = 0;\n        this._totalTimeAlive = 0;\n        this._running = false;\n        this._numberOfTicks = 0;\n        this.interval = 10;\n        this.repeats = false;\n        this.maxNumberOfRepeats = -1;\n        this.randomRange = [0, 0];\n        this._baseInterval = 10;\n        this._generateRandomInterval = () => {\n            return this._baseInterval + this.random.integer(this.randomRange[0], this.randomRange[1]);\n        };\n        this._complete = false;\n        this.scene = null;\n        const fcn = (_a = options.action) !== null && _a !== void 0 ? _a : options.fcn;\n        const interval = options.interval;\n        const repeats = options.repeats;\n        const numberOfRepeats = options.numberOfRepeats;\n        const randomRange = options.randomRange;\n        const random = options.random;\n        if (!!numberOfRepeats && numberOfRepeats >= 0) {\n            this.maxNumberOfRepeats = numberOfRepeats;\n            if (!repeats) {\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\n            }\n        }\n        this.id = Timer._MAX_ID++;\n        this._callbacks = [];\n        this._baseInterval = this.interval = interval;\n        if (!!randomRange) {\n            if (randomRange[0] > randomRange[1]) {\n                throw new Error('min value must be lower than max value for range');\n            }\n            //We use the instance of ex.Random to generate the range\n            this.random = random !== null && random !== void 0 ? random : new Random();\n            this.randomRange = randomRange;\n            this.interval = this._generateRandomInterval();\n            this.on(() => {\n                this.interval = this._generateRandomInterval();\n            });\n        }\n        this.repeats = repeats || this.repeats;\n        if (fcn) {\n            this.on(fcn);\n        }\n    }\n    /**\n     * Adds a new callback to be fired after the interval is complete\n     * @param action The callback to be added to the callback list, to be fired after the interval is complete.\n     */\n    on(action) {\n        this._callbacks.push(action);\n    }\n    /**\n     * Removes a callback from the callback list to be fired after the interval is complete.\n     * @param action The callback to be removed from the callback list, to be fired after the interval is complete.\n     */\n    off(action) {\n        const index = this._callbacks.indexOf(action);\n        this._callbacks.splice(index, 1);\n    }\n    /**\n     * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\n     * @param elapsed  Number of elapsed milliseconds since the last update.\n     */\n    update(elapsed) {\n        if (this._running) {\n            this._totalTimeAlive += elapsed;\n            this._elapsedTime += elapsed;\n            if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\n                this._complete = true;\n                this._running = false;\n                this._elapsedTime = 0;\n            }\n            if (!this.complete && this._elapsedTime >= this.interval) {\n                this._callbacks.forEach((c) => {\n                    c.call(this);\n                });\n                this._numberOfTicks++;\n                if (this.repeats) {\n                    this._elapsedTime = 0;\n                }\n                else {\n                    this._complete = true;\n                    this._running = false;\n                    this._elapsedTime = 0;\n                }\n            }\n        }\n    }\n    /**\n     * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\n     *\n     * Warning** you may need to call `timer.start()` again if the timer had completed\n     * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\n     * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\n     */\n    reset(newInterval, newNumberOfRepeats) {\n        if (!!newInterval && newInterval >= 0) {\n            this._baseInterval = this.interval = newInterval;\n        }\n        if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\n            this.maxNumberOfRepeats = newNumberOfRepeats;\n            if (!this.repeats) {\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\n            }\n        }\n        this._complete = false;\n        this._elapsedTime = 0;\n        this._numberOfTicks = 0;\n    }\n    get timesRepeated() {\n        return this._numberOfTicks;\n    }\n    getTimeRunning() {\n        return this._totalTimeAlive;\n    }\n    /**\n     * @returns milliseconds until the next action callback, if complete will return 0\n     */\n    get timeToNextAction() {\n        if (this.complete) {\n            return 0;\n        }\n        return this.interval - this._elapsedTime;\n    }\n    /**\n     * @returns milliseconds elapsed toward the next action\n     */\n    get timeElapsedTowardNextAction() {\n        return this._elapsedTime;\n    }\n    get isRunning() {\n        return this._running;\n    }\n    /**\n     * Pauses the timer, time will no longer increment towards the next call\n     */\n    pause() {\n        this._running = false;\n        return this;\n    }\n    /**\n     * Resumes the timer, time will now increment towards the next call.\n     */\n    resume() {\n        this._running = true;\n        return this;\n    }\n    /**\n     * Starts the timer, if the timer was complete it will restart the timer and reset the elapsed time counter\n     */\n    start() {\n        if (!this.scene) {\n            this._logger.warn('Cannot start a timer not part of a scene, timer wont start until added');\n        }\n        this._running = true;\n        if (this.complete) {\n            this._complete = false;\n            this._elapsedTime = 0;\n            this._numberOfTicks = 0;\n        }\n        return this;\n    }\n    /**\n     * Stops the timer and resets the elapsed time counter towards the next action invocation\n     */\n    stop() {\n        this._running = false;\n        this._elapsedTime = 0;\n        this._numberOfTicks = 0;\n        return this;\n    }\n    /**\n     * Cancels the timer, preventing any further executions.\n     */\n    cancel() {\n        this.pause();\n        if (this.scene) {\n            this.scene.cancelTimer(this);\n        }\n    }\n}\nTimer._MAX_ID = 0;\n\n;// ./Graphics/ParallaxComponent.ts\n\n\nclass ParallaxComponent extends Component {\n    constructor(parallaxFactor) {\n        super();\n        this.parallaxFactor = vec(1.0, 1.0);\n        this.parallaxFactor = parallaxFactor !== null && parallaxFactor !== void 0 ? parallaxFactor : this.parallaxFactor;\n    }\n}\n\n;// ./Graphics/DebugGraphicsComponent.ts\n\n/**\n * Provide arbitrary drawing for the purposes of debugging your game\n *\n * Will only show when the Engine is set to debug mode {@apilink Engine.showDebug} or {@apilink Engine.toggleDebug}\n *\n */\nclass DebugGraphicsComponent extends Component {\n    constructor(draw, useTransform = true) {\n        super();\n        this.draw = draw;\n        this.useTransform = useTransform;\n    }\n}\n\n;// ./Input/PointerEventsToObjectDispatcher.ts\n\n/**\n *\n */\nfunction hasNestedEvents(object) {\n    return object && object._dispatchPointerEvents && object._processPointerToObject;\n}\nclass PointerTargetObjectProxy {\n    get events() {\n        return this.object.events;\n    }\n    init(object, contains, active) {\n        this.object = object;\n        this.contains = contains;\n        this.active = active;\n    }\n}\nclass PointerEventsToObjectDispatcher {\n    constructor() {\n        this._proxyPool = new RentalPool(() => new PointerTargetObjectProxy(), (p) => p, 100);\n        this._objectToProxy = new Map();\n        this._proxies = [];\n        this._lastFrameObjectToPointers = new Map();\n        this._currentFrameObjectToPointers = new Map();\n    }\n    /**\n     * Tracks an object to associate with pointers and their events\n     * @param object\n     * @param contains\n     * @param active\n     */\n    addObject(object, contains, active) {\n        const proxy = this._proxyPool.rent(false);\n        proxy.init(object, contains, active);\n        this._proxies.push(proxy);\n        this._objectToProxy.set(object, proxy);\n    }\n    _getProxy(object) {\n        const proxy = this._objectToProxy.get(object);\n        if (proxy) {\n            return proxy;\n        }\n        throw new Error('No PointerTargetProxy for object');\n    }\n    /**\n     * Untracks an object associated with pointers and their events\n     * @param object\n     */\n    removeObject(object) {\n        const proxy = this._objectToProxy.get(object);\n        if (proxy) {\n            const index = this._proxies.indexOf(proxy);\n            if (index > -1) {\n                this._proxies.splice(index, 1);\n            }\n            this._proxyPool.return(proxy);\n        }\n    }\n    _objectCurrentlyUnderPointer(object, pointerId) {\n        return !!(this._currentFrameObjectToPointers.has(object) && this._currentFrameObjectToPointers.get(object).includes(pointerId));\n    }\n    _objectWasUnderPointer(object, pointerId) {\n        return !!(this._lastFrameObjectToPointers.has(object) && this._lastFrameObjectToPointers.get(object).includes(pointerId));\n    }\n    _entered(object, pointerId) {\n        return this._objectCurrentlyUnderPointer(object, pointerId) && !this._lastFrameObjectToPointers.has(object);\n    }\n    _left(object, pointerId) {\n        return !this._currentFrameObjectToPointers.has(object) && this._objectWasUnderPointer(object, pointerId);\n    }\n    /**\n     * Manually associate a pointer id with an object.\n     *\n     * This assumes you've checked that the pointer is indeed over the object.\n     */\n    addPointerToObject(object, pointerId) {\n        const maybeProxy = this._objectToProxy.get(object);\n        if (maybeProxy) {\n            this._addPointerToProxy(maybeProxy, pointerId);\n        }\n    }\n    _addPointerToProxy(object, pointerId) {\n        if (!this._currentFrameObjectToPointers.has(object)) {\n            this._currentFrameObjectToPointers.set(object, [pointerId]);\n            return;\n        }\n        const pointers = this._currentFrameObjectToPointers.get(object);\n        this._currentFrameObjectToPointers.set(object, pointers.concat(pointerId));\n    }\n    /**\n     * Dispatches the appropriate pointer events in sortedObject order on tracked objects\n     * @param receiver\n     * @param sortedObjects\n     */\n    dispatchEvents(receiver, sortedObjects) {\n        const lastFrameEntities = new Set(this._lastFrameObjectToPointers.keys());\n        const currentFrameEntities = new Set(this._currentFrameObjectToPointers.keys());\n        // Filter preserves z order\n        let lastMovePerPointer;\n        let lastUpPerPointer;\n        let lastDownPerPointer;\n        // Dispatch events in proxy z order\n        for (let i = 0; i < sortedObjects.length; i++) {\n            const object = sortedObjects[i];\n            const proxy = this._getProxy(object);\n            if (hasNestedEvents(object)) {\n                object._dispatchPointerEvents(receiver);\n            }\n            if (lastFrameEntities.has(proxy) || currentFrameEntities.has(proxy)) {\n                lastDownPerPointer = this._processDownAndEmit(receiver, proxy);\n                lastUpPerPointer = this._processUpAndEmit(receiver, proxy);\n                lastMovePerPointer = this._processMoveAndEmit(receiver, proxy);\n                const lastUpDownMoveEvents = [...lastMovePerPointer.values(), ...lastDownPerPointer.values(), ...lastUpPerPointer.values()];\n                this._processEnterLeaveAndEmit(receiver, proxy, lastUpDownMoveEvents);\n                this._processCancelAndEmit(receiver, proxy);\n                this._processWheelAndEmit(receiver, proxy);\n            }\n        }\n    }\n    /**\n     * Given the tracked objects, update pointer containment given the provided contains()\n     * @param receiver\n     * @param objects\n     */\n    processPointerToObject(receiver, objects) {\n        // Pre-process find entities under pointers\n        for (let objectIndex = 0; objectIndex < objects.length; objectIndex++) {\n            const object = objects[objectIndex];\n            const proxy = this._getProxy(object);\n            if (hasNestedEvents(object)) {\n                object._processPointerToObject(receiver);\n            }\n            for (const [pointerId, pos] of receiver.currentFramePointerCoords.entries()) {\n                if (proxy.contains(pos)) {\n                    this._addPointerToProxy(proxy, pointerId);\n                }\n            }\n        }\n    }\n    /**\n     * Clear current frames pointer-object associations and track last frame pointer-object associations\n     */\n    clear() {\n        this._lastFrameObjectToPointers.clear();\n        this._lastFrameObjectToPointers = new Map(this._currentFrameObjectToPointers);\n        this._currentFrameObjectToPointers.clear();\n    }\n    _processDownAndEmit(receiver, object) {\n        const lastDownPerPointer = new Map();\n        // Loop through down and dispatch to entities\n        for (const event of receiver.currentFrameDown) {\n            if (event.active && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                object.events.emit('pointerdown', event);\n                if (receiver.isDragStart(event.pointerId)) {\n                    object.events.emit('pointerdragstart', event);\n                }\n            }\n            lastDownPerPointer.set(event.pointerId, event);\n        }\n        return lastDownPerPointer;\n    }\n    _processUpAndEmit(receiver, object) {\n        const lastUpPerPointer = new Map();\n        // Loop through up and dispatch to entities\n        for (const event of receiver.currentFrameUp) {\n            if (event.active && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                object.events.emit('pointerup', event);\n                if (receiver.isDragEnd(event.pointerId)) {\n                    object.events.emit('pointerdragend', event);\n                }\n            }\n            lastUpPerPointer.set(event.pointerId, event);\n        }\n        return lastUpPerPointer;\n    }\n    _processMoveAndEmit(receiver, object) {\n        const lastMovePerPointer = new Map();\n        // Loop through move and dispatch to entities\n        for (const event of receiver.currentFrameMove) {\n            if (event.active && object.active() && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                // move\n                object.events.emit('pointermove', event);\n                if (receiver.isDragging(event.pointerId)) {\n                    object.events.emit('pointerdragmove', event);\n                }\n            }\n            lastMovePerPointer.set(event.pointerId, event);\n        }\n        return lastMovePerPointer;\n    }\n    _processEnterLeaveAndEmit(receiver, object, lastUpDownMoveEvents) {\n        // up, down, and move are considered for enter and leave\n        for (const event of lastUpDownMoveEvents) {\n            // enter\n            if (event.active && object.active() && this._entered(object, event.pointerId)) {\n                object.events.emit('pointerenter', event);\n                if (receiver.isDragging(event.pointerId)) {\n                    object.events.emit('pointerdragenter', event);\n                }\n                break;\n            }\n            if (event.active &&\n                object.active() &&\n                // leave can happen on move\n                (this._left(object, event.pointerId) ||\n                    // or leave can happen on pointer up\n                    (this._objectCurrentlyUnderPointer(object, event.pointerId) && event.type === 'up'))) {\n                object.events.emit('pointerleave', event);\n                if (receiver.isDragging(event.pointerId)) {\n                    object.events.emit('pointerdragleave', event);\n                }\n                break;\n            }\n        }\n    }\n    _processCancelAndEmit(receiver, object) {\n        // cancel\n        for (const event of receiver.currentFrameCancel) {\n            if (event.active && object.active() && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                object.events.emit('pointercancel', event);\n            }\n        }\n    }\n    _processWheelAndEmit(receiver, object) {\n        // wheel\n        for (const event of receiver.currentFrameWheel) {\n            // Currently the wheel only fires under the primary pointer '0'\n            if (event.active && object.active() && this._objectCurrentlyUnderPointer(object, 0)) {\n                object.events.emit('pointerwheel', event);\n            }\n        }\n    }\n}\n\n;// ./TileMap/TileMap.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TileMapEvents = {\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw',\n    PointerUp: 'pointerup',\n    PointerDown: 'pointerdown',\n    PointerMove: 'pointermove',\n    PointerCancel: 'pointercancel'\n};\n/**\n * The TileMap provides a mechanism for doing flat 2D tiles rendered in a grid.\n *\n * TileMaps are useful for top down or side scrolling grid oriented games.\n */\nclass TileMap extends Entity {\n    flagCollidersDirty() {\n        this._collidersDirty = true;\n    }\n    flagTilesDirty() {\n        for (let i = 0; i < this.tiles.length; i++) {\n            if (this.tiles[i]) {\n                this.tiles[i].flagDirty();\n            }\n        }\n    }\n    get x() {\n        var _a;\n        return (_a = this.transform.pos.x) !== null && _a !== void 0 ? _a : 0;\n    }\n    set x(val) {\n        var _a;\n        if ((_a = this.transform) === null || _a === void 0 ? void 0 : _a.pos) {\n            this.get(TransformComponent).pos = vec(val, this.y);\n        }\n    }\n    get y() {\n        var _a, _b;\n        return (_b = (_a = this.transform) === null || _a === void 0 ? void 0 : _a.pos.y) !== null && _b !== void 0 ? _b : 0;\n    }\n    set y(val) {\n        var _a;\n        if ((_a = this.transform) === null || _a === void 0 ? void 0 : _a.pos) {\n            this.transform.pos = vec(this.x, val);\n        }\n    }\n    get z() {\n        var _a;\n        return (_a = this.transform.z) !== null && _a !== void 0 ? _a : 0;\n    }\n    set z(val) {\n        if (this.transform) {\n            this.transform.z = val;\n        }\n    }\n    get rotation() {\n        var _a, _b;\n        return (_b = (_a = this.transform) === null || _a === void 0 ? void 0 : _a.rotation) !== null && _b !== void 0 ? _b : 0;\n    }\n    set rotation(val) {\n        if (this.transform) {\n            this.transform.rotation = val;\n        }\n    }\n    get scale() {\n        var _a, _b;\n        return (_b = (_a = this.transform) === null || _a === void 0 ? void 0 : _a.scale) !== null && _b !== void 0 ? _b : Vector.One;\n    }\n    set scale(val) {\n        var _a;\n        if ((_a = this.transform) === null || _a === void 0 ? void 0 : _a.scale) {\n            this.transform.scale = val;\n        }\n    }\n    get pos() {\n        return this.transform.pos;\n    }\n    set pos(val) {\n        this.transform.pos = val;\n    }\n    get vel() {\n        return this._motion.vel;\n    }\n    set vel(val) {\n        this._motion.vel = val;\n    }\n    /**\n     * Width of the whole tile map in pixels\n     */\n    get width() {\n        return this.tileWidth * this.columns * this.scale.x;\n    }\n    /**\n     * Height of the whole tilemap in pixels\n     */\n    get height() {\n        return this.tileHeight * this.rows * this.scale.y;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * @param options\n     */\n    constructor(options) {\n        var _a, _b, _c;\n        super([], options.name);\n        this.events = new EventEmitter();\n        this._token = 0;\n        this.logger = Logger.getInstance();\n        this.tiles = [];\n        this._rows = [];\n        this._cols = [];\n        this.renderFromTopOfGraphic = false;\n        this.meshingLookBehind = 10;\n        this._collidersDirty = true;\n        this._oldRotation = 0;\n        this._originalOffsets = new WeakMap();\n        this.meshingLookBehind = (_a = options.meshingLookBehind) !== null && _a !== void 0 ? _a : this.meshingLookBehind;\n        this.addComponent(new TransformComponent());\n        this.addComponent(new MotionComponent());\n        this.addComponent(new BodyComponent({\n            type: CollisionType.Fixed\n        }));\n        this.addComponent(new GraphicsComponent({\n            onPostDraw: (ctx, elapsed) => this.draw(ctx, elapsed)\n        }));\n        this.addComponent(new DebugGraphicsComponent((ctx, debugFlags) => this.debug(ctx, debugFlags), false));\n        this.addComponent(new ColliderComponent());\n        this.addComponent(new PointerComponent());\n        this.pointer = this.get(PointerComponent);\n        this._graphics = this.get(GraphicsComponent);\n        this.transform = this.get(TransformComponent);\n        this._motion = this.get(MotionComponent);\n        this.collider = this.get(ColliderComponent);\n        this._composite = this.collider.useCompositeCollider([]);\n        this.transform.pos = (_b = options.pos) !== null && _b !== void 0 ? _b : Vector.Zero;\n        this._oldPos = this.transform.pos.clone();\n        this._oldScale = this.transform.scale.clone();\n        this.renderFromTopOfGraphic = (_c = options.renderFromTopOfGraphic) !== null && _c !== void 0 ? _c : this.renderFromTopOfGraphic;\n        this.tileWidth = options.tileWidth;\n        this.tileHeight = options.tileHeight;\n        this.rows = options.rows;\n        this.columns = options.columns;\n        this._pointerEventDispatcher = new PointerEventsToObjectDispatcher();\n        this.tiles = new Array(this.rows * this.columns);\n        this._rows = new Array(this.rows);\n        this._cols = new Array(this.columns);\n        let currentCol = [];\n        for (let i = 0; i < this.columns; i++) {\n            for (let j = 0; j < this.rows; j++) {\n                const tile = new Tile({\n                    x: i,\n                    y: j,\n                    map: this\n                });\n                tile.map = this;\n                this.tiles[i + j * this.columns] = tile;\n                this._pointerEventDispatcher.addObject(tile, (vec) => {\n                    // TODO handle geometry/graphics\n                    return tile.bounds.contains(vec.worldPos);\n                }, () => true);\n                currentCol.push(tile);\n                if (!this._rows[j]) {\n                    this._rows[j] = [];\n                }\n                this._rows[j].push(tile);\n            }\n            this._cols[i] = currentCol;\n            currentCol = [];\n        }\n        this._graphics.localBounds = new BoundingBox({\n            left: 0,\n            top: 0,\n            right: this.columns * this.tileWidth * this.scale.x,\n            bottom: this.rows * this.tileHeight * this.scale.y\n        });\n    }\n    _initialize(engine) {\n        super._initialize(engine);\n        this._engine = engine;\n    }\n    _getOrSetColliderOriginalOffset(collider) {\n        var _a;\n        if (!this._originalOffsets.has(collider)) {\n            const originalOffset = collider.offset;\n            this._originalOffsets.set(collider, originalOffset);\n            return originalOffset;\n        }\n        else {\n            return (_a = this._originalOffsets.get(collider)) !== null && _a !== void 0 ? _a : Vector.Zero;\n        }\n    }\n    /**\n     * Tiles colliders based on the solid tiles in the tilemap.\n     */\n    _updateColliders() {\n        this.collider.$colliderRemoved.notifyAll(this._composite);\n        this._composite.clearColliders();\n        const colliders = [];\n        this._composite = this.collider.useCompositeCollider([]);\n        let current = null;\n        /**\n         * Returns wether or not the 2 boxes share an edge and are the same height\n         * @param prev\n         * @param next\n         * @returns true if they share and edge, false if not\n         */\n        const shareEdges = (prev, next) => {\n            if (prev && next) {\n                // same top/bottom\n                return (prev.top === next.top &&\n                    prev.bottom === next.bottom &&\n                    // Shared right/left edge\n                    prev.right === next.left);\n            }\n            return false;\n        };\n        /**\n         * Potentially merges the current collider into a list of previous ones, mutating the list\n         * If checkAndCombine returns true, the collider was successfully merged and should be thrown away\n         * @param current current collider to test\n         * @param colliders List of colliders to consider merging with\n         * @param maxLookBack The amount of colliders to look back for combination\n         * @returns false when no combination found, true when successfully combined\n         */\n        const checkAndCombine = (current, colliders, maxLookBack = this.meshingLookBehind) => {\n            if (!current) {\n                return false;\n            }\n            // walk backwards through the list of colliders and combine with the first that shares an edge\n            for (let i = colliders.length - 1; i >= 0; i--) {\n                if (maxLookBack-- < 0) {\n                    // blunt the O(n^2) algorithm a bit\n                    return false;\n                }\n                const prev = colliders[i];\n                if (shareEdges(prev, current)) {\n                    colliders[i] = prev.combine(current);\n                    return true;\n                }\n            }\n            return false;\n        };\n        // ? configurable bias perhaps, horizontal strips vs. vertical ones\n        // Bad tile collider packing algorithm\n        for (let i = 0; i < this.columns; i++) {\n            // Scan column for colliders\n            for (let j = 0; j < this.rows; j++) {\n                const tile = this.tiles[i + j * this.columns];\n                // Current tile in column is solid build up current collider\n                if (tile.solid) {\n                    // Use custom collider otherwise bounding box\n                    if (tile.getColliders().length > 0) {\n                        // tile with custom collider interrupting the current run\n                        for (const collider of tile.getColliders()) {\n                            const originalOffset = this._getOrSetColliderOriginalOffset(collider);\n                            collider.offset = vec(tile.x * this.tileWidth * this.scale.x, tile.y * this.tileHeight * this.scale.y).add(originalOffset);\n                            collider.owner = this;\n                            this._composite.addCollider(collider);\n                        }\n                        //we push any current collider before nulling the current run\n                        if (current && !checkAndCombine(current, colliders)) {\n                            colliders.push(current);\n                        }\n                        current = null;\n                        // Use the bounding box\n                    }\n                    else {\n                        if (!current) {\n                            // no current run, start one\n                            current = tile.defaultGeometry;\n                        }\n                        else {\n                            // combine with current run\n                            current = current.combine(tile.defaultGeometry);\n                        }\n                    }\n                }\n                else {\n                    // Not solid skip and cut off the current collider\n                    // End of run check and combine\n                    if (current && !checkAndCombine(current, colliders)) {\n                        colliders.push(current);\n                    }\n                    current = null;\n                }\n            }\n            // After a column is complete check to see if it can be merged into the last one\n            // Eno of run check and combine\n            if (current && !checkAndCombine(current, colliders)) {\n                // else new collider if no combination\n                colliders.push(current);\n            }\n            current = null;\n        }\n        for (const c of colliders) {\n            const collider = Shape.Box(c.width, c.height, Vector.Zero, vec(c.left - this.pos.x, c.top - this.pos.y));\n            collider.owner = this;\n            this._composite.addCollider(collider);\n        }\n        this.collider.update();\n        // Notify that colliders have been updated\n        this.collider.$colliderAdded.notifyAll(this._composite);\n    }\n    /**\n     * Returns the {@apilink Tile} by index (row major order)\n     *\n     * Returns null if out of bounds\n     */\n    getTileByIndex(index) {\n        var _a;\n        return (_a = this.tiles[index]) !== null && _a !== void 0 ? _a : null;\n    }\n    /**\n     * Returns the {@apilink Tile} by its x and y integer coordinates\n     *\n     * Returns null if out of bounds\n     *\n     * For example, if I want the tile in fifth column (x), and second row (y):\n     * `getTile(4, 1)` 0 based, so 0 is the first in row/column\n     */\n    getTile(x, y) {\n        if (x < 0 || y < 0 || x >= this.columns || y >= this.rows) {\n            return null;\n        }\n        return this.tiles[x + y * this.columns];\n    }\n    /**\n     * Returns the {@apilink Tile} by testing a point in world coordinates,\n     * returns `null` if no Tile was found.\n     */\n    getTileByPoint(point) {\n        const { x, y } = this._getTileCoordinates(point);\n        const tile = this.getTile(x, y);\n        if (x >= 0 && y >= 0 && x < this.columns && y < this.rows && tile) {\n            return tile;\n        }\n        return null;\n    }\n    _getTileCoordinates(point) {\n        // Convert to Tile Space point\n        point = this.transform.applyInverse(point);\n        const x = Math.floor(point.x / this.tileWidth);\n        const y = Math.floor(point.y / this.tileHeight);\n        return { x, y };\n    }\n    getRows() {\n        return this._rows;\n    }\n    getColumns() {\n        return this._cols;\n    }\n    /**\n     * Returns the on screen tiles for a tilemap, this will overshoot by a small amount because of the internal quad tree data structure.\n     *\n     * Useful if you need to perform specific logic on onscreen tiles\n     */\n    getOnScreenTiles() {\n        let worldBounds = this._engine.screen.getWorldBounds();\n        const maybeParallax = this.get(ParallaxComponent);\n        if (maybeParallax && this.isInitialized) {\n            let pos = this.pos;\n            const oneMinusFactor = Vector.One.sub(maybeParallax.parallaxFactor);\n            const parallaxOffset = this._engine.currentScene.camera.pos.scale(oneMinusFactor);\n            pos = pos.sub(parallaxOffset);\n            // adjust world bounds by parallax factor\n            worldBounds = worldBounds.translate(pos);\n        }\n        const bounds = this.transform.coordPlane === CoordPlane.Screen ? this._engine.screen.getScreenBounds() : worldBounds;\n        const topLeft = this._getTileCoordinates(bounds.topLeft);\n        const topRight = this._getTileCoordinates(bounds.topRight);\n        const bottomRight = this._getTileCoordinates(bounds.bottomRight);\n        const bottomLeft = this._getTileCoordinates(bounds.bottomLeft);\n        const tileStartX = Math.min(clamp(topLeft.x, 0, this.columns - 1), clamp(topRight.x, 0, this.columns - 1));\n        const tileStartY = Math.min(clamp(topLeft.y, 0, this.rows - 1), clamp(topRight.y, 0, this.rows - 1));\n        const tileEndX = Math.max(clamp(bottomRight.x, 0, this.columns - 1), clamp(bottomLeft.x, 0, this.columns - 1));\n        const tileEndY = Math.max(clamp(bottomRight.y, 0, this.rows - 1), clamp(bottomLeft.y, 0, this.rows - 1));\n        const tiles = [];\n        for (let x = tileStartX; x <= tileEndX; x++) {\n            for (let y = tileStartY; y <= tileEndY; y++) {\n                tiles.push(this.getTile(x, y));\n            }\n        }\n        return tiles;\n    }\n    /**\n     * @internal\n     */\n    _processPointerToObject(receiver) {\n        this._pointerEventDispatcher.processPointerToObject(receiver, this.tiles);\n    }\n    /**\n     * @internal\n     */\n    _dispatchPointerEvents(receiver) {\n        this._pointerEventDispatcher.dispatchEvents(receiver, this.tiles);\n    }\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this.onPreUpdate(engine, elapsed);\n        this.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        // Update colliders\n        if (!this._oldPos.equals(this.pos) || this._oldRotation !== this.rotation || !this._oldScale.equals(this.scale)) {\n            this.flagCollidersDirty();\n            this.flagTilesDirty();\n        }\n        if (this._collidersDirty) {\n            this._collidersDirty = false;\n            this._updateColliders();\n        }\n        // Clear last frame's events\n        this._pointerEventDispatcher.clear();\n        this._token++;\n        this.pos.clone(this._oldPos);\n        this._oldRotation = this.rotation;\n        this.scale.clone(this._oldScale);\n        this.transform.pos = this.pos;\n        this.onPostUpdate(engine, elapsed);\n        this.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n    }\n    /**\n     * Draws the tile map to the screen. Called by the {@apilink Scene}.\n     * @param ctx ExcaliburGraphicsContext\n     * @param elapsed  The number of milliseconds since the last draw\n     */\n    draw(ctx, elapsed) {\n        if (!this.isInitialized) {\n            return;\n        }\n        this.emit('predraw', new PreDrawEvent(ctx, elapsed, this)); // TODO fix event\n        let graphics, graphicsIndex, graphicsLen;\n        const tiles = this.getOnScreenTiles();\n        for (let i = 0; i < tiles.length; i++) {\n            const tile = tiles[i];\n            // get non-negative tile sprites\n            const offsets = tile.getGraphicsOffsets();\n            graphics = tile.getGraphics();\n            for (graphicsIndex = 0, graphicsLen = graphics.length; graphicsIndex < graphicsLen; graphicsIndex++) {\n                // draw sprite, warning if sprite doesn't exist\n                const graphic = graphics[graphicsIndex];\n                const offset = offsets[graphicsIndex];\n                if (graphic) {\n                    if (hasGraphicsTick(graphic)) {\n                        graphic === null || graphic === void 0 ? void 0 : graphic.tick(elapsed, this._token);\n                    }\n                    const offsetY = this.renderFromTopOfGraphic ? 0 : graphic.height - this.tileHeight;\n                    graphic.draw(ctx, tile.x * this.tileWidth + offset.x, tile.y * this.tileHeight - offsetY + offset.y);\n                }\n            }\n        }\n        this.emit('postdraw', new PostDrawEvent(ctx, elapsed, this));\n    }\n    debug(gfx, debugFlags) {\n        const { showAll, showGrid, gridColor, gridWidth, showSolidBounds: showColliderBounds, solidBoundsColor: colliderBoundsColor, showColliderGeometry } = debugFlags.tilemap;\n        const { geometryColor, geometryLineWidth, geometryPointSize } = debugFlags.collider;\n        const width = this.tileWidth * this.columns * this.scale.x;\n        const height = this.tileHeight * this.rows * this.scale.y;\n        const pos = this.pos;\n        if (showGrid || showAll) {\n            for (let r = 0; r < this.rows + 1; r++) {\n                const yOffset = vec(0, r * this.tileHeight * this.scale.y);\n                gfx.drawLine(pos.add(yOffset), pos.add(vec(width, yOffset.y)), gridColor, gridWidth);\n            }\n            for (let c = 0; c < this.columns + 1; c++) {\n                const xOffset = vec(c * this.tileWidth * this.scale.x, 0);\n                gfx.drawLine(pos.add(xOffset), pos.add(vec(xOffset.x, height)), gridColor, gridWidth);\n            }\n        }\n        if (showAll || showColliderBounds || showColliderGeometry) {\n            const colliders = this._composite.getColliders();\n            gfx.save();\n            gfx.translate(this.pos.x, this.pos.y);\n            gfx.scale(this.scale.x, this.scale.y);\n            for (const collider of colliders) {\n                const bounds = collider.localBounds;\n                const pos = collider.worldPos.sub(this.pos);\n                if (showColliderBounds) {\n                    gfx.drawRectangle(pos, bounds.width, bounds.height, colliderBoundsColor);\n                }\n            }\n            gfx.restore();\n            if (showColliderGeometry) {\n                for (const collider of colliders) {\n                    collider.debug(gfx, geometryColor, { lineWidth: geometryLineWidth, pointSize: geometryPointSize });\n                }\n            }\n        }\n        if (showAll || showColliderBounds) {\n            gfx.save();\n            gfx.z = 999;\n            if (showColliderBounds) {\n                for (let i = 0; i < this.tiles.length; i++) {\n                    this.tiles[i].bounds.draw(gfx);\n                }\n            }\n            gfx.restore();\n        }\n    }\n}\n/**\n * TileMap Tile\n *\n * A light-weight object that occupies a space in a collision map. Generally\n * created by a {@apilink TileMap}.\n *\n * Tiles can draw multiple sprites. Note that the order of drawing is the order\n * of the sprites in the array so the last one will be drawn on top. You can\n * use transparency to create layers this way.\n */\nclass Tile {\n    /**\n     * Return the world position of the top left corner of the tile\n     */\n    get pos() {\n        if (this._posDirty) {\n            this._recalculate();\n            this._posDirty = false;\n        }\n        return this._pos;\n    }\n    /**\n     * Width of the tile in pixels\n     */\n    get width() {\n        return this._width;\n    }\n    /**\n     * Height of the tile in pixels\n     */\n    get height() {\n        return this._height;\n    }\n    /**\n     * Wether this tile should be treated as solid by the tilemap\n     */\n    get solid() {\n        return this._solid;\n    }\n    /**\n     * Wether this tile should be treated as solid by the tilemap\n     */\n    set solid(val) {\n        var _a;\n        (_a = this.map) === null || _a === void 0 ? void 0 : _a.flagCollidersDirty();\n        this._solid = val;\n    }\n    /**\n     * Current list of graphics for this tile\n     */\n    getGraphics() {\n        return this._graphics;\n    }\n    /**\n     * Current list of offsets for this tile's graphics\n     */\n    getGraphicsOffsets() {\n        return this._offsets;\n    }\n    /**\n     * Add another {@apilink Graphic} to this TileMap tile\n     * @param graphic\n     */\n    addGraphic(graphic, options) {\n        this._graphics.push(graphic);\n        if (options === null || options === void 0 ? void 0 : options.offset) {\n            this._offsets.push(options.offset);\n        }\n        else {\n            this._offsets.push(Vector.Zero);\n        }\n    }\n    /**\n     * Remove an instance of a {@apilink Graphic} from this tile\n     */\n    removeGraphic(graphic) {\n        const index = this._graphics.indexOf(graphic);\n        if (index > -1) {\n            this._graphics.splice(index, 1);\n            this._offsets.splice(index, 1);\n        }\n    }\n    /**\n     * Clear all graphics from this tile\n     */\n    clearGraphics() {\n        this._graphics.length = 0;\n        this._offsets.length = 0;\n    }\n    /**\n     * Returns the list of colliders\n     */\n    getColliders() {\n        return this._colliders;\n    }\n    /**\n     * Adds a custom collider to the {@apilink Tile} to use instead of it's bounds\n     *\n     * If no collider is set but {@apilink Tile.solid} is set, the tile bounds are used as a collider.\n     *\n     * **Note!** the {@apilink Tile.solid} must be set to true for it to act as a \"fixed\" collider\n     * @param collider\n     */\n    addCollider(collider) {\n        this._colliders.push(collider);\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Removes a collider from the {@apilink Tile}\n     * @param collider\n     */\n    removeCollider(collider) {\n        const index = this._colliders.indexOf(collider);\n        if (index > -1) {\n            this._colliders.splice(index, 1);\n        }\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Clears all colliders from the {@apilink Tile}\n     */\n    clearColliders() {\n        this._colliders.length = 0;\n        this.map.flagCollidersDirty();\n    }\n    constructor(options) {\n        var _a, _b;\n        this._posDirty = false;\n        this.events = new EventEmitter();\n        this._solid = false;\n        this._graphics = [];\n        this._offsets = [];\n        /**\n         * Current list of colliders for this tile\n         */\n        this._colliders = [];\n        /**\n         * Arbitrary data storage per tile, useful for any game specific data\n         */\n        this.data = new Map();\n        this.x = options.x;\n        this.y = options.y;\n        this.map = options.map;\n        this._width = options.map.tileWidth * this.map.scale.x;\n        this._height = options.map.tileHeight * this.map.scale.y;\n        this.solid = (_a = options.solid) !== null && _a !== void 0 ? _a : this.solid;\n        this._graphics = (_b = options.graphics) !== null && _b !== void 0 ? _b : [];\n        this._recalculate();\n    }\n    flagDirty() {\n        return (this._posDirty = true);\n    }\n    _recalculate() {\n        const geometryPos = this.map.pos.add(vec(this.x * this.map.tileWidth, this.y * this.map.tileHeight));\n        this._geometry = new BoundingBox(geometryPos.x, geometryPos.y, geometryPos.x + this.map.tileWidth, geometryPos.y + this.map.tileHeight);\n        this._width = this.map.tileWidth * this.map.scale.x;\n        this._height = this.map.tileHeight * this.map.scale.y;\n        this._pos = this.map.pos.add(vec(this.x * this._width, this.y * this._height));\n        this._bounds = new BoundingBox(this._pos.x, this._pos.y, this._pos.x + this._width, this._pos.y + this._height);\n        if (this.map.rotation) {\n            this._bounds = this._bounds.rotate(this.map.rotation, this.map.pos);\n        }\n        this._posDirty = false;\n    }\n    /**\n     * Tile bounds in world space\n     */\n    get bounds() {\n        if (this._posDirty) {\n            this._recalculate();\n        }\n        return this._bounds;\n    }\n    get defaultGeometry() {\n        return this._geometry;\n    }\n    /**\n     * Tile position in world space\n     */\n    get center() {\n        if (this._posDirty) {\n            this._recalculate();\n        }\n        return new Vector(this._pos.x + this._width / 2, this._pos.y + this._height / 2);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        if (handler) {\n            this.events.off(eventName, handler);\n        }\n        else {\n            this.events.off(eventName);\n        }\n    }\n}\n\n;// ./Camera.ts\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Container to house convenience strategy methods\n * @internal\n */\nclass StrategyContainer {\n    constructor(camera) {\n        this.camera = camera;\n    }\n    /**\n     * Creates and adds the {@apilink LockCameraToActorStrategy} on the current camera.\n     * @param actor The actor to lock the camera to\n     */\n    lockToActor(actor) {\n        this.camera.addStrategy(new LockCameraToActorStrategy(actor));\n    }\n    /**\n     * Creates and adds the {@apilink LockCameraToActorAxisStrategy} on the current camera\n     * @param actor The actor to lock the camera to\n     * @param axis The axis to follow the actor on\n     */\n    lockToActorAxis(actor, axis) {\n        this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\n    }\n    /**\n     * Creates and adds the {@apilink ElasticToActorStrategy} on the current camera\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n     * correct and bounce around the target\n     * @param actor Target actor to elastically follow\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n     */\n    elasticToActor(actor, cameraElasticity, cameraFriction) {\n        this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\n    }\n    /**\n     * Creates and adds the {@apilink RadiusAroundActorStrategy} on the current camera\n     * @param actor Target actor to follow when it is \"radius\" pixels away\n     * @param radius Number of pixels away before the camera will follow\n     */\n    radiusAroundActor(actor, radius) {\n        this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\n    }\n    /**\n     * Creates and adds the {@apilink LimitCameraBoundsStrategy} on the current camera\n     * @param box The bounding box to limit the camera to.\n     */\n    limitCameraBounds(box) {\n        this.camera.addStrategy(new LimitCameraBoundsStrategy(box));\n    }\n}\n/**\n * Camera axis enum\n */\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n})(Axis || (Axis = {}));\n/**\n * Lock a camera to the exact x/y position of an actor.\n */\nclass LockCameraToActorStrategy {\n    constructor(target) {\n        this.target = target;\n        this.action = (target, camera, engine, elapsed) => {\n            const center = target.center;\n            return center;\n        };\n    }\n}\n/**\n * Lock a camera to a specific axis around an actor.\n */\nclass LockCameraToActorAxisStrategy {\n    constructor(target, axis) {\n        this.target = target;\n        this.axis = axis;\n        this.action = (target, cam, _eng, elapsed) => {\n            const center = target.center;\n            const currentFocus = cam.getFocus();\n            if (this.axis === Axis.X) {\n                return new Vector(center.x, currentFocus.y);\n            }\n            else {\n                return new Vector(currentFocus.x, center.y);\n            }\n        };\n    }\n}\n/**\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\n */\nclass ElasticToActorStrategy {\n    /**\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n     * correct and bounce around the target\n     * @param target Target actor to elastically follow\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n     */\n    constructor(target, cameraElasticity, cameraFriction) {\n        this.target = target;\n        this.cameraElasticity = cameraElasticity;\n        this.cameraFriction = cameraFriction;\n        this.action = (target, cam, _eng, elapsed) => {\n            const position = target.center;\n            let focus = cam.getFocus();\n            let cameraVel = cam.vel.clone();\n            // Calculate the stretch vector, using the spring equation\n            // F = kX\n            // https://en.wikipedia.org/wiki/Hooke's_law\n            // Apply to the current camera velocity\n            const stretch = position.sub(focus).scale(this.cameraElasticity); // stretch is X\n            cameraVel = cameraVel.add(stretch);\n            // Calculate the friction (-1 to apply a force in the opposition of motion)\n            // Apply to the current camera velocity\n            const friction = cameraVel.scale(-1).scale(this.cameraFriction);\n            cameraVel = cameraVel.add(friction);\n            // Update position by velocity deltas\n            focus = focus.add(cameraVel);\n            return focus;\n        };\n    }\n}\nclass RadiusAroundActorStrategy {\n    /**\n     *\n     * @param target Target actor to follow when it is \"radius\" pixels away\n     * @param radius Number of pixels away before the camera will follow\n     */\n    constructor(target, radius) {\n        this.target = target;\n        this.radius = radius;\n        this.action = (target, cam, _eng, elapsed) => {\n            const position = target.center;\n            const focus = cam.getFocus();\n            const direction = position.sub(focus);\n            const distance = direction.magnitude;\n            if (distance >= this.radius) {\n                const offset = distance - this.radius;\n                return focus.add(direction.normalize().scale(offset));\n            }\n            return focus;\n        };\n    }\n}\n/**\n * Prevent a camera from going beyond the given camera dimensions.\n */\nclass LimitCameraBoundsStrategy {\n    constructor(target) {\n        this.target = target;\n        /**\n         * Useful for limiting the camera to a {@apilink TileMap}'s dimensions, or a specific area inside the map.\n         *\n         * Note that this strategy does not perform any movement by itself.\n         * It only sets the camera position to within the given bounds when the camera has gone beyond them.\n         * Thus, it is a good idea to combine it with other camera strategies and set this strategy as the last one.\n         *\n         * Make sure that the camera bounds are at least as large as the viewport size.\n         * @param target The bounding box to limit the camera to\n         */\n        this.boundSizeChecked = false; // Check and warn only once\n        this.action = (target, cam, _eng, elapsed) => {\n            const focus = cam.getFocus();\n            if (!this.boundSizeChecked) {\n                if (target.bottom - target.top < _eng.drawHeight || target.right - target.left < _eng.drawWidth) {\n                    Logger.getInstance().warn('Camera bounds should not be smaller than the engine viewport');\n                }\n                this.boundSizeChecked = true;\n            }\n            let focusX = focus.x;\n            let focusY = focus.y;\n            if (focus.x < target.left + _eng.halfDrawWidth) {\n                focusX = target.left + _eng.halfDrawWidth;\n            }\n            else if (focus.x > target.right - _eng.halfDrawWidth) {\n                focusX = target.right - _eng.halfDrawWidth;\n            }\n            if (focus.y < target.top + _eng.halfDrawHeight) {\n                focusY = target.top + _eng.halfDrawHeight;\n            }\n            else if (focus.y > target.bottom - _eng.halfDrawHeight) {\n                focusY = target.bottom - _eng.halfDrawHeight;\n            }\n            return vec(focusX, focusY);\n        };\n    }\n}\nconst CameraEvents = {\n    Initialize: 'initialize',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate'\n};\n/**\n * Cameras\n *\n * {@apilink Camera} is the base class for all Excalibur cameras. Cameras are used\n * to move around your game and set focus. They are used to determine\n * what is \"off screen\" and can be used to scale the game.\n *\n */\nclass Camera {\n    constructor() {\n        this.events = new EventEmitter();\n        this.transform = AffineMatrix.identity();\n        this.inverse = AffineMatrix.identity();\n        this._cameraStrategies = [];\n        this.strategy = new StrategyContainer(this);\n        /**\n         * Get or set current zoom of the camera, defaults to 1\n         */\n        this._z = 1;\n        /**\n         * Get or set rate of change in zoom, defaults to 0\n         */\n        this.dz = 0;\n        /**\n         * Get or set zoom acceleration\n         */\n        this.az = 0;\n        /**\n         * Current rotation of the camera\n         */\n        this.rotation = 0;\n        this._angularVelocity = 0;\n        this._posChanged = false;\n        this._pos = new WatchVector(Vector.Zero, () => {\n            this._posChanged = true;\n        });\n        /**\n         * Interpolated camera position if more draws are running than updates\n         *\n         * Enabled when `Engine.fixedUpdateFps` is enabled, in all other cases this will be the same as pos\n         */\n        this.drawPos = this.pos.clone();\n        this._oldPos = this.pos.clone();\n        /**\n         * Get or set the camera's velocity\n         */\n        this.vel = Vector.Zero;\n        /**\n         * Get or set the camera's acceleration\n         */\n        this.acc = Vector.Zero;\n        this._cameraMoving = false;\n        this._currentLerpTime = 0;\n        this._lerpDuration = 1000; // 1 second\n        this._lerpStart = null;\n        this._lerpEnd = null;\n        //camera effects\n        this._isShaking = false;\n        this._shakeMagnitudeX = 0;\n        this._shakeMagnitudeY = 0;\n        this._shakeDuration = 0;\n        this._elapsedShakeTime = 0;\n        this._xShake = 0;\n        this._yShake = 0;\n        this._isZooming = false;\n        this._zoomStart = 1;\n        this._zoomEnd = 1;\n        this._currentZoomTime = 0;\n        this._zoomDuration = 0;\n        this._zoomEasing = EasingFunctions.EaseInOutCubic;\n        this._easing = EasingFunctions.EaseInOutCubic;\n        this._halfWidth = 0;\n        this._halfHeight = 0;\n        this._viewport = null;\n        this._isInitialized = false;\n        this._snapPos = vec(0, 0);\n    }\n    get zoom() {\n        return this._z;\n    }\n    set zoom(val) {\n        this._z = val;\n        if (this._engine) {\n            this._halfWidth = this._engine.halfDrawWidth;\n            this._halfHeight = this._engine.halfDrawHeight;\n        }\n    }\n    /**\n     * Get or set the camera's angular velocity\n     */\n    get angularVelocity() {\n        return this._angularVelocity;\n    }\n    set angularVelocity(value) {\n        this._angularVelocity = value;\n    }\n    /**\n     * Get or set the camera's position\n     */\n    get pos() {\n        return this._pos;\n    }\n    set pos(vec) {\n        this._posChanged = true;\n        this._pos = new WatchVector(vec, () => {\n            this._posChanged = true;\n        });\n    }\n    /**\n     * Has the position changed since the last update\n     */\n    hasChanged() {\n        return this._posChanged;\n    }\n    /**\n     * Get the camera's x position\n     */\n    get x() {\n        return this.pos.x;\n    }\n    /**\n     * Set the camera's x position (cannot be set when following an {@apilink Actor} or when moving)\n     */\n    set x(value) {\n        if (!this._follow && !this._cameraMoving) {\n            this.pos = vec(value, this.pos.y);\n        }\n    }\n    /**\n     * Get the camera's y position\n     */\n    get y() {\n        return this.pos.y;\n    }\n    /**\n     * Set the camera's y position (cannot be set when following an {@apilink Actor} or when moving)\n     */\n    set y(value) {\n        if (!this._follow && !this._cameraMoving) {\n            this.pos = vec(this.pos.x, value);\n        }\n    }\n    /**\n     * Get or set the camera's x velocity\n     */\n    get dx() {\n        return this.vel.x;\n    }\n    set dx(value) {\n        this.vel = vec(value, this.vel.y);\n    }\n    /**\n     * Get or set the camera's y velocity\n     */\n    get dy() {\n        return this.vel.y;\n    }\n    set dy(value) {\n        this.vel = vec(this.vel.x, value);\n    }\n    /**\n     * Get or set the camera's x acceleration\n     */\n    get ax() {\n        return this.acc.x;\n    }\n    set ax(value) {\n        this.acc = vec(value, this.acc.y);\n    }\n    /**\n     * Get or set the camera's y acceleration\n     */\n    get ay() {\n        return this.acc.y;\n    }\n    set ay(value) {\n        this.acc = vec(this.acc.x, value);\n    }\n    /**\n     * Returns the focal point of the camera, a new point giving the x and y position of the camera\n     */\n    getFocus() {\n        return this.pos;\n    }\n    /**\n     * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\n     * @param pos The target position to move to\n     * @param duration The duration in milliseconds the move should last\n     * @param [easingFn] An optional easing function ({@apilink EasingFunctions.EaseInOutCubic} by default)\n     * @returns A {@apilink Promise} that resolves when movement is finished, including if it's interrupted.\n     *          The {@apilink Promise} value is the {@apilink Vector} of the target position. It will be rejected if a move cannot be made.\n     */\n    move(pos, duration, easingFn = EasingFunctions.EaseInOutCubic) {\n        if (typeof easingFn !== 'function') {\n            throw 'Please specify an EasingFunction';\n        }\n        // cannot move when following an actor\n        if (this._follow) {\n            return Promise.reject(pos);\n        }\n        // resolve existing promise, if any\n        if (this._lerpPromise && this._lerpResolve) {\n            this._lerpResolve(pos);\n        }\n        this._lerpPromise = new Promise((resolve) => {\n            this._lerpResolve = resolve;\n        });\n        this._lerpStart = this.getFocus().clone();\n        this._lerpDuration = duration;\n        this._lerpEnd = pos;\n        this._currentLerpTime = 0;\n        this._cameraMoving = true;\n        this._easing = easingFn;\n        return this._lerpPromise;\n    }\n    /**\n     * Sets the camera to shake at the specified magnitudes for the specified duration\n     * @param magnitudeX  The x magnitude of the shake\n     * @param magnitudeY  The y magnitude of the shake\n     * @param duration    The duration of the shake in milliseconds\n     */\n    shake(magnitudeX, magnitudeY, duration) {\n        this._isShaking = true;\n        this._shakeMagnitudeX = magnitudeX;\n        this._shakeMagnitudeY = magnitudeY;\n        this._shakeDuration = duration;\n    }\n    /**\n     * Zooms the camera in or out by the specified scale over the specified duration.\n     * If no duration is specified, it take effect immediately.\n     * @param scale    The scale of the zoom\n     * @param duration The duration of the zoom in milliseconds\n     */\n    zoomOverTime(scale, duration = 0, easingFn = EasingFunctions.EaseInOutCubic) {\n        this._zoomPromise = new Promise((resolve) => {\n            this._zoomResolve = resolve;\n        });\n        if (duration) {\n            this._isZooming = true;\n            this._zoomEasing = easingFn;\n            this._currentZoomTime = 0;\n            this._zoomDuration = duration;\n            this._zoomStart = this.zoom;\n            this._zoomEnd = scale;\n        }\n        else {\n            this._isZooming = false;\n            this.zoom = scale;\n            return Promise.resolve(true);\n        }\n        return this._zoomPromise;\n    }\n    /**\n     * Gets the bounding box of the viewport of this camera in world coordinates\n     */\n    get viewport() {\n        if (this._viewport) {\n            return this._viewport;\n        }\n        return new BoundingBox(0, 0, 0, 0);\n    }\n    /**\n     * Adds a new camera strategy to this camera\n     * @param cameraStrategy Instance of an {@apilink CameraStrategy}\n     */\n    addStrategy(cameraStrategy) {\n        this._cameraStrategies.push(cameraStrategy);\n    }\n    /**\n     * Removes a camera strategy by reference\n     * @param cameraStrategy Instance of an {@apilink CameraStrategy}\n     */\n    removeStrategy(cameraStrategy) {\n        removeItemFromArray(cameraStrategy, this._cameraStrategies);\n    }\n    /**\n     * Clears all camera strategies from the camera\n     */\n    clearAllStrategies() {\n        this._cameraStrategies.length = 0;\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.events.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before a scene is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPreUpdate(engine, elapsed) {\n        // Overridable\n    }\n    /**\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.events.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after a scene is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPostUpdate(engine, elapsed) {\n        // Overridable\n    }\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    _initialize(engine) {\n        if (!this.isInitialized) {\n            this._engine = engine;\n            this._screen = engine.screen;\n            const currentRes = this._screen.contentArea;\n            let center = vec(currentRes.width / 2, currentRes.height / 2);\n            if (!this._engine.loadingComplete) {\n                // If there was a loading screen, we peek the configured resolution\n                const res = this._screen.peekResolution();\n                if (res) {\n                    center = vec(res.width / 2, res.height / 2);\n                }\n            }\n            this._halfWidth = center.x;\n            this._halfHeight = center.y;\n            // If the user has not set the camera pos, apply default center screen position\n            if (!this._posChanged) {\n                this.pos = center;\n            }\n            this.pos.clone(this.drawPos);\n            // First frame bootstrap\n            // Ensure camera tx is correct\n            // Run update twice to ensure properties are init'd\n            this.updateTransform(this.pos);\n            // Run strategies for first frame\n            this.runStrategies(engine, engine.clock.elapsed());\n            // Setup the first frame viewport\n            this.updateViewport();\n            // It's important to update the camera after strategies\n            // This prevents jitter\n            this.updateTransform(this.pos);\n            this.pos.clone(this._oldPos);\n            this.onInitialize(engine);\n            this.events.emit('initialize', new InitializeEvent(engine, this));\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after a scene is updated.\n     */\n    onInitialize(engine) {\n        // Overridable\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    runStrategies(engine, elapsed) {\n        for (const s of this._cameraStrategies) {\n            this.pos = s.action.call(s, s.target, this, engine, elapsed);\n        }\n    }\n    updateViewport() {\n        // recalculate viewport\n        this._viewport = new BoundingBox(this.x - this._halfWidth, this.y - this._halfHeight, this.x + this._halfWidth, this.y + this._halfHeight);\n    }\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this._preupdate(engine, elapsed);\n        this.pos.clone(this._oldPos);\n        // Update placements based on linear algebra\n        this.pos = this.pos.add(this.vel.scale(elapsed / 1000));\n        this.zoom += (this.dz * elapsed) / 1000;\n        this.vel = this.vel.add(this.acc.scale(elapsed / 1000));\n        this.dz += (this.az * elapsed) / 1000;\n        this.rotation += (this.angularVelocity * elapsed) / 1000;\n        if (this._isZooming) {\n            if (this._currentZoomTime < this._zoomDuration) {\n                const zoomEasing = this._zoomEasing;\n                const newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\n                this.zoom = newZoom;\n                this._currentZoomTime += elapsed;\n            }\n            else {\n                this._isZooming = false;\n                this.zoom = this._zoomEnd;\n                this._currentZoomTime = 0;\n                this._zoomResolve(true);\n            }\n        }\n        if (this._cameraMoving) {\n            if (this._currentLerpTime < this._lerpDuration) {\n                const moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\n                const lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\n                this.pos = lerpPoint;\n                this._currentLerpTime += elapsed;\n            }\n            else {\n                this.pos = this._lerpEnd;\n                const end = this._lerpEnd.clone();\n                this._lerpStart = null;\n                this._lerpEnd = null;\n                this._currentLerpTime = 0;\n                this._cameraMoving = false;\n                // Order matters here, resolve should be last so any chain promises have a clean slate\n                this._lerpResolve(end);\n            }\n        }\n        if (this._isDoneShaking()) {\n            this._isShaking = false;\n            this._elapsedShakeTime = 0;\n            this._shakeMagnitudeX = 0;\n            this._shakeMagnitudeY = 0;\n            this._shakeDuration = 0;\n            this._xShake = 0;\n            this._yShake = 0;\n        }\n        else {\n            this._elapsedShakeTime += elapsed;\n            this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\n            this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\n        }\n        this.runStrategies(engine, elapsed);\n        this.updateViewport();\n        // It's important to update the camera after strategies\n        // This prevents jitter\n        this.updateTransform(this.pos);\n        this._postupdate(engine, elapsed);\n        this._posChanged = false;\n    }\n    /**\n     * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\n     * @param ctx Canvas context to apply transformations\n     */\n    draw(ctx) {\n        // default to the current position\n        this.pos.clone(this.drawPos);\n        // interpolation if fixed update is on\n        // must happen on the draw, because more draws are potentially happening than updates\n        if (this._engine.fixedUpdateTimestep) {\n            const blend = this._engine.currentFrameLagMs / this._engine.fixedUpdateTimestep;\n            const interpolatedPos = this.pos.scale(blend).add(this._oldPos.scale(1.0 - blend));\n            interpolatedPos.clone(this.drawPos);\n            this.updateTransform(interpolatedPos);\n        }\n        // Snap camera to pixel\n        if (ctx.snapToPixel) {\n            const snapPos = this.drawPos.clone(this._snapPos);\n            snapPos.x = ~~(snapPos.x + pixelSnapEpsilon * sign(snapPos.x));\n            snapPos.y = ~~(snapPos.y + pixelSnapEpsilon * sign(snapPos.y));\n            snapPos.clone(this.drawPos);\n            this.updateTransform(snapPos);\n        }\n        ctx.multiply(this.transform);\n    }\n    updateTransform(pos) {\n        // center the camera\n        const newCanvasWidth = this._screen.resolution.width / this.zoom;\n        const newCanvasHeight = this._screen.resolution.height / this.zoom;\n        const cameraPos = vec(-pos.x + newCanvasWidth / 2 + this._xShake, -pos.y + newCanvasHeight / 2 + this._yShake);\n        // Calculate camera transform\n        this.transform.reset();\n        this.transform.scale(this.zoom, this.zoom);\n        // rotate about the focus\n        this.transform.translate(newCanvasWidth / 2, newCanvasHeight / 2);\n        this.transform.rotate(this.rotation);\n        this.transform.translate(-newCanvasWidth / 2, -newCanvasHeight / 2);\n        this.transform.translate(cameraPos.x, cameraPos.y);\n        this.transform.inverse(this.inverse);\n    }\n    _isDoneShaking() {\n        return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\n    }\n}\n\n;// ./Trigger.ts\n\n\n\n\nconst TriggerEvents = {\n    ExitTrigger: 'exit',\n    EnterTrigger: 'enter'\n};\n/**\n * Triggers are a method of firing arbitrary code on collision. These are useful\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\n * are invisible, and can only be seen when {@apilink Trigger.visible} is set to `true`.\n */\nclass Trigger extends Actor {\n    /**\n     * @param options Trigger options\n     */\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super({ ...options });\n        this.events = new EventEmitter();\n        this.filter = (_a = options.filter) !== null && _a !== void 0 ? _a : (() => true);\n        this.repeat = (_b = options.repeat) !== null && _b !== void 0 ? _b : -1;\n        this.action = (_c = options.action) !== null && _c !== void 0 ? _c : (() => undefined);\n        this.target = options.target;\n        this.graphics.isVisible = (_d = options.visible) !== null && _d !== void 0 ? _d : false;\n        this.body.collisionType = CollisionType.Passive;\n        this.events.on('collisionstart', ({ other: collider }) => {\n            if (!this._matchesTarget(collider.owner)) {\n                return;\n            }\n            this.events.emit('enter', new EnterTriggerEvent(this, collider.owner));\n            this._dispatchAction(collider.owner);\n            // remove trigger if its done, -1 repeat forever\n            if (this.repeat === 0) {\n                this.kill();\n            }\n        });\n        this.events.on('collisionend', ({ other: collider }) => {\n            if (this._matchesTarget(collider.owner)) {\n                this.events.emit('exit', new ExitTriggerEvent(this, collider.owner));\n            }\n        });\n    }\n    _matchesTarget(entity) {\n        return this.filter(entity) && (this.target === undefined || this.target === entity);\n    }\n    _dispatchAction(target) {\n        if (this.repeat !== 0) {\n            this.action.call(this, target);\n            this.repeat--;\n        }\n    }\n}\n\n;// ./EntityComponentSystem/Priority.ts\n/**\n * Higher priorities run earlier than others in the system update\n */\nconst SystemPriority = {\n    Highest: -Infinity,\n    Higher: -5,\n    Average: 0,\n    Lower: 5,\n    Lowest: Infinity\n};\n\n;// ./EntityComponentSystem/System.ts\n\n/**\n * Enum that determines whether to run the system in the update or draw phase\n */\nvar SystemType;\n(function (SystemType) {\n    SystemType[\"Update\"] = \"update\";\n    SystemType[\"Draw\"] = \"draw\";\n})(SystemType || (SystemType = {}));\n/**\n * An Excalibur {@apilink System} that updates entities of certain types.\n * Systems are scene specific\n *\n *\n *\n * Excalibur Systems currently require at least 1 Component type to operated\n *\n * Multiple types are declared as a type union\n * For example:\n *\n * ```typescript\n * class MySystem extends System {\n *   static priority = SystemPriority.Lowest;\n *   public readonly systemType = SystemType.Update;\n *   public query: Query<typeof TransformComponent>;\n *   constructor(public world: World) {\n *   super();\n *      this.query = this.world.query([TransformComponent]);\n *   }\n *   public update(elapsed: number) {\n *      ...\n *   }\n * }\n * ```\n */\nclass System {\n}\n/**\n * System can execute in priority order, by default all systems are priority 0. Lower values indicated higher priority.\n * For a system to execute before all other a lower priority value (-1 for example) must be set.\n * For a system to execute after all other a higher priority value (10 for example) must be set.\n */\nSystem.priority = SystemPriority.Average;\n\n;// ./EntityComponentSystem/EntityManager.ts\n\n\n// Add/Remove entities and components\nclass EntityManager {\n    constructor(_world) {\n        this._world = _world;\n        this.entities = [];\n        this._entityIndex = {};\n        this._childAddedHandlerMap = new Map();\n        this._childRemovedHandlerMap = new Map();\n        this._createChildAddedHandler = () => (e) => {\n            this.addEntity(e);\n        };\n        this._createChildRemovedHandler = () => (e) => {\n            this.removeEntity(e, false);\n        };\n        this._entitiesToRemove = [];\n    }\n    /**\n     * Runs the entity lifecycle\n     * @param scene\n     * @param elapsed\n     */\n    updateEntities(scene, elapsed) {\n        for (let entityIndex = 0; entityIndex < this.entities.length; entityIndex++) {\n            const entity = this.entities[entityIndex];\n            entity.update(scene.engine, elapsed);\n            if (!entity.isActive) {\n                this.removeEntity(entity);\n            }\n        }\n    }\n    findEntitiesForRemoval() {\n        for (let entityIndex = 0; entityIndex < this.entities.length; entityIndex++) {\n            const entity = this.entities[entityIndex];\n            if (!entity.isActive) {\n                this.removeEntity(entity);\n            }\n        }\n    }\n    /**\n     * Adds an entity to be tracked by the EntityManager\n     * @param entity\n     */\n    addEntity(entity) {\n        entity.isActive = true;\n        entity.scene = this._world.scene;\n        if (entity && !this._entityIndex[entity.id]) {\n            this._entityIndex[entity.id] = entity;\n            this.entities.push(entity);\n            this._world.queryManager.addEntity(entity);\n            // if entity has children\n            entity.children.forEach((c) => {\n                c.scene = entity.scene;\n                this.addEntity(c);\n            });\n            const childAdded = this._createChildAddedHandler();\n            this._childAddedHandlerMap.set(entity, childAdded);\n            const childRemoved = this._createChildRemovedHandler();\n            this._childRemovedHandlerMap.set(entity, childRemoved);\n            entity.childrenAdded$.subscribe(childAdded);\n            entity.childrenRemoved$.subscribe(childRemoved);\n        }\n    }\n    removeEntity(idOrEntity, deferred = true) {\n        var _a, _b;\n        let id = 0;\n        if (idOrEntity instanceof Entity) {\n            id = idOrEntity.id;\n        }\n        else {\n            id = idOrEntity;\n        }\n        const entity = this._entityIndex[id];\n        if (entity && entity.isActive) {\n            entity.isActive = false;\n        }\n        if (entity && deferred) {\n            this._entitiesToRemove.push(entity);\n            return;\n        }\n        delete this._entityIndex[id];\n        if (entity) {\n            entity.scene = null;\n            removeItemFromArray(entity, this.entities);\n            this._world.queryManager.removeEntity(entity);\n            // if entity has children\n            entity.children.forEach((c) => {\n                c.scene = null;\n                this.removeEntity(c, deferred);\n            });\n            const childAddedHandler = this._childAddedHandlerMap.get(entity);\n            if (childAddedHandler) {\n                entity.childrenAdded$.unsubscribe(childAddedHandler);\n            }\n            const childRemovedHandler = this._childRemovedHandlerMap.get(entity);\n            if (childRemovedHandler) {\n                entity.childrenRemoved$.unsubscribe(childRemovedHandler);\n            }\n            // stats\n            if ((_b = (_a = this._world) === null || _a === void 0 ? void 0 : _a.scene) === null || _b === void 0 ? void 0 : _b.engine) {\n                this._world.scene.engine.stats.currFrame.actors.killed++;\n            }\n        }\n    }\n    processEntityRemovals() {\n        for (let entityIndex = 0; entityIndex < this._entitiesToRemove.length; entityIndex++) {\n            const entity = this._entitiesToRemove[entityIndex];\n            if (entity.isActive) {\n                continue;\n            }\n            this.removeEntity(entity, false);\n        }\n        this._entitiesToRemove.length = 0;\n    }\n    processComponentRemovals() {\n        for (let entityIndex = 0; entityIndex < this.entities.length; entityIndex++) {\n            const entity = this.entities[entityIndex];\n            entity.processComponentRemoval();\n        }\n    }\n    getById(id) {\n        return this._entityIndex[id];\n    }\n    getByName(name) {\n        return this.entities.filter((e) => e.name === name);\n    }\n    clear() {\n        for (let i = this.entities.length - 1; i >= 0; i--) {\n            this.removeEntity(this.entities[i]);\n        }\n    }\n}\n\n;// ./EntityComponentSystem/Query.ts\n\n/**\n * Represents query for entities that match a list of types that is cached and observable\n *\n * Queries can be strongly typed by supplying a type union in the optional type parameter\n * ```typescript\n * const queryAB = new ex.Query<ComponentTypeA | ComponentTypeB>(['A', 'B']);\n * ```\n */\nclass Query {\n    constructor(requiredComponents) {\n        this.requiredComponents = requiredComponents;\n        this.components = new Set();\n        this.entities = [];\n        /**\n         * This fires right after the component is added\n         */\n        this.entityAdded$ = new Observable();\n        /**\n         * This fires right before the component is actually removed from the entity, it will still be available for cleanup purposes\n         */\n        this.entityRemoved$ = new Observable();\n        if (requiredComponents.length === 0) {\n            throw new Error('Cannot create query without components');\n        }\n        for (const type of requiredComponents) {\n            this.components.add(type);\n        }\n        this.id = Query.createId(requiredComponents);\n    }\n    static createId(requiredComponents) {\n        // TODO what happens if a user defines the same type name as a built in type\n        // ! TODO this could be dangerous depending on the bundler's settings for names\n        // Maybe some kind of hash function is better here?\n        return requiredComponents\n            .slice()\n            .map((c) => c.name)\n            .sort()\n            .join('-');\n    }\n    /**\n     * Potentially adds an entity to a query index, returns true if added, false if not\n     * @param entity\n     */\n    checkAndAdd(entity) {\n        if (!this.entities.includes(entity) && entity.hasAll(Array.from(this.components))) {\n            this.entities.push(entity);\n            this.entityAdded$.notifyAll(entity);\n            return true;\n        }\n        return false;\n    }\n    removeEntity(entity) {\n        const index = this.entities.indexOf(entity);\n        if (index > -1) {\n            this.entities.splice(index, 1);\n            this.entityRemoved$.notifyAll(entity);\n        }\n    }\n    /**\n     * Returns a list of entities that match the query\n     * @param sort Optional sorting function to sort entities returned from the query\n     */\n    getEntities(sort) {\n        if (sort) {\n            this.entities.sort(sort);\n        }\n        return this.entities;\n    }\n}\n\n;// ./EntityComponentSystem/TagQuery.ts\n\nclass TagQuery {\n    constructor(requiredTags) {\n        this.requiredTags = requiredTags;\n        this.tags = new Set();\n        this.entities = [];\n        /**\n         * This fires right after the component is added\n         */\n        this.entityAdded$ = new Observable();\n        /**\n         * This fires right before the component is actually removed from the entity, it will still be available for cleanup purposes\n         */\n        this.entityRemoved$ = new Observable();\n        if (requiredTags.length === 0) {\n            throw new Error('Cannot create tag query without tags');\n        }\n        for (const tag of requiredTags) {\n            this.tags.add(tag);\n        }\n        this.id = TagQuery.createId(requiredTags);\n    }\n    static createId(requiredComponents) {\n        return requiredComponents.slice().sort().join('-');\n    }\n    checkAndAdd(entity) {\n        if (!this.entities.includes(entity) && entity.hasAllTags(Array.from(this.tags))) {\n            this.entities.push(entity);\n            this.entityAdded$.notifyAll(entity);\n            return true;\n        }\n        return false;\n    }\n    removeEntity(entity) {\n        const index = this.entities.indexOf(entity);\n        if (index > -1) {\n            this.entities.splice(index, 1);\n            this.entityRemoved$.notifyAll(entity);\n        }\n    }\n    /**\n     * Returns a list of entities that match the query\n     * @param sort Optional sorting function to sort entities returned from the query\n     */\n    getEntities(sort) {\n        if (sort) {\n            this.entities.sort(sort);\n        }\n        return this.entities;\n    }\n}\n\n;// ./EntityComponentSystem/QueryManager.ts\n\n\n/**\n * The query manager is responsible for updating all queries when entities/components change\n */\nclass QueryManager {\n    constructor(_world) {\n        this._world = _world;\n        this._queries = new Map();\n        this._addComponentHandlers = new Map();\n        this._removeComponentHandlers = new Map();\n        this._componentToQueriesIndex = new Map();\n        this._tagQueries = new Map();\n        this._addTagHandlers = new Map();\n        this._removeTagHandlers = new Map();\n        this._tagToQueriesIndex = new Map();\n        this._createAddComponentHandler = (entity) => (c) => {\n            this.addComponent(entity, c);\n        };\n        this._createRemoveComponentHandler = (entity) => (c) => {\n            this.removeComponent(entity, c);\n        };\n        this._createAddTagHandler = (entity) => (tag) => {\n            this.addTag(entity, tag);\n        };\n        this._createRemoveTagHandler = (entity) => (tag) => {\n            this.removeTag(entity, tag);\n        };\n    }\n    createQuery(requiredComponents) {\n        const id = Query.createId(requiredComponents);\n        if (this._queries.has(id)) {\n            // short circuit if query is already created\n            return this._queries.get(id);\n        }\n        const query = new Query(requiredComponents);\n        this._queries.set(query.id, query);\n        // index maintenance\n        for (const component of requiredComponents) {\n            const queries = this._componentToQueriesIndex.get(component);\n            if (!queries) {\n                this._componentToQueriesIndex.set(component, [query]);\n            }\n            else {\n                queries.push(query);\n            }\n        }\n        for (const entity of this._world.entities) {\n            this.addEntity(entity);\n        }\n        return query;\n    }\n    createTagQuery(requiredTags) {\n        const id = TagQuery.createId(requiredTags);\n        if (this._tagQueries.has(id)) {\n            // short circuit if query is already created\n            return this._tagQueries.get(id);\n        }\n        const query = new TagQuery(requiredTags);\n        this._tagQueries.set(query.id, query);\n        // index maintenance\n        for (const tag of requiredTags) {\n            const queries = this._tagToQueriesIndex.get(tag);\n            if (!queries) {\n                this._tagToQueriesIndex.set(tag, [query]);\n            }\n            else {\n                queries.push(query);\n            }\n        }\n        for (const entity of this._world.entities) {\n            this.addEntity(entity);\n        }\n        return query;\n    }\n    /**\n     * Scans queries and locates any that need this entity added\n     * @param entity\n     */\n    addEntity(entity) {\n        const maybeAddComponent = this._addComponentHandlers.get(entity);\n        const maybeRemoveComponent = this._removeComponentHandlers.get(entity);\n        const addComponent = maybeAddComponent !== null && maybeAddComponent !== void 0 ? maybeAddComponent : this._createAddComponentHandler(entity);\n        const removeComponent = maybeRemoveComponent !== null && maybeRemoveComponent !== void 0 ? maybeRemoveComponent : this._createRemoveComponentHandler(entity);\n        this._addComponentHandlers.set(entity, addComponent);\n        this._removeComponentHandlers.set(entity, removeComponent);\n        const maybeAddTag = this._addTagHandlers.get(entity);\n        const maybeRemoveTag = this._removeTagHandlers.get(entity);\n        const addTag = maybeAddTag !== null && maybeAddTag !== void 0 ? maybeAddTag : this._createAddTagHandler(entity);\n        const removeTag = maybeRemoveTag !== null && maybeRemoveTag !== void 0 ? maybeRemoveTag : this._createRemoveTagHandler(entity);\n        this._addTagHandlers.set(entity, addTag);\n        this._removeTagHandlers.set(entity, removeTag);\n        for (const query of this._queries.values()) {\n            query.checkAndAdd(entity);\n        }\n        for (const tagQuery of this._tagQueries.values()) {\n            tagQuery.checkAndAdd(entity);\n        }\n        entity.componentAdded$.subscribe(addComponent);\n        entity.componentRemoved$.subscribe(removeComponent);\n        entity.tagAdded$.subscribe(addTag);\n        entity.tagRemoved$.subscribe(removeTag);\n    }\n    /**\n     * Scans queries and locates any that need this entity removed\n     * @param entity\n     */\n    removeEntity(entity) {\n        // Handle components\n        const addComponent = this._addComponentHandlers.get(entity);\n        const removeComponent = this._removeComponentHandlers.get(entity);\n        for (const query of this._queries.values()) {\n            query.removeEntity(entity);\n        }\n        if (addComponent) {\n            entity.componentAdded$.unsubscribe(addComponent);\n        }\n        if (removeComponent) {\n            entity.componentRemoved$.unsubscribe(removeComponent);\n        }\n        // Handle tags\n        const addTag = this._addTagHandlers.get(entity);\n        const removeTag = this._removeTagHandlers.get(entity);\n        for (const tagQuery of this._tagQueries.values()) {\n            tagQuery.removeEntity(entity);\n        }\n        if (addTag) {\n            entity.tagAdded$.unsubscribe(addTag);\n        }\n        if (removeTag) {\n            entity.tagRemoved$.unsubscribe(removeTag);\n        }\n    }\n    /**\n     * Updates any queries when a component is added to an entity\n     * @param entity\n     * @param component\n     */\n    addComponent(entity, component) {\n        var _a;\n        const queries = (_a = this._componentToQueriesIndex.get(component.constructor)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.checkAndAdd(entity);\n        }\n    }\n    /**\n     * Updates any queries when a component is removed from an entity\n     * @param entity\n     * @param component\n     */\n    removeComponent(entity, component) {\n        var _a;\n        const queries = (_a = this._componentToQueriesIndex.get(component.constructor)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.removeEntity(entity);\n        }\n    }\n    /**\n     * Updates any queries when a tag is added to an entity\n     * @param entity\n     * @param tag\n     */\n    addTag(entity, tag) {\n        var _a;\n        const queries = (_a = this._tagToQueriesIndex.get(tag)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.checkAndAdd(entity);\n        }\n    }\n    /**\n     * Updates any queries when a component is removed from an entity\n     * @param entity\n     * @param tag\n     */\n    removeTag(entity, tag) {\n        var _a;\n        const queries = (_a = this._tagToQueriesIndex.get(tag)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.removeEntity(entity);\n        }\n    }\n}\n\n;// ./EntityComponentSystem/SystemManager.ts\n\n\n/**\n *\n */\nfunction isSystemConstructor(x) {\n    var _a, _b;\n    return !!(x === null || x === void 0 ? void 0 : x.prototype) && !!((_b = (_a = x === null || x === void 0 ? void 0 : x.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.name);\n}\n/**\n * The SystemManager is responsible for keeping track of all systems in a scene.\n * Systems are scene specific\n */\nclass SystemManager {\n    constructor(_world) {\n        this._world = _world;\n        /**\n         * List of systems, to add a new system call {@apilink SystemManager.addSystem}\n         */\n        this.systems = [];\n        this.initialized = false;\n    }\n    /**\n     * Get a system registered in the manager by type\n     * @param systemType\n     */\n    get(systemType) {\n        return this.systems.find((s) => s instanceof systemType);\n    }\n    /**\n     * Adds a system to the manager, it will now be updated every frame\n     * @param systemOrCtor\n     */\n    addSystem(systemOrCtor) {\n        let system;\n        if (systemOrCtor instanceof System) {\n            system = systemOrCtor;\n        }\n        else {\n            system = new systemOrCtor(this._world);\n        }\n        this.systems.push(system);\n        this.systems.sort((a, b) => a.constructor.priority - b.constructor.priority);\n        // If systems are added and the manager has already been init'd\n        // then immediately init the system\n        if (this.initialized && system.initialize) {\n            system.initialize(this._world, this._world.scene);\n        }\n    }\n    /**\n     * Removes a system from the manager, it will no longer be updated\n     * @param system\n     */\n    removeSystem(system) {\n        removeItemFromArray(system, this.systems);\n    }\n    /**\n     * Initialize all systems in the manager\n     *\n     * Systems added after initialize() will be initialized on add\n     */\n    initialize() {\n        if (!this.initialized) {\n            this.initialized = true;\n            for (const s of this.systems) {\n                if (s.initialize) {\n                    s.initialize(this._world, this._world.scene);\n                }\n            }\n        }\n    }\n    /**\n     * Updates all systems\n     * @param type whether this is an update or draw system\n     * @param scene context reference\n     * @param elapsed time in milliseconds\n     */\n    updateSystems(type, scene, elapsed) {\n        const systems = this.systems.filter((s) => s.systemType === type);\n        for (const s of systems) {\n            if (s.preupdate) {\n                s.preupdate(scene, elapsed);\n            }\n        }\n        for (const s of systems) {\n            s.update(elapsed);\n        }\n        for (const s of systems) {\n            if (s.postupdate) {\n                s.postupdate(scene, elapsed);\n            }\n        }\n    }\n    clear() {\n        for (let i = this.systems.length - 1; i >= 0; i--) {\n            this.removeSystem(this.systems[i]);\n        }\n    }\n}\n\n;// ./EntityComponentSystem/World.ts\n\n\n\n\n\n\n/**\n * The World is a self-contained entity component system for a particular context.\n */\nclass World {\n    /**\n     * The context type is passed to the system updates\n     * @param scene\n     */\n    constructor(scene) {\n        this.scene = scene;\n        this._logger = Logger.getInstance();\n        this.queryManager = new QueryManager(this);\n        this.entityManager = new EntityManager(this);\n        this.systemManager = new SystemManager(this);\n    }\n    /**\n     * Query the ECS world for entities that match your components\n     * @param requiredTypes\n     */\n    query(requiredTypes) {\n        return this.queryManager.createQuery(requiredTypes);\n    }\n    queryTags(requiredTags) {\n        return this.queryManager.createTagQuery(requiredTags);\n    }\n    /**\n     * Update systems by type and time elapsed in milliseconds\n     */\n    update(type, elapsed) {\n        if (type === SystemType.Update) {\n            this.entityManager.updateEntities(this.scene, elapsed);\n        }\n        this.systemManager.updateSystems(type, this.scene, elapsed);\n        this.entityManager.findEntitiesForRemoval();\n        this.entityManager.processComponentRemovals();\n        this.entityManager.processEntityRemovals();\n    }\n    add(entityOrSystem) {\n        if (entityOrSystem instanceof Entity) {\n            this.entityManager.addEntity(entityOrSystem);\n            return;\n        }\n        if (entityOrSystem instanceof System || isSystemConstructor(entityOrSystem)) {\n            this.systemManager.addSystem(entityOrSystem);\n            return;\n        }\n        this._logger.warn(`Could not add entity/system ${entityOrSystem.constructor.name} to Excalibur!\\n\\n` +\n            `If this looks like an Excalibur type, this can be caused by 2 versions of excalibur being included on the page.\\n\\n` +\n            `Check your bundler settings to make sure this is not the case! Excalibur has ESM & UMD bundles be sure one 1 is loaded.`);\n    }\n    /**\n     * Get a system out of the ECS world\n     */\n    get(system) {\n        return this.systemManager.get(system);\n    }\n    remove(entityOrSystem, deferred = true) {\n        if (entityOrSystem instanceof Entity) {\n            this.entityManager.removeEntity(entityOrSystem, deferred);\n            return;\n        }\n        if (entityOrSystem instanceof System) {\n            this.systemManager.removeSystem(entityOrSystem);\n            return;\n        }\n        this._logger.warn(`Could not remove entity/system ${entityOrSystem.constructor.name} to Excalibur!\\n\\n` +\n            `If this looks like an Excalibur type, this can be caused by 2 versions of excalibur being included on the page.\\n\\n` +\n            `Check your bundler settings to make sure this is not the case! Excalibur has ESM & UMD bundles be sure one 1 is loaded.`);\n    }\n    get entities() {\n        return this.entityManager.entities;\n    }\n    clearEntities() {\n        this.entityManager.clear();\n    }\n    clearSystems() {\n        this.systemManager.clear();\n    }\n}\n\n;// ./Collision/MotionSystem.ts\n\n\n\n\n\n\n\nclass MotionSystem extends System {\n    constructor(world, physics) {\n        super();\n        this.world = world;\n        this.physics = physics;\n        this.systemType = SystemType.Update;\n        this._physicsConfigDirty = false;\n        physics.$configUpdate.subscribe(() => (this._physicsConfigDirty = true));\n        this.query = this.world.query([TransformComponent, MotionComponent]);\n    }\n    update(elapsed) {\n        let transform;\n        let motion;\n        const entities = this.query.entities;\n        const substep = this.physics.config.substep;\n        for (let i = 0; i < entities.length; i++) {\n            transform = entities[i].get(TransformComponent);\n            motion = entities[i].get(MotionComponent);\n            const optionalBody = entities[i].get(BodyComponent);\n            if (this._physicsConfigDirty && optionalBody) {\n                optionalBody.updatePhysicsConfig(this.physics.config.bodies);\n            }\n            if (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.isSleeping) {\n                continue;\n            }\n            const totalAcc = motion.acc.clone();\n            if ((optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.collisionType) === CollisionType.Active && (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.useGravity)) {\n                totalAcc.addEqual(this.physics.config.gravity);\n            }\n            // capture old transform of this entity and all of its children so that\n            // any transform properties that derived from their parents are properly captured\n            if (!entities[i].parent) {\n                this.captureOldTransformWithChildren(entities[i]);\n            }\n            // Update transform and motion based on Euler linear algebra\n            EulerIntegrator.integrate(transform, motion, totalAcc, elapsed / substep);\n        }\n        this._physicsConfigDirty = false;\n    }\n    captureOldTransformWithChildren(entity) {\n        var _a;\n        (_a = entity.get(BodyComponent)) === null || _a === void 0 ? void 0 : _a.captureOldTransform();\n        for (let i = 0; i < entity.children.length; i++) {\n            this.captureOldTransformWithChildren(entity.children[i]);\n        }\n    }\n}\nMotionSystem.priority = SystemPriority.Higher;\n\n;// ./Collision/Solver/ArcadeSolver.ts\n\n\n\n\n\n/**\n * ArcadeSolver is the default in Excalibur. It solves collisions so that there is no overlap between contacts,\n * and negates velocity along the collision normal.\n *\n * This is usually the type of collisions used for 2D games that don't need a more realistic collision simulation.\n *\n */\nclass ArcadeSolver {\n    constructor(config) {\n        this.config = config;\n        this.directionMap = new Map();\n        this.distanceMap = new Map();\n    }\n    solve(contacts) {\n        // Events and init\n        this.preSolve(contacts);\n        // Remove any canceled contacts\n        contacts = contacts.filter((c) => !c.isCanceled());\n        // Locate collision bias order\n        let bias;\n        switch (this.config.contactSolveBias) {\n            case ContactSolveBias.HorizontalFirst: {\n                bias = HorizontalFirst;\n                break;\n            }\n            case ContactSolveBias.VerticalFirst: {\n                bias = VerticalFirst;\n                break;\n            }\n            default: {\n                bias = None;\n            }\n        }\n        // Sort by bias (None, VerticalFirst, HorizontalFirst) to avoid artifacts with seams\n        // Sort contacts by distance to avoid artifacts with seams\n        // It's important to solve in a specific order\n        contacts.sort((a, b) => {\n            const aDir = this.directionMap.get(a.id);\n            const bDir = this.directionMap.get(b.id);\n            const aDist = this.distanceMap.get(a.id);\n            const bDist = this.distanceMap.get(b.id);\n            return bias[aDir] - bias[bDir] || aDist - bDist;\n        });\n        for (const contact of contacts) {\n            // Solve position first in arcade\n            this.solvePosition(contact);\n            // Solve velocity second in arcade\n            this.solveVelocity(contact);\n        }\n        // Events and any contact house-keeping the solver needs\n        this.postSolve(contacts);\n        return contacts;\n    }\n    preSolve(contacts) {\n        const epsilon = 0.0001;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\n                // Cancel near 0 mtv collisions\n                contact.cancel();\n                continue;\n            }\n            const side = Side.fromDirection(contact.mtv);\n            const mtv = contact.mtv.negate();\n            const distance = Math.abs(contact.info.separation);\n            this.distanceMap.set(contact.id, distance);\n            this.directionMap.set(contact.id, side === Side.Left || side === Side.Right ? 'horizontal' : 'vertical');\n            // Publish collision events on both participants\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, mtv, contact));\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate(), contact));\n        }\n    }\n    postSolve(contacts) {\n        var _a, _b;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            if (contact.isCanceled()) {\n                continue;\n            }\n            const colliderA = contact.colliderA;\n            const colliderB = contact.colliderB;\n            const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n            const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n            if (bodyA && bodyB) {\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                    continue;\n                }\n            }\n            const side = Side.fromDirection(contact.mtv);\n            const mtv = contact.mtv.negate();\n            // Publish collision events on both participants\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, mtv, contact));\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate(), contact));\n        }\n    }\n    solvePosition(contact) {\n        var _a, _b;\n        const epsilon = 0.0001;\n        // if bounds no longer intersect skip to the next\n        // this removes jitter from overlapping/stacked solid tiles or a wall of solid tiles\n        if (!contact.colliderA.bounds.overlaps(contact.colliderB.bounds, epsilon)) {\n            // Cancel the contact to prevent and solving\n            contact.cancel();\n            return;\n        }\n        if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\n            // Cancel near 0 mtv collisions\n            contact.cancel();\n            return;\n        }\n        let mtv = contact.mtv;\n        const colliderA = contact.colliderA;\n        const colliderB = contact.colliderB;\n        const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n        if (bodyA && bodyB) {\n            if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                return;\n            }\n            if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType === CollisionType.Active) {\n                // split overlaps if both are Active\n                mtv = mtv.scale(0.5);\n            }\n            // Resolve overlaps\n            if (bodyA.collisionType === CollisionType.Active) {\n                bodyA.globalPos.x -= mtv.x;\n                bodyA.globalPos.y -= mtv.y;\n                colliderA.update(bodyA.transform.get());\n            }\n            if (bodyB.collisionType === CollisionType.Active) {\n                bodyB.globalPos.x += mtv.x;\n                bodyB.globalPos.y += mtv.y;\n                colliderB.update(bodyB.transform.get());\n            }\n        }\n    }\n    solveVelocity(contact) {\n        var _a, _b;\n        if (contact.isCanceled()) {\n            return;\n        }\n        const colliderA = contact.colliderA;\n        const colliderB = contact.colliderB;\n        const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n        if (bodyA && bodyB) {\n            if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                return;\n            }\n            const normal = contact.normal;\n            const opposite = normal.negate();\n            if (bodyA.collisionType === CollisionType.Active) {\n                // only adjust velocity if the contact normal is opposite to the current velocity\n                // this avoids catching edges on a platform when sliding off\n                if (bodyA.vel.normalize().dot(opposite) < 0) {\n                    // Cancel out velocity opposite direction of collision normal\n                    const velAdj = normal.scale(normal.dot(bodyA.vel.negate()));\n                    bodyA.vel = bodyA.vel.add(velAdj);\n                }\n            }\n            if (bodyB.collisionType === CollisionType.Active) {\n                // only adjust velocity if the contact normal is opposite to the current velocity\n                // this avoids catching edges on a platform\n                if (bodyB.vel.normalize().dot(normal) < 0) {\n                    const velAdj = opposite.scale(opposite.dot(bodyB.vel.negate()));\n                    bodyB.vel = bodyB.vel.add(velAdj);\n                }\n            }\n        }\n    }\n}\n\n;// ./Collision/Solver/ContactConstraintPoint.ts\n\n/**\n * Holds information about contact points, meant to be reused over multiple frames of contact\n */\nclass ContactConstraintPoint {\n    constructor(point, local, contact) {\n        this.point = point;\n        this.local = local;\n        this.contact = contact;\n        /**\n         * Impulse accumulated over time in normal direction\n         */\n        this.normalImpulse = 0;\n        /**\n         * Impulse accumulated over time in the tangent direction\n         */\n        this.tangentImpulse = 0;\n        /**\n         * Effective mass seen in the normal direction\n         */\n        this.normalMass = 0;\n        /**\n         * Effective mass seen in the tangent direction\n         */\n        this.tangentMass = 0;\n        /**\n         * Direction from center of mass of bodyA to contact point\n         */\n        this.aToContact = new Vector(0, 0);\n        /**\n         * Direction from center of mass of bodyB to contact point\n         */\n        this.bToContact = new Vector(0, 0);\n        /**\n         * Original contact velocity combined with bounciness\n         */\n        this.originalVelocityAndRestitution = 0;\n        this.update();\n    }\n    /**\n     * Updates the contact information\n     */\n    update() {\n        const bodyA = this.contact.bodyA;\n        const colliderA = this.contact.colliderA;\n        const bodyB = this.contact.bodyB;\n        const colliderB = this.contact.colliderB;\n        if (bodyA && bodyB) {\n            const normal = this.contact.normal;\n            const tangent = this.contact.tangent;\n            this.aToContact = this.point.sub(colliderA.center);\n            this.bToContact = this.point.sub(colliderB.center);\n            const aToContactNormal = this.aToContact.cross(normal);\n            const bToContactNormal = this.bToContact.cross(normal);\n            this.normalMass =\n                bodyA.inverseMass +\n                    bodyB.inverseMass +\n                    bodyA.inverseInertia * aToContactNormal * aToContactNormal +\n                    bodyB.inverseInertia * bToContactNormal * bToContactNormal;\n            const aToContactTangent = this.aToContact.cross(tangent);\n            const bToContactTangent = this.bToContact.cross(tangent);\n            this.tangentMass =\n                bodyA.inverseMass +\n                    bodyB.inverseMass +\n                    bodyA.inverseInertia * aToContactTangent * aToContactTangent +\n                    bodyB.inverseInertia * bToContactTangent * bToContactTangent;\n        }\n        return this;\n    }\n    /**\n     * Returns the relative velocity between bodyA and bodyB\n     */\n    getRelativeVelocity() {\n        const bodyA = this.contact.bodyA;\n        const bodyB = this.contact.bodyB;\n        if (bodyA && bodyB) {\n            // Relative velocity in linear terms\n            // Angular to linear velocity formula -> omega = velocity/radius so omega x radius = velocity\n            const velA = bodyA.vel.add(Vector.cross(bodyA.angularVelocity, this.aToContact));\n            const velB = bodyB.vel.add(Vector.cross(bodyB.angularVelocity, this.bToContact));\n            return velB.sub(velA);\n        }\n        return Vector.Zero;\n    }\n}\n\n;// ./Collision/Solver/RealisticSolver.ts\n\n\n\n\n\n\n\n\nclass RealisticSolver {\n    constructor(config) {\n        this.config = config;\n        this.directionMap = new Map();\n        this.distanceMap = new Map();\n        this.lastFrameContacts = new Map();\n        // map contact id to contact points\n        this.idToContactConstraint = new Map();\n    }\n    getContactConstraints(id) {\n        var _a;\n        return (_a = this.idToContactConstraint.get(id)) !== null && _a !== void 0 ? _a : [];\n    }\n    solve(contacts) {\n        // Events and init\n        this.preSolve(contacts);\n        // Remove any canceled contacts\n        contacts = contacts.filter((c) => !c.isCanceled());\n        // Locate collision bias order\n        let bias;\n        switch (this.config.contactSolveBias) {\n            case ContactSolveBias.HorizontalFirst: {\n                bias = HorizontalFirst;\n                break;\n            }\n            case ContactSolveBias.VerticalFirst: {\n                bias = VerticalFirst;\n                break;\n            }\n            default: {\n                bias = None;\n            }\n        }\n        // Sort by bias (None, VerticalFirst, HorizontalFirst) to avoid artifacts with seams\n        // Sort contacts by distance to avoid artifacts with seams\n        // It's important to solve in a specific order\n        contacts.sort((a, b) => {\n            const aDir = this.directionMap.get(a.id);\n            const bDir = this.directionMap.get(b.id);\n            const aDist = this.distanceMap.get(a.id);\n            const bDist = this.distanceMap.get(b.id);\n            return bias[aDir] - bias[bDir] || aDist - bDist;\n        });\n        // Solve velocity first\n        this.solveVelocity(contacts);\n        // Solve position last because non-overlap is the most important\n        this.solvePosition(contacts);\n        // Events and any contact house-keeping the solver needs\n        this.postSolve(contacts);\n        return contacts;\n    }\n    preSolve(contacts) {\n        var _a, _b, _c, _d;\n        const epsilon = 0.0001;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\n                // Cancel near 0 mtv collisions\n                contact.cancel();\n                continue;\n            }\n            // Publish collision events on both participants\n            const side = Side.fromDirection(contact.mtv);\n            const distance = Math.abs(((_a = contact === null || contact === void 0 ? void 0 : contact.info) === null || _a === void 0 ? void 0 : _a.separation) || 0);\n            this.distanceMap.set(contact.id, distance);\n            this.directionMap.set(contact.id, side === Side.Left || side === Side.Right ? 'horizontal' : 'vertical');\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderA.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n            contact.colliderB.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n            // Match awake state for sleeping\n            contact.matchAwake();\n        }\n        // Keep track of contacts that done\n        const finishedContactIds = Array.from(this.idToContactConstraint.keys());\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            // Remove all current contacts that are not done\n            const index = finishedContactIds.indexOf(contact.id);\n            if (index > -1) {\n                finishedContactIds.splice(index, 1);\n            }\n            const contactPoints = (_b = this.idToContactConstraint.get(contact.id)) !== null && _b !== void 0 ? _b : [];\n            let pointIndex = 0;\n            const bodyA = contact.bodyA;\n            const colliderA = contact.colliderA;\n            const bodyB = contact.bodyB;\n            const colliderB = contact.colliderB;\n            if (bodyA && bodyB) {\n                for (let j = 0; j < contact.points.length; j++) {\n                    const point = contact.points[j];\n                    const normal = contact.normal;\n                    const tangent = contact.tangent;\n                    const aToContact = point.sub(colliderA.center);\n                    const bToContact = point.sub(colliderB.center);\n                    const aToContactNormal = aToContact.cross(normal);\n                    const bToContactNormal = bToContact.cross(normal);\n                    const normalMass = bodyA.inverseMass +\n                        bodyB.inverseMass +\n                        bodyA.inverseInertia * aToContactNormal * aToContactNormal +\n                        bodyB.inverseInertia * bToContactNormal * bToContactNormal;\n                    const aToContactTangent = aToContact.cross(tangent);\n                    const bToContactTangent = bToContact.cross(tangent);\n                    const tangentMass = bodyA.inverseMass +\n                        bodyB.inverseMass +\n                        bodyA.inverseInertia * aToContactTangent * aToContactTangent +\n                        bodyB.inverseInertia * bToContactTangent * bToContactTangent;\n                    // Preserve normal/tangent impulse by re-using the contact point if it's close\n                    if (contactPoints[pointIndex] && ((_d = (_c = contactPoints[pointIndex]) === null || _c === void 0 ? void 0 : _c.point) === null || _d === void 0 ? void 0 : _d.squareDistance(point)) < 4) {\n                        contactPoints[pointIndex].point = point;\n                        contactPoints[pointIndex].local = contact.localPoints[pointIndex];\n                    }\n                    else {\n                        // new contact if it's not close or doesn't exist\n                        contactPoints[pointIndex] = new ContactConstraintPoint(point, contact.localPoints[pointIndex], contact);\n                    }\n                    // Update contact point calculations\n                    contactPoints[pointIndex].aToContact = aToContact;\n                    contactPoints[pointIndex].bToContact = bToContact;\n                    contactPoints[pointIndex].normalMass = 1.0 / normalMass;\n                    contactPoints[pointIndex].tangentMass = 1.0 / tangentMass;\n                    // Calculate relative velocity before solving to accurately do restitution\n                    const restitution = bodyA.bounciness > bodyB.bounciness ? bodyA.bounciness : bodyB.bounciness;\n                    const relativeVelocity = contact.normal.dot(contactPoints[pointIndex].getRelativeVelocity());\n                    contactPoints[pointIndex].originalVelocityAndRestitution = 0;\n                    if (relativeVelocity < -0.1) {\n                        // TODO what's a good threshold here?\n                        contactPoints[pointIndex].originalVelocityAndRestitution = -restitution * relativeVelocity;\n                    }\n                    pointIndex++;\n                }\n            }\n            this.idToContactConstraint.set(contact.id, contactPoints);\n        }\n        // Clean up any contacts that did not occur last frame\n        for (const id of finishedContactIds) {\n            this.idToContactConstraint.delete(id);\n        }\n        // Warm contacts with accumulated impulse\n        // Useful for tall stacks\n        if (this.config.warmStart) {\n            this.warmStart(contacts);\n        }\n        else {\n            for (let i = 0; i < contacts.length; i++) {\n                const contact = contacts[i];\n                const contactPoints = this.getContactConstraints(contact.id);\n                for (const point of contactPoints) {\n                    point.normalImpulse = 0;\n                    point.tangentImpulse = 0;\n                }\n            }\n        }\n    }\n    postSolve(contacts) {\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            const bodyA = contact.bodyA;\n            const bodyB = contact.bodyB;\n            if (bodyA && bodyB) {\n                // Skip post solve for active+passive collisions\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                    continue;\n                }\n                // Update motion values for sleeping\n                bodyA.updateMotion();\n                bodyB.updateMotion();\n            }\n            // Publish collision events on both participants\n            const side = Side.fromDirection(contact.mtv);\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderA.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n            contact.colliderB.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n        }\n        // Store contacts\n        this.lastFrameContacts.clear();\n        for (let i = 0; i < contacts.length; i++) {\n            const c = contacts[i];\n            this.lastFrameContacts.set(c.id, c);\n        }\n    }\n    /**\n     * Warm up body's based on previous frame contact points\n     * @param contacts\n     */\n    warmStart(contacts) {\n        var _a;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            const bodyA = contact.bodyA;\n            const bodyB = contact.bodyB;\n            if (bodyA && bodyB) {\n                const contactPoints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\n                for (const point of contactPoints) {\n                    if (this.config.warmStart) {\n                        const normalImpulse = contact.normal.scale(point.normalImpulse);\n                        const tangentImpulse = contact.tangent.scale(point.tangentImpulse);\n                        const impulse = normalImpulse.add(tangentImpulse);\n                        bodyA.applyImpulse(point.point, impulse.negate());\n                        bodyB.applyImpulse(point.point, impulse);\n                    }\n                    else {\n                        point.normalImpulse = 0;\n                        point.tangentImpulse = 0;\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Iteratively solve the position overlap constraint\n     * @param contacts\n     */\n    solvePosition(contacts) {\n        var _a;\n        for (let i = 0; i < this.config.positionIterations; i++) {\n            for (let i = 0; i < contacts.length; i++) {\n                const contact = contacts[i];\n                const bodyA = contact.bodyA;\n                const bodyB = contact.bodyB;\n                if (bodyA && bodyB) {\n                    // Skip solving active+passive\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                        continue;\n                    }\n                    const constraints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\n                    for (const point of constraints) {\n                        const normal = contact.normal;\n                        const separation = CollisionJumpTable.FindContactSeparation(contact, point.local);\n                        const steeringConstant = this.config.steeringFactor; //0.2;\n                        const maxCorrection = -5;\n                        const slop = this.config.slop; //1;\n                        // Clamp to avoid over-correction\n                        // Remember that we are shooting for 0 overlap in the end\n                        const steeringForce = clamp(steeringConstant * (separation + slop), maxCorrection, 0);\n                        const impulse = normal.scale(-steeringForce * point.normalMass);\n                        // This is a pseudo impulse, meaning we aren't doing a real impulse calculation\n                        // We adjust position and rotation instead of doing the velocity\n                        if (bodyA.collisionType === CollisionType.Active) {\n                            // TODO make applyPseudoImpulse function?\n                            const impulseForce = impulse.negate().scale(bodyA.inverseMass);\n                            if (bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\n                                impulseForce.x = 0;\n                            }\n                            if (bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\n                                impulseForce.y = 0;\n                            }\n                            bodyA.globalPos = bodyA.globalPos.add(impulseForce);\n                            if (!bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n                                bodyA.rotation -= point.aToContact.cross(impulse) * bodyA.inverseInertia;\n                            }\n                        }\n                        if (bodyB.collisionType === CollisionType.Active) {\n                            const impulseForce = impulse.scale(bodyB.inverseMass);\n                            if (bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\n                                impulseForce.x = 0;\n                            }\n                            if (bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\n                                impulseForce.y = 0;\n                            }\n                            bodyB.globalPos = bodyB.globalPos.add(impulseForce);\n                            if (!bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n                                bodyB.rotation += point.bToContact.cross(impulse) * bodyB.inverseInertia;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    solveVelocity(contacts) {\n        var _a;\n        for (let i = 0; i < this.config.velocityIterations; i++) {\n            for (let i = 0; i < contacts.length; i++) {\n                const contact = contacts[i];\n                const bodyA = contact.bodyA;\n                const bodyB = contact.bodyB;\n                if (bodyA && bodyB) {\n                    // Skip solving active+passive\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                        continue;\n                    }\n                    const friction = Math.min(bodyA.friction, bodyB.friction);\n                    const constraints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\n                    // Friction constraint\n                    for (const point of constraints) {\n                        const relativeVelocity = point.getRelativeVelocity();\n                        // Negate velocity in tangent direction to simulate friction\n                        const tangentVelocity = -relativeVelocity.dot(contact.tangent);\n                        let impulseDelta = tangentVelocity * point.tangentMass;\n                        // Clamping based in Erin Catto's GDC 2006 talk\n                        // Correct clamping https://github.com/erincatto/box2d-lite/blob/master/docs/GDC2006_Catto_Erin_PhysicsTutorial.pdf\n                        // Accumulated fiction impulse is always between -uMaxFriction < dT < uMaxFriction\n                        // But deltas can vary\n                        const maxFriction = friction * point.normalImpulse;\n                        const newImpulse = clamp(point.tangentImpulse + impulseDelta, -maxFriction, maxFriction);\n                        impulseDelta = newImpulse - point.tangentImpulse;\n                        point.tangentImpulse = newImpulse;\n                        const impulse = contact.tangent.scale(impulseDelta);\n                        bodyA.applyImpulse(point.point, impulse.negate());\n                        bodyB.applyImpulse(point.point, impulse);\n                    }\n                    // Bounce constraint\n                    for (const point of constraints) {\n                        // Need to recalc relative velocity because the previous step could have changed vel\n                        const relativeVelocity = point.getRelativeVelocity();\n                        // Compute impulse in normal direction\n                        const normalVelocity = relativeVelocity.dot(contact.normal);\n                        // Per Erin it is a mistake to apply the restitution inside the iteration\n                        // From Erin Catto's Box2D we keep original contact velocity and adjust by small impulses\n                        let impulseDelta = -point.normalMass * (normalVelocity - point.originalVelocityAndRestitution);\n                        // Clamping based in Erin Catto's GDC 2014 talk\n                        // Accumulated impulse stored in the contact is always positive (dV > 0)\n                        // But deltas can be negative\n                        const newImpulse = Math.max(point.normalImpulse + impulseDelta, 0);\n                        impulseDelta = newImpulse - point.normalImpulse;\n                        point.normalImpulse = newImpulse;\n                        const impulse = contact.normal.scale(impulseDelta);\n                        bodyA.applyImpulse(point.point, impulse.negate());\n                        bodyB.applyImpulse(point.point, impulse);\n                    }\n                }\n            }\n        }\n    }\n}\n\n;// ./Collision/CollisionSystem.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass CollisionSystem extends System {\n    get _processor() {\n        return this._physics.collisionProcessor;\n    }\n    constructor(world, _physics) {\n        super();\n        this._physics = _physics;\n        this.systemType = SystemType.Update;\n        this._configDirty = false;\n        this._lastFrameContacts = new Map();\n        this._currentFrameContacts = new Map();\n        this._arcadeSolver = new ArcadeSolver(_physics.config.arcade);\n        this._realisticSolver = new RealisticSolver(_physics.config.realistic);\n        this._physics.$configUpdate.subscribe(() => (this._configDirty = true));\n        this._trackCollider = (c) => this._processor.track(c);\n        this._untrackCollider = (c) => this._processor.untrack(c);\n        this.query = world.query([TransformComponent, MotionComponent, ColliderComponent]);\n        this.query.entityAdded$.subscribe((e) => {\n            const colliderComponent = e.get(ColliderComponent);\n            colliderComponent.$colliderAdded.subscribe(this._trackCollider);\n            colliderComponent.$colliderRemoved.subscribe(this._untrackCollider);\n            const collider = colliderComponent.get();\n            if (collider) {\n                this._processor.track(collider);\n            }\n        });\n        this.query.entityRemoved$.subscribe((e) => {\n            const colliderComponent = e.get(ColliderComponent);\n            const collider = colliderComponent.get();\n            if (colliderComponent && collider) {\n                this._processor.untrack(collider);\n            }\n        });\n        this._motionSystem = world.get(MotionSystem);\n    }\n    initialize(world, scene) {\n        this._engine = scene.engine;\n    }\n    update(elapsed) {\n        var _a, _b, _c, _d;\n        if (!this._physics.config.enabled) {\n            return;\n        }\n        // TODO do we need to do this every frame?\n        // Collect up all the colliders and update them\n        let colliders = [];\n        for (let entityIndex = 0; entityIndex < this.query.entities.length; entityIndex++) {\n            const entity = this.query.entities[entityIndex];\n            const colliderComp = entity.get(ColliderComponent);\n            const collider = colliderComp === null || colliderComp === void 0 ? void 0 : colliderComp.get();\n            if (colliderComp && ((_a = colliderComp.owner) === null || _a === void 0 ? void 0 : _a.isActive) && collider) {\n                colliderComp.update();\n                // Flatten composite colliders\n                if (collider instanceof CompositeCollider) {\n                    const compositeColliders = collider.getColliders();\n                    if (!collider.compositeStrategy) {\n                        collider.compositeStrategy = this._physics.config.colliders.compositeStrategy;\n                    }\n                    colliders = colliders.concat(compositeColliders);\n                }\n                else {\n                    colliders.push(collider);\n                }\n            }\n        }\n        // Update the spatial partitioning data structures\n        // TODO if collider invalid it will break the processor\n        // TODO rename \"update\" to something more specific\n        this._processor.update(colliders, elapsed);\n        // Run broadphase on all colliders and locates potential collisions\n        let pairs = this._processor.broadphase(colliders, elapsed);\n        this._currentFrameContacts.clear();\n        // Given possible pairs find actual contacts\n        let contacts = []; // = this._processor.narrowphase(pairs, this._engine?.debug?.stats?.currFrame);\n        const solver = this.getSolver();\n        // Solve, this resolves the position/velocity so entities aren't overlapping\n        const substep = this._physics.config.substep;\n        for (let step = 0; step < substep; step++) {\n            if (step > 0) {\n                // first step is run by the MotionSystem when configured, so skip\n                this._motionSystem.update(elapsed);\n            }\n            // Re-use pairs from previous collision\n            if (contacts.length) {\n                pairs = contacts.map((c) => new Pair(c.colliderA, c.colliderB));\n            }\n            if (pairs.length) {\n                contacts = this._processor.narrowphase(pairs, (_d = (_c = (_b = this._engine) === null || _b === void 0 ? void 0 : _b.debug) === null || _c === void 0 ? void 0 : _c.stats) === null || _d === void 0 ? void 0 : _d.currFrame);\n                contacts = solver.solve(contacts);\n                // Record contacts for start/end\n                for (const contact of contacts) {\n                    if (contact.isCanceled()) {\n                        continue;\n                    }\n                    // Process composite ids, things with the same composite id are treated as the same collider for start/end\n                    const index = contact.id.indexOf('|');\n                    if (index > 0) {\n                        const compositeId = contact.id.substring(index + 1);\n                        this._currentFrameContacts.set(compositeId, contact);\n                    }\n                    else {\n                        this._currentFrameContacts.set(contact.id, contact);\n                    }\n                }\n            }\n        }\n        // Emit contact start/end events\n        this.runContactStartEnd();\n        // reset the last frame cache\n        this._lastFrameContacts.clear();\n        // Keep track of collisions contacts that have started or ended\n        this._lastFrameContacts = new Map(this._currentFrameContacts);\n        // Process deferred collider removals\n        for (const entity of this.query.entities) {\n            const collider = entity.get(ColliderComponent);\n            if (collider) {\n                collider.processColliderRemoval();\n            }\n        }\n    }\n    postupdate() {\n        SeparatingAxis.SeparationPool.done();\n    }\n    getSolver() {\n        if (this._configDirty) {\n            this._configDirty = false;\n            this._arcadeSolver = new ArcadeSolver(this._physics.config.arcade);\n            this._realisticSolver = new RealisticSolver(this._physics.config.realistic);\n        }\n        return this._physics.config.solver === SolverStrategy.Realistic ? this._realisticSolver : this._arcadeSolver;\n    }\n    debug(ex) {\n        this._processor.debug(ex, 0);\n    }\n    runContactStartEnd() {\n        // If composite colliders are 'together' collisions may have a duplicate id because we want to treat those as a singular start/end\n        for (const [id, c] of this._currentFrameContacts) {\n            // find all new contacts\n            if (!this._lastFrameContacts.has(id)) {\n                const colliderA = c.colliderA;\n                const colliderB = c.colliderB;\n                const side = Side.fromDirection(c.mtv);\n                const opposite = Side.getOpposite(side);\n                colliderA.events.emit('collisionstart', new CollisionStartEvent(colliderA, colliderB, side, c));\n                colliderA.events.emit('contactstart', new ContactStartEvent(colliderA, colliderB, side, c));\n                colliderB.events.emit('collisionstart', new CollisionStartEvent(colliderB, colliderA, opposite, c));\n                colliderB.events.emit('contactstart', new ContactStartEvent(colliderB, colliderA, opposite, c));\n            }\n        }\n        // find all contacts that have ceased\n        for (const [id, c] of this._lastFrameContacts) {\n            if (!this._currentFrameContacts.has(id)) {\n                const colliderA = c.colliderA;\n                const colliderB = c.colliderB;\n                const side = Side.fromDirection(c.mtv);\n                const opposite = Side.getOpposite(side);\n                colliderA.events.emit('collisionend', new CollisionEndEvent(colliderA, colliderB, side, c));\n                colliderA.events.emit('contactend', new ContactEndEvent(colliderA, colliderB, side, c));\n                colliderB.events.emit('collisionend', new CollisionEndEvent(colliderB, colliderA, opposite, c));\n                colliderB.events.emit('contactend', new ContactEndEvent(colliderB, colliderA, opposite, c));\n            }\n        }\n    }\n}\nCollisionSystem.priority = SystemPriority.Higher;\n\n;// ./Graphics/TransformInterpolation.ts\n\n/**\n * Blend 2 transforms for interpolation, will interpolate from the context of newTx's parent if it exists\n */\nfunction blendTransform(oldTx, newTx, blend, target) {\n    if (oldTx.parent !== newTx.parent) {\n        // Caller expects a local transform\n        // Adjust old tx to be local to the new parent whatever that is\n        const oldTxWithNewParent = oldTx.clone();\n        const oldGlobalPos = oldTx.globalPos.clone();\n        const oldGlobalScale = oldTx.globalScale.clone();\n        const oldGlobalRotation = oldTx.globalRotation;\n        oldTxWithNewParent.parent = newTx.parent;\n        oldTxWithNewParent.globalPos = oldGlobalPos;\n        oldTxWithNewParent.globalScale = oldGlobalScale;\n        oldTxWithNewParent.globalRotation = oldGlobalRotation;\n        oldTx = oldTxWithNewParent;\n    }\n    let interpolatedPos = newTx.pos;\n    let interpolatedScale = newTx.scale;\n    let interpolatedRotation = newTx.rotation;\n    interpolatedPos = newTx.pos.scale(blend).add(oldTx.pos.scale(1.0 - blend));\n    interpolatedScale = newTx.scale.scale(blend).add(oldTx.scale.scale(1.0 - blend));\n    // Rotational lerp https://stackoverflow.com/a/30129248\n    const cosine = (1.0 - blend) * Math.cos(oldTx.rotation) + blend * Math.cos(newTx.rotation);\n    const sine = (1.0 - blend) * Math.sin(oldTx.rotation) + blend * Math.sin(newTx.rotation);\n    interpolatedRotation = Math.atan2(sine, cosine);\n    const tx = target !== null && target !== void 0 ? target : new transform_Transform();\n    tx.setTransform(interpolatedPos, interpolatedRotation, interpolatedScale);\n    return tx;\n}\n/**\n *\n */\nfunction blendGlobalTransform(oldTx, newTx, blend, target) {\n    let interpolatedPos = newTx.globalPos;\n    let interpolatedScale = newTx.globalScale;\n    let interpolatedRotation = newTx.globalRotation;\n    interpolatedPos = newTx.globalPos.scale(blend).add(oldTx.globalPos.scale(1.0 - blend));\n    interpolatedScale = newTx.globalScale.scale(blend).add(oldTx.globalScale.scale(1.0 - blend));\n    // Rotational lerp https://stackoverflow.com/a/30129248\n    const cosine = (1.0 - blend) * Math.cos(oldTx.globalRotation) + blend * Math.cos(newTx.globalRotation);\n    const sine = (1.0 - blend) * Math.sin(oldTx.globalRotation) + blend * Math.sin(newTx.globalRotation);\n    interpolatedRotation = Math.atan2(sine, cosine);\n    const tx = target !== null && target !== void 0 ? target : new Transform();\n    tx.setTransform(interpolatedPos, interpolatedRotation, interpolatedScale);\n    return tx;\n}\n\n;// ./Graphics/GraphicsSystem.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass GraphicsSystem extends System {\n    get sortedTransforms() {\n        return this._sortedTransforms;\n    }\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Draw;\n        this._token = 0;\n        this._sortedTransforms = [];\n        this._zHasChanged = false;\n        this._zIndexUpdate = () => {\n            this._zHasChanged = true;\n        };\n        this._targetInterpolationTransform = new transform_Transform();\n        this.query = this.world.query([TransformComponent, GraphicsComponent]);\n        this.query.entityAdded$.subscribe((e) => {\n            const tx = e.get(TransformComponent);\n            this._sortedTransforms.push(tx);\n            tx.zIndexChanged$.subscribe(this._zIndexUpdate);\n            this._zHasChanged = true;\n        });\n        this.query.entityRemoved$.subscribe((e) => {\n            const tx = e.get(TransformComponent);\n            tx.zIndexChanged$.unsubscribe(this._zIndexUpdate);\n            const index = this._sortedTransforms.indexOf(tx);\n            if (index > -1) {\n                this._sortedTransforms.splice(index, 1);\n            }\n        });\n    }\n    initialize(world, scene) {\n        this._camera = scene.camera;\n        this._engine = scene.engine;\n    }\n    preupdate() {\n        // Graphics context could be switched to fallback in a new frame\n        this._graphicsContext = this._engine.graphicsContext;\n        if (this._zHasChanged) {\n            this._sortedTransforms.sort((a, b) => {\n                return a.globalZ - b.globalZ;\n            });\n            this._zHasChanged = false;\n        }\n    }\n    update(elapsed) {\n        this._token++;\n        let graphics;\n        FontCache.checkAndClearCache();\n        // This is a performance enhancement, most things are in world space\n        // so if we can only do this once saves a ton of transform updates\n        this._graphicsContext.save();\n        if (this._camera) {\n            this._camera.draw(this._graphicsContext);\n        }\n        for (let transformIndex = 0; transformIndex < this._sortedTransforms.length; transformIndex++) {\n            const transform = this._sortedTransforms[transformIndex];\n            const entity = transform.owner;\n            // If the entity is offscreen skip\n            if (entity.hasTag('ex.offscreen')) {\n                continue;\n            }\n            graphics = entity.get(GraphicsComponent);\n            // Exit if graphics set to not visible\n            if (!graphics.isVisible) {\n                continue;\n            }\n            // Optionally run the onPreTransformDraw graphics lifecycle draw\n            if (graphics.onPreTransformDraw) {\n                graphics.onPreTransformDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('pretransformdraw', new PreTransformDrawEvent(this._graphicsContext, elapsed, entity));\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\n            if (transform.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.restore();\n            }\n            this._graphicsContext.save();\n            if (transform.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.translate(this._engine.screen.contentArea.left, this._engine.screen.contentArea.top);\n            }\n            // Tick any graphics state (but only once) for animations and graphics groups\n            graphics.update(elapsed, this._token);\n            // Apply parallax\n            const parallax = entity.get(ParallaxComponent);\n            if (parallax) {\n                // We use the Tiled formula\n                // https://doc.mapeditor.org/en/latest/manual/layers/#parallax-scrolling-factor\n                // cameraPos * (1 - parallaxFactor)\n                const oneMinusFactor = Vector.One.sub(parallax.parallaxFactor);\n                const parallaxOffset = this._camera.drawPos.scale(oneMinusFactor);\n                this._graphicsContext.translate(parallaxOffset.x, parallaxOffset.y);\n            }\n            // Position the entity + estimate lag\n            this._applyTransform(entity);\n            // If there is a material enable it on the context\n            if (graphics.material) {\n                this._graphicsContext.material = graphics.material;\n            }\n            // Optionally run the onPreDraw graphics lifecycle draw\n            if (graphics.onPreDraw) {\n                graphics.onPreDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('predraw', new PreDrawEvent(this._graphicsContext, elapsed, entity));\n            // this._graphicsContext.opacity *= graphics.opacity;\n            this._applyOpacity(entity);\n            // Draw the graphics component\n            this._drawGraphicsComponent(graphics, transform);\n            // Optionally run the onPostDraw graphics lifecycle draw\n            if (graphics.onPostDraw) {\n                graphics.onPostDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('postdraw', new PostDrawEvent(this._graphicsContext, elapsed, entity));\n            this._graphicsContext.restore();\n            // Reset the transform back to the original world space\n            if (transform.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.save();\n                if (this._camera) {\n                    this._camera.draw(this._graphicsContext);\n                }\n            }\n            // Optionally run the onPreTransformDraw graphics lifecycle draw\n            if (graphics.onPostTransformDraw) {\n                graphics.onPostTransformDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('posttransformdraw', new PostTransformDrawEvent(this._graphicsContext, elapsed, entity));\n        }\n        this._graphicsContext.restore();\n    }\n    _drawGraphicsComponent(graphicsComponent, transformComponent) {\n        var _a, _b;\n        if (graphicsComponent.isVisible) {\n            const flipHorizontal = graphicsComponent.flipHorizontal;\n            const flipVertical = graphicsComponent.flipVertical;\n            const graphic = graphicsComponent.current;\n            const options = (_a = graphicsComponent.currentOptions) !== null && _a !== void 0 ? _a : {};\n            if (graphic) {\n                let anchor = graphicsComponent.anchor;\n                let offset = graphicsComponent.offset;\n                let scaleX = 1;\n                let scaleY = 1;\n                // handle specific overrides\n                if (options === null || options === void 0 ? void 0 : options.anchor) {\n                    anchor = options.anchor;\n                }\n                if (options === null || options === void 0 ? void 0 : options.offset) {\n                    offset = options.offset;\n                }\n                const globalScale = transformComponent.globalScale;\n                scaleX *= graphic.scale.x * globalScale.x;\n                scaleY *= graphic.scale.y * globalScale.y;\n                // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n                const offsetX = -graphic.width * anchor.x + offset.x * scaleX;\n                const offsetY = -graphic.height * anchor.y + offset.y * scaleY;\n                const oldFlipHorizontal = graphic.flipHorizontal;\n                const oldFlipVertical = graphic.flipVertical;\n                if (flipHorizontal || flipVertical) {\n                    // flip any currently flipped graphics\n                    graphic.flipHorizontal = flipHorizontal ? !oldFlipHorizontal : oldFlipHorizontal;\n                    graphic.flipVertical = flipVertical ? !oldFlipVertical : oldFlipVertical;\n                }\n                graphic === null || graphic === void 0 ? void 0 : graphic.draw(this._graphicsContext, offsetX, offsetY);\n                if (flipHorizontal || flipVertical) {\n                    graphic.flipHorizontal = oldFlipHorizontal;\n                    graphic.flipVertical = oldFlipVertical;\n                }\n                // TODO move debug code out?\n                if (((_b = this._engine) === null || _b === void 0 ? void 0 : _b.isDebug) && this._engine.debug.graphics.showBounds) {\n                    const offset = vec(offsetX, offsetY);\n                    if (graphic instanceof GraphicsGroup) {\n                        for (const member of graphic.members) {\n                            let g;\n                            let pos = Vector.Zero;\n                            if (member instanceof Graphic) {\n                                g = member;\n                            }\n                            else {\n                                g = member.graphic;\n                                pos = member.offset;\n                            }\n                            if (graphic.useAnchor) {\n                                g === null || g === void 0 ? void 0 : g.localBounds.translate(offset.add(pos)).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\n                            }\n                            else {\n                                g === null || g === void 0 ? void 0 : g.localBounds.translate(pos).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\n                            }\n                        }\n                    }\n                    else {\n                        /* istanbul ignore next */\n                        graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(offset).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * This applies the current entity transform to the graphics context\n     * @param entity\n     */\n    _applyTransform(entity) {\n        const ancestors = entity.getAncestors();\n        for (let i = 0; i < ancestors.length; i++) {\n            const ancestor = ancestors[i];\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\n            const optionalBody = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(BodyComponent);\n            if (transform) {\n                let tx = transform.get();\n                if (optionalBody) {\n                    if (this._engine.fixedUpdateTimestep && optionalBody.__oldTransformCaptured && optionalBody.enableFixedUpdateInterpolate) {\n                        // Interpolate graphics if needed\n                        const blend = this._engine.currentFrameLagMs / this._engine.fixedUpdateTimestep;\n                        tx = blendTransform(optionalBody.oldTransform, transform.get(), blend, this._targetInterpolationTransform);\n                    }\n                }\n                this._graphicsContext.z = transform.globalZ;\n                this._graphicsContext.translate(tx.pos.x, tx.pos.y);\n                this._graphicsContext.scale(tx.scale.x, tx.scale.y);\n                this._graphicsContext.rotate(tx.rotation);\n            }\n        }\n    }\n    _applyOpacity(entity) {\n        var _a;\n        const ancestors = entity.getAncestors();\n        for (let i = 0; i < ancestors.length; i++) {\n            const ancestor = ancestors[i];\n            const maybeGraphics = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(GraphicsComponent);\n            this._graphicsContext.opacity *= (_a = maybeGraphics === null || maybeGraphics === void 0 ? void 0 : maybeGraphics.opacity) !== null && _a !== void 0 ? _a : 1;\n        }\n    }\n}\nGraphicsSystem.priority = SystemPriority.Average;\n\n;// ./Debug/DebugSystem.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass DebugSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Draw;\n        this.query = this.world.query([TransformComponent]);\n    }\n    initialize(world, scene) {\n        this._graphicsContext = scene.engine.graphicsContext;\n        this._camera = scene.camera;\n        this._engine = scene.engine;\n        this._collisionSystem = world.systemManager.get(CollisionSystem);\n    }\n    update() {\n        var _a;\n        if (!this._engine.isDebug) {\n            return;\n        }\n        const filterSettings = this._engine.debug.filter;\n        let id;\n        let name;\n        const entitySettings = this._engine.debug.entity;\n        let tx;\n        const txSettings = this._engine.debug.transform;\n        let motion;\n        const motionSettings = this._engine.debug.motion;\n        let colliderComp;\n        const colliderSettings = this._engine.debug.collider;\n        const physicsSettings = this._engine.debug.physics;\n        let graphics;\n        const graphicsSettings = this._engine.debug.graphics;\n        let debugDraw;\n        let body;\n        const bodySettings = this._engine.debug.body;\n        const cameraSettings = this._engine.debug.camera;\n        for (let i = 0; i < this.query.entities.length; i++) {\n            const entity = this.query.entities[i];\n            if (entity.hasTag('offscreen')) {\n                // skip offscreen entities\n                continue;\n            }\n            if (entity instanceof Particle) {\n                // Particles crush the renderer :(\n                continue;\n            }\n            if (filterSettings.useFilter) {\n                const allIds = filterSettings.ids.length === 0;\n                const idMatch = allIds || filterSettings.ids.includes(entity.id);\n                if (!idMatch) {\n                    continue;\n                }\n                const allNames = filterSettings.nameQuery === '';\n                const nameMatch = allNames || entity.name.includes(filterSettings.nameQuery);\n                if (!nameMatch) {\n                    continue;\n                }\n            }\n            let cursor = Vector.Zero;\n            const lineHeight = vec(0, 16);\n            id = entity.id;\n            name = entity.name;\n            tx = entity.get(TransformComponent);\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\n            this._pushCameraTransform(tx);\n            this._graphicsContext.save();\n            if (tx.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.translate(this._engine.screen.contentArea.left, this._engine.screen.contentArea.top);\n            }\n            this._graphicsContext.z = txSettings.debugZIndex;\n            this._applyTransform(entity);\n            if (tx) {\n                if (txSettings.showAll || txSettings.showPosition) {\n                    this._graphicsContext.debug.drawPoint(Vector.Zero, { size: 4, color: txSettings.positionColor });\n                }\n                if (txSettings.showAll || txSettings.showPositionLabel) {\n                    this._graphicsContext.debug.drawText(`pos${tx.pos.toString(2)}`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (txSettings.showAll || txSettings.showZIndex) {\n                    this._graphicsContext.debug.drawText(`z(${tx.z.toFixed(1)})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (entitySettings.showAll || entitySettings.showId) {\n                    this._graphicsContext.debug.drawText(`id(${id}) ${entity.parent ? 'child of id(' + ((_a = entity.parent) === null || _a === void 0 ? void 0 : _a.id) + ')' : ''}`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (entitySettings.showAll || entitySettings.showName) {\n                    this._graphicsContext.debug.drawText(`name(${name})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (txSettings.showAll || txSettings.showRotation) {\n                    this._graphicsContext.drawLine(Vector.Zero, Vector.fromAngle(tx.rotation).scale(50).add(Vector.Zero), txSettings.rotationColor, 2);\n                    this._graphicsContext.debug.drawText(`rot deg(${toDegrees(tx.rotation).toFixed(2)})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (txSettings.showAll || txSettings.showScale) {\n                    this._graphicsContext.drawLine(Vector.Zero, tx.scale.add(Vector.Zero), txSettings.scaleColor, 2);\n                }\n            }\n            graphics = entity.get(GraphicsComponent);\n            if (graphics) {\n                if (graphicsSettings.showAll || graphicsSettings.showBounds) {\n                    const bounds = graphics.localBounds;\n                    bounds.draw(this._graphicsContext, graphicsSettings.boundsColor);\n                }\n            }\n            debugDraw = entity.get(DebugGraphicsComponent);\n            if (debugDraw) {\n                if (!debugDraw.useTransform) {\n                    this._graphicsContext.restore();\n                }\n                debugDraw.draw(this._graphicsContext, this._engine.debug);\n                if (!debugDraw.useTransform) {\n                    this._graphicsContext.save();\n                    this._applyTransform(entity);\n                }\n            }\n            body = entity.get(BodyComponent);\n            if (body) {\n                if (bodySettings.showAll || bodySettings.showCollisionGroup) {\n                    this._graphicsContext.debug.drawText(`collision group(${body.group.name})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showCollisionType) {\n                    this._graphicsContext.debug.drawText(`collision type(${body.collisionType})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showMass) {\n                    this._graphicsContext.debug.drawText(`mass(${body.mass})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showMotion) {\n                    this._graphicsContext.debug.drawText(`motion(${body.sleepMotion})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showSleeping) {\n                    this._graphicsContext.debug.drawText(`sleeping(${body.canSleep ? body.isSleeping : 'cant sleep'})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n            }\n            this._graphicsContext.restore();\n            // World space\n            this._graphicsContext.save();\n            if (tx.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.translate(this._engine.screen.contentArea.left, this._engine.screen.contentArea.top);\n            }\n            this._graphicsContext.z = txSettings.debugZIndex;\n            motion = entity.get(MotionComponent);\n            if (motion) {\n                if (motionSettings.showAll || motionSettings.showVelocity) {\n                    this._graphicsContext.debug.drawText(`vel${motion.vel.toString(2)}`, cursor.add(tx.globalPos));\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.vel), motionSettings.velocityColor, 2);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (motionSettings.showAll || motionSettings.showAcceleration) {\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.acc), motionSettings.accelerationColor, 2);\n                }\n            }\n            // Colliders live in world space already so after the restore()\n            colliderComp = entity.get(ColliderComponent);\n            if (colliderComp) {\n                const collider = colliderComp.get();\n                if ((colliderSettings.showAll || colliderSettings.showGeometry) && collider) {\n                    collider.debug(this._graphicsContext, colliderSettings.geometryColor, {\n                        lineWidth: colliderSettings.geometryLineWidth,\n                        pointSize: colliderSettings.geometryPointSize\n                    });\n                }\n                if (colliderSettings.showAll || colliderSettings.showBounds) {\n                    if (collider instanceof CompositeCollider) {\n                        const colliders = collider.getColliders();\n                        for (const collider of colliders) {\n                            const bounds = collider.bounds;\n                            const pos = vec(bounds.left, bounds.top);\n                            this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\n                            if (colliderSettings.showAll || colliderSettings.showOwner) {\n                                this._graphicsContext.debug.drawText(`owner id(${collider.owner.id})`, pos);\n                            }\n                        }\n                        colliderComp.bounds.draw(this._graphicsContext, colliderSettings.boundsColor);\n                    }\n                    else if (collider) {\n                        const bounds = colliderComp.bounds;\n                        const pos = vec(bounds.left, bounds.top);\n                        this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\n                        if (colliderSettings.showAll || colliderSettings.showOwner) {\n                            this._graphicsContext.debug.drawText(`owner id(${colliderComp.owner.id})`, pos);\n                        }\n                    }\n                }\n            }\n            this._graphicsContext.restore();\n            this._popCameraTransform(tx);\n        }\n        this._graphicsContext.save();\n        this._camera.draw(this._graphicsContext);\n        if (physicsSettings.showAll || physicsSettings.showBroadphaseSpacePartitionDebug) {\n            this._collisionSystem.debug(this._graphicsContext);\n        }\n        if (physicsSettings.showAll || physicsSettings.showCollisionContacts || physicsSettings.showCollisionNormals) {\n            for (const [_, contact] of this._engine.debug.stats.currFrame.physics.contacts) {\n                if (physicsSettings.showAll || physicsSettings.showCollisionContacts) {\n                    for (const point of contact.points) {\n                        this._graphicsContext.debug.drawPoint(point, {\n                            size: physicsSettings.contactSize,\n                            color: physicsSettings.collisionContactColor\n                        });\n                    }\n                }\n                if (physicsSettings.showAll || physicsSettings.showCollisionNormals) {\n                    for (const point of contact.points) {\n                        this._graphicsContext.debug.drawLine(point, contact.normal.scale(30).add(point), {\n                            color: physicsSettings.collisionNormalColor\n                        });\n                    }\n                }\n            }\n        }\n        this._graphicsContext.restore();\n        if (cameraSettings) {\n            this._graphicsContext.save();\n            this._camera.draw(this._graphicsContext);\n            if (cameraSettings.showAll || cameraSettings.showFocus) {\n                this._graphicsContext.drawCircle(this._camera.pos, 4, cameraSettings.focusColor);\n            }\n            if (cameraSettings.showAll || cameraSettings.showZoom) {\n                this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`, this._camera.pos);\n            }\n            this._graphicsContext.restore();\n        }\n        this._graphicsContext.flush();\n    }\n    postupdate(engine, elapsed) {\n        if (this._engine.isDebug) {\n            this._graphicsContext.save();\n            if (this._camera) {\n                this._camera.draw(this._graphicsContext);\n            }\n            Debug.flush(this._graphicsContext);\n            this._graphicsContext.restore();\n        }\n    }\n    /**\n     * This applies the current entity transform to the graphics context\n     * @param entity\n     */\n    _applyTransform(entity) {\n        const ancestors = entity.getAncestors();\n        for (const ancestor of ancestors) {\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\n            if (transform) {\n                this._graphicsContext.translate(transform.pos.x, transform.pos.y);\n                this._graphicsContext.scale(transform.scale.x, transform.scale.y);\n                this._graphicsContext.rotate(transform.rotation);\n            }\n        }\n    }\n    /**\n     * Applies the current camera transform if in world coordinates\n     * @param transform\n     */\n    _pushCameraTransform(transform) {\n        // Establish camera offset per entity\n        if (transform.coordPlane === CoordPlane.World) {\n            this._graphicsContext.save();\n            if (this._camera) {\n                this._camera.draw(this._graphicsContext);\n            }\n        }\n    }\n    /**\n     * Resets the current camera transform if in world coordinates\n     * @param transform\n     */\n    _popCameraTransform(transform) {\n        if (transform.coordPlane === CoordPlane.World) {\n            // Apply camera world offset\n            this._graphicsContext.restore();\n        }\n    }\n}\nDebugSystem.priority = SystemPriority.Lowest;\n\n;// ./Collision/Detection/SparseHashGrid.ts\n\n\n\n\nclass HashGridProxy {\n    constructor(object, gridSize) {\n        this.object = object;\n        this.id = -1;\n        this.cells = [];\n        this.hasZeroBounds = false;\n        this.gridSize = gridSize;\n        this.bounds = object.bounds;\n        this.hasZeroBounds = this.bounds.hasZeroDimensions();\n        this.leftX = Math.floor(this.bounds.left / this.gridSize);\n        this.rightX = Math.floor(this.bounds.right / this.gridSize);\n        this.bottomY = Math.floor(this.bounds.bottom / this.gridSize);\n        this.topY = Math.floor(this.bounds.top / this.gridSize);\n    }\n    /**\n     * Has the hashed bounds changed\n     */\n    hasChanged() {\n        const bounds = this.object.bounds;\n        const leftX = Math.floor(bounds.left / this.gridSize);\n        const rightX = Math.floor(bounds.right / this.gridSize);\n        const bottomY = Math.floor(bounds.bottom / this.gridSize);\n        const topY = Math.floor(bounds.top / this.gridSize);\n        if (this.leftX !== leftX || this.rightX !== rightX || this.bottomY !== bottomY || this.topY !== topY) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Clears all collider references\n     */\n    clear() {\n        for (const cell of this.cells) {\n            const index = cell.proxies.indexOf(this);\n            if (index > -1) {\n                cell.proxies.splice(index, 1);\n            }\n            // TODO reclaim cell in pool if empty?\n        }\n    }\n    /**\n     * Update bounds of the proxy\n     */\n    updateBounds() {\n        this.bounds = this.object.bounds;\n    }\n    /**\n     * Updates the hashed bounds coordinates\n     */\n    update() {\n        this.bounds = this.object.bounds;\n        this.leftX = Math.floor(this.bounds.left / this.gridSize);\n        this.rightX = Math.floor(this.bounds.right / this.gridSize);\n        this.bottomY = Math.floor(this.bounds.bottom / this.gridSize);\n        this.topY = Math.floor(this.bounds.top / this.gridSize);\n        this.hasZeroBounds = this.object.bounds.hasZeroDimensions();\n    }\n}\nclass HashGridCell {\n    constructor() {\n        this.proxies = [];\n    }\n    configure(x, y) {\n        this.x = x;\n        this.y = y;\n        this.key = HashGridCell.calculateHashKey(x, y);\n    }\n    static calculateHashKey(x, y) {\n        return `${x}+${y}`;\n    }\n}\nclass SparseHashGrid {\n    constructor(options) {\n        this.bounds = new BoundingBox();\n        this._hashGridCellPool = new RentalPool(() => new HashGridCell(), (instance) => {\n            instance.configure(0, 0);\n            instance.proxies.length = 0;\n            return instance;\n        }, 1000);\n        this.gridSize = options.size;\n        this.sparseHashGrid = new Map();\n        this.objectToProxy = new Map();\n        if (options.proxyFactory) {\n            this._buildProxy = (object) => options.proxyFactory(object, this.gridSize);\n        }\n        else {\n            this._buildProxy = (object) => new HashGridProxy(object, this.gridSize);\n        }\n        // TODO dynamic grid size potentially larger than the largest collider\n        // TODO Re-hash the objects if the median proves to be different\n    }\n    query(boundsOrPoint) {\n        const results = new Set();\n        if (boundsOrPoint instanceof BoundingBox) {\n            const bounds = boundsOrPoint;\n            const leftX = Math.floor(bounds.left / this.gridSize);\n            const rightX = Math.floor(bounds.right / this.gridSize);\n            const bottomY = Math.floor(bounds.bottom / this.gridSize);\n            const topY = Math.floor(bounds.top / this.gridSize);\n            for (let x = leftX; x <= rightX; x++) {\n                for (let y = topY; y <= bottomY; y++) {\n                    const key = HashGridCell.calculateHashKey(x, y);\n                    // Hash bounds into appropriate cell\n                    const cell = this.sparseHashGrid.get(key);\n                    if (cell) {\n                        for (let i = 0; i < cell.proxies.length; i++) {\n                            cell.proxies[i].updateBounds();\n                            if (cell.proxies[i].bounds.intersect(bounds)) {\n                                results.add(cell.proxies[i].object);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            const point = boundsOrPoint;\n            const key = HashGridCell.calculateHashKey(Math.floor(point.x / this.gridSize), Math.floor(point.y / this.gridSize));\n            // Hash points into appropriate cell\n            const cell = this.sparseHashGrid.get(key);\n            if (cell) {\n                for (let i = 0; i < cell.proxies.length; i++) {\n                    cell.proxies[i].updateBounds();\n                    if (cell.proxies[i].bounds.contains(point)) {\n                        results.add(cell.proxies[i].object);\n                    }\n                }\n            }\n        }\n        return Array.from(results);\n    }\n    get(xCoord, yCoord) {\n        const key = HashGridCell.calculateHashKey(xCoord, yCoord);\n        const cell = this.sparseHashGrid.get(key);\n        return cell;\n    }\n    _insert(x, y, proxy) {\n        const key = HashGridCell.calculateHashKey(x, y);\n        // Hash collider into appropriate cell\n        let cell = this.sparseHashGrid.get(key);\n        if (!cell) {\n            cell = this._hashGridCellPool.rent();\n            cell.configure(x, y);\n            this.sparseHashGrid.set(cell.key, cell);\n        }\n        cell.proxies.push(proxy);\n        proxy.cells.push(cell); // TODO dupes, doesn't seem to be a problem\n        this.bounds.combine(proxy.bounds, this.bounds);\n    }\n    _remove(x, y, proxy) {\n        const key = HashGridCell.calculateHashKey(x, y);\n        // Hash collider into appropriate cell\n        const cell = this.sparseHashGrid.get(key);\n        if (cell) {\n            const proxyIndex = cell.proxies.indexOf(proxy);\n            if (proxyIndex > -1) {\n                cell.proxies.splice(proxyIndex, 1);\n            }\n            const cellIndex = proxy.cells.indexOf(cell);\n            if (cellIndex > -1) {\n                proxy.cells.splice(cellIndex, 1);\n            }\n            if (cell.proxies.length === 0) {\n                this._hashGridCellPool.return(cell);\n                this.sparseHashGrid.delete(key);\n            }\n        }\n    }\n    track(target) {\n        const proxy = this._buildProxy(target);\n        this.objectToProxy.set(target, proxy);\n        for (let x = proxy.leftX; x <= proxy.rightX; x++) {\n            for (let y = proxy.topY; y <= proxy.bottomY; y++) {\n                this._insert(x, y, proxy);\n            }\n        }\n    }\n    untrack(target) {\n        const proxy = this.objectToProxy.get(target);\n        if (proxy) {\n            proxy.clear();\n            this.objectToProxy.delete(target);\n        }\n    }\n    update(targets) {\n        let updated = 0;\n        // FIXME resetting bounds is wrong, if nothing has updated then\n        // the bounds stay 0\n        // this.bounds.reset();\n        for (const target of targets) {\n            const proxy = this.objectToProxy.get(target);\n            if (!proxy) {\n                continue;\n            }\n            if (proxy.hasChanged()) {\n                // TODO slightly wasteful only remove from changed\n                for (let x = proxy.leftX; x <= proxy.rightX; x++) {\n                    for (let y = proxy.topY; y <= proxy.bottomY; y++) {\n                        this._remove(x, y, proxy);\n                    }\n                }\n                proxy.update();\n                // TODO slightly wasteful only add new\n                for (let x = proxy.leftX; x <= proxy.rightX; x++) {\n                    for (let y = proxy.topY; y <= proxy.bottomY; y++) {\n                        this._insert(x, y, proxy);\n                    }\n                }\n                updated++;\n            }\n        }\n        return updated;\n    }\n    debug(ex, elapsed) {\n        const transparent = Color.Transparent;\n        const color = Color.White;\n        for (const cell of this.sparseHashGrid.values()) {\n            ex.drawRectangle(vec(cell.x * this.gridSize, cell.y * this.gridSize), this.gridSize, this.gridSize, transparent, color, 2);\n        }\n    }\n}\n\n;// ./Input/PointerSystem.ts\n\n\n\n\n\n\n/**\n * The PointerSystem is responsible for dispatching pointer events to entities\n * that need them.\n *\n * The PointerSystem can be optionally configured by the {@apilink PointerComponent}, by default Entities use\n * the {@apilink Collider}'s shape for pointer events.\n */\nclass PointerSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Update;\n        this._graphicsHashGrid = new SparseHashGrid({ size: 100 });\n        this._graphics = [];\n        this._entityToPointer = new Map();\n        this._pointerEventDispatcher = new PointerEventsToObjectDispatcher();\n        /**\n         * Optionally override component configuration for all entities\n         */\n        this.overrideUseColliderShape = false;\n        /**\n         * Optionally override component configuration for all entities\n         */\n        this.overrideUseGraphicsBounds = false;\n        this._sortedTransforms = [];\n        this._sortedEntities = [];\n        this._zHasChanged = false;\n        this._zIndexUpdate = () => {\n            this._zHasChanged = true;\n        };\n        this.query = this.world.query([TransformComponent, PointerComponent]);\n        this.query.entityAdded$.subscribe((e) => {\n            const tx = e.get(TransformComponent);\n            const pointer = e.get(PointerComponent);\n            this._pointerEventDispatcher.addObject(e, (pos) => {\n                // If pointer bounds defined\n                if (pointer && pointer.localBounds) {\n                    const pointerBounds = pointer.localBounds.transform(tx.get().matrix);\n                    return pointerBounds.contains(tx.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos);\n                }\n                return false;\n            }, () => e.isActive);\n            this._entityToPointer.set(e, pointer);\n            const maybeGfx = e.get(GraphicsComponent);\n            if (maybeGfx) {\n                this._graphics.push(maybeGfx);\n                this._graphicsHashGrid.track(maybeGfx);\n            }\n            this._sortedTransforms.push(tx);\n            this._sortedEntities.push(tx.owner);\n            tx.zIndexChanged$.subscribe(this._zIndexUpdate);\n            this._zHasChanged = true;\n        });\n        this.query.entityRemoved$.subscribe((e) => {\n            this._pointerEventDispatcher.removeObject(e);\n            const tx = e.get(TransformComponent);\n            this._entityToPointer.delete(e);\n            const maybeGfx = e.get(GraphicsComponent);\n            if (maybeGfx) {\n                const index = this._graphics.indexOf(maybeGfx);\n                if (index > -1) {\n                    this._graphics.splice(index, 1);\n                }\n                this._graphicsHashGrid.untrack(maybeGfx);\n            }\n            tx.zIndexChanged$.unsubscribe(this._zIndexUpdate);\n            const index = this._sortedTransforms.indexOf(tx);\n            if (index > -1) {\n                this._sortedTransforms.splice(index, 1);\n                this._sortedEntities.splice(index, 1);\n            }\n        });\n    }\n    initialize(world, scene) {\n        this._engine = scene.engine;\n        this._scene = scene;\n    }\n    preupdate() {\n        if (this._scene.camera.hasChanged()) {\n            // if the camera has changed we want to force a transform update so pointers can be correctly calc'd\n            this._scene.camera.updateTransform(this._scene.camera.pos);\n        }\n        // event receiver might change per frame\n        this._receivers = [this._engine.input.pointers, this._scene.input.pointers];\n        this._engineReceiver = this._engine.input.pointers;\n        if (this._zHasChanged) {\n            this._sortedTransforms.sort((a, b) => {\n                return b.z - a.z;\n            });\n            this._sortedEntities = this._sortedTransforms.map((t) => t.owner);\n            this._zHasChanged = false;\n        }\n    }\n    update() {\n        // Update graphics\n        this._graphicsHashGrid.update(this._graphics);\n        // Locate all the pointer/entity mappings\n        for (const [pointerId, pos] of this._engineReceiver.currentFramePointerCoords.entries()) {\n            const colliders = this._scene.physics.query(pos.worldPos);\n            for (let i = 0; i < colliders.length; i++) {\n                const collider = colliders[i];\n                const maybePointer = this._entityToPointer.get(collider.owner);\n                if (maybePointer && (maybePointer.useColliderShape || this.overrideUseColliderShape)) {\n                    this._pointerEventDispatcher.addPointerToObject(collider.owner, pointerId);\n                }\n            }\n            const graphics = this._graphicsHashGrid.query(pos.worldPos);\n            for (let i = 0; i < graphics.length; i++) {\n                const graphic = graphics[i];\n                const maybePointer = this._entityToPointer.get(graphic.owner);\n                if (maybePointer && (maybePointer.useGraphicsBounds || this.overrideUseGraphicsBounds)) {\n                    this._pointerEventDispatcher.addPointerToObject(graphic.owner, pointerId);\n                }\n            }\n        }\n        this._pointerEventDispatcher.processPointerToObject(this._engineReceiver, this._sortedEntities);\n        // Dispatch pointer events on entities\n        this._pointerEventDispatcher.dispatchEvents(this._engineReceiver, this._sortedEntities);\n        // Dispatch pointer events on top level pointers\n        this._receivers.forEach((r) => r.update());\n        // Clear last frame's events\n        this._pointerEventDispatcher.clear();\n        this._receivers.forEach((r) => r.clear());\n    }\n}\nPointerSystem.priority = SystemPriority.Higher;\n\n;// ./Actions/ActionsSystem.ts\n\n\n\nclass ActionsSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Update;\n        this._actions = [];\n        this.query = this.world.query([ActionsComponent]);\n        this.query.entityAdded$.subscribe((e) => this._actions.push(e.get(ActionsComponent)));\n        this.query.entityRemoved$.subscribe((e) => {\n            const action = e.get(ActionsComponent);\n            const index = this._actions.indexOf(action);\n            if (index > -1) {\n                this._actions.splice(index, 1);\n            }\n        });\n    }\n    update(elapsed) {\n        for (let i = 0; i < this._actions.length; i++) {\n            const action = this._actions[i];\n            action.update(elapsed);\n        }\n    }\n}\nActionsSystem.priority = SystemPriority.Higher;\n\n;// ./TileMap/IsometricEntityComponent.ts\n\nclass IsometricEntityComponent extends Component {\n    /**\n     * Specify the isometric map to use to position this entity's z-index\n     * @param mapOrOptions\n     */\n    constructor(mapOrOptions) {\n        super();\n        /**\n         * Vertical \"height\" in the isometric world\n         */\n        this.elevation = 0;\n        this.columns = mapOrOptions.columns;\n        this.rows = mapOrOptions.rows;\n        this.tileWidth = mapOrOptions.tileWidth;\n        this.tileHeight = mapOrOptions.tileHeight;\n    }\n}\n\n;// ./TileMap/IsometricEntitySystem.ts\n\n\n\n\nclass IsometricEntitySystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Update;\n        this.query = this.world.query([TransformComponent, IsometricEntityComponent]);\n    }\n    update() {\n        let transform;\n        let iso;\n        for (let i = 0; i < this.query.entities.length; i++) {\n            const entity = this.query.entities[i];\n            transform = entity.get(TransformComponent);\n            iso = entity.get(IsometricEntityComponent);\n            const maxZindexPerElevation = Math.max(iso.columns * iso.tileWidth, iso.rows * iso.tileHeight);\n            const newZ = maxZindexPerElevation * iso.elevation + transform.pos.y;\n            transform.z = newZ;\n        }\n    }\n}\nIsometricEntitySystem.priority = SystemPriority.Lower;\n\n;// ./Graphics/OffscreenSystem.ts\n\n\n\n\n\n\n\n\nclass OffscreenSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Draw;\n        this.query = this.world.query([TransformComponent, GraphicsComponent]);\n    }\n    initialize(world, scene) {\n        this._camera = scene.camera;\n        this._screen = scene.engine.screen;\n    }\n    update() {\n        this._worldBounds = this._screen.getWorldBounds();\n        let transform;\n        let graphics;\n        let maybeParallax;\n        for (let i = 0; i < this.query.entities.length; i++) {\n            const entity = this.query.entities[i];\n            graphics = entity.get(GraphicsComponent);\n            transform = entity.get(TransformComponent);\n            maybeParallax = entity.get(ParallaxComponent);\n            let parallaxOffset;\n            if (maybeParallax) {\n                // We use the Tiled formula\n                // https://doc.mapeditor.org/en/latest/manual/layers/#parallax-scrolling-factor\n                // cameraPos * (1 - parallaxFactor)\n                const oneMinusFactor = Vector.One.sub(maybeParallax.parallaxFactor);\n                parallaxOffset = this._camera.pos.scale(oneMinusFactor);\n            }\n            // Figure out if entities are offscreen\n            const entityOffscreen = this._isOffscreen(transform, graphics, parallaxOffset);\n            if (entityOffscreen && !entity.hasTag('ex.offscreen')) {\n                entity.events.emit('exitviewport', new ExitViewPortEvent(entity));\n                entity.addTag('ex.offscreen');\n            }\n            if (!entityOffscreen && entity.hasTag('ex.offscreen')) {\n                entity.events.emit('enterviewport', new EnterViewPortEvent(entity));\n                entity.removeTag('ex.offscreen');\n            }\n        }\n    }\n    _isOffscreen(transform, graphics, parallaxOffset) {\n        if (graphics.forceOnScreen) {\n            return false;\n        }\n        if (transform.coordPlane === CoordPlane.World) {\n            let bounds = graphics.localBounds;\n            if (parallaxOffset) {\n                bounds = bounds.translate(parallaxOffset);\n            }\n            const transformedBounds = bounds.transform(transform.get().matrix);\n            const graphicsOffscreen = !this._worldBounds.overlaps(transformedBounds);\n            return graphicsOffscreen;\n        }\n        else {\n            // TODO screen coordinates\n            return false;\n        }\n    }\n}\nOffscreenSystem.priority = SystemPriority.Higher;\n\n;// ./Collision/Detection/SparseHashGridCollisionProcessor.ts\n\n\n\n\n\n\n\n\n\n/**\n * Proxy type to stash collision info\n */\nclass HashColliderProxy extends HashGridProxy {\n    constructor(collider, gridSize) {\n        var _a, _b;\n        super(collider, gridSize);\n        this.collider = collider;\n        this.id = -1;\n        this.hasZeroBounds = false;\n        /**\n         * References to the hash cell the collider is a current member of\n         */\n        this.cells = [];\n        this.gridSize = gridSize;\n        const bounds = collider.bounds;\n        this.hasZeroBounds = bounds.hasZeroDimensions();\n        this.leftX = Math.floor(bounds.left / this.gridSize);\n        this.rightX = Math.floor(bounds.right / this.gridSize);\n        this.bottomY = Math.floor(bounds.bottom / this.gridSize);\n        this.topY = Math.floor(bounds.top / this.gridSize);\n        this.owner = collider.owner;\n        this.body = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        this.collisionType = (_b = this.body.collisionType) !== null && _b !== void 0 ? _b : CollisionType.PreventCollision;\n    }\n    /**\n     * Updates the hashed bounds coordinates\n     */\n    update() {\n        var _a, _b;\n        super.update();\n        this.body = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        this.collisionType = (_b = this.body.collisionType) !== null && _b !== void 0 ? _b : CollisionType.PreventCollision;\n        this.hasZeroBounds = this.collider.localBounds.hasZeroDimensions();\n    }\n}\n/**\n * This collision processor uses a sparsely populated grid of uniform cells to bucket potential\n * colliders together for the purpose of detecting collision pairs and collisions.\n */\nclass SparseHashGridCollisionProcessor {\n    constructor(options) {\n        this._pairs = new Set();\n        this._nonPairs = new Set();\n        this._pairPool = new Pool(() => new Pair({ id: createId('collider', 0) }, { id: createId('collider', 0) }), (instance) => {\n            instance.colliderA = null;\n            instance.colliderB = null;\n            return instance;\n        }, 200);\n        this.gridSize = options.size;\n        this.hashGrid = new SparseHashGrid({\n            size: this.gridSize,\n            proxyFactory: (collider, size) => new HashColliderProxy(collider, size)\n        });\n        this._pairPool.disableWarnings = true;\n        // TODO dynamic grid size potentially larger than the largest collider\n        // TODO Re-hash the objects if the median proves to be different\n    }\n    getColliders() {\n        return Array.from(this.hashGrid.objectToProxy.keys());\n    }\n    query(boundsOrPoint) {\n        // FIXME workaround TS: https://github.com/microsoft/TypeScript/issues/14107\n        return this.hashGrid.query(boundsOrPoint);\n    }\n    rayCast(ray, options) {\n        var _a, _b, _c;\n        // DDA raycast algo\n        const results = [];\n        const maxDistance = (_a = options === null || options === void 0 ? void 0 : options.maxDistance) !== null && _a !== void 0 ? _a : Infinity;\n        const collisionGroup = options === null || options === void 0 ? void 0 : options.collisionGroup;\n        const collisionMask = !collisionGroup ? (_b = options === null || options === void 0 ? void 0 : options.collisionMask) !== null && _b !== void 0 ? _b : CollisionGroup.All.category : collisionGroup.category;\n        const searchAllColliders = (_c = options === null || options === void 0 ? void 0 : options.searchAllColliders) !== null && _c !== void 0 ? _c : false;\n        const unitRay = ray.dir.normalize();\n        const dydx = unitRay.y / unitRay.x;\n        const dxdy = unitRay.x / unitRay.y;\n        const unitStepX = Math.sqrt(1 + dydx * dydx) * this.gridSize;\n        const unitStepY = Math.sqrt(1 + dxdy * dxdy) * this.gridSize;\n        const startXCoord = ray.pos.x / this.gridSize;\n        const startYCoord = ray.pos.y / this.gridSize;\n        const stepDir = vec(1, 1);\n        let currentXCoord = ~~startXCoord;\n        let currentYCoord = ~~startYCoord;\n        let currentRayLengthX = 0;\n        let currentRayLengthY = 0;\n        if (unitRay.x < 0) {\n            stepDir.x = -1;\n            currentRayLengthX = (startXCoord - currentXCoord) * unitStepX;\n        }\n        else {\n            stepDir.x = 1;\n            currentRayLengthX = (currentXCoord + 1 - startXCoord) * unitStepX;\n        }\n        if (unitRay.y < 0) {\n            stepDir.y = -1;\n            currentRayLengthY = (startYCoord - currentYCoord) * unitStepY;\n        }\n        else {\n            stepDir.y = 1;\n            currentRayLengthY = (currentYCoord + 1 - startYCoord) * unitStepY;\n        }\n        const collidersVisited = new Set();\n        let done = false;\n        let maxIterations = 9999;\n        while (!done && maxIterations > 0) {\n            maxIterations--; // safety exit\n            // exit if exhausted max hash grid coordinate, bounds of the sparse grid\n            if (!this.hashGrid.bounds.contains(vec(currentXCoord * this.gridSize, currentYCoord * this.gridSize))) {\n                break;\n            }\n            // Test colliders at cell\n            const key = HashGridCell.calculateHashKey(currentXCoord, currentYCoord);\n            const cell = this.hashGrid.sparseHashGrid.get(key);\n            if (cell) {\n                const cellHits = [];\n                for (let colliderIndex = 0; colliderIndex < cell.proxies.length; colliderIndex++) {\n                    const collider = cell.proxies[colliderIndex];\n                    if (!collidersVisited.has(collider.collider.id.value)) {\n                        collidersVisited.add(collider.collider.id.value);\n                        if ((options === null || options === void 0 ? void 0 : options.ignoreCollisionGroupAll) && collider.body.group === CollisionGroup.All) {\n                            continue;\n                        }\n                        const canCollide = (collisionMask & collider.body.group.category) !== 0;\n                        // Early exit if not the right group\n                        if (collider.body.group && !canCollide) {\n                            continue;\n                        }\n                        const hit = collider.collider.rayCast(ray, maxDistance);\n                        // Collect up all the colliders that hit inside a cell\n                        // they can be in any order so we need to sort them next\n                        if (hit) {\n                            cellHits.push(hit);\n                        }\n                    }\n                }\n                cellHits.sort((hit1, hit2) => hit1.distance - hit2.distance);\n                for (let i = 0; i < cellHits.length; i++) {\n                    const hit = cellHits[i];\n                    if (options === null || options === void 0 ? void 0 : options.filter) {\n                        if (options.filter(hit)) {\n                            results.push(hit);\n                            if (!searchAllColliders) {\n                                done = true;\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        results.push(hit);\n                        if (!searchAllColliders) {\n                            done = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (currentRayLengthX < currentRayLengthY) {\n                currentXCoord += stepDir.x;\n                currentRayLengthX += unitStepX;\n            }\n            else {\n                currentYCoord += stepDir.y;\n                currentRayLengthY += unitStepY;\n            }\n        }\n        // Sort by distance\n        results.sort((hit1, hit2) => hit1.distance - hit2.distance);\n        if (!searchAllColliders && results.length) {\n            return [results[0]];\n        }\n        return results;\n    }\n    /**\n     * Adds the collider to the internal data structure for collision tracking\n     * @param target\n     */\n    track(target) {\n        let colliders = [target];\n        if (target instanceof CompositeCollider) {\n            const compColliders = target.getColliders();\n            for (const c of compColliders) {\n                c.owner = target.owner;\n            }\n            colliders = compColliders;\n        }\n        for (const target of colliders) {\n            this.hashGrid.track(target);\n        }\n    }\n    /**\n     * Removes a collider from the internal data structure for tracking collisions\n     * @param target\n     */\n    untrack(target) {\n        let colliders = [target];\n        if (target instanceof CompositeCollider) {\n            colliders = target.getColliders();\n        }\n        for (const target of colliders) {\n            this.hashGrid.untrack(target);\n        }\n    }\n    _canCollide(colliderA, colliderB) {\n        // Prevent self collision\n        if (colliderA.collider.id === colliderB.collider.id) {\n            return false;\n        }\n        // Colliders with the same owner do not collide (composite colliders)\n        if (colliderA.owner && colliderB.owner && colliderA.owner.id === colliderB.owner.id) {\n            return false;\n        }\n        // if the pair has a member with zero dimension don't collide\n        if (colliderA.hasZeroBounds || colliderB.hasZeroBounds) {\n            return false;\n        }\n        // If both are in the same collision group short circuit\n        if (!colliderA.body.group.canCollide(colliderB.body.group)) {\n            return false;\n        }\n        // if both are fixed short circuit\n        if (colliderA.collisionType === CollisionType.Fixed && colliderB.collisionType === CollisionType.Fixed) {\n            return false;\n        }\n        // if the either is prevent collision short circuit\n        if (colliderA.collisionType === CollisionType.PreventCollision || colliderB.collisionType === CollisionType.PreventCollision) {\n            return false;\n        }\n        // if either is dead short circuit\n        if (!colliderA.owner.isActive || !colliderB.owner.isActive) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Runs the broadphase sweep over tracked colliders and returns possible collision pairs\n     * @param targets\n     * @param elapsed\n     */\n    broadphase(targets, elapsed) {\n        const pairs = [];\n        this._pairs.clear();\n        this._nonPairs.clear();\n        let proxyId = 0;\n        for (const proxy of this.hashGrid.objectToProxy.values()) {\n            proxy.id = proxyId++; // track proxies we've already processed\n            if (!proxy.owner.isActive || proxy.collisionType === CollisionType.PreventCollision) {\n                continue;\n            }\n            // for every cell proxy collider is member of\n            for (let cellIndex = 0; cellIndex < proxy.cells.length; cellIndex++) {\n                const cell = proxy.cells[cellIndex];\n                // TODO Can we skip any cells or make this iteration faster?\n                // maybe a linked list here\n                for (let otherIndex = 0; otherIndex < cell.proxies.length; otherIndex++) {\n                    const other = cell.proxies[otherIndex];\n                    if (other.id === proxy.id) {\n                        // skip duplicates\n                        continue;\n                    }\n                    const id = Pair.calculatePairHash(proxy.collider.id, other.collider.id);\n                    if (this._nonPairs.has(id)) {\n                        continue; // Is there a way we can re-use the non-pair cache\n                    }\n                    if (!this._pairs.has(id) && this._canCollide(proxy, other) && proxy.object.bounds.overlaps(other.object.bounds)) {\n                        const pair = this._pairPool.get();\n                        pair.colliderA = proxy.collider;\n                        pair.colliderB = other.collider;\n                        pair.id = id;\n                        this._pairs.add(id);\n                        pairs.push(pair);\n                    }\n                    else {\n                        this._nonPairs.add(id);\n                    }\n                }\n            }\n        }\n        return pairs;\n    }\n    /**\n     * Runs a fine grain pass on collision pairs and does geometry intersection tests producing any contacts\n     * @param pairs\n     * @param stats\n     */\n    narrowphase(pairs, stats) {\n        const contacts = [];\n        for (let i = 0; i < pairs.length; i++) {\n            const newContacts = pairs[i].collide();\n            for (let j = 0; j < newContacts.length; j++) {\n                const c = newContacts[j];\n                contacts.push(c);\n                if (stats) {\n                    stats.physics.contacts.set(c.id, c);\n                }\n            }\n        }\n        this._pairPool.done();\n        if (stats) {\n            stats.physics.collisions += contacts.length;\n        }\n        return contacts; // TODO maybe we can re-use contacts as likely pairs next frame\n    }\n    /**\n     * Perform data structure maintenance, returns number of colliders updated\n     */\n    update(targets, elapsed) {\n        return this.hashGrid.update(targets);\n    }\n    /**\n     * Draws the internal data structure\n     * @param ex\n     * @param elapsed\n     */\n    debug(ex, elapsed) {\n        this.hashGrid.debug(ex, elapsed);\n    }\n}\n\n;// ./Collision/PhysicsWorld.ts\n\n\n\n\n\nclass PhysicsWorld {\n    get config() {\n        return watchDeep(this._config, (change) => {\n            this.$configUpdate.notifyAll(change);\n        });\n    }\n    set config(newConfig) {\n        this._config = newConfig;\n        this.$configUpdate.notifyAll(newConfig);\n    }\n    /**\n     * Spatial data structure for locating potential collision pairs and ray casts\n     */\n    get collisionProcessor() {\n        if (this._configDirty) {\n            this._configDirty = false;\n            // preserve tracked colliders if config updates\n            const colliders = this._collisionProcessor.getColliders();\n            if (this._config.spatialPartition === SpatialPartitionStrategy.SparseHashGrid) {\n                this._collisionProcessor = new SparseHashGridCollisionProcessor(this._config.sparseHashGrid);\n            }\n            else {\n                this._collisionProcessor = new DynamicTreeCollisionProcessor(this._config);\n            }\n            for (const collider of colliders) {\n                this._collisionProcessor.track(collider);\n            }\n        }\n        return this._collisionProcessor;\n    }\n    constructor(config) {\n        this.$configUpdate = new Observable();\n        this._configDirty = false;\n        this.config = config;\n        this.$configUpdate.subscribe((config) => {\n            this._configDirty = true;\n            BodyComponent.updateDefaultPhysicsConfig(config.bodies);\n        });\n        if (this._config.spatialPartition === SpatialPartitionStrategy.SparseHashGrid) {\n            this._collisionProcessor = new SparseHashGridCollisionProcessor(this._config.sparseHashGrid);\n        }\n        else {\n            this._collisionProcessor = new DynamicTreeCollisionProcessor(this._config);\n        }\n    }\n    /**\n     * Raycast into the scene's physics world\n     * @param ray\n     * @param options\n     */\n    rayCast(ray, options) {\n        return this.collisionProcessor.rayCast(ray, options);\n    }\n    query(pointOrBounds) {\n        // FIXME workaround TS: https://github.com/microsoft/TypeScript/issues/14107\n        return this._collisionProcessor.query(pointOrBounds);\n    }\n}\n\n;// ./Input/Gamepad.ts\n\n\nconst GamepadEvents = {\n    GamepadConnect: 'connect',\n    GamepadDisconnect: 'disconnect',\n    GamepadButton: 'button',\n    GamepadAxis: 'axis'\n};\n/**\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\n * to provide controller support for your games.\n */\nclass Gamepads {\n    constructor() {\n        this.events = new EventEmitter();\n        /**\n         * Whether or not to poll for Gamepad input (default: `false`)\n         */\n        this.enabled = false;\n        /**\n         * Whether or not Gamepad API is supported\n         */\n        this.supported = !!navigator.getGamepads;\n        this._gamePadTimeStamps = [0, 0, 0, 0];\n        this._oldPads = [];\n        this._pads = [];\n        this._initSuccess = false;\n        this._navigator = navigator;\n        this._minimumConfiguration = null;\n        this._enabled = true;\n    }\n    init() {\n        if (!this.supported) {\n            return;\n        }\n        if (this._initSuccess) {\n            return;\n        }\n        // In Chrome, this will return 4 undefined items until a button is pressed\n        // In FF, this will not return any items until a button is pressed\n        this._oldPads = this._clonePads(this._navigator.getGamepads());\n        if (this._oldPads.length && this._oldPads[0]) {\n            this._initSuccess = true;\n        }\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n    }\n    /**\n     * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\n     * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\n     * all other controllers with more axis or buttons are valid as well. If no minimum\n     * configuration is set all pads are valid.\n     */\n    setMinimumGamepadConfiguration(config) {\n        this._enableAndUpdate(); // if config is used, implicitly enable\n        this._minimumConfiguration = config;\n    }\n    /**\n     * When implicitly enabled, set the enabled flag and run an update so information is updated\n     */\n    _enableAndUpdate() {\n        if (!this.enabled) {\n            this.enabled = true;\n            this.update();\n        }\n    }\n    /**\n     * Checks a navigator gamepad against the minimum configuration if present.\n     */\n    _isGamepadValid(pad) {\n        if (!this._minimumConfiguration) {\n            return true;\n        }\n        if (!pad) {\n            return false;\n        }\n        const axesLength = pad.axes.filter((value) => {\n            return typeof value !== undefined;\n        }).length;\n        const buttonLength = pad.buttons.filter((value) => {\n            return typeof value !== undefined;\n        }).length;\n        return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        this._enableAndUpdate(); // implicitly enable\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        this._enableAndUpdate(); // implicitly enable\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this._enableAndUpdate(); // implicitly enable\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Updates Gamepad state and publishes Gamepad events\n     */\n    update() {\n        var _a, _b;\n        if (!this.enabled || !this.supported) {\n            return;\n        }\n        if (!this._enabled) {\n            return;\n        }\n        this.init();\n        const gamepads = this._navigator.getGamepads();\n        for (let i = 0; i < gamepads.length; i++) {\n            if (!gamepads[i]) {\n                const gamepad = this.at(i);\n                // If was connected, but now isn't emit the disconnect event\n                if (gamepad.connected) {\n                    this.events.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\n                    gamepad.events.unpipe(this.events);\n                }\n                // Reset connection status\n                gamepad.connected = false;\n                continue;\n            }\n            else {\n                const gamepad = this.at(i);\n                if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\n                    gamepad.events.pipe(this.events);\n                    this.events.emit('connect', new GamepadConnectEvent(i, this.at(i)));\n                }\n                // Set connection status\n                this.at(i).connected = true;\n            }\n            this.at(i).update();\n            // Only supported in Chrome\n            if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\n                continue;\n            }\n            this._gamePadTimeStamps[i] = gamepads[i].timestamp;\n            // Add reference to navigator gamepad\n            this.at(i).navigatorGamepad = gamepads[i];\n            // Buttons\n            const gamepad = gamepads[i];\n            // gamepads are a list that might be null\n            if (gamepad) {\n                for (let buttonIndex = 0; buttonIndex < gamepad.buttons.length; buttonIndex++) {\n                    const button = gamepad.buttons[buttonIndex];\n                    const value = button === null || button === void 0 ? void 0 : button.value;\n                    if (value !== ((_a = this._oldPads[i]) === null || _a === void 0 ? void 0 : _a.getButton(buttonIndex))) {\n                        if (button === null || button === void 0 ? void 0 : button.pressed) {\n                            this.at(i).updateButton(buttonIndex, value);\n                            // Fallback to unknown if not mapped\n                            // prettier-ignore\n                            this.at(i).events.emit('button', new GamepadButtonEvent(buttonIndex in Buttons ? buttonIndex : Buttons.Unknown, buttonIndex, value, this.at(i)));\n                        }\n                        else {\n                            this.at(i).updateButton(buttonIndex, 0);\n                        }\n                    }\n                }\n                for (let axesIndex = 0; axesIndex < gamepad.axes.length; axesIndex++) {\n                    const axis = gamepad.axes[axesIndex];\n                    if (axis !== ((_b = this._oldPads[i]) === null || _b === void 0 ? void 0 : _b.getAxes(axesIndex))) {\n                        this.at(i).updateAxes(axesIndex, axis);\n                        this.at(i).events.emit('axis', new GamepadAxisEvent(axesIndex, axis, this.at(i)));\n                    }\n                }\n            }\n            this._oldPads[i] = this._clonePad(gamepads[i]);\n        }\n    }\n    /**\n     * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\n     */\n    at(index) {\n        this._enableAndUpdate(); // implicitly enable gamepads when at() is called\n        if (index >= this._pads.length) {\n            // Ensure there is a pad to retrieve\n            for (let i = this._pads.length - 1, max = index; i < max; i++) {\n                this._pads.push(new Gamepad());\n                this._oldPads.push(new Gamepad());\n            }\n        }\n        return this._pads[index];\n    }\n    /**\n     * Returns a list of all valid gamepads that meet the minimum configuration requirement.\n     */\n    getValidGamepads() {\n        this._enableAndUpdate();\n        const result = [];\n        for (let i = 0; i < this._pads.length; i++) {\n            if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\n                result.push(this.at(i));\n            }\n        }\n        return result;\n    }\n    /**\n     * Gets the number of connected gamepads\n     */\n    count() {\n        return this._pads.filter((p) => p.connected).length;\n    }\n    _clonePads(pads) {\n        const arr = [];\n        for (let i = 0, len = pads.length; i < len; i++) {\n            arr.push(this._clonePad(pads[i]));\n        }\n        return arr;\n    }\n    /**\n     * Fastest way to clone a known object is to do it yourself\n     */\n    _clonePad(pad) {\n        let i, len;\n        const clonedPad = new Gamepad();\n        if (!pad) {\n            return clonedPad;\n        }\n        for (i = 0, len = pad.buttons.length; i < len; i++) {\n            if (pad.buttons[i]) {\n                clonedPad.updateButton(i, pad.buttons[i].value);\n            }\n        }\n        for (i = 0, len = pad.axes.length; i < len; i++) {\n            clonedPad.updateAxes(i, pad.axes[i]);\n        }\n        return clonedPad;\n    }\n}\n/**\n * The minimum value an axis has to move before considering it a change\n */\nGamepads.MinAxisMoveThreshold = 0.05;\n/**\n * Gamepad holds state information for a connected controller. See {@apilink Gamepads}\n * for more information on handling controller input.\n */\nclass Gamepad {\n    constructor() {\n        this.events = new EventEmitter();\n        this.connected = false;\n        this._axes = new Array(4);\n        this._buttons = new Array(16);\n        this._buttonsUp = new Array(16);\n        this._buttonsDown = new Array(16);\n        for (let i = 0; i < this._buttons.length; i++) {\n            this._buttons[i] = 0;\n        }\n        for (let i = 0; i < this._axes.length; i++) {\n            this._axes[i] = 0;\n        }\n    }\n    update() {\n        // Reset buttonsDown and buttonsUp after update is complete\n        this._buttonsDown = new Array(16);\n        this._buttonsUp = new Array(16);\n    }\n    /**\n     * Whether or not the given button is pressed\n     * @deprecated will be removed in v0.28.0. Use isButtonHeld instead\n     * @param button     The button to query\n     * @param threshold  The threshold over which the button is considered to be pressed\n     */\n    isButtonPressed(button, threshold = 1) {\n        return this._buttons[button] >= threshold;\n    }\n    /**\n     * Tests if a certain button is held down. This is persisted between frames.\n     * @param button     The button to query\n     * @param threshold  The threshold over which the button is considered to be pressed\n     */\n    isButtonHeld(button, threshold = 1) {\n        return this._buttons[button] >= threshold;\n    }\n    /**\n     * Tests if a certain button was just pressed this frame. This is cleared at the end of the update frame.\n     * @param button Test whether a button was just pressed\n     * @param threshold  The threshold over which the button is considered to be pressed\n     */\n    wasButtonPressed(button, threshold = 1) {\n        return this._buttonsDown[button] >= threshold;\n    }\n    /**\n     * Tests if a certain button was just released this frame. This is cleared at the end of the update frame.\n     * @param button  Test whether a button was just released\n     */\n    wasButtonReleased(button) {\n        return Boolean(this._buttonsUp[button]);\n    }\n    /**\n     * Gets the given button value between 0 and 1\n     */\n    getButton(button) {\n        return this._buttons[button];\n    }\n    /**\n     * Gets the given axis value between -1 and 1. Values below\n     * {@apilink MinAxisMoveThreshold} are considered 0.\n     */\n    getAxes(axes) {\n        const value = this._axes[axes];\n        if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\n            return 0;\n        }\n        else {\n            return value;\n        }\n    }\n    updateButton(buttonIndex, value) {\n        // button was just released\n        if (value === 0 && this._buttons[buttonIndex]) {\n            this._buttonsUp[buttonIndex] = 1;\n            // button was just pressed\n        }\n        else {\n            this._buttonsDown[buttonIndex] = value;\n        }\n        this._buttons[buttonIndex] = value;\n    }\n    updateAxes(axesIndex, value) {\n        this._axes[axesIndex] = value;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n}\n/**\n * Gamepad Buttons enumeration\n */\nvar Buttons;\n(function (Buttons) {\n    /**\n     * Any button that isn't explicity known by excalibur\n     */\n    Buttons[Buttons[\"Unknown\"] = -1] = \"Unknown\";\n    /**\n     * Face 1 button (e.g. A)\n     */\n    Buttons[Buttons[\"Face1\"] = 0] = \"Face1\";\n    /**\n     * Face 2 button (e.g. B)\n     */\n    Buttons[Buttons[\"Face2\"] = 1] = \"Face2\";\n    /**\n     * Face 3 button (e.g. X)\n     */\n    Buttons[Buttons[\"Face3\"] = 2] = \"Face3\";\n    /**\n     * Face 4 button (e.g. Y)\n     */\n    Buttons[Buttons[\"Face4\"] = 3] = \"Face4\";\n    /**\n     * Left bumper button\n     */\n    Buttons[Buttons[\"LeftBumper\"] = 4] = \"LeftBumper\";\n    /**\n     * Right bumper button\n     */\n    Buttons[Buttons[\"RightBumper\"] = 5] = \"RightBumper\";\n    /**\n     * Left trigger button\n     */\n    Buttons[Buttons[\"LeftTrigger\"] = 6] = \"LeftTrigger\";\n    /**\n     * Right trigger button\n     */\n    Buttons[Buttons[\"RightTrigger\"] = 7] = \"RightTrigger\";\n    /**\n     * Select button\n     */\n    Buttons[Buttons[\"Select\"] = 8] = \"Select\";\n    /**\n     * Start button\n     */\n    Buttons[Buttons[\"Start\"] = 9] = \"Start\";\n    /**\n     * Left analog stick press (e.g. L3)\n     */\n    Buttons[Buttons[\"LeftStick\"] = 10] = \"LeftStick\";\n    /**\n     * Right analog stick press (e.g. R3)\n     */\n    Buttons[Buttons[\"RightStick\"] = 11] = \"RightStick\";\n    /**\n     * D-pad up\n     */\n    Buttons[Buttons[\"DpadUp\"] = 12] = \"DpadUp\";\n    /**\n     * D-pad down\n     */\n    Buttons[Buttons[\"DpadDown\"] = 13] = \"DpadDown\";\n    /**\n     * D-pad left\n     */\n    Buttons[Buttons[\"DpadLeft\"] = 14] = \"DpadLeft\";\n    /**\n     * D-pad right\n     */\n    Buttons[Buttons[\"DpadRight\"] = 15] = \"DpadRight\";\n    /**\n     * Center button (e.g. the Nintendo Home Button)\n     */\n    Buttons[Buttons[\"CenterButton\"] = 16] = \"CenterButton\";\n    /**\n     * Misc button 1 (e.g. Xbox Series X share button, PS5 microphone button, Nintendo Switch Pro capture button, Amazon Luna microphone button)\n     * defacto standard not listed on the w3c spec for a standard gamepad https://w3c.github.io/gamepad/#dfn-standard-gamepad\n     */\n    Buttons[Buttons[\"MiscButton1\"] = 17] = \"MiscButton1\";\n})(Buttons || (Buttons = {}));\n/**\n * Gamepad Axes enumeration\n */\nvar Axes;\n(function (Axes) {\n    /**\n     * Left analogue stick X direction\n     */\n    Axes[Axes[\"LeftStickX\"] = 0] = \"LeftStickX\";\n    /**\n     * Left analogue stick Y direction\n     */\n    Axes[Axes[\"LeftStickY\"] = 1] = \"LeftStickY\";\n    /**\n     * Right analogue stick X direction\n     */\n    Axes[Axes[\"RightStickX\"] = 2] = \"RightStickX\";\n    /**\n     * Right analogue stick Y direction\n     */\n    Axes[Axes[\"RightStickY\"] = 3] = \"RightStickY\";\n})(Axes || (Axes = {}));\n\n;// ./Input/InputMapper.ts\n/**\n * This allows you to map multiple inputs to specific commands! This is especially useful when\n * you need to allow multiple input sources to control a specific action.\n */\nclass InputMapper {\n    constructor(inputs) {\n        this.inputs = inputs;\n        this._handlers = new Map();\n    }\n    /**\n     * Executes the input map, called internally by Excalibur\n     */\n    execute() {\n        for (const [input, command] of this._handlers.entries()) {\n            const results = input(this.inputs);\n            if (results) {\n                command(results);\n            }\n        }\n    }\n    /**\n     * This allows you to map multiple inputs to specific commands! This is useful\n     *\n     * The inputHandler should return a truthy value if you wish the commandHandler to fire.\n     *\n     * Example:\n     * ```typescript\n     * const moveRight = (amount: number) => { actor.vel.x = 100 * amount }\n     * const moveLeft = (amount: number) => { actor.vel.x = -100 * amount }\n     * const moveUp = (amount: number) => { actor.vel.y = -100 * amount }\n     * const moveDown = (amount: number) => { actor.vel.y = 100 * amount }\n     *\n     * engine.inputMapper.on(({keyboard}) => keyboard.isHeld(ex.Keys.ArrowRight) ? 1 : 0, moveRight);\n     * engine.inputMapper.on(({gamepads}) => gamepads.at(0).isButtonPressed(ex.Buttons.DpadRight) ? 1 : 0, moveRight);\n     * engine.inputMapper.on(({gamepads}) => gamepads.at(0).getAxes(ex.Axes.LeftStickX) > 0 ?\n     *  gamepads.at(0).getAxes(ex.Axes.LeftStickX) : 0, moveRight);\n     * ```\n     * @param inputHandler\n     * @param commandHandler\n     */\n    on(inputHandler, commandHandler) {\n        this._handlers.set(inputHandler, commandHandler);\n    }\n}\n\n;// ./Util/IFrame.ts\n/**\n * Checks if excalibur is in a x-origin iframe\n */\nfunction isCrossOriginIframe() {\n    try {\n        // Try and listen to events on top window frame if within an iframe.\n        //\n        // See https://github.com/excaliburjs/Excalibur/issues/1294\n        //\n        // Attempt to add an event listener, which triggers a DOMException on\n        // cross-origin iframes\n        const noop = () => {\n            return;\n        };\n        window.top.addEventListener('blur', noop);\n        window.top.removeEventListener('blur', noop);\n    }\n    catch (_a) {\n        return true;\n    }\n    return false;\n}\n\n;// ./Input/Keyboard.ts\n\n\n\n\n/**\n * Enum representing physical input key codes\n *\n * Spec: https://w3c.github.io/uievents-code/#key-alphanumeric-section\n */\nvar Keys;\n(function (Keys) {\n    // Writing System Keys https://w3c.github.io/uievents-code/#key-alphanumeric-writing-system\n    Keys[\"Backquote\"] = \"Backquote\";\n    Keys[\"Backslash\"] = \"Backslash\";\n    Keys[\"BracketLeft\"] = \"BracketLeft\";\n    Keys[\"BracketRight\"] = \"BracketRight\";\n    Keys[\"Comma\"] = \"Comma\";\n    // NUMBERS\n    Keys[\"Key0\"] = \"Digit0\";\n    Keys[\"Key1\"] = \"Digit1\";\n    Keys[\"Key2\"] = \"Digit2\";\n    Keys[\"Key3\"] = \"Digit3\";\n    Keys[\"Key4\"] = \"Digit4\";\n    Keys[\"Key5\"] = \"Digit5\";\n    Keys[\"Key6\"] = \"Digit6\";\n    Keys[\"Key7\"] = \"Digit7\";\n    Keys[\"Key8\"] = \"Digit8\";\n    Keys[\"Key9\"] = \"Digit9\";\n    Keys[\"Digit0\"] = \"Digit0\";\n    Keys[\"Digit1\"] = \"Digit1\";\n    Keys[\"Digit2\"] = \"Digit2\";\n    Keys[\"Digit3\"] = \"Digit3\";\n    Keys[\"Digit4\"] = \"Digit4\";\n    Keys[\"Digit5\"] = \"Digit5\";\n    Keys[\"Digit6\"] = \"Digit6\";\n    Keys[\"Digit7\"] = \"Digit7\";\n    Keys[\"Digit8\"] = \"Digit8\";\n    Keys[\"Digit9\"] = \"Digit9\";\n    Keys[\"Equal\"] = \"Equal\";\n    Keys[\"IntlBackslash\"] = \"IntlBackslash\";\n    Keys[\"IntlRo\"] = \"IntlRo\";\n    Keys[\"IntlYen\"] = \"IntlYen\";\n    // LETTERS\n    Keys[\"A\"] = \"KeyA\";\n    Keys[\"B\"] = \"KeyB\";\n    Keys[\"C\"] = \"KeyC\";\n    Keys[\"D\"] = \"KeyD\";\n    Keys[\"E\"] = \"KeyE\";\n    Keys[\"F\"] = \"KeyF\";\n    Keys[\"G\"] = \"KeyG\";\n    Keys[\"H\"] = \"KeyH\";\n    Keys[\"I\"] = \"KeyI\";\n    Keys[\"J\"] = \"KeyJ\";\n    Keys[\"K\"] = \"KeyK\";\n    Keys[\"L\"] = \"KeyL\";\n    Keys[\"M\"] = \"KeyM\";\n    Keys[\"N\"] = \"KeyN\";\n    Keys[\"O\"] = \"KeyO\";\n    Keys[\"P\"] = \"KeyP\";\n    Keys[\"Q\"] = \"KeyQ\";\n    Keys[\"R\"] = \"KeyR\";\n    Keys[\"S\"] = \"KeyS\";\n    Keys[\"T\"] = \"KeyT\";\n    Keys[\"U\"] = \"KeyU\";\n    Keys[\"V\"] = \"KeyV\";\n    Keys[\"W\"] = \"KeyW\";\n    Keys[\"X\"] = \"KeyX\";\n    Keys[\"Y\"] = \"KeyY\";\n    Keys[\"Z\"] = \"KeyZ\";\n    Keys[\"KeyA\"] = \"KeyA\";\n    Keys[\"KeyB\"] = \"KeyB\";\n    Keys[\"KeyC\"] = \"KeyC\";\n    Keys[\"KeyD\"] = \"KeyD\";\n    Keys[\"KeyE\"] = \"KeyE\";\n    Keys[\"KeyF\"] = \"KeyF\";\n    Keys[\"KeyG\"] = \"KeyG\";\n    Keys[\"KeyH\"] = \"KeyH\";\n    Keys[\"KeyI\"] = \"KeyI\";\n    Keys[\"KeyJ\"] = \"KeyJ\";\n    Keys[\"KeyK\"] = \"KeyK\";\n    Keys[\"KeyL\"] = \"KeyL\";\n    Keys[\"KeyM\"] = \"KeyM\";\n    Keys[\"KeyN\"] = \"KeyN\";\n    Keys[\"KeyO\"] = \"KeyO\";\n    Keys[\"KeyP\"] = \"KeyP\";\n    Keys[\"KeyQ\"] = \"KeyQ\";\n    Keys[\"KeyR\"] = \"KeyR\";\n    Keys[\"KeyS\"] = \"KeyS\";\n    Keys[\"KeyT\"] = \"KeyT\";\n    Keys[\"KeyU\"] = \"KeyU\";\n    Keys[\"KeyV\"] = \"KeyV\";\n    Keys[\"KeyW\"] = \"KeyW\";\n    Keys[\"KeyX\"] = \"KeyX\";\n    Keys[\"KeyY\"] = \"KeyY\";\n    Keys[\"KeyZ\"] = \"KeyZ\";\n    // SYMBOLS\n    Keys[\"Minus\"] = \"Minus\";\n    Keys[\"Period\"] = \"Period\";\n    Keys[\"Quote\"] = \"Quote\";\n    Keys[\"Semicolon\"] = \"Semicolon\";\n    Keys[\"Slash\"] = \"Slash\";\n    // Functional keys https://w3c.github.io/uievents-code/#key-alphanumeric-functional\n    Keys[\"AltLeft\"] = \"AltLeft\";\n    Keys[\"AltRight\"] = \"AltRight\";\n    Keys[\"Alt\"] = \"Alt\";\n    Keys[\"AltGraph\"] = \"AltGraph\";\n    Keys[\"Backspace\"] = \"Backspace\";\n    Keys[\"CapsLock\"] = \"CapsLock\";\n    Keys[\"ContextMenu\"] = \"ContextMenu\";\n    Keys[\"ControlLeft\"] = \"ControlLeft\";\n    Keys[\"ControlRight\"] = \"ControlRight\";\n    Keys[\"Enter\"] = \"Enter\";\n    Keys[\"MetaLeft\"] = \"MetaLeft\";\n    Keys[\"MetaRight\"] = \"MetaRight\";\n    Keys[\"ShiftLeft\"] = \"ShiftLeft\";\n    Keys[\"ShiftRight\"] = \"ShiftRight\";\n    Keys[\"Space\"] = \"Space\";\n    Keys[\"Tab\"] = \"Tab\";\n    Keys[\"Convert\"] = \"Convert\";\n    Keys[\"KanaMode\"] = \"KanaMode\";\n    Keys[\"NonConvert\"] = \"NonConvert\";\n    // Control Pad https://w3c.github.io/uievents-code/#key-controlpad-section\n    Keys[\"Delete\"] = \"Delete\";\n    Keys[\"End\"] = \"End\";\n    Keys[\"Help\"] = \"Help\";\n    Keys[\"Home\"] = \"Home\";\n    Keys[\"Insert\"] = \"Insert\";\n    Keys[\"PageDown\"] = \"PageDown\";\n    Keys[\"PageUp\"] = \"PageUp\";\n    // Arrow Pad https://w3c.github.io/uievents-code/#key-arrowpad-section\n    Keys[\"Up\"] = \"ArrowUp\";\n    Keys[\"Down\"] = \"ArrowDown\";\n    Keys[\"Left\"] = \"ArrowLeft\";\n    Keys[\"Right\"] = \"ArrowRight\";\n    Keys[\"ArrowUp\"] = \"ArrowUp\";\n    Keys[\"ArrowDown\"] = \"ArrowDown\";\n    Keys[\"ArrowLeft\"] = \"ArrowLeft\";\n    Keys[\"ArrowRight\"] = \"ArrowRight\";\n    // Numpad Section https://w3c.github.io/uievents-code/#key-numpad-section\n    Keys[\"NumLock\"] = \"NumLock\";\n    Keys[\"Numpad0\"] = \"Numpad0\";\n    Keys[\"Numpad1\"] = \"Numpad1\";\n    Keys[\"Numpad2\"] = \"Numpad2\";\n    Keys[\"Numpad3\"] = \"Numpad3\";\n    Keys[\"Numpad4\"] = \"Numpad4\";\n    Keys[\"Numpad5\"] = \"Numpad5\";\n    Keys[\"Numpad6\"] = \"Numpad6\";\n    Keys[\"Numpad7\"] = \"Numpad7\";\n    Keys[\"Numpad8\"] = \"Numpad8\";\n    Keys[\"Numpad9\"] = \"Numpad9\";\n    Keys[\"Num0\"] = \"Numpad0\";\n    Keys[\"Num1\"] = \"Numpad1\";\n    Keys[\"Num2\"] = \"Numpad2\";\n    Keys[\"Num3\"] = \"Numpad3\";\n    Keys[\"Num4\"] = \"Numpad4\";\n    Keys[\"Num5\"] = \"Numpad5\";\n    Keys[\"Num6\"] = \"Numpad6\";\n    Keys[\"Num7\"] = \"Numpad7\";\n    Keys[\"Num8\"] = \"Numpad8\";\n    Keys[\"Num9\"] = \"Numpad9\";\n    Keys[\"NumAdd\"] = \"NumpadAdd\";\n    Keys[\"NumpadAdd\"] = \"NumpadAdd\";\n    Keys[\"NumDecimal\"] = \"NumpadDecimal\";\n    Keys[\"NumpadDecimal\"] = \"NumpadDecimal\";\n    Keys[\"NumDivide\"] = \"NumpadDivide\";\n    Keys[\"NumpadDivide\"] = \"NumpadDivide\";\n    Keys[\"NumEnter\"] = \"NumpadEnter\";\n    Keys[\"NumpadEnter\"] = \"NumpadEnter\";\n    Keys[\"NumMultiply\"] = \"NumpadMultiply\";\n    Keys[\"NumpadMultiply\"] = \"NumpadMultiply\";\n    Keys[\"NumSubtract\"] = \"NumpadSubtract\";\n    Keys[\"NumpadSubtract\"] = \"NumpadSubtract\";\n    // NumComma = 'NumpadComma', // not x-browser\n    // NumpadComma = 'NumpadComma', // not x-browser\n    // Function section https://w3c.github.io/uievents-code/#key-function-section\n    Keys[\"Esc\"] = \"Escape\";\n    Keys[\"Escape\"] = \"Escape\";\n    Keys[\"F1\"] = \"F1\";\n    Keys[\"F2\"] = \"F2\";\n    Keys[\"F3\"] = \"F3\";\n    Keys[\"F4\"] = \"F4\";\n    Keys[\"F5\"] = \"F5\";\n    Keys[\"F6\"] = \"F6\";\n    Keys[\"F7\"] = \"F7\";\n    Keys[\"F8\"] = \"F8\";\n    Keys[\"F9\"] = \"F9\";\n    Keys[\"F10\"] = \"F10\";\n    Keys[\"F11\"] = \"F11\";\n    Keys[\"F12\"] = \"F12\";\n    Keys[\"F13\"] = \"F13\";\n    Keys[\"F14\"] = \"F14\";\n    Keys[\"F15\"] = \"F15\";\n    Keys[\"F16\"] = \"F16\";\n    Keys[\"F17\"] = \"F17\";\n    Keys[\"F18\"] = \"F18\";\n    Keys[\"F19\"] = \"F19\";\n    Keys[\"F20\"] = \"F20\";\n    Keys[\"PrintScreen\"] = \"PrintScreen\";\n    Keys[\"ScrollLock\"] = \"ScrollLock\";\n    Keys[\"Pause\"] = \"Pause\";\n    Keys[\"Unidentified\"] = \"Unidentified\";\n})(Keys || (Keys = {}));\n/**\n * Event thrown on a game object for a key event\n */\nclass KeyEvent extends GameEvent {\n    /**\n     * @param key  The key responsible for throwing the event\n     * @param value The key's typed value the browser detected\n     * @param originalEvent The original keyboard event that Excalibur handled\n     */\n    constructor(key, value, originalEvent) {\n        super();\n        this.key = key;\n        this.value = value;\n        this.originalEvent = originalEvent;\n    }\n}\nconst KeyEvents = {\n    Press: 'press',\n    Hold: 'hold',\n    Release: 'release'\n};\n/**\n * Provides keyboard support for Excalibur.\n */\nclass Keyboard {\n    constructor() {\n        this.events = new EventEmitter();\n        this._enabled = true;\n        /**\n         * Keys that are currently held down\n         */\n        this._keys = [];\n        /**\n         * Keys up in the current frame\n         */\n        this._keysUp = [];\n        /**\n         * Keys down in the current frame\n         */\n        this._keysDown = [];\n        this._releaseAllKeys = (ev) => {\n            for (const code of this._keys) {\n                const keyEvent = new KeyEvent(code, ev.key, ev);\n                this.events.emit('up', keyEvent);\n                this.events.emit('release', keyEvent);\n            }\n            this._keysUp = Array.from(new Set(this._keys.concat(this._keysUp)));\n            this._keys.length = 0;\n        };\n        this._handleKeyDown = (ev) => {\n            if (!this._enabled) {\n                return;\n            }\n            // handle macos meta key issue\n            // https://github.com/excaliburjs/Excalibur/issues/2608\n            if (!ev.metaKey && (this._keys.includes(Keys.MetaLeft) || this._keys.includes(Keys.MetaRight))) {\n                this._releaseAllKeys(ev);\n            }\n            const code = ev.code;\n            if (this._keys.indexOf(code) === -1) {\n                this._keys.push(code);\n                this._keysDown.push(code);\n                const keyEvent = new KeyEvent(code, ev.key, ev);\n                this.events.emit('down', keyEvent);\n                this.events.emit('press', keyEvent);\n            }\n        };\n        this._handleKeyUp = (ev) => {\n            if (!this._enabled) {\n                return;\n            }\n            const code = ev.code;\n            const key = this._keys.indexOf(code);\n            this._keys.splice(key, 1);\n            this._keysUp.push(code);\n            const keyEvent = new KeyEvent(code, ev.key, ev);\n            // alias the old api, we may want to deprecate this in the future\n            this.events.emit('up', keyEvent);\n            this.events.emit('release', keyEvent);\n            // handle macos meta key issue\n            // https://github.com/excaliburjs/Excalibur/issues/2608\n            if (ev.key === 'Meta') {\n                this._releaseAllKeys(ev);\n            }\n        };\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Initialize Keyboard event listeners\n     */\n    init(keyboardOptions) {\n        let { global } = keyboardOptions;\n        const { grabWindowFocus } = keyboardOptions;\n        if (!global) {\n            if (isCrossOriginIframe()) {\n                global = window;\n                // Workaround for iframes like for itch.io or codesandbox\n                // https://www.reddit.com/r/gamemaker/comments/kfs5cs/keyboard_inputs_no_longer_working_in_html5_game/\n                // https://forum.gamemaker.io/index.php?threads/solved-keyboard-issue-on-itch-io.87336/\n                if (grabWindowFocus) {\n                    window.focus();\n                }\n                Logger.getInstance().warn('Excalibur might be in a cross-origin iframe, in order to receive keyboard events it must be in focus');\n            }\n            else {\n                global = window.top;\n            }\n        }\n        global.addEventListener('blur', () => {\n            this._keys.length = 0; // empties array efficiently\n        });\n        // key up is on window because canvas cannot have focus\n        global.addEventListener('keyup', this._handleKeyUp);\n        // key down is on window because canvas cannot have focus\n        global.addEventListener('keydown', this._handleKeyDown);\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n    }\n    clear() {\n        this._keysDown.length = 0;\n        this._keysUp.length = 0;\n        this._keys.length = 0;\n    }\n    update() {\n        // Reset keysDown and keysUp after update is complete\n        this._keysDown.length = 0;\n        this._keysUp.length = 0;\n        // Emit synthetic \"hold\" event\n        for (let i = 0; i < this._keys.length; i++) {\n            this.events.emit('hold', new KeyEvent(this._keys[i]));\n        }\n    }\n    /**\n     * Gets list of keys being pressed down\n     */\n    getKeys() {\n        return this._keys;\n    }\n    /**\n     * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\n     * @param key Test whether a key was just pressed\n     */\n    wasPressed(key) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this._keysDown.indexOf(key) > -1;\n    }\n    /**\n     * Tests if a certain key is held down. This is persisted between frames.\n     * @param key  Test whether a key is held down\n     */\n    isHeld(key) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this._keys.indexOf(key) > -1;\n    }\n    /**\n     * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\n     * @param key  Test whether a key was just released\n     */\n    wasReleased(key) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this._keysUp.indexOf(key) > -1;\n    }\n    /**\n     * Trigger a manual key event\n     * @param type\n     * @param key\n     * @param character\n     */\n    triggerEvent(type, key, character) {\n        if (type === 'down') {\n            this._handleKeyDown(new KeyboardEvent('keydown', {\n                code: key,\n                key: character !== null && character !== void 0 ? character : null\n            }));\n        }\n        if (type === 'up') {\n            this._handleKeyUp(new KeyboardEvent('keyup', {\n                code: key,\n                key: character !== null && character !== void 0 ? character : null\n            }));\n        }\n    }\n}\n\n;// ./Math/global-coordinates.ts\n\nclass GlobalCoordinates {\n    static fromPagePosition(xOrPos, yOrEngine, engineOrUndefined) {\n        let pageX;\n        let pageY;\n        let pagePos;\n        let engine;\n        if (arguments.length === 3) {\n            pageX = xOrPos;\n            pageY = yOrEngine;\n            pagePos = new Vector(pageX, pageY);\n            engine = engineOrUndefined;\n        }\n        else {\n            pagePos = xOrPos;\n            pageX = pagePos.x;\n            pageY = pagePos.y;\n            engine = yOrEngine;\n        }\n        const screenPos = engine.screen.pageToScreenCoordinates(pagePos);\n        const worldPos = engine.screen.screenToWorldCoordinates(screenPos);\n        return new GlobalCoordinates(worldPos, pagePos, screenPos);\n    }\n    constructor(worldPos, pagePos, screenPos) {\n        this.worldPos = worldPos;\n        this.pagePos = pagePos;\n        this.screenPos = screenPos;\n    }\n}\n\n;// ./Input/PointerEvent.ts\nclass PointerEvent {\n    cancel() {\n        this.active = false;\n    }\n    get pagePos() {\n        return this.coordinates.pagePos;\n    }\n    get screenPos() {\n        return this.coordinates.screenPos;\n    }\n    get worldPos() {\n        return this.coordinates.worldPos;\n    }\n    constructor(type, pointerId, button, pointerType, coordinates, nativeEvent) {\n        this.type = type;\n        this.pointerId = pointerId;\n        this.button = button;\n        this.pointerType = pointerType;\n        this.coordinates = coordinates;\n        this.nativeEvent = nativeEvent;\n        this.active = true;\n    }\n}\n\n;// ./Input/WheelEvent.ts\nclass WheelEvent {\n    cancel() {\n        this.active = false;\n    }\n    constructor(x, y, pageX, pageY, screenX, screenY, index, deltaX, deltaY, deltaZ, deltaMode, ev) {\n        this.x = x;\n        this.y = y;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        this.screenX = screenX;\n        this.screenY = screenY;\n        this.index = index;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.deltaZ = deltaZ;\n        this.deltaMode = deltaMode;\n        this.ev = ev;\n        this.active = true;\n    }\n}\n\n;// ./Input/PointerAbstraction.ts\n\n\n\nclass PointerAbstraction {\n    constructor() {\n        this.events = new EventEmitter();\n        /**\n         * The last position on the document this pointer was at. Can be `null` if pointer was never active.\n         */\n        this.lastPagePos = Vector.Zero;\n        /**\n         * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\n         */\n        this.lastScreenPos = Vector.Zero;\n        /**\n         * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\n         */\n        this.lastWorldPos = Vector.Zero;\n        this._onPointerMove = (ev) => {\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n        };\n        this._onPointerDown = (ev) => {\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n        };\n        this.on('move', this._onPointerMove);\n        this.on('down', this._onPointerDown);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Called internally by excalibur to keep pointers up to date\n     * @internal\n     * @param engine\n     */\n    _updateWorldPosition(engine) {\n        const coord = GlobalCoordinates.fromPagePosition(this.lastPagePos, engine);\n        this.lastScreenPos = coord.screenPos;\n        this.lastWorldPos = coord.worldPos;\n    }\n}\n\n;// ./Input/WheelDeltaMode.ts\nvar WheelDeltaMode;\n(function (WheelDeltaMode) {\n    WheelDeltaMode[\"Pixel\"] = \"Pixel\";\n    WheelDeltaMode[\"Line\"] = \"Line\";\n    WheelDeltaMode[\"Page\"] = \"Page\";\n})(WheelDeltaMode || (WheelDeltaMode = {}));\n\n;// ./Input/NativePointerButton.ts\n/**\n * Native browser button enumeration\n */\nvar NativePointerButton;\n(function (NativePointerButton) {\n    NativePointerButton[NativePointerButton[\"NoButton\"] = -1] = \"NoButton\";\n    NativePointerButton[NativePointerButton[\"Left\"] = 0] = \"Left\";\n    NativePointerButton[NativePointerButton[\"Middle\"] = 1] = \"Middle\";\n    NativePointerButton[NativePointerButton[\"Right\"] = 2] = \"Right\";\n    NativePointerButton[NativePointerButton[\"Unknown\"] = 3] = \"Unknown\";\n})(NativePointerButton || (NativePointerButton = {}));\n\n;// ./Input/PointerButton.ts\n/**\n * The mouse button being pressed.\n */\nvar PointerButton;\n(function (PointerButton) {\n    PointerButton[\"Left\"] = \"Left\";\n    PointerButton[\"Middle\"] = \"Middle\";\n    PointerButton[\"Right\"] = \"Right\";\n    PointerButton[\"Unknown\"] = \"Unknown\";\n    PointerButton[\"NoButton\"] = \"NoButton\";\n})(PointerButton || (PointerButton = {}));\n\n;// ./Input/PointerType.ts\n/**\n * The type of pointer for a {@apilink PointerEvent}.\n */\nvar PointerType;\n(function (PointerType) {\n    PointerType[\"Touch\"] = \"Touch\";\n    PointerType[\"Mouse\"] = \"Mouse\";\n    PointerType[\"Pen\"] = \"Pen\";\n    PointerType[\"Unknown\"] = \"Unknown\";\n})(PointerType || (PointerType = {}));\n\n;// ./Input/PointerEventReceiver.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst PointerEvents = {\n    Move: 'move',\n    Down: 'down',\n    Up: 'up',\n    Wheel: 'wheel'\n};\n/**\n * Is this event a native touch event?\n */\nfunction isTouchEvent(value) {\n    // Guard for Safari <= 13.1\n    return globalThis.TouchEvent && value instanceof globalThis.TouchEvent;\n}\n/**\n * Is this event a native pointer event\n */\nfunction isPointerEvent(value) {\n    // Guard for Safari <= 13.1\n    return globalThis.PointerEvent && value instanceof globalThis.PointerEvent;\n}\n/**\n * The PointerEventProcessor is responsible for collecting all the events from the canvas and transforming them into GlobalCoordinates\n */\nclass PointerEventReceiver {\n    constructor(target, engine) {\n        this.target = target;\n        this.engine = engine;\n        this.events = new EventEmitter();\n        this.primary = new PointerAbstraction();\n        this._activeNativePointerIdsToNormalized = new Map();\n        this.lastFramePointerCoords = new Map();\n        this.currentFramePointerCoords = new Map();\n        this.currentFramePointerDown = new Map();\n        this.lastFramePointerDown = new Map();\n        this.currentFrameDown = [];\n        this.currentFrameUp = [];\n        this.currentFrameMove = [];\n        this.currentFrameCancel = [];\n        this.currentFrameWheel = [];\n        this._enabled = true;\n        this._pointers = [this.primary];\n        this._boundHandle = this._handle.bind(this);\n        this._boundWheel = this._handleWheel.bind(this);\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n    }\n    /**\n     * Creates a new PointerEventReceiver with a new target and engine while preserving existing pointer event\n     * handlers.\n     * @param target\n     * @param engine\n     */\n    recreate(target, engine) {\n        const eventReceiver = new PointerEventReceiver(target, engine);\n        eventReceiver.primary = this.primary;\n        eventReceiver._pointers = this._pointers;\n        return eventReceiver;\n    }\n    /**\n     * Locates a specific pointer by id, creates it if it doesn't exist\n     * @param index\n     */\n    at(index) {\n        if (index >= this._pointers.length) {\n            // Ensure there is a pointer to retrieve\n            for (let i = this._pointers.length - 1, max = index; i < max; i++) {\n                this._pointers.push(new PointerAbstraction());\n            }\n        }\n        return this._pointers[index];\n    }\n    /**\n     * The number of pointers currently being tracked by excalibur\n     */\n    count() {\n        return this._pointers.length;\n    }\n    /**\n     * Is the specified pointer id down this frame\n     * @param pointerId\n     */\n    isDown(pointerId) {\n        var _a;\n        if (!this._enabled) {\n            return false;\n        }\n        return (_a = this.currentFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\n    }\n    /**\n     * Was the specified pointer id down last frame\n     * @param pointerId\n     */\n    wasDown(pointerId) {\n        var _a;\n        if (!this._enabled) {\n            return false;\n        }\n        return (_a = this.lastFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\n    }\n    /**\n     * Whether the Pointer is currently dragging.\n     */\n    isDragging(pointerId) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this.isDown(pointerId);\n    }\n    /**\n     * Whether the Pointer just started dragging.\n     */\n    isDragStart(pointerId) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this.isDown(pointerId) && !this.wasDown(pointerId);\n    }\n    /**\n     * Whether the Pointer just ended dragging.\n     */\n    isDragEnd(pointerId) {\n        if (!this._enabled) {\n            return false;\n        }\n        return !this.isDown(pointerId) && this.wasDown(pointerId);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Called internally by excalibur\n     *\n     * Updates the current frame pointer info and emits raw pointer events\n     *\n     * This does not emit events to entities, see PointerSystem\n     * @internal\n     */\n    update() {\n        this.lastFramePointerDown = new Map(this.currentFramePointerDown);\n        this.lastFramePointerCoords = new Map(this.currentFramePointerCoords);\n        for (const event of this.currentFrameDown) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('down', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('down', event);\n            this.primary.emit('pointerdown', event);\n        }\n        for (const event of this.currentFrameUp) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('up', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('up', event);\n        }\n        for (const event of this.currentFrameMove) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('move', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('move', event);\n        }\n        for (const event of this.currentFrameCancel) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('cancel', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('cancel', event);\n        }\n        for (const event of this.currentFrameWheel) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('pointerwheel', event);\n            this.emit('wheel', event);\n            this.primary.emit('pointerwheel', event);\n            this.primary.emit('wheel', event);\n        }\n        if (this.engine.currentScene.camera.hasChanged()) {\n            for (const pointer of this._pointers) {\n                pointer._updateWorldPosition(this.engine);\n            }\n        }\n    }\n    /**\n     * Clears the current frame event and pointer data\n     */\n    clear() {\n        for (const event of this.currentFrameUp) {\n            this.currentFramePointerCoords.delete(event.pointerId);\n            const ids = this._activeNativePointerIdsToNormalized.entries();\n            for (const [native, normalized] of ids) {\n                if (normalized === event.pointerId) {\n                    this._activeNativePointerIdsToNormalized.delete(native);\n                }\n            }\n        }\n        this.currentFrameDown.length = 0;\n        this.currentFrameUp.length = 0;\n        this.currentFrameMove.length = 0;\n        this.currentFrameCancel.length = 0;\n        this.currentFrameWheel.length = 0;\n    }\n    /**\n     * Initializes the pointer event receiver so that it can start listening to native\n     * browser events.\n     */\n    init(options) {\n        var _a;\n        if (this.engine.isDisposed()) {\n            return;\n        }\n        // Disabling the touch action avoids browser/platform gestures from firing on the canvas\n        // It is important on mobile to have touch action 'none'\n        // https://stackoverflow.com/questions/48124372/pointermove-event-not-working-with-touch-why-not\n        if (this.target === this.engine.canvas) {\n            this.engine.canvas.style.touchAction = 'none';\n        }\n        else {\n            document.body.style.touchAction = 'none';\n        }\n        // Preferred pointer events\n        if (window.PointerEvent) {\n            this.target.addEventListener('pointerdown', this._boundHandle);\n            this.target.addEventListener('pointerup', this._boundHandle);\n            this.target.addEventListener('pointermove', this._boundHandle);\n            this.target.addEventListener('pointercancel', this._boundHandle);\n        }\n        else {\n            // Touch Events\n            this.target.addEventListener('touchstart', this._boundHandle);\n            this.target.addEventListener('touchend', this._boundHandle);\n            this.target.addEventListener('touchmove', this._boundHandle);\n            this.target.addEventListener('touchcancel', this._boundHandle);\n            // Mouse Events\n            this.target.addEventListener('mousedown', this._boundHandle);\n            this.target.addEventListener('mouseup', this._boundHandle);\n            this.target.addEventListener('mousemove', this._boundHandle);\n        }\n        // MDN MouseWheelEvent\n        const wheelOptions = {\n            passive: !(this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n                this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas)\n        };\n        if ('onwheel' in document.createElement('div')) {\n            // Modern Browsers\n            this.target.addEventListener('wheel', this._boundWheel, wheelOptions);\n        }\n        else if (document.onmousewheel !== undefined) {\n            // Webkit and IE\n            this.target.addEventListener('mousewheel', this._boundWheel, wheelOptions);\n        }\n        else {\n            // Remaining browser and older Firefox\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel, wheelOptions);\n        }\n        const grabWindowFocus = (_a = options === null || options === void 0 ? void 0 : options.grabWindowFocus) !== null && _a !== void 0 ? _a : true;\n        // Handle cross origin iframe\n        if (grabWindowFocus && isCrossOriginIframe()) {\n            const grabFocus = () => {\n                window.focus();\n            };\n            // Preferred pointer events\n            if (window.PointerEvent) {\n                this.target.addEventListener('pointerdown', grabFocus);\n            }\n            else {\n                // Touch Events\n                this.target.addEventListener('touchstart', grabFocus);\n                // Mouse Events\n                this.target.addEventListener('mousedown', grabFocus);\n            }\n        }\n    }\n    detach() {\n        // Preferred pointer events\n        if (window.PointerEvent) {\n            this.target.removeEventListener('pointerdown', this._boundHandle);\n            this.target.removeEventListener('pointerup', this._boundHandle);\n            this.target.removeEventListener('pointermove', this._boundHandle);\n            this.target.removeEventListener('pointercancel', this._boundHandle);\n        }\n        else {\n            // Touch Events\n            this.target.removeEventListener('touchstart', this._boundHandle);\n            this.target.removeEventListener('touchend', this._boundHandle);\n            this.target.removeEventListener('touchmove', this._boundHandle);\n            this.target.removeEventListener('touchcancel', this._boundHandle);\n            // Mouse Events\n            this.target.removeEventListener('mousedown', this._boundHandle);\n            this.target.removeEventListener('mouseup', this._boundHandle);\n            this.target.removeEventListener('mousemove', this._boundHandle);\n        }\n        if ('onwheel' in document.createElement('div')) {\n            // Modern Browsers\n            this.target.removeEventListener('wheel', this._boundWheel);\n        }\n        else if (document.onmousewheel !== undefined) {\n            // Webkit and IE\n            this.target.addEventListener('mousewheel', this._boundWheel);\n        }\n        else {\n            // Remaining browser and older Firefox\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel);\n        }\n    }\n    /**\n     * Take native pointer id and map it to index in active pointers\n     * @param nativePointerId\n     */\n    _normalizePointerId(nativePointerId) {\n        // Add to the the native pointer set id\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, -1);\n        // Native pointer ids in ascending order\n        const currentPointerIds = Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((a, b) => a - b);\n        // The index into sorted ids will be the new id, will always have an id\n        const id = currentPointerIds.findIndex((p) => p === nativePointerId);\n        // Save the mapping so we can reverse it later\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, id);\n        // ignore pointer because game isn't watching\n        return id;\n    }\n    /**\n     * Responsible for handling and parsing pointer events\n     */\n    _handle(ev) {\n        if (!this._enabled) {\n            return;\n        }\n        ev.preventDefault();\n        const eventCoords = new Map();\n        let button;\n        let pointerType;\n        if (isTouchEvent(ev)) {\n            button = PointerButton.Unknown;\n            pointerType = PointerType.Touch;\n            // https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent\n            for (let i = 0; i < ev.changedTouches.length; i++) {\n                const touch = ev.changedTouches[i];\n                const coordinates = GlobalCoordinates.fromPagePosition(touch.pageX, touch.pageY, this.engine);\n                const nativePointerId = i + 1;\n                const pointerId = this._normalizePointerId(nativePointerId);\n                this.currentFramePointerCoords.set(pointerId, coordinates);\n                eventCoords.set(pointerId, coordinates);\n            }\n        }\n        else {\n            button = this._nativeButtonToPointerButton(ev.button);\n            pointerType = PointerType.Mouse;\n            const coordinates = GlobalCoordinates.fromPagePosition(ev.pageX, ev.pageY, this.engine);\n            let nativePointerId = 1;\n            if (isPointerEvent(ev)) {\n                nativePointerId = ev.pointerId;\n                pointerType = this._stringToPointerType(ev.pointerType);\n            }\n            const pointerId = this._normalizePointerId(nativePointerId);\n            this.currentFramePointerCoords.set(pointerId, coordinates);\n            eventCoords.set(pointerId, coordinates);\n        }\n        for (const [pointerId, coord] of eventCoords.entries()) {\n            switch (ev.type) {\n                case 'mousedown':\n                case 'pointerdown':\n                case 'touchstart':\n                    this.currentFrameDown.push(new PointerEvent('down', pointerId, button, pointerType, coord, ev));\n                    this.currentFramePointerDown.set(pointerId, true);\n                    break;\n                case 'mouseup':\n                case 'pointerup':\n                case 'touchend':\n                    this.currentFrameUp.push(new PointerEvent('up', pointerId, button, pointerType, coord, ev));\n                    this.currentFramePointerDown.set(pointerId, false);\n                    break;\n                case 'mousemove':\n                case 'pointermove':\n                case 'touchmove':\n                    this.currentFrameMove.push(new PointerEvent('move', pointerId, button, pointerType, coord, ev));\n                    break;\n                case 'touchcancel':\n                case 'pointercancel':\n                    this.currentFrameCancel.push(new PointerEvent('cancel', pointerId, button, pointerType, coord, ev));\n                    break;\n            }\n        }\n    }\n    _handleWheel(ev) {\n        if (!this._enabled) {\n            return;\n        }\n        // Should we prevent page scroll because of this event\n        if (this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n            (this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && ev.target === this.engine.canvas)) {\n            ev.preventDefault();\n        }\n        const screen = this.engine.screen.pageToScreenCoordinates(vec(ev.pageX, ev.pageY));\n        const world = this.engine.screen.screenToWorldCoordinates(screen);\n        /**\n         * A constant used to normalize wheel events across different browsers\n         *\n         * This normalization factor is pulled from\n         * https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\n         */\n        const ScrollWheelNormalizationFactor = -1 / 40;\n        const deltaX = ev.deltaX || ev.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\n        const deltaY = ev.deltaY || ev.wheelDeltaY * ScrollWheelNormalizationFactor || ev.wheelDelta * ScrollWheelNormalizationFactor || ev.detail || 0;\n        const deltaZ = ev.deltaZ || 0;\n        let deltaMode = WheelDeltaMode.Pixel;\n        if (ev.deltaMode) {\n            if (ev.deltaMode === 1) {\n                deltaMode = WheelDeltaMode.Line;\n            }\n            else if (ev.deltaMode === 2) {\n                deltaMode = WheelDeltaMode.Page;\n            }\n        }\n        const we = new WheelEvent(world.x, world.y, ev.pageX, ev.pageY, screen.x, screen.y, 0, deltaX, deltaY, deltaZ, deltaMode, ev);\n        this.currentFrameWheel.push(we);\n    }\n    /**\n     * Triggers an excalibur pointer event in a world space pos\n     *\n     * Useful for testing pointers in excalibur\n     * @param type\n     * @param pos\n     */\n    triggerEvent(type, pos) {\n        const page = this.engine.screen.worldToPageCoordinates(pos);\n        // Send an event to the event receiver\n        if (window.PointerEvent) {\n            this._handle(new window.PointerEvent('pointer' + type, {\n                pointerId: 0,\n                clientX: page.x,\n                clientY: page.y\n            }));\n        }\n        else {\n            // Safari hack\n            this._handle(new window.MouseEvent('mouse' + type, {\n                clientX: page.x,\n                clientY: page.y\n            }));\n        }\n        // Force update pointer system\n        const pointerSystem = this.engine.currentScene.world.get(PointerSystem);\n        pointerSystem.preupdate(this.engine.currentScene, 1);\n        pointerSystem.update(1);\n    }\n    _nativeButtonToPointerButton(s) {\n        switch (s) {\n            case NativePointerButton.NoButton:\n                return PointerButton.NoButton;\n            case NativePointerButton.Left:\n                return PointerButton.Left;\n            case NativePointerButton.Middle:\n                return PointerButton.Middle;\n            case NativePointerButton.Right:\n                return PointerButton.Right;\n            case NativePointerButton.Unknown:\n                return PointerButton.Unknown;\n            default:\n                return fail(s);\n        }\n    }\n    _stringToPointerType(s) {\n        switch (s) {\n            case 'touch':\n                return PointerType.Touch;\n            case 'mouse':\n                return PointerType.Mouse;\n            case 'pen':\n                return PointerType.Pen;\n            default:\n                return PointerType.Unknown;\n        }\n    }\n}\n\n;// ./Input/InputHost.ts\n\n\n\n\nclass InputHost {\n    constructor(options) {\n        this._enabled = true;\n        const { pointerTarget, grabWindowFocus, engine } = options;\n        this.keyboard = new Keyboard();\n        this.pointers = new PointerEventReceiver(pointerTarget, engine);\n        this.gamepads = new Gamepads();\n        this.keyboard.init({ grabWindowFocus });\n        this.pointers.init({ grabWindowFocus });\n        this.gamepads.init();\n        this.inputMapper = new InputMapper({\n            keyboard: this.keyboard,\n            pointers: this.pointers,\n            gamepads: this.gamepads\n        });\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n        this.keyboard.toggleEnabled(this._enabled);\n        this.pointers.toggleEnabled(this._enabled);\n        this.gamepads.toggleEnabled(this._enabled);\n    }\n    update() {\n        if (this._enabled) {\n            this.inputMapper.execute();\n            this.keyboard.update();\n            this.gamepads.update();\n        }\n    }\n    clear() {\n        this.keyboard.clear();\n        this.pointers.clear();\n        // this.gamepads.clear();\n    }\n}\n\n;// ./Scene.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass PreLoadEvent {\n}\nconst SceneEvents = {\n    Initialize: 'initialize',\n    Activate: 'activate',\n    Deactivate: 'deactivate',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw',\n    PreDebugDraw: 'predebugdraw',\n    PostDebugDraw: 'postdebugdraw',\n    PreLoad: 'preload'\n};\n/**\n *\n */\nfunction isSceneConstructor(x) {\n    var _a, _b;\n    return !!(x === null || x === void 0 ? void 0 : x.prototype) && !!((_b = (_a = x === null || x === void 0 ? void 0 : x.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.name);\n}\n/**\n * {@apilink Actor | `Actors`} are composed together into groupings called Scenes in\n * Excalibur. The metaphor models the same idea behind real world\n * actors in a scene. Only actors in scenes will be updated and drawn.\n *\n * Typical usages of a scene include: levels, menus, loading screens, etc.\n */\nclass Scene {\n    /**\n     * The actors in the current scene\n     */\n    get actors() {\n        return this.world.entityManager.entities.filter((e) => {\n            return e instanceof Actor;\n        });\n    }\n    /**\n     * The entities in the current scene\n     */\n    get entities() {\n        return this.world.entityManager.entities;\n    }\n    /**\n     * The triggers in the current scene\n     */\n    get triggers() {\n        return this.world.entityManager.entities.filter((e) => {\n            return e instanceof Trigger;\n        });\n    }\n    /**\n     * The {@apilink TileMap}s in the scene, if any\n     */\n    get tileMaps() {\n        return this.world.entityManager.entities.filter((e) => {\n            return e instanceof TileMap;\n        });\n    }\n    get timers() {\n        return this._timers;\n    }\n    constructor() {\n        // Initialize systems\n        this._logger = Logger.getInstance();\n        this.events = new EventEmitter();\n        /**\n         * Gets or sets the current camera for the scene\n         */\n        this.camera = new Camera();\n        /**\n         * The ECS world for the scene\n         */\n        this.world = new World(this);\n        /**\n         * The Excalibur physics world for the scene. Used to interact\n         * with colliders included in the scene.\n         *\n         * Can be used to perform scene ray casts, track colliders, broadphase, and narrowphase.\n         */\n        this.physics = new PhysicsWorld(getDefaultPhysicsConfig());\n        this._isInitialized = false;\n        this._timers = [];\n        this._cancelQueue = [];\n        // Update\n        this.world.add(ActionsSystem);\n        this.world.add(new MotionSystem(this.world, this.physics));\n        this.world.add(new CollisionSystem(this.world, this.physics));\n        this.world.add(PointerSystem);\n        this.world.add(IsometricEntitySystem);\n        // Draw\n        this.world.add(OffscreenSystem);\n        this.world.add(GraphicsSystem);\n        this.world.add(DebugSystem);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Event hook to provide Scenes a way of loading scene specific resources.\n     *\n     * This is called before the Scene.onInitialize during scene transition. It will only ever fire once for a scene.\n     * @param loader\n     */\n    onPreLoad(loader) {\n        // will be overridden\n    }\n    /**\n     * Event hook fired directly before transition, either \"in\" or \"out\" of the scene\n     *\n     * This overrides the Engine scene definition. However transitions specified in goToScene take highest precedence\n     *\n     * ```typescript\n     * // Overrides all\n     * Engine.goToScene('scene', { destinationIn: ..., sourceOut: ... });\n     * ```\n     *\n     * This can be used to configure custom transitions for a scene dynamically\n     */\n    onTransition(direction) {\n        // will be overridden\n        return undefined;\n    }\n    /**\n     * This is called before the first update of the {@apilink Scene}. Initializes scene members like the camera. This method is meant to be\n     * overridden. This is where initialization of child actors should take place.\n     */\n    onInitialize(engine) {\n        // will be overridden\n    }\n    /**\n     * This is called when the scene is made active and started. It is meant to be overridden,\n     * this is where you should setup any DOM UI or event handlers needed for the scene.\n     */\n    onActivate(context) {\n        // will be overridden\n    }\n    /**\n     * This is called when the scene is made transitioned away from and stopped. It is meant to be overridden,\n     * this is where you should cleanup any DOM UI or event handlers needed for the scene.\n     */\n    onDeactivate(context) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before a scene is updated.\n     * @param engine reference to the engine\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPreUpdate(engine, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after a scene is updated.\n     * @param engine reference to the engine\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPostUpdate(engine, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreDraw` is called directly before a scene is drawn.\n     *\n     */\n    onPreDraw(ctx, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostDraw` is called directly after a scene is drawn.\n     *\n     */\n    onPostDraw(ctx, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Initializes actors in the scene\n     */\n    _initializeChildren() {\n        for (const child of this.entities) {\n            child._initialize(this.engine);\n        }\n    }\n    /**\n     * Gets whether or not the {@apilink Scene} has been initialized\n     */\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Initializes the scene before the first update, meant to be called by engine not by users of\n     * Excalibur\n     * @internal\n     */\n    async _initialize(engine) {\n        var _a;\n        if (!this.isInitialized) {\n            try {\n                this.engine = engine;\n                // PhysicsWorld config is watched so things will automagically update\n                this.physics.config = this.engine.physics;\n                this.input = new InputHost({\n                    pointerTarget: engine.pointerScope === PointerScope.Canvas ? engine.canvas : document,\n                    grabWindowFocus: engine.grabWindowFocus,\n                    engine\n                });\n                // Initialize camera first\n                this.camera._initialize(engine);\n                this.world.systemManager.initialize();\n                // This order is important! we want to be sure any custom init that add actors\n                // fire before the actor init\n                await this.onInitialize(engine);\n                this._initializeChildren();\n                this._logger.debug('Scene.onInitialize', this, engine);\n                this.events.emit('initialize', new InitializeEvent(engine, this));\n            }\n            catch (e) {\n                this._logger.error(`Error during scene initialization for scene ${(_a = engine.director) === null || _a === void 0 ? void 0 : _a.getSceneName(this)}!`);\n                throw e;\n            }\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\n     * @internal\n     */\n    async _activate(context) {\n        var _a, _b;\n        try {\n            this._logger.debug('Scene.onActivate', this);\n            this.input.toggleEnabled(true);\n            await this.onActivate(context);\n        }\n        catch (e) {\n            this._logger.error(`Error during scene activation for scene ${(_b = (_a = this.engine) === null || _a === void 0 ? void 0 : _a.director) === null || _b === void 0 ? void 0 : _b.getSceneName(this)}!`);\n            throw e;\n        }\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\n     * @internal\n     */\n    async _deactivate(context) {\n        this._logger.debug('Scene.onDeactivate', this);\n        this.input.toggleEnabled(false);\n        await this.onDeactivate(context);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _predraw handler for {@apilink onPreDraw} lifecycle event\n     * @internal\n     */\n    _predraw(ctx, elapsed) {\n        this.emit('predraw', new PreDrawEvent(ctx, elapsed, this));\n        this.onPreDraw(ctx, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _postdraw handler for {@apilink onPostDraw} lifecycle event\n     * @internal\n     */\n    _postdraw(ctx, elapsed) {\n        this.emit('postdraw', new PostDrawEvent(ctx, elapsed, this));\n        this.onPostDraw(ctx, elapsed);\n    }\n    /**\n     * Updates all the actors and timers in the scene. Called by the {@apilink Engine}.\n     * @param engine  Reference to the current Engine\n     * @param elapsed   The number of milliseconds since the last update\n     */\n    update(engine, elapsed) {\n        var _a;\n        if (!this.isInitialized) {\n            this._logger.warnOnce(`Scene update called before initialize for scene ${(_a = engine.director) === null || _a === void 0 ? void 0 : _a.getSceneName(this)}!`);\n            return;\n        }\n        this._preupdate(engine, elapsed);\n        // TODO differed entity removal for timers\n        let i, len;\n        // Remove timers in the cancel queue before updating them\n        for (i = 0, len = this._cancelQueue.length; i < len; i++) {\n            this.removeTimer(this._cancelQueue[i]);\n        }\n        this._cancelQueue.length = 0;\n        // Cycle through timers updating timers\n        for (const timer of this._timers) {\n            timer.update(elapsed);\n        }\n        this.world.update(SystemType.Update, elapsed);\n        // Camera last keeps renders smooth that are based on entity/actor\n        if (this.camera) {\n            this.camera.update(engine, elapsed);\n        }\n        this._collectActorStats(engine);\n        this._postupdate(engine, elapsed);\n        this.input.update();\n    }\n    /**\n     * Draws all the actors in the Scene. Called by the {@apilink Engine}.\n     * @param ctx    The current rendering context\n     * @param elapsed  The number of milliseconds since the last draw\n     */\n    draw(ctx, elapsed) {\n        var _a;\n        if (!this.isInitialized) {\n            this._logger.warnOnce(`Scene draw called before initialize!`);\n            return;\n        }\n        this._predraw(ctx, elapsed);\n        this.world.update(SystemType.Draw, elapsed);\n        if ((_a = this.engine) === null || _a === void 0 ? void 0 : _a.isDebug) {\n            this.debugDraw(ctx);\n        }\n        this._postdraw(ctx, elapsed);\n    }\n    /**\n     * Draws all the actors' debug information in the Scene. Called by the {@apilink Engine}.\n     * @param ctx  The current rendering context\n     */\n    /* istanbul ignore next */\n    debugDraw(ctx) {\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n        // pass\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n    }\n    /**\n     * Checks whether an actor is contained in this scene or not\n     */\n    contains(actor) {\n        return this.actors.indexOf(actor) > -1;\n    }\n    add(entity) {\n        this.emit('entityadded', { target: entity });\n        if (entity instanceof Timer) {\n            if (!contains(this._timers, entity)) {\n                this.addTimer(entity);\n            }\n            return;\n        }\n        this.world.add(entity);\n        entity.scene = this;\n    }\n    /**\n     * Removes an {@apilink Entity} (Actor, TileMap, Trigger, etc) or {@apilink Timer} from it's current scene\n     * and adds it to this scene.\n     *\n     * Useful if you want to have an object be present in only 1 scene at a time.\n     * @param entity\n     */\n    transfer(entity) {\n        let scene;\n        if (entity instanceof Entity && entity.scene && entity.scene !== this) {\n            scene = entity.scene;\n            entity.scene.world.remove(entity, false);\n        }\n        if (entity instanceof Timer && entity.scene) {\n            scene = entity.scene;\n            entity.scene.removeTimer(entity);\n        }\n        scene === null || scene === void 0 ? void 0 : scene.emit('entityremoved', { target: entity });\n        this.add(entity);\n    }\n    remove(entity) {\n        this.emit('entityremoved', { target: entity });\n        if (entity instanceof Entity) {\n            if (entity.isActive) {\n                entity.kill();\n            }\n            this.world.remove(entity);\n        }\n        if (entity instanceof Timer) {\n            this.removeTimer(entity);\n        }\n    }\n    /**\n     * Removes all entities and timers from the scene, optionally indicate whether deferred should or shouldn't be used.\n     *\n     * By default entities use deferred removal\n     * @param deferred\n     */\n    clear(deferred = true) {\n        for (let i = this.entities.length - 1; i >= 0; i--) {\n            this.world.remove(this.entities[i], deferred);\n        }\n        for (let i = this.timers.length - 1; i >= 0; i--) {\n            this.removeTimer(this.timers[i]);\n        }\n    }\n    /**\n     * Adds a {@apilink Timer} to the scene\n     * @param timer  The timer to add\n     */\n    addTimer(timer) {\n        this._timers.push(timer);\n        timer.scene = this;\n        return timer;\n    }\n    /**\n     * Removes a {@apilink Timer} from the scene.\n     * @warning Can be dangerous, use {@apilink cancelTimer} instead\n     * @param timer  The timer to remove\n     */\n    removeTimer(timer) {\n        const i = this._timers.indexOf(timer);\n        if (i !== -1) {\n            this._timers.splice(i, 1);\n        }\n        return timer;\n    }\n    /**\n     * Cancels a {@apilink Timer}, removing it from the scene nicely\n     * @param timer  The timer to cancel\n     */\n    cancelTimer(timer) {\n        this._cancelQueue.push(timer);\n        return timer;\n    }\n    /**\n     * Tests whether a {@apilink Timer} is active in the scene\n     */\n    isTimerActive(timer) {\n        return this._timers.indexOf(timer) > -1 && !timer.complete;\n    }\n    isCurrentScene() {\n        if (this.engine) {\n            return this.engine.currentScene === this;\n        }\n        return false;\n    }\n    _collectActorStats(engine) {\n        const actors = this.actors;\n        for (let i = 0; i < actors.length; i++) {\n            const actor = actors[i];\n            if (actor instanceof ScreenElement) {\n                engine.stats.currFrame.actors.ui++;\n            }\n            engine.stats.currFrame.actors.alive++;\n            for (let j = 0; j < actor.children.length; j++) {\n                const child = actor.children[j];\n                if (isScreenElement(child)) {\n                    // TODO not true\n                    engine.stats.currFrame.actors.ui++;\n                }\n                else {\n                    engine.stats.currFrame.actors.alive++;\n                }\n            }\n        }\n    }\n}\n\n;// ./Graphics/PostProcessor/ColorBlindnessMode.ts\nvar ColorBlindnessMode;\n(function (ColorBlindnessMode) {\n    ColorBlindnessMode[\"Protanope\"] = \"Protanope\";\n    ColorBlindnessMode[\"Deuteranope\"] = \"Deuteranope\";\n    ColorBlindnessMode[\"Tritanope\"] = \"Tritanope\";\n})(ColorBlindnessMode || (ColorBlindnessMode = {}));\n\n;// ./Graphics/PostProcessor/color-blind-fragment.glsl\n/* harmony default export */ const color_blind_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n// our texture\\r\\nuniform sampler2D u_image;\\r\\n// the texCoords passed in from the vertex shader.\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// color blind type\\r\\nuniform int u_type;\\r\\n\\r\\n// simulation?\\r\\nuniform bool u_simulate;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  vec4 o =  texture(u_image, v_texcoord);\\r\\n  // RGB to LMS matrix conversion\\r\\n  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\\r\\n  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\\r\\n  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\\r\\n  // Simulate color blindness\\r\\n  float l;\\r\\n  float m;\\r\\n  float s;\\r\\n  //MODE CODE//\\r\\n  if (u_type == 0) {\\r\\n    // Protanope\\r\\n    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;;\\r\\n  } else if (u_type == 1) {\\r\\n    // Deuteranope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;\\r\\n  } else if (u_type == 2) {\\r\\n    // Tritanope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\\r\\n  }\\r\\n\\r\\n  // LMS to RGB matrix conversion\\r\\n  vec4 error; // simulate the colors\\r\\n  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\\r\\n  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\\r\\n  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\\r\\n  error.a = 1.0;\\r\\n  vec4 diff = o - error;\\r\\n  vec4 correction; // correct the colors\\r\\n  correction.r = 0.0;\\r\\n  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\\r\\n  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\\r\\n  correction = o + correction;\\r\\n  correction.a = o.a;\\r\\n  //SIMULATE//\\r\\n\\r\\n  // sim \\r\\n  if (u_simulate) {\\r\\n    fragColor = error.rgba;\\r\\n  } else {\\r\\n    fragColor = correction.rgba;\\r\\n  }\\r\\n}\");\n;// ./Graphics/PostProcessor/ScreenShader.ts\n\n\n\n\n/**\n * Helper that defines a whole screen renderer, just provide a fragment source!\n *\n * Currently supports 1 varying\n * - vec2 a_texcoord between 0-1 which corresponds to screen position\n */\nclass ScreenShader {\n    constructor(gl, fragmentSource) {\n        if (false) {}\n        this._shader = new Shader({\n            gl,\n            vertexSource: `#version 300 es\r\n      in vec2 a_position;\r\n      in vec2 a_uv;\r\n      out vec2 v_texcoord;\r\n      out vec2 v_uv;\r\n\r\n      void main() {\r\n        gl_Position = vec4(a_position, 0.0, 1.0);\r\n        // Pass the texcoord to the fragment shader.\r\n        v_texcoord = a_uv;\r\n        v_uv = a_uv;\r\n      }`,\n            fragmentSource: fragmentSource\n        });\n        this._shader.compile();\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            type: 'static',\n            // clip space quad + uv since we don't need a camera\n            data: new Float32Array([\n                -1, -1, 0, 0, -1, 1, 0, 1, 1, -1, 1, 0,\n                1, -1, 1, 0, -1, 1, 0, 1, 1, 1, 1, 1\n            ])\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2]\n            ]\n        });\n        this._buffer.upload();\n    }\n    getShader() {\n        return this._shader;\n    }\n    getLayout() {\n        return this._layout;\n    }\n}\n\n;// ./Graphics/PostProcessor/ColorBlindnessPostProcessor.ts\n\n\n\nclass ColorBlindnessPostProcessor {\n    constructor(_colorBlindnessMode, simulate = false) {\n        this._colorBlindnessMode = _colorBlindnessMode;\n        this._simulate = false;\n        this._simulate = simulate;\n    }\n    initialize(gl) {\n        this._shader = new ScreenShader(gl, color_blind_fragment);\n        this.simulate = this._simulate;\n        this.colorBlindnessMode = this._colorBlindnessMode;\n    }\n    getShader() {\n        return this._shader.getShader();\n    }\n    getLayout() {\n        return this._shader.getLayout();\n    }\n    set colorBlindnessMode(colorBlindMode) {\n        this._colorBlindnessMode = colorBlindMode;\n        if (this._shader) {\n            const shader = this._shader.getShader();\n            shader.use();\n            if (this._colorBlindnessMode === ColorBlindnessMode.Protanope) {\n                shader.setUniformInt('u_type', 0);\n            }\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Deuteranope) {\n                shader.setUniformInt('u_type', 1);\n            }\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Tritanope) {\n                shader.setUniformInt('u_type', 2);\n            }\n        }\n    }\n    get colorBlindnessMode() {\n        return this._colorBlindnessMode;\n    }\n    set simulate(value) {\n        this._simulate = value;\n        if (this._shader) {\n            const shader = this._shader.getShader();\n            shader.use();\n            shader.setUniformBoolean('u_simulate', value);\n        }\n    }\n    get simulate() {\n        return this._simulate;\n    }\n}\n\n;// ./Debug/DebugFlags.ts\n\n\n\nclass ColorBlindFlags {\n    constructor(engine) {\n        this._engine = engine;\n        this._colorBlindPostProcessor = new ColorBlindnessPostProcessor(ColorBlindnessMode.Protanope);\n    }\n    /**\n     * Correct colors for a specified color blindness\n     * @param colorBlindness\n     */\n    correct(colorBlindness) {\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            this.clear();\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\n            this._colorBlindPostProcessor.simulate = false;\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\n        }\n    }\n    /**\n     * Simulate colors for a specified color blindness\n     * @param colorBlindness\n     */\n    simulate(colorBlindness) {\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            this.clear();\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\n            this._colorBlindPostProcessor.simulate = true;\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\n        }\n    }\n    /**\n     * Remove color blindness post processor\n     */\n    clear() {\n        this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor);\n    }\n}\n\n;// ./Debug/DebugConfig.ts\n\n\n/**\n * Debug statistics and flags for Excalibur. If polling these values, it would be\n * best to do so on the `postupdate` event for {@apilink Engine}, after all values have been\n * updated during a frame.\n */\nclass DebugConfig {\n    constructor(engine) {\n        /**\n         * Performance statistics\n         */\n        this.stats = {\n            /**\n             * Current frame statistics. Engine reuses this instance, use {@apilink FrameStats.clone} to copy frame stats.\n             * Best accessed on {@apilink postframe} event. See {@apilink FrameStats}\n             */\n            currFrame: new FrameStats(),\n            /**\n             * Previous frame statistics. Engine reuses this instance, use {@apilink FrameStats.clone} to copy frame stats.\n             * Best accessed on {@apilink preframe} event. Best inspected on engine event `preframe`. See {@apilink FrameStats}\n             */\n            prevFrame: new FrameStats()\n        };\n        /**\n         * Filter debug context to named entities or entity ids\n         */\n        this.filter = {\n            /**\n             * Toggle filter on or off (default off) must be on for DebugDraw to use filters\n             */\n            useFilter: false,\n            /**\n             * Query for entities by name, if the entity name contains `nameQuery` it will be included\n             */\n            nameQuery: '',\n            /**\n             * Query for Entity ids, if the id matches it will be included\n             */\n            ids: []\n        };\n        /**\n         * Entity debug settings\n         */\n        this.entity = {\n            showAll: false,\n            showId: false,\n            showName: false\n        };\n        /**\n         * Transform component debug settings\n         */\n        this.transform = {\n            showAll: false,\n            debugZIndex: 10000000,\n            showPosition: false,\n            showPositionLabel: false,\n            positionColor: Color.Yellow,\n            showZIndex: false,\n            showScale: false,\n            scaleColor: Color.Green,\n            showRotation: false,\n            rotationColor: Color.Blue\n        };\n        /**\n         * Graphics component debug settings\n         */\n        this.graphics = {\n            showAll: false,\n            showBounds: false,\n            boundsColor: Color.Yellow\n        };\n        /**\n         * Collider component debug settings\n         */\n        this.collider = {\n            showAll: false,\n            showBounds: false,\n            boundsColor: Color.Blue,\n            showOwner: false,\n            showGeometry: true,\n            geometryColor: Color.Green,\n            geometryLineWidth: 1,\n            geometryPointSize: 0.5\n        };\n        /**\n         * Physics simulation debug settings\n         */\n        this.physics = {\n            showAll: false,\n            showBroadphaseSpacePartitionDebug: false,\n            showCollisionNormals: false,\n            collisionNormalColor: Color.Cyan,\n            showCollisionContacts: true,\n            contactSize: 2,\n            collisionContactColor: Color.Red\n        };\n        /**\n         * Motion component debug settings\n         */\n        this.motion = {\n            showAll: false,\n            showVelocity: false,\n            velocityColor: Color.Yellow,\n            showAcceleration: false,\n            accelerationColor: Color.Red\n        };\n        /**\n         * Body component debug settings\n         */\n        this.body = {\n            showAll: false,\n            showCollisionGroup: false,\n            showCollisionType: false,\n            showSleeping: false,\n            showMotion: false,\n            showMass: false\n        };\n        /**\n         * Camera debug settings\n         */\n        this.camera = {\n            showAll: false,\n            showFocus: false,\n            focusColor: Color.Red,\n            showZoom: false\n        };\n        this.tilemap = {\n            showAll: false,\n            showGrid: false,\n            gridColor: Color.Red,\n            gridWidth: 0.5,\n            showSolidBounds: false,\n            solidBoundsColor: Color.fromHex('#8080807F'), // grayish\n            showColliderGeometry: true\n        };\n        this.isometric = {\n            showAll: false,\n            showPosition: false,\n            positionColor: Color.Yellow,\n            positionSize: 1,\n            showGrid: false,\n            gridColor: Color.Red,\n            gridWidth: 1,\n            showColliderGeometry: true\n        };\n        this._engine = engine;\n        this.colorBlindMode = new ColorBlindFlags(this._engine);\n    }\n    /**\n     * Switch the current excalibur clock with the {@apilink TestClock} and return\n     * it in the same running state.\n     *\n     * This is useful when you need to debug frame by frame.\n     */\n    useTestClock() {\n        const clock = this._engine.clock;\n        const wasRunning = clock.isRunning();\n        clock.stop();\n        const testClock = clock.toTestClock();\n        if (wasRunning) {\n            testClock.start();\n        }\n        this._engine.clock = testClock;\n        return testClock;\n    }\n    /**\n     * Switch the current excalibur clock with the {@apilink StandardClock} and\n     * return it in the same running state.\n     *\n     * This is useful when you need to switch back to normal mode after\n     * debugging.\n     */\n    useStandardClock() {\n        const currentClock = this._engine.clock;\n        const wasRunning = currentClock.isRunning();\n        currentClock.stop();\n        const standardClock = currentClock.toStandardClock();\n        if (wasRunning) {\n            standardClock.start();\n        }\n        this._engine.clock = standardClock;\n        return standardClock;\n    }\n}\n/**\n * Implementation of a frame's stats. Meant to have values copied via {@apilink FrameStats.reset}, avoid\n * creating instances of this every frame.\n */\nclass FrameStats {\n    constructor() {\n        this._id = 0;\n        this._elapsedMs = 0;\n        this._fps = 0;\n        this._actorStats = {\n            alive: 0,\n            killed: 0,\n            ui: 0,\n            get remaining() {\n                return this.alive - this.killed;\n            },\n            get total() {\n                return this.remaining + this.ui;\n            }\n        };\n        this._durationStats = {\n            update: 0,\n            draw: 0,\n            get total() {\n                return this.update + this.draw;\n            }\n        };\n        this._physicsStats = new PhysicsStats();\n        this._graphicsStats = {\n            drawCalls: 0,\n            drawnImages: 0\n        };\n    }\n    /**\n     * Zero out values or clone other IFrameStat stats. Allows instance reuse.\n     * @param [otherStats] Optional stats to clone\n     */\n    reset(otherStats) {\n        if (otherStats) {\n            this.id = otherStats.id;\n            this.elapsedMs = otherStats.elapsedMs;\n            this.fps = otherStats.fps;\n            this.actors.alive = otherStats.actors.alive;\n            this.actors.killed = otherStats.actors.killed;\n            this.actors.ui = otherStats.actors.ui;\n            this.duration.update = otherStats.duration.update;\n            this.duration.draw = otherStats.duration.draw;\n            this._physicsStats.reset(otherStats.physics);\n            this.graphics.drawCalls = otherStats.graphics.drawCalls;\n            this.graphics.drawnImages = otherStats.graphics.drawnImages;\n        }\n        else {\n            this.id = this.elapsedMs = this.fps = 0;\n            this.actors.alive = this.actors.killed = this.actors.ui = 0;\n            this.duration.update = this.duration.draw = 0;\n            this._physicsStats.reset();\n            this.graphics.drawnImages = this.graphics.drawCalls = 0;\n        }\n    }\n    /**\n     * Provides a clone of this instance.\n     */\n    clone() {\n        const fs = new FrameStats();\n        fs.reset(this);\n        return fs;\n    }\n    /**\n     * Gets the frame's id\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Sets the frame's id\n     */\n    set id(value) {\n        this._id = value;\n    }\n    /**\n     * Gets the frame's delta (time since last frame)\n     */\n    get elapsedMs() {\n        return this._elapsedMs;\n    }\n    /**\n     * Sets the frame's delta (time since last frame). Internal use only.\n     * @internal\n     */\n    set elapsedMs(value) {\n        this._elapsedMs = value;\n    }\n    /**\n     * Gets the frame's frames-per-second (FPS)\n     */\n    get fps() {\n        return this._fps;\n    }\n    /**\n     * Sets the frame's frames-per-second (FPS). Internal use only.\n     * @internal\n     */\n    set fps(value) {\n        this._fps = value;\n    }\n    /**\n     * Gets the frame's actor statistics\n     */\n    get actors() {\n        return this._actorStats;\n    }\n    /**\n     * Gets the frame's duration statistics\n     */\n    get duration() {\n        return this._durationStats;\n    }\n    /**\n     * Gets the frame's physics statistics\n     */\n    get physics() {\n        return this._physicsStats;\n    }\n    /**\n     * Gets the frame's graphics statistics\n     */\n    get graphics() {\n        return this._graphicsStats;\n    }\n}\nclass PhysicsStats {\n    constructor() {\n        this._pairs = 0;\n        this._collisions = 0;\n        this._contacts = new Map();\n        this._fastBodies = 0;\n        this._fastBodyCollisions = 0;\n        this._broadphase = 0;\n        this._narrowphase = 0;\n    }\n    /**\n     * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\n     * @param [otherStats] Optional stats to clone\n     */\n    reset(otherStats) {\n        if (otherStats) {\n            this.pairs = otherStats.pairs;\n            this.collisions = otherStats.collisions;\n            this.contacts = otherStats.contacts;\n            this.fastBodies = otherStats.fastBodies;\n            this.fastBodyCollisions = otherStats.fastBodyCollisions;\n            this.broadphase = otherStats.broadphase;\n            this.narrowphase = otherStats.narrowphase;\n        }\n        else {\n            this.pairs = this.collisions = this.fastBodies = 0;\n            this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\n            this.contacts.clear();\n        }\n    }\n    /**\n     * Provides a clone of this instance.\n     */\n    clone() {\n        const ps = new PhysicsStats();\n        ps.reset(this);\n        return ps;\n    }\n    get pairs() {\n        return this._pairs;\n    }\n    set pairs(value) {\n        this._pairs = value;\n    }\n    get collisions() {\n        return this._collisions;\n    }\n    set collisions(value) {\n        this._collisions = value;\n    }\n    get contacts() {\n        return this._contacts;\n    }\n    set contacts(contacts) {\n        this._contacts = contacts;\n    }\n    get fastBodies() {\n        return this._fastBodies;\n    }\n    set fastBodies(value) {\n        this._fastBodies = value;\n    }\n    get fastBodyCollisions() {\n        return this._fastBodyCollisions;\n    }\n    set fastBodyCollisions(value) {\n        this._fastBodyCollisions = value;\n    }\n    get broadphase() {\n        return this._broadphase;\n    }\n    set broadphase(value) {\n        this._broadphase = value;\n    }\n    get narrowphase() {\n        return this._narrowphase;\n    }\n    set narrowphase(value) {\n        this._narrowphase = value;\n    }\n}\n\n;// ./Util/Browser.ts\nclass BrowserComponent {\n    on(eventName, handler) {\n        if (this._nativeHandlers[eventName]) {\n            this.off(eventName, this._nativeHandlers[eventName]);\n        }\n        this._nativeHandlers[eventName] = this._decorate(handler);\n        this.nativeComponent.addEventListener(eventName, this._nativeHandlers[eventName]);\n    }\n    off(eventName, handler) {\n        if (!handler) {\n            handler = this._nativeHandlers[eventName];\n        }\n        this.nativeComponent.removeEventListener(eventName, handler);\n        this._nativeHandlers[eventName] = null;\n    }\n    _decorate(handler) {\n        return (evt) => {\n            if (!this._paused) {\n                handler(evt);\n            }\n        };\n    }\n    pause() {\n        this._paused = true;\n    }\n    resume() {\n        this._paused = false;\n    }\n    clear() {\n        for (const event in this._nativeHandlers) {\n            this.off(event);\n        }\n    }\n    constructor(nativeComponent) {\n        this.nativeComponent = nativeComponent;\n        this._paused = false;\n        this._nativeHandlers = {};\n    }\n}\nclass BrowserEvents {\n    constructor(_windowGlobal, _documentGlobal) {\n        this._windowGlobal = _windowGlobal;\n        this._documentGlobal = _documentGlobal;\n        this._windowComponent = new BrowserComponent(this._windowGlobal);\n        this._documentComponent = new BrowserComponent(this._documentGlobal);\n    }\n    get window() {\n        return this._windowComponent;\n    }\n    get document() {\n        return this._documentComponent;\n    }\n    pause() {\n        this.window.pause();\n        this.document.pause();\n    }\n    resume() {\n        this.window.resume();\n        this.document.resume();\n    }\n    clear() {\n        this.window.clear();\n        this.document.clear();\n    }\n}\n\n;// ./Graphics/Context/ExcaliburGraphicsContext.ts\n\nconst DefaultAntialiasOptions = {\n    pixelArtSampler: false,\n    nativeContextAntialiasing: false,\n    multiSampleAntialiasing: true,\n    filtering: ImageFiltering.Blended,\n    canvasImageRendering: 'auto'\n};\nconst DefaultPixelArtOptions = {\n    pixelArtSampler: true,\n    nativeContextAntialiasing: false,\n    multiSampleAntialiasing: true,\n    filtering: ImageFiltering.Blended,\n    canvasImageRendering: 'auto'\n};\n\n;// ./Util/Fps.ts\nclass FpsSampler {\n    constructor(options) {\n        var _a;\n        this._samplePeriod = 100;\n        this._currentFrameTime = 0;\n        this._frames = 0;\n        this._previousSampleTime = 0;\n        this._beginFrameTime = 0;\n        this._fps = options.initialFps;\n        this._samplePeriod = (_a = options.samplePeriod) !== null && _a !== void 0 ? _a : this._samplePeriod;\n        this._currentFrameTime = 1000 / options.initialFps;\n        this._nowFn = options.nowFn;\n        this._previousSampleTime = this._nowFn();\n    }\n    /**\n     * Start of code block to sample FPS for\n     */\n    start() {\n        this._beginFrameTime = this._nowFn();\n    }\n    /**\n     * End of code block to sample FPS for\n     */\n    end() {\n        this._frames++;\n        const time = this._nowFn();\n        this._currentFrameTime = time - this._beginFrameTime;\n        if (time >= this._previousSampleTime + this._samplePeriod) {\n            this._fps = (this._frames * 1000) / (time - this._previousSampleTime);\n            this._previousSampleTime = time;\n            this._frames = 0;\n        }\n    }\n    /**\n     * Return the currently sampled fps over the last sample period, by default every 100ms\n     */\n    get fps() {\n        return this._fps;\n    }\n    /**\n     * Return the instantaneous fps, this can be less useful because it will fluctuate given the current frames time\n     */\n    get instant() {\n        return 1000 / this._currentFrameTime;\n    }\n}\n\n;// ./Util/Clock.ts\n\n\n/**\n * Abstract Clock is the base type of all Clocks\n *\n * It has a few opinions\n * 1. It manages the calculation of what \"elapsed\" time means and thus maximum fps\n * 2. The default timing api is implemented in now()\n *\n * To implement your own clock, extend Clock and override start/stop to start and stop the clock, then call update() with whatever\n * method is unique to your clock implementation.\n */\nclass Clock {\n    constructor(options) {\n        var _a, _b, _c;\n        this._onFatalException = () => {\n            /* default nothing */\n        };\n        this._maxFps = Infinity;\n        this._lastTime = 0;\n        this._elapsed = 1;\n        this._scheduledCbs = [];\n        this._totalElapsed = 0;\n        this._options = options;\n        this.tick = options.tick;\n        this._lastTime = (_a = this.now()) !== null && _a !== void 0 ? _a : 0;\n        this._maxFps = (_b = options.maxFps) !== null && _b !== void 0 ? _b : this._maxFps;\n        this._onFatalException = (_c = options.onFatalException) !== null && _c !== void 0 ? _c : this._onFatalException;\n        this.fpsSampler = new FpsSampler({\n            initialFps: 60,\n            nowFn: () => this.now()\n        });\n    }\n    /**\n     * Get the elapsed time for the last completed frame\n     */\n    elapsed() {\n        return this._elapsed;\n    }\n    /**\n     * Get the current time in milliseconds\n     */\n    now() {\n        return performance.now();\n    }\n    toTestClock() {\n        const testClock = new TestClock({\n            ...this._options,\n            defaultUpdateMs: 16.6\n        });\n        return testClock;\n    }\n    toStandardClock() {\n        const clock = new StandardClock({\n            ...this._options\n        });\n        return clock;\n    }\n    setFatalExceptionHandler(handler) {\n        this._onFatalException = handler;\n    }\n    /**\n     * Schedule a callback to fire given a timeout in milliseconds using the excalibur {@apilink Clock}\n     *\n     * This is useful to use over the built in browser `setTimeout` because callbacks will be tied to the\n     * excalibur update clock, instead of browser time, this means that callbacks wont fire if the game is\n     * stopped or paused.\n     * @param cb callback to fire\n     * @param timeoutMs Optionally specify a timeout in milliseconds from now, default is 0ms which means the next possible tick\n     * @param timing Optionally specify a timeout in milliseconds from now, default is 0ms which means the next possible tick\n     */\n    schedule(cb, timeoutMs = 0, timing = 'preframe') {\n        // Scheduled based on internal elapsed time\n        const scheduledTime = this._totalElapsed + timeoutMs;\n        this._scheduledCbs.push([cb, scheduledTime, timing]);\n    }\n    /**\n     * Called internally to trigger scheduled callbacks in the clock\n     * @param timing\n     * @internal\n     */\n    __runScheduledCbs(timing = 'preframe') {\n        // walk backwards to delete items as we loop\n        for (let i = this._scheduledCbs.length - 1; i > -1; i--) {\n            if (timing === this._scheduledCbs[i][2] && this._scheduledCbs[i][1] <= this._totalElapsed) {\n                this._scheduledCbs[i][0](this._elapsed);\n                this._scheduledCbs.splice(i, 1);\n            }\n        }\n    }\n    update(overrideUpdateMs) {\n        try {\n            this.fpsSampler.start();\n            // Get the time to calculate time-elapsed\n            const now = this.now();\n            let elapsed = now - this._lastTime || 1; // first frame\n            // Constrain fps\n            const fpsInterval = 1000 / this._maxFps;\n            // only run frame if enough time has elapsed\n            if (elapsed >= fpsInterval) {\n                let leftover = 0;\n                if (fpsInterval !== 0) {\n                    leftover = elapsed % fpsInterval;\n                    elapsed = elapsed - leftover; // shift elapsed to be \"in phase\" with the current loop fps\n                }\n                // Resolves issue #138 if the game has been paused, or blurred for\n                // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\n                // and provides more expected behavior when the engine comes back\n                // into focus\n                if (elapsed > 200) {\n                    elapsed = 1;\n                }\n                // tick the mainloop and run scheduled callbacks\n                this._elapsed = overrideUpdateMs || elapsed;\n                this._totalElapsed += this._elapsed;\n                this.__runScheduledCbs('preframe');\n                this.tick(overrideUpdateMs || elapsed);\n                this.__runScheduledCbs('postframe');\n                if (fpsInterval !== 0) {\n                    this._lastTime = now - leftover;\n                }\n                else {\n                    this._lastTime = now;\n                }\n                this.fpsSampler.end();\n            }\n        }\n        catch (e) {\n            this._onFatalException(e);\n            this.stop();\n        }\n    }\n}\n/**\n * The {@apilink StandardClock} implements the requestAnimationFrame browser api to run the tick()\n */\nclass StandardClock extends Clock {\n    constructor(options) {\n        super(options);\n        this._running = false;\n    }\n    isRunning() {\n        return this._running;\n    }\n    start() {\n        if (this._running) {\n            return;\n        }\n        this._running = true;\n        const mainloop = () => {\n            // stop the loop\n            if (!this._running) {\n                return;\n            }\n            try {\n                // request next loop\n                this._requestId = window.requestAnimationFrame(mainloop);\n                this.update();\n            }\n            catch (e) {\n                window.cancelAnimationFrame(this._requestId);\n                throw e;\n            }\n        };\n        // begin the first frame\n        mainloop();\n    }\n    stop() {\n        window.cancelAnimationFrame(this._requestId);\n        this._running = false;\n    }\n}\n/**\n * The TestClock is meant for debugging interactions in excalibur that require precise timing to replicate or test\n */\nclass TestClock extends Clock {\n    constructor(options) {\n        super({\n            ...options\n        });\n        this._logger = Logger.getInstance();\n        this._running = false;\n        this._currentTime = 0;\n        this._updateMs = options.defaultUpdateMs;\n    }\n    /**\n     * Get the current time in milliseconds\n     */\n    now() {\n        var _a;\n        return (_a = this._currentTime) !== null && _a !== void 0 ? _a : 0;\n    }\n    isRunning() {\n        return this._running;\n    }\n    start() {\n        this._running = true;\n    }\n    stop() {\n        this._running = false;\n    }\n    /**\n     * Manually step the clock forward 1 tick, optionally specify an elapsed time in milliseconds\n     * @param overrideUpdateMs\n     */\n    step(overrideUpdateMs) {\n        const time = overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs;\n        if (this._running) {\n            // to be comparable to RAF this needs to be a full blown Task\n            // For example, images cannot decode synchronously in a single step\n            this.update(time);\n            this._currentTime += time;\n        }\n        else {\n            this._logger.warn('The clock is not running, no step will be performed');\n        }\n    }\n    /**\n     * Run a number of steps that tick the clock, optionally specify an elapsed time in milliseconds\n     * @param numberOfSteps\n     * @param overrideUpdateMs\n     */\n    run(numberOfSteps, overrideUpdateMs) {\n        for (let i = 0; i < numberOfSteps; i++) {\n            this.step(overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs);\n        }\n    }\n}\n\n// EXTERNAL MODULE: ./Util/Toaster.css\nvar Util_Toaster = __webpack_require__(296);\n;// ./Util/Toaster.ts\n\n/**\n * The Toaster is only meant to be called from inside Excalibur to display messages to players\n */\nclass Toaster {\n    constructor() {\n        this._toasterCss = Util_Toaster/* default */.A.toString();\n        this._isInitialized = false;\n    }\n    _initialize() {\n        if (!this._isInitialized) {\n            this._container = document.createElement('div');\n            this._container.id = 'ex-toast-container';\n            document.body.appendChild(this._container);\n            this._isInitialized = true;\n            this._styleBlock = document.createElement('style');\n            this._styleBlock.textContent = this._toasterCss;\n            document.head.appendChild(this._styleBlock);\n        }\n    }\n    dispose() {\n        this._container.parentElement.removeChild(this._container);\n        this._styleBlock.parentElement.removeChild(this._styleBlock);\n        this._isInitialized = false;\n    }\n    _createFragment(message) {\n        const toastMessage = document.createElement('span');\n        toastMessage.innerText = message;\n        return toastMessage;\n    }\n    /**\n     * Display a toast message to a player\n     * @param message Text of the message, messages may have a single \"[LINK]\" to influence placement\n     * @param linkTarget Optionally specify a link location\n     * @param linkName Optionally specify a name for that link location\n     */\n    toast(message, linkTarget, linkName) {\n        this._initialize();\n        const toast = document.createElement('div');\n        toast.className = 'ex-toast-message';\n        const messageFragments = message.split('[LINK]').map((message) => this._createFragment(message));\n        if (linkTarget) {\n            const link = document.createElement('a');\n            link.href = linkTarget;\n            if (linkName) {\n                link.innerText = linkName;\n            }\n            else {\n                link.innerText = linkTarget;\n            }\n            messageFragments.splice(1, 0, link);\n        }\n        // Assembly message\n        const finalMessage = document.createElement('div');\n        messageFragments.forEach((message) => {\n            finalMessage.appendChild(message);\n        });\n        toast.appendChild(finalMessage);\n        // Dismiss button\n        const dismissBtn = document.createElement('button');\n        dismissBtn.innerText = 'x';\n        dismissBtn.addEventListener('click', () => {\n            this._container.removeChild(toast);\n        });\n        toast.appendChild(dismissBtn);\n        // Escape to dismiss\n        const keydownHandler = (evt) => {\n            if (evt.key === 'Escape') {\n                try {\n                    this._container.removeChild(toast);\n                }\n                catch (_a) {\n                    // pass\n                }\n            }\n            document.removeEventListener('keydown', keydownHandler);\n        };\n        document.addEventListener('keydown', keydownHandler);\n        // Insert into container\n        const first = this._container.firstChild;\n        this._container.insertBefore(toast, first);\n    }\n}\n\n;// ./Director/Director.ts\n\n\n\n\n\n\nconst DirectorEvents = {\n    NavigationStart: 'navigationstart',\n    Navigation: 'navigation',\n    NavigationEnd: 'navigationend'\n};\n/**\n * The Director is responsible for managing scenes and changing scenes in Excalibur.\n *\n * It deals with transitions, scene loaders, switching scenes\n *\n * This is used internally by Excalibur, generally not mean to\n * be instantiated end users directly.\n */\nclass Director {\n    /**\n     * Gets whether the director currently transitioning between scenes\n     *\n     * Useful if you need to block behavior during transition\n     */\n    get isTransitioning() {\n        return this._isTransitioning;\n    }\n    constructor(_engine, scenes) {\n        this._engine = _engine;\n        this.events = new EventEmitter();\n        this._logger = Logger.getInstance();\n        this._initialized = false;\n        /**\n         * All registered scenes in Excalibur\n         */\n        this.scenes = {};\n        /**\n         * Holds all instantiated scenes\n         */\n        this._sceneToInstance = new Map();\n        this._sceneToLoader = new Map();\n        this._sceneToTransition = new Map();\n        /**\n         * Used to keep track of scenes that have already been loaded so we don't load multiple times\n         */\n        this._loadedScenes = new Set();\n        this._isTransitioning = false;\n        this.rootScene = this.currentScene = new Scene();\n        this.add('root', this.rootScene);\n        this.currentScene = this.rootScene;\n        this.currentSceneName = 'root';\n        for (const sceneKey in scenes) {\n            const sceneOrOptions = scenes[sceneKey];\n            this.add(sceneKey, sceneOrOptions);\n            if (sceneKey === 'root') {\n                this.rootScene = this.getSceneInstance('root'); // always a root scene\n                this.currentScene = this.rootScene;\n            }\n        }\n    }\n    /**\n     * Initialize the director's internal state\n     */\n    async onInitialize() {\n        if (!this._initialized) {\n            this._initialized = true;\n            if (this._deferredGoto) {\n                const deferredScene = this._deferredGoto;\n                this._deferredGoto = undefined;\n                const deferredTransition = this._deferredTransition;\n                this._deferredTransition = undefined;\n                const deferredSceneInstance = this.getSceneInstance(deferredScene);\n                if (deferredSceneInstance && deferredTransition) {\n                    deferredTransition._addToTargetScene(this._engine, deferredSceneInstance);\n                }\n                await this.swapScene(deferredScene);\n                if (deferredSceneInstance && deferredTransition) {\n                    await this.playTransition(deferredTransition, deferredSceneInstance);\n                }\n            }\n            else {\n                await this.swapScene('root');\n            }\n        }\n    }\n    get isInitialized() {\n        return this._initialized;\n    }\n    /**\n     * Configures the start scene, and optionally the transition & loader for the director\n     *\n     * Typically this is called at the beginning of the game to the start scene and transition and never again.\n     * @param startScene\n     * @param options\n     */\n    configureStart(startScene, options) {\n        const maybeLoaderOrCtor = options === null || options === void 0 ? void 0 : options.loader;\n        if (maybeLoaderOrCtor instanceof DefaultLoader) {\n            this.mainLoader = maybeLoaderOrCtor;\n        }\n        else if (isLoaderConstructor(maybeLoaderOrCtor)) {\n            this.mainLoader = new maybeLoaderOrCtor();\n        }\n        else {\n            this.mainLoader = new Loader();\n        }\n        let maybeStartTransition;\n        if (options === null || options === void 0 ? void 0 : options.inTransition) {\n            const { inTransition } = options;\n            maybeStartTransition = inTransition;\n        }\n        this.startScene = startScene;\n        // Fire and forget promise for the initial scene\n        if (maybeStartTransition) {\n            const startSceneInstance = this.getSceneInstance(this.startScene);\n            if (startSceneInstance) {\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                maybeStartTransition._addToTargetScene(this._engine, startSceneInstance);\n                this.swapScene(this.startScene).then(() => {\n                    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                    return this.playTransition(maybeStartTransition, startSceneInstance);\n                });\n            }\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.swapScene(this.startScene);\n        }\n        this.currentSceneName = this.startScene;\n    }\n    _getLoader(sceneName) {\n        return this._sceneToLoader.get(sceneName);\n    }\n    _getInTransition(sceneName) {\n        var _a;\n        const sceneOrRoute = this.scenes[sceneName];\n        if (sceneOrRoute instanceof Scene || isSceneConstructor(sceneOrRoute)) {\n            return undefined;\n        }\n        return (_a = sceneOrRoute === null || sceneOrRoute === void 0 ? void 0 : sceneOrRoute.transitions) === null || _a === void 0 ? void 0 : _a.in;\n    }\n    _getOutTransition(sceneName) {\n        var _a;\n        const sceneOrRoute = this.scenes[sceneName];\n        if (sceneOrRoute instanceof Scene || isSceneConstructor(sceneOrRoute)) {\n            return undefined;\n        }\n        return (_a = sceneOrRoute === null || sceneOrRoute === void 0 ? void 0 : sceneOrRoute.transitions) === null || _a === void 0 ? void 0 : _a.out;\n    }\n    getDeferredScene() {\n        const maybeDeferred = this.getSceneDefinition(this._deferredGoto);\n        if (this._deferredGoto && maybeDeferred) {\n            return maybeDeferred;\n        }\n        return null;\n    }\n    /**\n     * Returns a scene by name if it exists, might be the constructor and not the instance of a scene\n     * @param name\n     */\n    getSceneDefinition(name) {\n        const maybeScene = this.scenes[name];\n        if (maybeScene instanceof Scene || isSceneConstructor(maybeScene)) {\n            return maybeScene;\n        }\n        else if (maybeScene) {\n            return maybeScene.scene;\n        }\n        return undefined;\n    }\n    /**\n     * Returns the name of the registered scene, null if none can be found\n     * @param scene\n     */\n    getSceneName(scene) {\n        for (const [name, maybeScene] of Object.entries(this.scenes)) {\n            if (maybeScene instanceof Scene) {\n                if (scene === maybeScene) {\n                    return name;\n                }\n            }\n            else if (!isSceneConstructor(maybeScene)) {\n                if (scene === maybeScene.scene) {\n                    return name;\n                }\n            }\n        }\n        for (const [name, maybeScene] of Object.entries(this.scenes)) {\n            if (isSceneConstructor(maybeScene)) {\n                if (scene.constructor === maybeScene) {\n                    return name;\n                }\n            }\n            else if (!(maybeScene instanceof Scene)) {\n                if (scene.constructor === maybeScene.scene) {\n                    return name;\n                }\n            }\n        }\n        return null;\n    }\n    /**\n     * Returns the same Director, but asserts a scene DOES exist to the type system\n     * @param name\n     */\n    assertAdded(name) {\n        return this;\n    }\n    /**\n     * Returns the same Director, but asserts a scene DOES NOT exist to the type system\n     * @param name\n     */\n    assertRemoved(name) {\n        return this;\n    }\n    /**\n     * Adds additional Scenes to the game!\n     * @param name\n     * @param sceneOrRoute\n     */\n    add(name, sceneOrRoute) {\n        if (!(sceneOrRoute instanceof Scene) && !isSceneConstructor(sceneOrRoute)) {\n            const { loader, transitions } = sceneOrRoute;\n            const { in: inTransition, out: outTransition } = transitions !== null && transitions !== void 0 ? transitions : {};\n            this._sceneToTransition.set(name, { in: inTransition, out: outTransition });\n            if (isLoaderConstructor(loader)) {\n                this._sceneToLoader.set(name, new loader());\n            }\n            else if (loader) {\n                this._sceneToLoader.set(name, loader);\n            }\n        }\n        if (this.scenes[name]) {\n            this._logger.warn('Scene', name, 'already exists overwriting');\n        }\n        this.scenes[name] = sceneOrRoute;\n        return this.assertAdded(name);\n    }\n    remove(nameOrScene) {\n        if (nameOrScene instanceof Scene || isSceneConstructor(nameOrScene)) {\n            const sceneOrCtor = nameOrScene;\n            // remove scene\n            for (const key in this.scenes) {\n                if (this.scenes.hasOwnProperty(key)) {\n                    const potentialSceneOrOptions = this.scenes[key];\n                    let scene;\n                    if (potentialSceneOrOptions instanceof Scene || isSceneConstructor(potentialSceneOrOptions)) {\n                        scene = potentialSceneOrOptions;\n                    }\n                    else {\n                        scene = potentialSceneOrOptions.scene;\n                    }\n                    if (scene === sceneOrCtor) {\n                        if (key === this.currentSceneName) {\n                            throw new Error(`Cannot remove a currently active scene: ${key}`);\n                        }\n                        this._sceneToInstance.delete(key);\n                        this._sceneToTransition.delete(key);\n                        this._sceneToLoader.delete(key);\n                        delete this.scenes[key];\n                    }\n                }\n            }\n        }\n        if (typeof nameOrScene === 'string') {\n            if (nameOrScene === this.currentSceneName) {\n                throw new Error(`Cannot remove a currently active scene: ${nameOrScene}`);\n            }\n            // remove scene\n            this._sceneToInstance.delete(nameOrScene);\n            this._sceneToTransition.delete(nameOrScene);\n            this._sceneToLoader.delete(nameOrScene);\n            delete this.scenes[nameOrScene];\n        }\n    }\n    /**\n     * Go to a specific scene, and optionally override loaders and transitions\n     * @param destinationScene\n     * @param options\n     */\n    async goToScene(destinationScene, options) {\n        var _a, _b, _c, _d, _e, _f;\n        const maybeDest = this.getSceneInstance(destinationScene);\n        if (!maybeDest) {\n            this._logger.warn(`Scene ${destinationScene} does not exist! Check the name, are you sure you added it?`);\n            return;\n        }\n        const sourceSceneInstance = this.currentScene;\n        const sourceScene = this.currentSceneName;\n        const engineInputEnabled = (_b = (_a = this._engine.input) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n        this._isTransitioning = true;\n        const maybeSourceOut = (_c = this.getSceneInstance(sourceScene)) === null || _c === void 0 ? void 0 : _c.onTransition('out');\n        const maybeDestinationIn = maybeDest === null || maybeDest === void 0 ? void 0 : maybeDest.onTransition('in');\n        options = {\n            // Engine configuration then dynamic scene transitions\n            ...{ sourceOut: (_d = this._getOutTransition(this.currentSceneName)) !== null && _d !== void 0 ? _d : maybeSourceOut },\n            ...{ destinationIn: (_e = this._getInTransition(destinationScene)) !== null && _e !== void 0 ? _e : maybeDestinationIn },\n            // Goto options\n            ...options\n        };\n        const { sourceOut, destinationIn, sceneActivationData } = options;\n        const outTransition = sourceOut !== null && sourceOut !== void 0 ? sourceOut : this._getOutTransition(this.currentSceneName);\n        const inTransition = destinationIn !== null && destinationIn !== void 0 ? destinationIn : this._getInTransition(destinationScene);\n        const hideLoader = (outTransition === null || outTransition === void 0 ? void 0 : outTransition.hideLoader) || (inTransition === null || inTransition === void 0 ? void 0 : inTransition.hideLoader);\n        if (hideLoader) {\n            // Start hidden loader early and take advantage of the transition\n            // Don't await and block on a hidden loader\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.maybeLoadScene(destinationScene, hideLoader);\n        }\n        this._emitEvent('navigationstart', sourceScene, destinationScene);\n        // Run the out transition on the current scene if present\n        if (outTransition) {\n            await this.playTransition(outTransition, sourceSceneInstance);\n        }\n        // Run the loader if present\n        await this.maybeLoadScene(destinationScene, hideLoader);\n        // Give incoming transition a chance to grab info from previous\n        if (inTransition) {\n            await inTransition.onPreviousSceneDeactivate(this.currentScene);\n        }\n        // Setup the in transition on the destination scene if present\n        // this is important to it can be initialized with the\n        if (inTransition) {\n            inTransition._addToTargetScene(this._engine, maybeDest);\n        }\n        // Swap to the new scene\n        // Runs scene lifecycle init and activate\n        await this.swapScene(destinationScene, sceneActivationData);\n        this._emitEvent('navigation', sourceScene, destinationScene);\n        // Run the in transition on the new scene if present\n        if (inTransition) {\n            await this.playTransition(inTransition, maybeDest);\n        }\n        this._emitEvent('navigationend', sourceScene, destinationScene);\n        (_f = this._engine.input) === null || _f === void 0 ? void 0 : _f.toggleEnabled(engineInputEnabled);\n        this._isTransitioning = false;\n    }\n    /**\n     * Retrieves a scene instance by key if it's registered.\n     *\n     * This will call any constructors that were given as a definition\n     * @param scene\n     */\n    getSceneInstance(scene) {\n        const sceneDefinition = this.getSceneDefinition(scene);\n        if (!sceneDefinition) {\n            return undefined;\n        }\n        if (this._sceneToInstance.has(scene)) {\n            return this._sceneToInstance.get(scene);\n        }\n        if (sceneDefinition instanceof Scene) {\n            this._sceneToInstance.set(scene, sceneDefinition);\n            return sceneDefinition;\n        }\n        const newScene = new sceneDefinition();\n        this._sceneToInstance.set(scene, newScene);\n        return newScene;\n    }\n    /**\n     * Triggers scene loading if has not already been loaded\n     * @param scene\n     * @param hideLoader\n     */\n    async maybeLoadScene(scene, hideLoader = false) {\n        var _a;\n        const loader = (_a = this._getLoader(scene)) !== null && _a !== void 0 ? _a : new DefaultLoader();\n        const sceneToLoad = this.getSceneDefinition(scene);\n        const sceneToLoadInstance = this.getSceneInstance(scene);\n        if (sceneToLoad && sceneToLoadInstance && !this._loadedScenes.has(sceneToLoadInstance)) {\n            sceneToLoadInstance.onPreLoad(loader);\n            sceneToLoadInstance.events.emit('preload', { loader });\n            if (hideLoader) {\n                // Don't await a hidden loader\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                this._engine.load(loader, hideLoader);\n            }\n            else {\n                await this._engine.load(loader);\n            }\n            this._loadedScenes.add(sceneToLoadInstance);\n        }\n    }\n    /**\n     * Plays a transition in the current scene and does book keeping for input.\n     * @param transition\n     */\n    async playTransition(transition, targetScene) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (!this.isInitialized) {\n            this._deferredTransition = transition;\n            return;\n        }\n        if (transition) {\n            this.currentTransition = transition;\n            const sceneInputEnabled = (_b = (_a = targetScene.input) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n            (_c = targetScene.input) === null || _c === void 0 ? void 0 : _c.toggleEnabled(!transition.blockInput);\n            (_d = this._engine.input) === null || _d === void 0 ? void 0 : _d.toggleEnabled(!transition.blockInput);\n            this.currentTransition._addToTargetScene(this._engine, targetScene);\n            await this.currentTransition._play();\n            (_e = targetScene.input) === null || _e === void 0 ? void 0 : _e.toggleEnabled(sceneInputEnabled);\n        }\n        (_f = this.currentTransition) === null || _f === void 0 ? void 0 : _f.kill();\n        (_g = this.currentTransition) === null || _g === void 0 ? void 0 : _g.reset();\n        this.currentTransition = undefined;\n    }\n    /**\n     * Swaps the current and destination scene after performing required lifecycle events\n     * @param destinationScene\n     * @param data\n     */\n    async swapScene(destinationScene, data) {\n        const engine = this._engine;\n        // if not yet initialized defer goToScene\n        if (!this.isInitialized) {\n            this._deferredGoto = destinationScene;\n            return;\n        }\n        const maybeDest = this.getSceneInstance(destinationScene);\n        if (maybeDest) {\n            const previousScene = this.currentScene;\n            const nextScene = maybeDest;\n            this._logger.debug('Going to scene:', destinationScene);\n            // only deactivate when initialized\n            if (this.currentScene.isInitialized) {\n                const context = { engine, previousScene, nextScene };\n                await this.currentScene._deactivate(context);\n                this.currentScene.events.emit('deactivate', new DeactivateEvent(context, this.currentScene));\n                this.currentScene.input.clear();\n            }\n            // wait for the scene to be loaded if needed\n            const destLoader = this._sceneToLoader.get(destinationScene);\n            await (destLoader === null || destLoader === void 0 ? void 0 : destLoader.areResourcesLoaded());\n            // set current scene to new one\n            this.currentScene = nextScene;\n            this.currentSceneName = destinationScene;\n            engine.screen.setCurrentCamera(nextScene.camera);\n            // initialize the current scene if has not been already\n            await this.currentScene._initialize(engine);\n            const context = { engine, previousScene, nextScene, data };\n            await this.currentScene._activate(context);\n            this.currentScene.events.emit('activate', new ActivateEvent(context, this.currentScene));\n        }\n        else {\n            this._logger.error('Scene', destinationScene, 'does not exist!');\n        }\n    }\n    _emitEvent(eventName, sourceScene, destinationScene) {\n        const source = this.getSceneDefinition(sourceScene);\n        const dest = this.getSceneDefinition(destinationScene);\n        this.events.emit(eventName, {\n            sourceScene: source,\n            sourceName: sourceScene,\n            destinationScene: dest,\n            destinationName: destinationScene\n        });\n    }\n}\n\n;// ./Context.ts\n/**\n * Creates a injectable context that can be retrieved later with `useContext(context)`\n *\n * Example\n * ```typescript\n *\n * const AppContext = createContext({some: 'value'});\n * context.scope(val, () => {\n *    const value = useContext(AppContext);\n * })\n *\n * ```\n */\nfunction createContext() {\n    const ctx = {\n        scope: (value, cb) => {\n            const old = ctx.value;\n            ctx.value = value;\n            try {\n                return cb();\n            }\n            catch (e) {\n                throw e;\n            }\n            finally {\n                ctx.value = old;\n            }\n        },\n        value: undefined\n    };\n    return ctx;\n}\n/**\n * Retrieves the value from the current context\n */\nfunction useContext(context) {\n    return context.value;\n}\n\n;// ./GarbageCollector.ts\nconst DefaultGarbageCollectionOptions = {\n    textureCollectInterval: 60000\n    // TODO future work to integrate the font and text configuration, refactor existing collection mechanism\n    // fontCollectInterval: 60_000,\n    // textMeasurementCollectInterval: 60_000,\n};\nclass GarbageCollector {\n    constructor(options) {\n        this.options = options;\n        this._running = false;\n        this._collectionMap = new Map();\n        this._collectors = new Map();\n        /**\n         * Runs the collection loop to cleanup any stale resources given the registered collect handlers\n         */\n        this.collectStaleResources = (deadline) => {\n            if (!this._running) {\n                return;\n            }\n            for (const [type, [collector, timeoutInterval]] of this._collectors.entries()) {\n                const now = this.options.getTimestamp();\n                for (const [resource, [resourceType, time]] of this._collectionMap.entries()) {\n                    if (type !== resourceType || time + timeoutInterval >= now) {\n                        continue;\n                    }\n                    const collected = collector(resource);\n                    if (collected) {\n                        this._collectionMap.delete(resource);\n                    }\n                }\n            }\n            this._collectHandle = requestIdleCallback(this.collectStaleResources);\n        };\n    }\n    /**\n     *\n     * @param type Resource type\n     * @param timeoutInterval If resource type exceeds interval in milliseconds collect() is called\n     * @param collect Collection implementation, returns true if collected\n     */\n    registerCollector(type, timeoutInterval, collect) {\n        this._collectors.set(type, [collect, timeoutInterval]);\n    }\n    /**\n     * Add a resource to be tracked for collection\n     * @param type\n     * @param resource\n     */\n    addCollectableResource(type, resource) {\n        this._collectionMap.set(resource, [type, this.options.getTimestamp()]);\n    }\n    /**\n     * Update the resource last used timestamp preventing collection\n     * @param resource\n     */\n    touch(resource) {\n        const collectionData = this._collectionMap.get(resource);\n        if (collectionData) {\n            this._collectionMap.set(resource, [collectionData[0], this.options.getTimestamp()]);\n        }\n    }\n    /**\n     * Force collect all resources, useful for shutting down a game\n     * or if you know that you will not use anything you've allocated before now\n     */\n    forceCollectAll() {\n        for (const [_, [collector]] of this._collectors.entries()) {\n            for (const [resource] of this._collectionMap.entries()) {\n                const collected = collector(resource);\n                if (collected) {\n                    this._collectionMap.delete(resource);\n                }\n            }\n        }\n    }\n    /**\n     * Starts the garbage collection loop\n     */\n    start() {\n        this._running = true;\n        this.collectStaleResources();\n    }\n    /**\n     * Stops the garbage collection loop\n     */\n    stop() {\n        this._running = false;\n        cancelIdleCallback(this._collectHandle);\n    }\n}\n\n;// ./Engine.ts\n\n\n\n\n\n\npolyfill();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EngineEvents = {\n    FallbackGraphicsContext: 'fallbackgraphicscontext',\n    Initialize: 'initialize',\n    Visible: 'visible',\n    Hidden: 'hidden',\n    Start: 'start',\n    Stop: 'stop',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    PreFrame: 'preframe',\n    PostFrame: 'postframe',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw'\n};\n/**\n * Enum representing the different mousewheel event bubble prevention\n */\nvar ScrollPreventionMode;\n(function (ScrollPreventionMode) {\n    /**\n     * Do not prevent any page scrolling\n     */\n    ScrollPreventionMode[ScrollPreventionMode[\"None\"] = 0] = \"None\";\n    /**\n     * Prevent page scroll if mouse is over the game canvas\n     */\n    ScrollPreventionMode[ScrollPreventionMode[\"Canvas\"] = 1] = \"Canvas\";\n    /**\n     * Prevent all page scrolling via mouse wheel\n     */\n    ScrollPreventionMode[ScrollPreventionMode[\"All\"] = 2] = \"All\";\n})(ScrollPreventionMode || (ScrollPreventionMode = {}));\n/**\n * The Excalibur Engine\n *\n * The {@apilink Engine} is the main driver for a game. It is responsible for\n * starting/stopping the game, maintaining state, transmitting events,\n * loading resources, and managing the scene.\n */\nclass Engine {\n    static useEngine() {\n        const value = useContext(Engine.Context);\n        if (!value) {\n            throw new Error('Cannot inject engine with `useEngine()`, `useEngine()` was called outside of Engine lifecycle scope.');\n        }\n        return value;\n    }\n    /**\n     * The width of the game canvas in pixels (physical width component of the\n     * resolution of the canvas element)\n     */\n    get canvasWidth() {\n        return this.screen.canvasWidth;\n    }\n    /**\n     * Returns half width of the game canvas in pixels (half physical width component)\n     */\n    get halfCanvasWidth() {\n        return this.screen.halfCanvasWidth;\n    }\n    /**\n     * The height of the game canvas in pixels, (physical height component of\n     * the resolution of the canvas element)\n     */\n    get canvasHeight() {\n        return this.screen.canvasHeight;\n    }\n    /**\n     * Returns half height of the game canvas in pixels (half physical height component)\n     */\n    get halfCanvasHeight() {\n        return this.screen.halfCanvasHeight;\n    }\n    /**\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawWidth() {\n        return this.screen.drawWidth;\n    }\n    /**\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawWidth() {\n        return this.screen.halfDrawWidth;\n    }\n    /**\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawHeight() {\n        return this.screen.drawHeight;\n    }\n    /**\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawHeight() {\n        return this.screen.halfDrawHeight;\n    }\n    /**\n     * Returns whether excalibur detects the current screen to be HiDPI\n     */\n    get isHiDpi() {\n        return this.screen.isHiDpi;\n    }\n    /**\n     * Access {@apilink stats} that holds frame statistics.\n     */\n    get stats() {\n        return this.debug.stats;\n    }\n    /**\n     * The current {@apilink Scene} being drawn and updated on screen\n     */\n    get currentScene() {\n        return this.director.currentScene;\n    }\n    /**\n     * The current {@apilink Scene} being drawn and updated on screen\n     */\n    get currentSceneName() {\n        return this.director.currentSceneName;\n    }\n    /**\n     * The default {@apilink Scene} of the game, use {@apilink Engine.goToScene} to transition to different scenes.\n     */\n    get rootScene() {\n        return this.director.rootScene;\n    }\n    /**\n     * Contains all the scenes currently registered with Excalibur\n     */\n    get scenes() {\n        return this.director.scenes;\n    }\n    /**\n     * Indicates whether the engine is set to fullscreen or not\n     */\n    get isFullscreen() {\n        return this.screen.isFullScreen;\n    }\n    /**\n     * Indicates the current {@apilink DisplayMode} of the engine.\n     */\n    get displayMode() {\n        return this.screen.displayMode;\n    }\n    /**\n     * Returns the calculated pixel ration for use in rendering\n     */\n    get pixelRatio() {\n        return this.screen.pixelRatio;\n    }\n    get isDebug() {\n        return this._isDebug;\n    }\n    /**\n     * Hints the graphics context to truncate fractional world space coordinates\n     */\n    get snapToPixel() {\n        return this.graphicsContext.snapToPixel;\n    }\n    set snapToPixel(shouldSnapToPixel) {\n        this.graphicsContext.snapToPixel = shouldSnapToPixel;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Creates a new game using the given {@apilink EngineOptions}. By default, if no options are provided,\n     * the game will be rendered full screen (taking up all available browser window space).\n     * You can customize the game rendering through {@apilink EngineOptions}.\n     *\n     * Example:\n     *\n     * ```js\n     * var game = new ex.Engine({\n     *   width: 0, // the width of the canvas\n     *   height: 0, // the height of the canvas\n     *   enableCanvasTransparency: true, // the transparencySection of the canvas\n     *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\n     *   displayMode: ex.DisplayMode.FullScreen, // the display mode\n     *   pointerScope: ex.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\n     *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\n     * });\n     *\n     * // call game.start, which is a Promise\n     * game.start().then(function () {\n     *   // ready, set, go!\n     * });\n     * ```\n     */\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        /**\n         * Anything run under scope can use `useEngine()` to inject the current engine\n         * @param cb\n         */\n        this.scope = (cb) => Engine.Context.scope(this, cb);\n        /**\n         * Current Excalibur version string\n         *\n         * Useful for plugins or other tools that need to know what features are available\n         */\n        this.version = EX_VERSION;\n        /**\n         * Listen to and emit events on the Engine\n         */\n        this.events = new EventEmitter();\n        /**\n         * Optionally set the maximum fps if not set Excalibur will go as fast as the device allows.\n         *\n         * You may want to constrain max fps if your game cannot maintain fps consistently, it can look and feel better to have a 30fps game than\n         * one that bounces between 30fps and 60fps\n         */\n        this.maxFps = Number.POSITIVE_INFINITY;\n        this._inputEnabled = true;\n        this._suppressPlayButton = false;\n        /**\n         * Indicates whether audio should be paused when the game is no longer visible.\n         */\n        this.pauseAudioWhenHidden = true;\n        /**\n         * Indicates whether the engine should draw with debug information\n         */\n        this._isDebug = false;\n        /**\n         * Sets the Transparency for the engine.\n         */\n        this.enableCanvasTransparency = true;\n        /**\n         * The action to take when a fatal exception is thrown\n         */\n        this.onFatalException = (e) => {\n            Logger.getInstance().fatal(e, e.stack);\n        };\n        this._toaster = new Toaster();\n        this._timescale = 1.0;\n        this._isInitialized = false;\n        this._originalOptions = {};\n        this._handleWebGLContextLost = (e) => {\n            var _a;\n            e.preventDefault();\n            this.clock.stop();\n            this._logger.fatalOnce('WebGL Graphics Lost', e);\n            const container = document.createElement('div');\n            container.id = 'ex-webgl-graphics-context-lost';\n            container.style.position = 'absolute';\n            container.style.zIndex = '99';\n            container.style.left = '50%';\n            container.style.top = '50%';\n            container.style.display = 'flex';\n            container.style.flexDirection = 'column';\n            container.style.transform = 'translate(-50%, -50%)';\n            container.style.backgroundColor = 'white';\n            container.style.padding = '10px';\n            container.style.borderStyle = 'solid 1px';\n            const div = document.createElement('div');\n            div.innerHTML = `\r\n      <h1>There was an issue rendering, please refresh the page.</h1>\r\n      <div>\r\n        <p>WebGL Graphics Context Lost</p>\r\n\r\n        <button id=\"ex-webgl-graphics-reload\">Refresh Page</button>\r\n\r\n        <p>There are a few reasons this might happen:</p>\r\n        <ul>\r\n          <li>Two or more pages are placing a high demand on the GPU</li>\r\n          <li>Another page or operation has stalled the GPU and the browser has decided to reset the GPU</li>\r\n          <li>The computer has multiple GPUs and the user has switched between them</li>\r\n          <li>Graphics driver has crashed or restarted</li>\r\n          <li>Graphics driver was updated</li>\r\n        </ul>\r\n      </div>\r\n    `;\n            container.appendChild(div);\n            if ((_a = this.canvas) === null || _a === void 0 ? void 0 : _a.parentElement) {\n                this.canvas.parentElement.appendChild(container);\n                const button = div.querySelector('#ex-webgl-graphics-reload');\n                button === null || button === void 0 ? void 0 : button.addEventListener('click', () => location.reload());\n            }\n        };\n        this._performanceThresholdTriggered = false;\n        this._fpsSamples = [];\n        this._disposed = false;\n        this._isLoading = false;\n        this._hideLoader = false;\n        this._isReadyFuture = new Future();\n        /**\n         * Returns the current frames elapsed milliseconds\n         */\n        this.currentFrameElapsedMs = 0;\n        /**\n         * Returns the current frame lag when in fixed update mode\n         */\n        this.currentFrameLagMs = 0;\n        this._lagMs = 0;\n        this._screenShotRequests = [];\n        options = { ...Engine._DEFAULT_ENGINE_OPTIONS, ...options };\n        this._originalOptions = options;\n        Flags.freeze();\n        // Initialize browser events facade\n        this.browser = new BrowserEvents(window, document);\n        // Check compatibility\n        const detector = new Detector();\n        if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\n            const message = document.createElement('div');\n            message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\n            document.body.appendChild(message);\n            detector.failedTests.forEach(function (test) {\n                const testMessage = document.createElement('div');\n                testMessage.innerText = 'Browser feature missing ' + test;\n                document.body.appendChild(testMessage);\n            });\n            if (options.canvasElementId) {\n                const canvas = document.getElementById(options.canvasElementId);\n                if (canvas) {\n                    canvas.parentElement.removeChild(canvas);\n                }\n            }\n            return;\n        }\n        else {\n            this._compatible = true;\n        }\n        // Use native console API for color fun\n        // eslint-disable-next-line no-console\n        if (console.log && !options.suppressConsoleBootMessage) {\n            // eslint-disable-next-line no-console\n            console.log(`%cPowered by Excalibur.js (v${EX_VERSION})`, 'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;');\n            // eslint-disable-next-line no-console\n            console.log('\\n\\\r\n      /| ________________\\n\\\r\nO|===|* >________________>\\n\\\r\n      \\\\|');\n            // eslint-disable-next-line no-console\n            console.log('Visit', 'http://excaliburjs.com', 'for more information');\n        }\n        // Suppress play button\n        if (options.suppressPlayButton) {\n            this._suppressPlayButton = true;\n        }\n        this._logger = Logger.getInstance();\n        // If debug is enabled, let's log browser features to the console.\n        if (this._logger.defaultLevel === LogLevel.Debug) {\n            detector.logBrowserFeatures();\n        }\n        this._logger.debug('Building engine...');\n        if (options.garbageCollection === true) {\n            this.garbageCollectorConfig = {\n                ...DefaultGarbageCollectionOptions\n            };\n        }\n        else if (options.garbageCollection === false) {\n            this._logger.warn('WebGL Garbage Collection Disabled!!! If you leak any images over time your game will crash when GPU memory is exhausted');\n            this.garbageCollectorConfig = null;\n        }\n        else {\n            this.garbageCollectorConfig = {\n                ...DefaultGarbageCollectionOptions,\n                ...options.garbageCollection\n            };\n        }\n        this._garbageCollector = new GarbageCollector({ getTimestamp: Date.now });\n        this.canvasElementId = options.canvasElementId;\n        if (options.canvasElementId) {\n            this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\n            //test for existence of element\n            if (document.getElementById(options.canvasElementId) === null) {\n                throw new Error('Cannot find existing element in the DOM, please ensure element is created prior to engine creation.');\n            }\n            this.canvas = document.getElementById(options.canvasElementId);\n        }\n        else if (options.canvasElement) {\n            this._logger.debug('Using Canvas element specified:', options.canvasElement);\n            this.canvas = options.canvasElement;\n        }\n        else {\n            this._logger.debug('Using generated canvas element');\n            this.canvas = document.createElement('canvas');\n        }\n        if (this.canvas && !options.enableCanvasContextMenu) {\n            this.canvas.addEventListener('contextmenu', (evt) => {\n                evt.preventDefault();\n            });\n        }\n        let displayMode = (_a = options.displayMode) !== null && _a !== void 0 ? _a : DisplayMode.Fixed;\n        if ((options.width && options.height) || options.viewport) {\n            if (options.displayMode === undefined) {\n                displayMode = DisplayMode.Fixed;\n            }\n            this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\n        }\n        else if (!options.displayMode) {\n            this._logger.debug('Engine viewport is fit');\n            displayMode = DisplayMode.FitScreen;\n        }\n        this.grabWindowFocus = options.grabWindowFocus;\n        this.pointerScope = options.pointerScope;\n        this._originalDisplayMode = displayMode;\n        let pixelArtSampler;\n        let uvPadding;\n        let nativeContextAntialiasing;\n        let canvasImageRendering;\n        let filtering;\n        let multiSampleAntialiasing;\n        if (typeof options.antialiasing === 'object') {\n            ({ pixelArtSampler, nativeContextAntialiasing, multiSampleAntialiasing, filtering, canvasImageRendering } = {\n                ...(options.pixelArt ? DefaultPixelArtOptions : DefaultAntialiasOptions),\n                ...options.antialiasing\n            });\n        }\n        else {\n            pixelArtSampler = !!options.pixelArt;\n            nativeContextAntialiasing = false;\n            multiSampleAntialiasing = options.antialiasing;\n            canvasImageRendering = options.antialiasing ? 'auto' : 'pixelated';\n            filtering = options.antialiasing ? ImageFiltering.Blended : ImageFiltering.Pixel;\n        }\n        if (nativeContextAntialiasing && multiSampleAntialiasing) {\n            this._logger.warnOnce(`Cannot use antialias setting nativeContextAntialiasing and multiSampleAntialiasing` +\n                ` at the same time, they are incompatible settings. If you aren\\'t sure use multiSampleAntialiasing`);\n        }\n        if (options.pixelArt) {\n            uvPadding = 0.25;\n        }\n        if (!options.antialiasing || filtering === ImageFiltering.Pixel) {\n            uvPadding = 0;\n        }\n        // Override with any user option, if non default to .25 for pixel art, 0.01 for everything else\n        uvPadding = (_c = (_b = options.uvPadding) !== null && _b !== void 0 ? _b : uvPadding) !== null && _c !== void 0 ? _c : 0.01;\n        // Canvas 2D fallback can be flagged on\n        let useCanvasGraphicsContext = Flags.isEnabled('use-canvas-context');\n        if (!useCanvasGraphicsContext) {\n            // Attempt webgl first\n            try {\n                this.graphicsContext = new ExcaliburGraphicsContextWebGL({\n                    canvasElement: this.canvas,\n                    enableTransparency: this.enableCanvasTransparency,\n                    pixelArtSampler: pixelArtSampler,\n                    antialiasing: nativeContextAntialiasing,\n                    multiSampleAntialiasing: multiSampleAntialiasing,\n                    uvPadding: uvPadding,\n                    powerPreference: options.powerPreference,\n                    backgroundColor: options.backgroundColor,\n                    snapToPixel: options.snapToPixel,\n                    useDrawSorting: options.useDrawSorting,\n                    garbageCollector: this.garbageCollectorConfig\n                        ? {\n                            garbageCollector: this._garbageCollector,\n                            collectionInterval: this.garbageCollectorConfig.textureCollectInterval\n                        }\n                        : null,\n                    handleContextLost: (_d = options.handleContextLost) !== null && _d !== void 0 ? _d : this._handleWebGLContextLost,\n                    handleContextRestored: options.handleContextRestored\n                });\n            }\n            catch (e) {\n                this._logger.warn(`Excalibur could not load webgl for some reason (${e.message}) and loaded a Canvas 2D fallback. ` +\n                    `Some features of Excalibur will not work in this mode. \\n\\n` +\n                    'Read more about this issue at https://excaliburjs.com/docs/performance');\n                // fallback to canvas in case of failure\n                useCanvasGraphicsContext = true;\n            }\n        }\n        if (useCanvasGraphicsContext) {\n            this.graphicsContext = new ExcaliburGraphicsContext2DCanvas({\n                canvasElement: this.canvas,\n                enableTransparency: this.enableCanvasTransparency,\n                antialiasing: nativeContextAntialiasing,\n                backgroundColor: options.backgroundColor,\n                snapToPixel: options.snapToPixel,\n                useDrawSorting: options.useDrawSorting\n            });\n        }\n        this.screen = new Screen({\n            canvas: this.canvas,\n            context: this.graphicsContext,\n            antialiasing: nativeContextAntialiasing,\n            canvasImageRendering: canvasImageRendering,\n            browser: this.browser,\n            viewport: (_e = options.viewport) !== null && _e !== void 0 ? _e : (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\n            resolution: options.resolution,\n            displayMode,\n            pixelRatio: options.suppressHiDPIScaling ? 1 : (_f = options.pixelRatio) !== null && _f !== void 0 ? _f : null\n        });\n        // TODO REMOVE STATIC!!!\n        // Set default filtering based on antialiasing\n        TextureLoader.filtering = filtering;\n        if (options.backgroundColor) {\n            this.backgroundColor = options.backgroundColor.clone();\n        }\n        this.maxFps = (_g = options.maxFps) !== null && _g !== void 0 ? _g : this.maxFps;\n        this.fixedUpdateTimestep = (_h = options.fixedUpdateTimestep) !== null && _h !== void 0 ? _h : this.fixedUpdateTimestep;\n        this.fixedUpdateFps = (_j = options.fixedUpdateFps) !== null && _j !== void 0 ? _j : this.fixedUpdateFps;\n        this.fixedUpdateTimestep = this.fixedUpdateTimestep || 1000 / this.fixedUpdateFps;\n        this.clock = new StandardClock({\n            maxFps: this.maxFps,\n            tick: this._mainloop.bind(this),\n            onFatalException: (e) => this.onFatalException(e)\n        });\n        this.enableCanvasTransparency = options.enableCanvasTransparency;\n        if (typeof options.physics === 'boolean') {\n            this.physics = {\n                ...getDefaultPhysicsConfig(),\n                enabled: options.physics\n            };\n        }\n        else {\n            this.physics = {\n                ...getDefaultPhysicsConfig()\n            };\n            mergeDeep(this.physics, options.physics);\n        }\n        this.debug = new DebugConfig(this);\n        this.director = new Director(this, options.scenes);\n        this._initialize(options);\n        window.___EXCALIBUR_DEVTOOL = this;\n        Engine.InstanceCount++;\n    }\n    _monitorPerformanceThresholdAndTriggerFallback() {\n        const { allow } = this._originalOptions.configurePerformanceCanvas2DFallback;\n        let { threshold, showPlayerMessage } = this._originalOptions.configurePerformanceCanvas2DFallback;\n        if (threshold === undefined) {\n            threshold = Engine._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold;\n        }\n        if (showPlayerMessage === undefined) {\n            showPlayerMessage = Engine._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage;\n        }\n        if (!Flags.isEnabled('use-canvas-context') && allow && this.ready && !this._performanceThresholdTriggered) {\n            // Calculate Average fps for last X number of frames after start\n            if (this._fpsSamples.length === threshold.numberOfFrames) {\n                this._fpsSamples.splice(0, 1);\n            }\n            this._fpsSamples.push(this.clock.fpsSampler.fps);\n            let total = 0;\n            for (let i = 0; i < this._fpsSamples.length; i++) {\n                total += this._fpsSamples[i];\n            }\n            const average = total / this._fpsSamples.length;\n            if (this._fpsSamples.length === threshold.numberOfFrames) {\n                if (average <= threshold.fps) {\n                    this._performanceThresholdTriggered = true;\n                    this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.\\n` +\n                        \"this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.\\n\\n\" +\n                        'If in Chrome:\\n' +\n                        '  * Visit Settings > Advanced > System, and ensure \"Use Hardware Acceleration\" is checked.\\n' +\n                        '  * Visit chrome://flags/#ignore-gpu-blocklist and ensure \"Override software rendering list\" is \"enabled\"\\n' +\n                        'If in Firefox, visit about:config\\n' +\n                        '  * Ensure webgl.disabled = false\\n' +\n                        '  * Ensure webgl.force-enabled = true\\n' +\n                        '  * Ensure layers.acceleration.force-enabled = true\\n\\n' +\n                        'Read more about this issue at https://excaliburjs.com/docs/performance');\n                    if (showPlayerMessage) {\n                        this._toaster.toast('Excalibur is encountering performance issues. ' +\n                            \"It's possible that your browser doesn't have hardware acceleration enabled. \" +\n                            'Visit [LINK] for more information and potential solutions.', 'https://excaliburjs.com/docs/performance');\n                    }\n                    this.useCanvas2DFallback();\n                    this.emit('fallbackgraphicscontext', this.graphicsContext);\n                }\n            }\n        }\n    }\n    /**\n     * Switches the engine's graphics context to the 2D Canvas.\n     * @warning Some features of Excalibur will not work in this mode.\n     */\n    useCanvas2DFallback() {\n        var _a, _b, _c;\n        // Swap out the canvas\n        const newCanvas = this.canvas.cloneNode(false);\n        this.canvas.parentNode.replaceChild(newCanvas, this.canvas);\n        this.canvas = newCanvas;\n        const options = { ...this._originalOptions, antialiasing: this.screen.antialiasing };\n        const displayMode = this._originalDisplayMode;\n        // New graphics context\n        this.graphicsContext = new ExcaliburGraphicsContext2DCanvas({\n            canvasElement: this.canvas,\n            enableTransparency: this.enableCanvasTransparency,\n            antialiasing: options.antialiasing,\n            backgroundColor: options.backgroundColor,\n            snapToPixel: options.snapToPixel,\n            useDrawSorting: options.useDrawSorting\n        });\n        // Reset screen\n        if (this.screen) {\n            this.screen.dispose();\n        }\n        this.screen = new Screen({\n            canvas: this.canvas,\n            context: this.graphicsContext,\n            antialiasing: (_a = options.antialiasing) !== null && _a !== void 0 ? _a : true,\n            browser: this.browser,\n            viewport: (_b = options.viewport) !== null && _b !== void 0 ? _b : (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\n            resolution: options.resolution,\n            displayMode,\n            pixelRatio: options.suppressHiDPIScaling ? 1 : (_c = options.pixelRatio) !== null && _c !== void 0 ? _c : null\n        });\n        this.screen.setCurrentCamera(this.currentScene.camera);\n        // Reset pointers\n        this.input.pointers.detach();\n        const pointerTarget = options && options.pointerScope === PointerScope.Document ? document : this.canvas;\n        this.input.pointers = this.input.pointers.recreate(pointerTarget, this);\n        this.input.pointers.init();\n    }\n    /**\n     * Attempts to completely clean up excalibur resources, including removing the canvas from the dom.\n     *\n     * To start again you will need to new up an Engine.\n     */\n    dispose() {\n        if (!this._disposed) {\n            this._disposed = true;\n            this.stop();\n            this._garbageCollector.forceCollectAll();\n            this.input.toggleEnabled(false);\n            this.canvas.parentNode.removeChild(this.canvas);\n            this.canvas = null;\n            this.screen.dispose();\n            this.graphicsContext.dispose();\n            this.graphicsContext = null;\n            Engine.InstanceCount--;\n        }\n    }\n    isDisposed() {\n        return this._disposed;\n    }\n    /**\n     * Returns a BoundingBox of the top left corner of the screen\n     * and the bottom right corner of the screen.\n     */\n    getWorldBounds() {\n        return this.screen.getWorldBounds();\n    }\n    /**\n     * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\n     */\n    get timescale() {\n        return this._timescale;\n    }\n    /**\n     * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\n     * when using time-based movement.\n     */\n    set timescale(value) {\n        if (value < 0) {\n            Logger.getInstance().warnOnce('engine.timescale to a value less than 0 are ignored');\n            return;\n        }\n        this._timescale = value;\n    }\n    /**\n     * Adds a {@apilink Timer} to the {@apilink currentScene}.\n     * @param timer  The timer to add to the {@apilink currentScene}.\n     */\n    addTimer(timer) {\n        return this.currentScene.addTimer(timer);\n    }\n    /**\n     * Removes a {@apilink Timer} from the {@apilink currentScene}.\n     * @param timer  The timer to remove to the {@apilink currentScene}.\n     */\n    removeTimer(timer) {\n        return this.currentScene.removeTimer(timer);\n    }\n    /**\n     * Adds a {@apilink Scene} to the engine, think of scenes in Excalibur as you\n     * would levels or menus.\n     * @param key  The name of the scene, must be unique\n     * @param scene The scene to add to the engine\n     */\n    addScene(key, scene) {\n        this.director.add(key, scene);\n        return this;\n    }\n    /**\n     * @internal\n     */\n    removeScene(entity) {\n        this.director.remove(entity);\n    }\n    add(entity) {\n        if (arguments.length === 2) {\n            this.director.add(arguments[0], arguments[1]);\n            return;\n        }\n        const maybeDeferred = this.director.getDeferredScene();\n        if (maybeDeferred instanceof Scene) {\n            maybeDeferred.add(entity);\n        }\n        else {\n            this.currentScene.add(entity);\n        }\n    }\n    remove(entity) {\n        if (entity instanceof Entity) {\n            this.currentScene.remove(entity);\n        }\n        if (entity instanceof Scene || isSceneConstructor(entity)) {\n            this.removeScene(entity);\n        }\n        if (typeof entity === 'string') {\n            this.removeScene(entity);\n        }\n    }\n    /**\n     * Changes the current scene with optionally supplied:\n     * * Activation data\n     * * Transitions\n     * * Loaders\n     *\n     * Example:\n     * ```typescript\n     * game.goToScene('myScene', {\n     *   sceneActivationData: {any: 'thing at all'},\n     *   destinationIn: new FadeInOut({duration: 1000, direction: 'in'}),\n     *   sourceOut: new FadeInOut({duration: 1000, direction: 'out'}),\n     *   loader: MyLoader\n     * });\n     * ```\n     *\n     * Scenes are defined in the Engine constructor\n     * ```typescript\n     * const engine = new ex.Engine({\n        scenes: {...}\n      });\n     * ```\n     * Or by adding dynamically\n     *\n     * ```typescript\n     * engine.addScene('myScene', new ex.Scene());\n     * ```\n     * @param destinationScene\n     * @param options\n     */\n    async goToScene(destinationScene, options) {\n        await this.scope(async () => {\n            await this.director.goToScene(destinationScene, options);\n        });\n    }\n    /**\n     * Transforms the current x, y from screen coordinates to world coordinates\n     * @param point  Screen coordinate to convert\n     */\n    screenToWorldCoordinates(point) {\n        return this.screen.screenToWorldCoordinates(point);\n    }\n    /**\n     * Transforms a world coordinate, to a screen coordinate\n     * @param point  World coordinate to convert\n     */\n    worldToScreenCoordinates(point) {\n        return this.screen.worldToScreenCoordinates(point);\n    }\n    /**\n     * Initializes the internal canvas, rendering context, display mode, and native event listeners\n     */\n    _initialize(options) {\n        var _a, _b;\n        this.pageScrollPreventionMode = options.scrollPreventionMode;\n        // initialize inputs\n        const pointerTarget = options && options.pointerScope === PointerScope.Document ? document : this.canvas;\n        const grabWindowFocus = (_b = (_a = this._originalOptions) === null || _a === void 0 ? void 0 : _a.grabWindowFocus) !== null && _b !== void 0 ? _b : true;\n        this.input = new InputHost({\n            pointerTarget,\n            grabWindowFocus,\n            engine: this\n        });\n        this.inputMapper = this.input.inputMapper;\n        // Issue #385 make use of the visibility api\n        // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\n        this.browser.document.on('visibilitychange', () => {\n            if (document.visibilityState === 'hidden') {\n                this.events.emit('hidden', new HiddenEvent(this));\n                this._logger.debug('Window hidden');\n            }\n            else if (document.visibilityState === 'visible') {\n                this.events.emit('visible', new VisibleEvent(this));\n                this._logger.debug('Window visible');\n            }\n        });\n        if (!this.canvasElementId && !options.canvasElement) {\n            document.body.appendChild(this.canvas);\n        }\n    }\n    toggleInputEnabled(enabled) {\n        this._inputEnabled = enabled;\n        this.input.toggleEnabled(this._inputEnabled);\n    }\n    onInitialize(engine) {\n        // Override me\n    }\n    /**\n     * Gets whether the actor is Initialized\n     */\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    async _overrideInitialize(engine) {\n        if (!this.isInitialized) {\n            await this.director.onInitialize();\n            await this.onInitialize(engine);\n            this.events.emit('initialize', new InitializeEvent(engine, this));\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * Updates the entire state of the game\n     * @param elapsed  Number of milliseconds elapsed since the last update.\n     */\n    _update(elapsed) {\n        var _a;\n        if (this._isLoading) {\n            // suspend updates until loading is finished\n            (_a = this._loader) === null || _a === void 0 ? void 0 : _a.onUpdate(this, elapsed);\n            // Update input listeners\n            this.input.update();\n            return;\n        }\n        // Publish preupdate events\n        this.clock.__runScheduledCbs('preupdate');\n        this._preupdate(elapsed);\n        // process engine level events\n        this.currentScene.update(this, elapsed);\n        // Update graphics postprocessors\n        this.graphicsContext.updatePostProcessors(elapsed);\n        // Publish update event\n        this.clock.__runScheduledCbs('postupdate');\n        this._postupdate(elapsed);\n        // Update input listeners\n        this.input.update();\n    }\n    /**\n     * @internal\n     */\n    _preupdate(elapsed) {\n        this.emit('preupdate', new PreUpdateEvent(this, elapsed, this));\n        this.onPreUpdate(this, elapsed);\n    }\n    /**\n     * Safe to override method\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPreUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * @internal\n     */\n    _postupdate(elapsed) {\n        this.emit('postupdate', new PostUpdateEvent(this, elapsed, this));\n        this.onPostUpdate(this, elapsed);\n    }\n    /**\n     * Safe to override method\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPostUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Draws the entire game\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    _draw(elapsed) {\n        var _a, _b;\n        // Use scene background color if present, fallback to engine\n        this.graphicsContext.backgroundColor = (_a = this.currentScene.backgroundColor) !== null && _a !== void 0 ? _a : this.backgroundColor;\n        this.graphicsContext.beginDrawLifecycle();\n        this.graphicsContext.clear();\n        this.clock.__runScheduledCbs('predraw');\n        this._predraw(this.graphicsContext, elapsed);\n        // Drawing nothing else while loading\n        if (this._isLoading) {\n            if (!this._hideLoader) {\n                (_b = this._loader) === null || _b === void 0 ? void 0 : _b.canvas.draw(this.graphicsContext, 0, 0);\n                this.clock.__runScheduledCbs('postdraw');\n                this.graphicsContext.flush();\n                this.graphicsContext.endDrawLifecycle();\n            }\n            return;\n        }\n        this.currentScene.draw(this.graphicsContext, elapsed);\n        this.clock.__runScheduledCbs('postdraw');\n        this._postdraw(this.graphicsContext, elapsed);\n        // Flush any pending drawings\n        this.graphicsContext.flush();\n        this.graphicsContext.endDrawLifecycle();\n        this._checkForScreenShots();\n    }\n    /**\n     * @internal\n     */\n    _predraw(ctx, elapsed) {\n        this.emit('predraw', new PreDrawEvent(ctx, elapsed, this));\n        this.onPreDraw(ctx, elapsed);\n    }\n    /**\n     * Safe to override method to hook into pre draw\n     * @param ctx {@link ExcaliburGraphicsContext} for drawing\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPreDraw(ctx, elapsed) {\n        // Override me\n    }\n    /**\n     * @internal\n     */\n    _postdraw(ctx, elapsed) {\n        this.emit('postdraw', new PostDrawEvent(ctx, elapsed, this));\n        this.onPostDraw(ctx, elapsed);\n    }\n    /**\n     * Safe to override method to hook into pre draw\n     * @param ctx {@link ExcaliburGraphicsContext} for drawing\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPostDraw(ctx, elapsed) {\n        // Override me\n    }\n    /**\n     * Enable or disable Excalibur debugging functionality.\n     * @param toggle a value that debug drawing will be changed to\n     */\n    showDebug(toggle) {\n        this._isDebug = toggle;\n    }\n    /**\n     * Toggle Excalibur debugging functionality.\n     */\n    toggleDebug() {\n        this._isDebug = !this._isDebug;\n        return this._isDebug;\n    }\n    /**\n     * Returns true when loading is totally complete and the player has clicked start\n     */\n    get loadingComplete() {\n        return !this._isLoading;\n    }\n    get ready() {\n        return this._isReadyFuture.isCompleted;\n    }\n    isReady() {\n        return this._isReadyFuture.promise;\n    }\n    async start(sceneNameOrLoader, options) {\n        await this.scope(async () => {\n            if (!this._compatible) {\n                throw new Error('Excalibur is incompatible with your browser');\n            }\n            this._isLoading = true;\n            let loader;\n            if (sceneNameOrLoader instanceof DefaultLoader) {\n                loader = sceneNameOrLoader;\n            }\n            else if (typeof sceneNameOrLoader === 'string') {\n                this.director.configureStart(sceneNameOrLoader, options);\n                loader = this.director.mainLoader;\n            }\n            // Start the excalibur clock which drives the mainloop\n            this._logger.debug('Starting game clock...');\n            this.browser.resume();\n            this.clock.start();\n            if (this.garbageCollectorConfig) {\n                this._garbageCollector.start();\n            }\n            this._logger.debug('Game clock started');\n            await this.load(loader !== null && loader !== void 0 ? loader : new Loader());\n            // Initialize before ready\n            await this._overrideInitialize(this);\n            this._isReadyFuture.resolve();\n            this.emit('start', new GameStartEvent(this));\n            return this._isReadyFuture.promise;\n        });\n    }\n    _mainloop(elapsed) {\n        this.scope(() => {\n            this.emit('preframe', new PreFrameEvent(this, this.stats.prevFrame));\n            const elapsedMs = elapsed * this.timescale;\n            this.currentFrameElapsedMs = elapsedMs;\n            // reset frame stats (reuse existing instances)\n            const frameId = this.stats.prevFrame.id + 1;\n            this.stats.currFrame.reset();\n            this.stats.currFrame.id = frameId;\n            this.stats.currFrame.elapsedMs = elapsedMs;\n            this.stats.currFrame.fps = this.clock.fpsSampler.fps;\n            GraphicsDiagnostics.clear();\n            const beforeUpdate = this.clock.now();\n            const fixedTimestepMs = this.fixedUpdateTimestep;\n            if (this.fixedUpdateTimestep) {\n                this._lagMs += elapsedMs;\n                while (this._lagMs >= fixedTimestepMs) {\n                    this._update(fixedTimestepMs);\n                    this._lagMs -= fixedTimestepMs;\n                }\n            }\n            else {\n                this._update(elapsedMs);\n            }\n            const afterUpdate = this.clock.now();\n            this.currentFrameLagMs = this._lagMs;\n            this._draw(elapsedMs);\n            const afterDraw = this.clock.now();\n            this.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\n            this.stats.currFrame.duration.draw = afterDraw - afterUpdate;\n            this.stats.currFrame.graphics.drawnImages = GraphicsDiagnostics.DrawnImagesCount;\n            this.stats.currFrame.graphics.drawCalls = GraphicsDiagnostics.DrawCallCount;\n            this.emit('postframe', new PostFrameEvent(this, this.stats.currFrame));\n            this.stats.prevFrame.reset(this.stats.currFrame);\n            this._monitorPerformanceThresholdAndTriggerFallback();\n        });\n    }\n    /**\n     * Stops Excalibur's main loop, useful for pausing the game.\n     */\n    stop() {\n        if (this.clock.isRunning()) {\n            this.emit('stop', new GameStopEvent(this));\n            this.browser.pause();\n            this.clock.stop();\n            this._garbageCollector.stop();\n            this._logger.debug('Game stopped');\n        }\n    }\n    /**\n     * Returns the Engine's running status, Useful for checking whether engine is running or paused.\n     */\n    isRunning() {\n        return this.clock.isRunning();\n    }\n    /**\n     * Takes a screen shot of the current viewport and returns it as an\n     * HTML Image Element.\n     * @param preserveHiDPIResolution in the case of HiDPI return the full scaled backing image, by default false\n     */\n    screenshot(preserveHiDPIResolution = false) {\n        const screenShotPromise = new Promise((resolve) => {\n            this._screenShotRequests.push({ preserveHiDPIResolution, resolve });\n        });\n        return screenShotPromise;\n    }\n    _checkForScreenShots() {\n        // We must grab the draw buffer before we yield to the browser\n        // the draw buffer is cleared after compositing\n        // the reason for the asynchrony is setting `preserveDrawingBuffer: true`\n        // forces the browser to copy buffers which can have a mass perf impact on mobile\n        for (const request of this._screenShotRequests) {\n            const finalWidth = request.preserveHiDPIResolution ? this.canvas.width : this.screen.resolution.width;\n            const finalHeight = request.preserveHiDPIResolution ? this.canvas.height : this.screen.resolution.height;\n            const screenshot = document.createElement('canvas');\n            screenshot.width = finalWidth;\n            screenshot.height = finalHeight;\n            const ctx = screenshot.getContext('2d');\n            ctx.imageSmoothingEnabled = this.screen.antialiasing;\n            ctx.drawImage(this.canvas, 0, 0, finalWidth, finalHeight);\n            const result = new Image();\n            const raw = screenshot.toDataURL('image/png');\n            result.onload = () => {\n                request.resolve(result);\n            };\n            result.src = raw;\n        }\n        // Reset state\n        this._screenShotRequests.length = 0;\n    }\n    /**\n     * Another option available to you to load resources into the game.\n     * Immediately after calling this the game will pause and the loading screen\n     * will appear.\n     * @param loader  Some {@apilink Loadable} such as a {@apilink Loader} collection, {@apilink Sound}, or {@apilink Texture}.\n     */\n    async load(loader, hideLoader = false) {\n        await this.scope(async () => {\n            try {\n                // early exit if loaded\n                if (loader.isLoaded()) {\n                    return;\n                }\n                this._loader = loader;\n                this._isLoading = true;\n                this._hideLoader = hideLoader;\n                if (loader instanceof Loader) {\n                    loader.suppressPlayButton = loader.suppressPlayButton || this._suppressPlayButton;\n                }\n                this._loader.onInitialize(this);\n                await loader.load();\n            }\n            catch (e) {\n                this._logger.error('Error loading resources, things may not behave properly', e);\n                await Promise.resolve();\n            }\n            finally {\n                this._isLoading = false;\n                this._hideLoader = false;\n                this._loader = null;\n            }\n        });\n    }\n}\nEngine.Context = createContext();\nEngine.InstanceCount = 0;\n/**\n * Default {@apilink EngineOptions}\n */\nEngine._DEFAULT_ENGINE_OPTIONS = {\n    width: 0,\n    height: 0,\n    enableCanvasTransparency: true,\n    useDrawSorting: true,\n    configurePerformanceCanvas2DFallback: {\n        allow: false,\n        showPlayerMessage: false,\n        threshold: { fps: 20, numberOfFrames: 100 }\n    },\n    canvasElementId: '',\n    canvasElement: undefined,\n    enableCanvasContextMenu: false,\n    snapToPixel: false,\n    antialiasing: true,\n    pixelArt: false,\n    garbageCollection: true,\n    powerPreference: 'high-performance',\n    pointerScope: PointerScope.Canvas,\n    suppressConsoleBootMessage: null,\n    suppressMinimumBrowserFeatureDetection: null,\n    suppressHiDPIScaling: null,\n    suppressPlayButton: null,\n    grabWindowFocus: true,\n    scrollPreventionMode: ScrollPreventionMode.Canvas,\n    backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\n};\n\n;// ./Math/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Debug/index.ts\n\n\n\n\n;// ./Label.ts\n\n\n\n\n\n/**\n * Labels are the way to draw small amounts of text to the screen. They are\n * actors and inherit all of the benefits and capabilities.\n */\nclass Label extends Actor {\n    set maxWidth(width) {\n        this._text.maxWidth = width;\n    }\n    get maxWidth() {\n        return this._text.maxWidth;\n    }\n    get font() {\n        return this._font;\n    }\n    set font(newFont) {\n        this._font = newFont;\n        this._text.font = newFont;\n    }\n    /**\n     * The text to draw.\n     */\n    get text() {\n        return this._text.text;\n    }\n    set text(text) {\n        this._text.text = text;\n    }\n    get color() {\n        return this._text.color;\n    }\n    set color(color) {\n        if (this._text) {\n            this._text.color = color;\n        }\n    }\n    get opacity() {\n        return this.graphics.opacity;\n    }\n    set opacity(opacity) {\n        this.graphics.opacity = opacity;\n    }\n    /**\n     * The {@apilink SpriteFont} to use, if any. Overrides {@apilink Font | `font`} if present.\n     */\n    get spriteFont() {\n        return this._spriteFont;\n    }\n    set spriteFont(sf) {\n        if (sf) {\n            this._spriteFont = sf;\n            this._text.font = this._spriteFont;\n        }\n    }\n    /**\n     * Build a new label\n     * @param options\n     */\n    constructor(options) {\n        super(options);\n        this._font = new Font();\n        this._text = new Text({ text: '', font: this._font });\n        const { text, pos, x, y, spriteFont, font, color, maxWidth } = { text: '', ...options };\n        this.pos = pos !== null && pos !== void 0 ? pos : (x && y ? vec(x, y) : this.pos);\n        this.text = text !== null && text !== void 0 ? text : this.text;\n        this.font = font !== null && font !== void 0 ? font : this.font;\n        this.maxWidth = maxWidth !== null && maxWidth !== void 0 ? maxWidth : this.maxWidth;\n        this.spriteFont = spriteFont !== null && spriteFont !== void 0 ? spriteFont : this.spriteFont;\n        this._text.color = color !== null && color !== void 0 ? color : this.color;\n        const gfx = this.get(GraphicsComponent);\n        gfx.anchor = Vector.Zero;\n        gfx.use(this._text);\n    }\n    _initialize(engine) {\n        super._initialize(engine);\n    }\n    /**\n     * Returns the width of the text in the label (in pixels);\n     */\n    getTextWidth() {\n        return this._text.width;\n    }\n}\n\n;// ./Particles/EmitterType.ts\n/**\n * An enum that represents the types of emitter nozzles\n */\nvar EmitterType;\n(function (EmitterType) {\n    /**\n     * Constant for the circular emitter type\n     */\n    EmitterType[\"Circle\"] = \"circle\";\n    /**\n     * Constant for the rectangular emitter type\n     */\n    EmitterType[\"Rectangle\"] = \"rectangle\";\n})(EmitterType || (EmitterType = {}));\n\n;// ./Particles/ParticleEmitter.ts\n\n\n\n\n\n\n\n\n/**\n * Using a particle emitter is a great way to create interesting effects\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\n * extend {@apilink Actor} allowing you to use all of the features that come with.\n *\n * These particles are simulated on the CPU in JavaScript\n */\nclass ParticleEmitter extends Actor {\n    /**\n     * @param config particle emitter options bag\n     */\n    constructor(config) {\n        var _a, _b;\n        super({ width: (_a = config.width) !== null && _a !== void 0 ? _a : 0, height: (_b = config.height) !== null && _b !== void 0 ? _b : 0 });\n        this._particlesToEmit = 0;\n        this._particlePool = new RentalPool(() => new Particle({}), (p) => p, 500);\n        this.numParticles = 0;\n        /**\n         * Gets or sets the isEmitting flag\n         */\n        this.isEmitting = true;\n        /**\n         * Gets or sets the backing deadParticle collection\n         */\n        this.deadParticles = [];\n        /**\n         * Gets or sets the emission rate for particles (particles/sec)\n         */\n        this.emitRate = 1; //particles/sec\n        /**\n         * Gets or sets the emitter type for the particle emitter\n         */\n        this.emitterType = EmitterType.Rectangle;\n        /**\n         * Gets or sets the emitter radius, only takes effect when the {@apilink emitterType} is {@apilink EmitterType.Circle}\n         */\n        this.radius = 0;\n        this.particle = {\n            /**\n             * Gets or sets the life of each particle in milliseconds\n             */\n            life: 2000,\n            transform: ParticleTransform.Global,\n            graphic: undefined,\n            opacity: 1,\n            angularVelocity: 0,\n            focus: undefined,\n            focusAccel: undefined,\n            randomRotation: false\n        };\n        this._activeParticles = [];\n        const { particle, x, y, z, pos, isEmitting, emitRate, emitterType, radius, random } = { ...config };\n        this.particle = { ...this.particle, ...particle };\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\n        this.z = z !== null && z !== void 0 ? z : 0;\n        this.isEmitting = isEmitting !== null && isEmitting !== void 0 ? isEmitting : this.isEmitting;\n        this.emitRate = emitRate !== null && emitRate !== void 0 ? emitRate : this.emitRate;\n        this.emitterType = emitterType !== null && emitterType !== void 0 ? emitterType : this.emitterType;\n        this.radius = radius !== null && radius !== void 0 ? radius : this.radius;\n        this.body.collisionType = CollisionType.PreventCollision;\n        this.random = random !== null && random !== void 0 ? random : new Random();\n    }\n    removeParticle(particle) {\n        this.deadParticles.push(particle);\n    }\n    /**\n     * Causes the emitter to emit particles\n     * @param particleCount  Number of particles to emit right now\n     */\n    emitParticles(particleCount) {\n        var _a;\n        if (particleCount <= 0) {\n            return;\n        }\n        particleCount = particleCount | 0; // coerce to int\n        for (let i = 0; i < particleCount; i++) {\n            const p = this._createParticle();\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\n                if (this.particle.transform === ParticleTransform.Global) {\n                    this.scene.world.add(p);\n                }\n                else {\n                    this.addChild(p);\n                }\n            }\n            this._activeParticles.push(p);\n        }\n    }\n    clearParticles() {\n        for (let i = 0; i < this._activeParticles.length; i++) {\n            this.removeParticle(this._activeParticles[i]);\n        }\n    }\n    // Creates a new particle given the constraints of the emitter\n    _createParticle() {\n        let ranX = 0;\n        let ranY = 0;\n        const angle = randomInRange(this.particle.minAngle || 0, this.particle.maxAngle || Math.PI * 2, this.random);\n        const vel = randomInRange(this.particle.minSpeed || 0, this.particle.maxSpeed || 0, this.random);\n        const size = this.particle.startSize || randomInRange(this.particle.minSize || 5, this.particle.maxSize || 5, this.random);\n        const dx = vel * Math.cos(angle);\n        const dy = vel * Math.sin(angle);\n        if (this.emitterType === EmitterType.Rectangle) {\n            ranX = randomInRange(0, this.width, this.random);\n            ranY = randomInRange(0, this.height, this.random);\n        }\n        else if (this.emitterType === EmitterType.Circle) {\n            const radius = randomInRange(0, this.radius, this.random);\n            ranX = radius * Math.cos(angle);\n            ranY = radius * Math.sin(angle);\n        }\n        const p = this._particlePool.rent();\n        p.configure({\n            life: this.particle.life,\n            opacity: this.particle.opacity,\n            beginColor: this.particle.beginColor,\n            endColor: this.particle.endColor,\n            pos: vec(ranX, ranY),\n            vel: vec(dx, dy),\n            acc: this.particle.acc,\n            angularVelocity: this.particle.angularVelocity,\n            startSize: this.particle.startSize,\n            endSize: this.particle.endSize,\n            size: size,\n            graphic: this.particle.graphic,\n            fade: this.particle.fade\n        });\n        p.registerEmitter(this);\n        if (this.particle.randomRotation) {\n            p.transform.rotation = randomInRange(0, Math.PI * 2, this.random);\n        }\n        if (this.particle.focus) {\n            p.focus = this.particle.focus.add(vec(this.pos.x, this.pos.y));\n            p.focusAccel = this.particle.focusAccel;\n        }\n        return p;\n    }\n    update(engine, elapsed) {\n        var _a;\n        super.update(engine, elapsed);\n        if (this.isEmitting) {\n            this._particlesToEmit += this.emitRate * (elapsed / 1000);\n            if (this._particlesToEmit > 1.0) {\n                this.emitParticles(Math.floor(this._particlesToEmit));\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\n            }\n        }\n        // deferred removal\n        for (let i = 0; i < this.deadParticles.length; i++) {\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\n                this.scene.world.remove(this.deadParticles[i], false);\n                this._particlePool.return(this.deadParticles[i]);\n            }\n            const index = this._activeParticles.indexOf(this.deadParticles[i]);\n            if (index > -1) {\n                this._activeParticles.splice(index, 1);\n            }\n        }\n        this.deadParticles.length = 0;\n    }\n}\n\n;// ./Util/Assert.ts\n/**\n * Asserts will throw in `process.env.NODE_ENV === 'development'` builds if the expression evaluates false\n */\nfunction assert(message, expression) {\n    if (false) {}\n}\n\n;// ./Particles/GpuParticleRenderer.ts\n\n\n\n\n\n/**\n * Container for the GPU Particle State contains the internal state needed for the GPU\n * to render particles and maintain state.\n */\nclass GpuParticleRenderer {\n    constructor(emitter, random, options) {\n        var _a;\n        this.emitRate = 1;\n        this._initialized = false;\n        this._vaos = [];\n        this._buffers = [];\n        this._drawIndex = 0;\n        this._numInputFloats = 2 + 2 + 1 + 1 + 1;\n        this._particleIndex = 0;\n        this._uploadIndex = 0;\n        this._wrappedLife = 0;\n        this._wrappedParticles = 0;\n        this._particleLife = 0;\n        this._clearRequested = false;\n        this._emitted = [];\n        this.emitter = emitter;\n        this.particle = options;\n        this._particleData = new Float32Array(this.emitter.maxParticles * this._numInputFloats);\n        this._random = random;\n        this._particleLife = (_a = this.particle.life) !== null && _a !== void 0 ? _a : 2000;\n    }\n    get isInitialized() {\n        return this._initialized;\n    }\n    get maxParticles() {\n        return this.emitter.maxParticles;\n    }\n    initialize(gl, context) {\n        if (this._initialized) {\n            return;\n        }\n        const numParticles = this.emitter.maxParticles;\n        const numInputFloats = this._numInputFloats;\n        const particleData = this._particleData;\n        const bytesPerFloat = 4;\n        const particleDataBuffer1 = gl.createBuffer();\n        const vao1 = gl.createVertexArray();\n        gl.bindVertexArray(vao1);\n        gl.bindBuffer(gl.ARRAY_BUFFER, particleDataBuffer1);\n        gl.bufferData(gl.ARRAY_BUFFER, numParticles * numInputFloats * bytesPerFloat, gl.DYNAMIC_DRAW);\n        gl.bufferSubData(gl.ARRAY_BUFFER, 0, particleData);\n        let offset = 0;\n        // position\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, 0);\n        offset += bytesPerFloat * 2;\n        // velocity\n        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 2;\n        // rotation\n        gl.vertexAttribPointer(2, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // angularVelocity\n        gl.vertexAttribPointer(3, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // life\n        gl.vertexAttribPointer(4, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // enable attributes\n        gl.enableVertexAttribArray(0);\n        gl.enableVertexAttribArray(1);\n        gl.enableVertexAttribArray(2);\n        gl.enableVertexAttribArray(3);\n        gl.enableVertexAttribArray(4);\n        this._vaos.push(vao1);\n        this._buffers.push(particleDataBuffer1);\n        // Clean up\n        gl.bindVertexArray(null);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        const particleDataBuffer2 = gl.createBuffer();\n        const vao2 = gl.createVertexArray();\n        gl.bindVertexArray(vao2);\n        gl.bindBuffer(gl.ARRAY_BUFFER, particleDataBuffer2);\n        gl.bufferData(gl.ARRAY_BUFFER, numParticles * numInputFloats * bytesPerFloat, gl.DYNAMIC_DRAW);\n        offset = 0;\n        // position\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, 0);\n        offset += bytesPerFloat * 2;\n        // velocity\n        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 2;\n        // rotation\n        gl.vertexAttribPointer(2, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // angularVelocity\n        gl.vertexAttribPointer(3, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // life\n        gl.vertexAttribPointer(4, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // enable attributes\n        gl.enableVertexAttribArray(0);\n        gl.enableVertexAttribArray(1);\n        gl.enableVertexAttribArray(2);\n        gl.enableVertexAttribArray(3);\n        gl.enableVertexAttribArray(4);\n        this._vaos.push(vao2);\n        this._buffers.push(particleDataBuffer2);\n        // Clean up\n        gl.bindVertexArray(null);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        this._currentVao = this._vaos[this._drawIndex % 2];\n        this._currentBuffer = this._buffers[(this._drawIndex + 1) % 2];\n        this._initialized = true;\n    }\n    clearParticles() {\n        this._particleData.fill(0);\n        this._clearRequested = true;\n    }\n    emitParticles(particleCount) {\n        const startIndex = this._particleIndex;\n        const maxSize = this.maxParticles * this._numInputFloats;\n        const endIndex = particleCount * this._numInputFloats + startIndex;\n        let countParticle = 0;\n        for (let i = startIndex; i < endIndex; i += this._numInputFloats) {\n            const angle = this._random.floating(this.particle.minAngle || 0, this.particle.maxAngle || TwoPI);\n            const speedX = this._random.floating(this.particle.minSpeed || 0, this.particle.maxSpeed || 0);\n            const speedY = this._random.floating(this.particle.minSpeed || 0, this.particle.maxSpeed || 0);\n            const dx = speedX * Math.cos(angle);\n            const dy = speedY * Math.sin(angle);\n            let ranX = 0;\n            let ranY = 0;\n            if (this.emitter.emitterType === EmitterType.Rectangle) {\n                ranX = this._random.floating(-0.5, 0.5) * this.emitter.width;\n                ranY = this._random.floating(-0.5, 0.5) * this.emitter.height;\n            }\n            else {\n                const radius = this._random.floating(0, this.emitter.radius);\n                ranX = radius * Math.cos(angle);\n                ranY = radius * Math.sin(angle);\n            }\n            const tx = this.emitter.transform.apply(vec(ranX, ranY));\n            const data = [\n                this.particle.transform === ParticleTransform.Local ? ranX : tx.x,\n                this.particle.transform === ParticleTransform.Local ? ranY : tx.y, // pos in world space\n                dx,\n                dy, // velocity\n                this.particle.randomRotation ? randomInRange(0, TwoPI, this._random) : this.particle.rotation || 0, // rotation\n                this.particle.angularVelocity || 0, // angular velocity\n                this._particleLife // life\n            ];\n            countParticle++;\n            this._particleData.set(data, i % this._particleData.length);\n        }\n        if (endIndex >= maxSize) {\n            this._wrappedParticles += (endIndex - maxSize) / this._numInputFloats;\n            this._wrappedLife = this._particleLife;\n        }\n        else if (this._wrappedLife > 0) {\n            this._wrappedParticles += particleCount;\n        }\n        this._particleIndex = endIndex % maxSize;\n        this._emitted.push([this._particleLife, startIndex]);\n    }\n    _uploadEmitted(gl) {\n        // upload index is the index of the previous upload\n        // particle index is the current index of modification\n        if (this._particleIndex !== this._uploadIndex) {\n            // Bind one buffer to ARRAY_BUFFER and the other to TFB\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._buffers[(this._drawIndex + 1) % 2]);\n            if (this._particleIndex >= this._uploadIndex) {\n                gl.bufferSubData(gl.ARRAY_BUFFER, this._uploadIndex * 4, // dst byte offset 4 bytes per float\n                this._particleData, this._uploadIndex, this._particleIndex - this._uploadIndex);\n            }\n            else {\n                // upload before the wrap\n                // prettier-ignore\n                gl.bufferSubData(gl.ARRAY_BUFFER, this._uploadIndex * 4, this._particleData, this._uploadIndex, this._particleData.length - this._uploadIndex);\n                // upload after the wrap if there are any\n                if (this._wrappedParticles) {\n                    // prettier-ignore\n                    gl.bufferSubData(gl.ARRAY_BUFFER, 0, this._particleData, 0, this._wrappedParticles * this._numInputFloats);\n                }\n                this._wrappedLife = this._particleLife;\n            }\n            gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        }\n        this._uploadIndex = this._particleIndex % (this.maxParticles * this._numInputFloats);\n    }\n    update(elapsed) {\n        var _a;\n        this._particleLife = (_a = this.particle.life) !== null && _a !== void 0 ? _a : this._particleLife;\n        if (this._wrappedLife > 0) {\n            this._wrappedLife -= elapsed;\n        }\n        else {\n            this._wrappedLife = 0;\n            this._wrappedParticles = 0;\n        }\n        if (!this._emitted.length) {\n            return;\n        }\n        for (let i = this._emitted.length - 1; i >= 0; i--) {\n            const particle = this._emitted[i];\n            particle[0] -= elapsed;\n            const life = particle[0];\n            if (life <= 0) {\n                this._emitted.splice(i, 1);\n            }\n        }\n        this._emitted.sort((a, b) => a[0] - b[0]);\n    }\n    draw(gl) {\n        if (this._initialized) {\n            // Emit\n            if (this._clearRequested) {\n                gl.bindBuffer(gl.ARRAY_BUFFER, this._buffers[(this._drawIndex + 1) % 2]);\n                gl.bufferSubData(gl.ARRAY_BUFFER, 0, this._particleData);\n                gl.bindBuffer(gl.ARRAY_BUFFER, null);\n                this._clearRequested = false;\n            }\n            else {\n                this._uploadEmitted(gl);\n            }\n            // Bind one buffer to ARRAY_BUFFER and the other to transform feedback buffer\n            gl.bindVertexArray(this._currentVao);\n            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer);\n            // Perform transform feedback (run the simulation) and the draw call all at once\n            if (this._wrappedLife && this._emitted[0] && this._emitted[0][1] > 0) {\n                const midpoint = this._emitted[0][1] / this._numInputFloats;\n                // draw oldest first (maybe make configurable)\n                assert(`midpoint greater than 0, actual: ${midpoint}`, () => midpoint > 0);\n                assert(`midpoint is less than max, actual: ${midpoint}`, () => midpoint < this.maxParticles);\n                gl.bindBufferRange(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer, this._emitted[0][1] * 4, (this.maxParticles - midpoint) * this._numInputFloats * 4);\n                gl.beginTransformFeedback(gl.POINTS);\n                gl.drawArrays(gl.POINTS, midpoint, this.maxParticles - midpoint);\n                gl.endTransformFeedback();\n                // then draw newer particles\n                gl.bindBufferRange(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer, 0, this._emitted[0][1] * 4);\n                gl.beginTransformFeedback(gl.POINTS);\n                gl.drawArrays(gl.POINTS, 0, midpoint);\n                gl.endTransformFeedback();\n            }\n            else {\n                gl.bindBufferRange(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer, 0, this._particleData.length * 4);\n                gl.beginTransformFeedback(gl.POINTS);\n                gl.drawArrays(gl.POINTS, 0, this.maxParticles);\n                gl.endTransformFeedback();\n            }\n            // Clean up after ourselves to avoid errors.\n            gl.bindVertexArray(null);\n            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);\n            // flip flop buffers, one will be draw the other simulation\n            this._currentVao = this._vaos[this._drawIndex % 2];\n            this._currentBuffer = this._buffers[(this._drawIndex + 1) % 2];\n            this._drawIndex = (this._drawIndex + 1) % 2;\n        }\n    }\n}\nGpuParticleRenderer.GPU_MAX_PARTICLES = 100000;\n\n;// ./Particles/GpuParticleEmitter.ts\n\n\n\n\n\n\n\n\nclass GpuParticleEmitter extends Actor {\n    get pos() {\n        return this.transform.pos;\n    }\n    set pos(pos) {\n        this.transform.pos = pos;\n    }\n    get z() {\n        return this.transform.z;\n    }\n    set z(z) {\n        this.transform.z = z;\n    }\n    constructor(config) {\n        super({ name: `GpuParticleEmitter`, width: config.width, height: config.height }); // somewhat goofy way of doing width/height\n        this.particle = {\n            /**\n             * Gets or sets the life of each particle in milliseconds\n             */\n            life: 2000,\n            transform: ParticleTransform.Global,\n            graphic: undefined,\n            opacity: 1,\n            angularVelocity: 0,\n            focus: undefined,\n            focusAccel: undefined,\n            randomRotation: false\n        };\n        this.graphics = new GraphicsComponent();\n        this.isEmitting = false;\n        this.emitRate = 1;\n        this.emitterType = EmitterType.Rectangle;\n        this.radius = 0;\n        this.maxParticles = 2000;\n        this._particlesToEmit = 0;\n        this.addComponent(this.graphics, true);\n        this.graphics.onPostDraw = this.draw.bind(this);\n        const { particle, maxParticles, x, y, z, pos, isEmitting, emitRate, emitterType, radius, random } = { ...config };\n        this.maxParticles = clamp(maxParticles !== null && maxParticles !== void 0 ? maxParticles : this.maxParticles, 0, GpuParticleRenderer.GPU_MAX_PARTICLES);\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\n        this.z = z !== null && z !== void 0 ? z : 0;\n        this.isEmitting = isEmitting !== null && isEmitting !== void 0 ? isEmitting : this.isEmitting;\n        this.emitRate = emitRate !== null && emitRate !== void 0 ? emitRate : this.emitRate;\n        this.emitterType = emitterType !== null && emitterType !== void 0 ? emitterType : this.emitterType;\n        this.radius = radius !== null && radius !== void 0 ? radius : this.radius;\n        this.particle = { ...this.particle, ...particle };\n        this.random = random !== null && random !== void 0 ? random : new Random();\n        this.renderer = new GpuParticleRenderer(this, this.random, this.particle);\n    }\n    _initialize(engine) {\n        super._initialize(engine);\n        const context = engine.graphicsContext;\n        this.renderer.initialize(context.__gl, context);\n    }\n    update(engine, elapsed) {\n        super.update(engine, elapsed);\n        if (this.isEmitting) {\n            this._particlesToEmit += this.emitRate * (elapsed / 1000);\n            if (this._particlesToEmit > 1.0) {\n                this.emitParticles(Math.floor(this._particlesToEmit));\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\n            }\n        }\n        this.renderer.update(elapsed);\n    }\n    emitParticles(particleCount) {\n        if (particleCount <= 0) {\n            return;\n        }\n        this.renderer.emitParticles(particleCount | 0); // coerce to integer\n    }\n    clearParticles() {\n        this.renderer.clearParticles();\n    }\n    draw(ctx, elapsed) {\n        ctx.draw('ex.particle', this.renderer, elapsed);\n    }\n}\n\n;// ./Particles/index.ts\n\n\n\n\n\n\n;// ./TileMap/IsometricMap.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass IsometricTile extends Entity {\n    getGraphics() {\n        return this._graphics;\n    }\n    /**\n     * Tile graphics\n     */\n    addGraphic(graphic, options) {\n        this._graphics.push(graphic);\n        this._gfx.isVisible = this.map.isVisible;\n        this._gfx.opacity = this.map.opacity;\n        if (options === null || options === void 0 ? void 0 : options.offset) {\n            this._gfx.offset = options.offset;\n        }\n        // TODO detect when this changes on the map and apply to all tiles\n        this._gfx.localBounds = this._recalculateBounds();\n    }\n    _recalculateBounds() {\n        let bounds = this._tileBounds.clone();\n        for (const graphic of this._graphics) {\n            const offset = vec(this.map.graphicsOffset.x - this.map.tileWidth / 2, this.map.graphicsOffset.y - (this.map.renderFromTopOfGraphic ? 0 : graphic.height - this.map.tileHeight));\n            bounds = bounds.combine(graphic.localBounds.translate(offset));\n        }\n        return bounds;\n    }\n    removeGraphic(graphic) {\n        const index = this._graphics.indexOf(graphic);\n        if (index > -1) {\n            this._graphics.splice(index, 1);\n        }\n        this._gfx.localBounds = this._recalculateBounds();\n    }\n    clearGraphics() {\n        this._graphics.length = 0;\n        this._gfx.isVisible = false;\n        this._gfx.localBounds = this._recalculateBounds();\n    }\n    getColliders() {\n        return this._colliders;\n    }\n    /**\n     * Adds a collider to the IsometricTile\n     *\n     * **Note!** the {@apilink Tile.solid} must be set to true for it to act as a \"fixed\" collider\n     * @param collider\n     */\n    addCollider(collider) {\n        this._colliders.push(collider);\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Removes a collider from the IsometricTile\n     * @param collider\n     */\n    removeCollider(collider) {\n        const index = this._colliders.indexOf(collider);\n        if (index > -1) {\n            this._colliders.splice(index, 1);\n        }\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Clears all colliders from the IsometricTile\n     */\n    clearColliders() {\n        this._colliders.length = 0;\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Returns the top left corner of the {@apilink IsometricTile} in world space\n     */\n    get pos() {\n        return this.map.tileToWorld(vec(this.x, this.y));\n    }\n    /**\n     * Returns the center of the {@apilink IsometricTile}\n     */\n    get center() {\n        return this.pos.add(vec(0, this.map.tileHeight / 2));\n    }\n    /**\n     * Construct a new IsometricTile\n     * @param x tile coordinate in x (not world position)\n     * @param y tile coordinate in y (not world position)\n     * @param graphicsOffset offset that tile should be shifted by (default (0, 0))\n     * @param map reference to owning IsometricMap\n     */\n    constructor(x, y, graphicsOffset, map) {\n        super([\n            new TransformComponent(),\n            new GraphicsComponent({\n                offset: graphicsOffset !== null && graphicsOffset !== void 0 ? graphicsOffset : Vector.Zero,\n                onPostDraw: (gfx, elapsed) => this.draw(gfx, elapsed)\n            }),\n            new IsometricEntityComponent(map)\n        ]);\n        /**\n         * Indicates whether this tile is solid\n         */\n        this.solid = false;\n        this.events = new EventEmitter();\n        this._tileBounds = new BoundingBox();\n        this._graphics = [];\n        /**\n         * Tile colliders\n         */\n        this._colliders = [];\n        /**\n         * Arbitrary data storage per tile, useful for any game specific data\n         */\n        this.data = new Map();\n        this.x = x;\n        this.y = y;\n        this.map = map;\n        this._transform = this.get(TransformComponent);\n        this._isometricEntityComponent = this.get(IsometricEntityComponent);\n        const halfTileWidth = this.map.tileWidth / 2;\n        const halfTileHeight = this.map.tileHeight / 2;\n        // See https://clintbellanger.net/articles/isometric_math/ for formula\n        // The x position shifts left with every y step\n        const xPos = (this.x - this.y) * halfTileWidth;\n        // The y position needs to go down with every x step\n        const yPos = (this.x + this.y) * halfTileHeight;\n        this._transform.pos = vec(xPos, yPos);\n        this._isometricEntityComponent.elevation = map.elevation;\n        this._gfx = this.get(GraphicsComponent);\n        this._gfx.isVisible = false; // start not visible\n        const totalWidth = this.map.tileWidth;\n        const totalHeight = this.map.tileHeight;\n        // initial guess at gfx bounds based on the tile\n        const offset = vec(0, this.map.renderFromTopOfGraphic ? totalHeight : 0);\n        this._gfx.localBounds = this._tileBounds = new BoundingBox({\n            left: -totalWidth / 2,\n            top: -totalHeight,\n            right: totalWidth / 2,\n            bottom: totalHeight\n        }).translate(offset);\n    }\n    draw(gfx, _elapsed) {\n        const halfTileWidth = this.map.tileWidth / 2;\n        gfx.save();\n        // shift left origin to corner of map, not the left corner of the first sprite\n        gfx.translate(-halfTileWidth, 0);\n        for (const graphic of this._graphics) {\n            graphic.draw(gfx, this.map.graphicsOffset.x, this.map.graphicsOffset.y - (this.map.renderFromTopOfGraphic ? 0 : graphic.height - this.map.tileHeight));\n        }\n        gfx.restore();\n    }\n}\n/**\n * The IsometricMap is a special tile map that provides isometric rendering support to Excalibur\n *\n * The tileWidth and tileHeight should be the height and width in pixels of the parallelogram of the base of the tile art asset.\n * The tileWidth and tileHeight is not necessarily the same as your graphic pixel width and height.\n *\n * Please refer to the docs https://excaliburjs.com for more details calculating what your tile width and height should be given\n * your art assets.\n */\nclass IsometricMap extends Entity {\n    /**\n     * Whether tiles should be visible\n     * @deprecated use isVisible\n     */\n    get visible() {\n        return this.isVisible;\n    }\n    /**\n     * Whether tiles should be visible\n     * @deprecated use isVisible\n     */\n    set visible(val) {\n        this.isVisible = val;\n    }\n    constructor(options) {\n        super([\n            new TransformComponent(),\n            new BodyComponent({\n                type: CollisionType.Fixed\n            }),\n            new ColliderComponent(),\n            new PointerComponent(),\n            new DebugGraphicsComponent((ctx, debugFlags) => this.debug(ctx, debugFlags), false)\n        ], options.name);\n        this.elevation = 0;\n        /**\n         * Whether tiles should be visible\n         */\n        this.isVisible = true;\n        /**\n         * Opacity of tiles\n         */\n        this.opacity = 1.0;\n        /**\n         * Render the tile graphic from the top instead of the bottom\n         *\n         * default is `false` meaning rendering from the bottom\n         */\n        this.renderFromTopOfGraphic = false;\n        this.graphicsOffset = vec(0, 0);\n        this._collidersDirty = false;\n        this._originalOffsets = new WeakMap();\n        const { pos, tileWidth, tileHeight, columns: width, rows: height, renderFromTopOfGraphic, graphicsOffset, elevation } = options;\n        this.transform = this.get(TransformComponent);\n        if (pos) {\n            this.transform.pos = pos;\n        }\n        this.collider = this.get(ColliderComponent);\n        if (this.collider) {\n            this.collider.set((this._composite = new CompositeCollider([])));\n        }\n        this.pointer = this.get(PointerComponent);\n        this.renderFromTopOfGraphic = renderFromTopOfGraphic !== null && renderFromTopOfGraphic !== void 0 ? renderFromTopOfGraphic : this.renderFromTopOfGraphic;\n        this.graphicsOffset = graphicsOffset !== null && graphicsOffset !== void 0 ? graphicsOffset : this.graphicsOffset;\n        this.elevation = elevation !== null && elevation !== void 0 ? elevation : this.elevation;\n        this.tileWidth = tileWidth;\n        this.tileHeight = tileHeight;\n        this.columns = width;\n        this.rows = height;\n        this._pointerEventDispatcher = new PointerEventsToObjectDispatcher();\n        this.tiles = new Array(width * height);\n        // build up tile representation\n        for (let y = 0; y < height; y++) {\n            for (let x = 0; x < width; x++) {\n                const tile = new IsometricTile(x, y, this.graphicsOffset, this);\n                this.tiles[x + y * width] = tile;\n                this.addChild(tile);\n                this._pointerEventDispatcher.addObject(tile, (p) => this.getTileByPoint(p.worldPos) === tile, () => true);\n            }\n        }\n        this.pointer.localBounds = BoundingBox.fromDimension(tileWidth * width * this.transform.scale.x, tileHeight * height * this.transform.scale.y, vec(0.5, 0));\n    }\n    /**\n     * @internal\n     */\n    _processPointerToObject(receiver) {\n        this._pointerEventDispatcher.processPointerToObject(receiver, this.tiles);\n    }\n    /**\n     * @internal\n     */\n    _dispatchPointerEvents(receiver) {\n        this._pointerEventDispatcher.dispatchEvents(receiver, this.tiles);\n    }\n    update() {\n        if (this._collidersDirty) {\n            this.updateColliders();\n            this._collidersDirty = false;\n        }\n        this._pointerEventDispatcher.clear();\n    }\n    flagCollidersDirty() {\n        this._collidersDirty = true;\n    }\n    _getOrSetColliderOriginalOffset(collider) {\n        var _a;\n        if (!this._originalOffsets.has(collider)) {\n            const originalOffset = collider.offset;\n            this._originalOffsets.set(collider, originalOffset);\n            return originalOffset;\n        }\n        else {\n            return (_a = this._originalOffsets.get(collider)) !== null && _a !== void 0 ? _a : Vector.Zero;\n        }\n    }\n    updateColliders() {\n        this._composite.clearColliders();\n        const pos = this.get(TransformComponent).pos;\n        for (const tile of this.tiles) {\n            if (tile.solid) {\n                for (const collider of tile.getColliders()) {\n                    const originalOffset = this._getOrSetColliderOriginalOffset(collider);\n                    collider.offset = this.tileToWorld(vec(tile.x, tile.y))\n                        .sub(pos)\n                        .add(originalOffset)\n                        .sub(vec(this.tileWidth / 2, this.tileHeight)); // We need to unshift height based on drawing\n                    collider.owner = this;\n                    this._composite.addCollider(collider);\n                }\n            }\n        }\n        this.collider.update();\n    }\n    /**\n     * Convert world space coordinates to the tile x, y coordinate\n     * @param worldCoordinate\n     */\n    worldToTile(worldCoordinate) {\n        // TODO I don't think this handles parent transform see TileMap\n        worldCoordinate = worldCoordinate.sub(this.transform.globalPos);\n        const halfTileWidth = this.tileWidth / 2;\n        const halfTileHeight = this.tileHeight / 2;\n        // See https://clintbellanger.net/articles/isometric_math/ for formula\n        return vec(~~((worldCoordinate.x / halfTileWidth + worldCoordinate.y / halfTileHeight) / 2), ~~((worldCoordinate.y / halfTileHeight - worldCoordinate.x / halfTileWidth) / 2));\n    }\n    /**\n     * Given a tile coordinate, return the top left corner in world space\n     * @param tileCoordinate\n     */\n    tileToWorld(tileCoordinate) {\n        const halfTileWidth = this.tileWidth / 2;\n        const halfTileHeight = this.tileHeight / 2;\n        // The x position shifts left with every y step\n        const xPos = (tileCoordinate.x - tileCoordinate.y) * halfTileWidth;\n        // The y position needs to go down with every x step\n        const yPos = (tileCoordinate.x + tileCoordinate.y) * halfTileHeight;\n        return vec(xPos, yPos).add(this.transform.pos);\n    }\n    /**\n     * Returns the {@apilink IsometricTile} by its x and y coordinates\n     */\n    getTile(x, y) {\n        if (x < 0 || y < 0 || x >= this.columns || y >= this.rows) {\n            return null;\n        }\n        return this.tiles[x + y * this.columns];\n    }\n    /**\n     * Returns the {@apilink IsometricTile} by testing a point in world coordinates,\n     * returns `null` if no Tile was found.\n     */\n    getTileByPoint(point) {\n        const tileCoord = this.worldToTile(point);\n        const tile = this.getTile(tileCoord.x, tileCoord.y);\n        return tile;\n    }\n    _getMaxZIndex() {\n        let maxZ = Number.NEGATIVE_INFINITY;\n        for (const tile of this.tiles) {\n            const currentZ = tile.get(TransformComponent).z;\n            if (currentZ > maxZ) {\n                maxZ = currentZ;\n            }\n        }\n        return maxZ;\n    }\n    /**\n     * Debug draw for IsometricMap, called internally by excalibur when debug mode is toggled on\n     * @param gfx\n     */\n    debug(gfx, debugFlags) {\n        const { showAll, showPosition, positionColor, positionSize, showGrid, gridColor, gridWidth, showColliderGeometry } = debugFlags.isometric;\n        const { geometryColor, geometryLineWidth, geometryPointSize } = debugFlags.collider;\n        gfx.save();\n        gfx.z = this._getMaxZIndex() + 0.5;\n        if (showAll || showGrid) {\n            for (let y = 0; y < this.rows + 1; y++) {\n                const left = this.tileToWorld(vec(0, y));\n                const right = this.tileToWorld(vec(this.columns, y));\n                gfx.drawLine(left, right, gridColor, gridWidth);\n            }\n            for (let x = 0; x < this.columns + 1; x++) {\n                const top = this.tileToWorld(vec(x, 0));\n                const bottom = this.tileToWorld(vec(x, this.rows));\n                gfx.drawLine(top, bottom, gridColor, gridWidth);\n            }\n        }\n        if (showAll || showPosition) {\n            for (const tile of this.tiles) {\n                gfx.drawCircle(this.tileToWorld(vec(tile.x, tile.y)), positionSize, positionColor);\n            }\n        }\n        if (showAll || showColliderGeometry) {\n            for (const tile of this.tiles) {\n                if (tile.solid) {\n                    // only draw solid tiles\n                    for (const collider of tile.getColliders()) {\n                        collider.debug(gfx, geometryColor, { lineWidth: geometryLineWidth, pointSize: geometryPointSize });\n                    }\n                }\n            }\n        }\n        gfx.restore();\n    }\n}\n\n;// ./TileMap/index.ts\n\n\n\n\n\n;// ./Actions/Action/ActionSequence.ts\n\n\n/**\n * Action that can represent a sequence of actions, this can be useful in conjunction with\n * {@apilink ParallelActions} to run multiple sequences in parallel.\n */\nclass ActionSequence {\n    constructor(entity, actionBuilder) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._sequenceBuilder = actionBuilder;\n        this._sequenceContext = new ActionContext(entity);\n        this._actionQueue = this._sequenceContext.getQueue();\n        this._sequenceBuilder(this._sequenceContext);\n    }\n    update(elapsed) {\n        this._actionQueue.update(elapsed);\n    }\n    isComplete() {\n        return this._stopped || this._actionQueue.isComplete();\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._stopped = false;\n        this._actionQueue.reset();\n    }\n    clone(entity) {\n        return new ActionSequence(entity, this._sequenceBuilder);\n    }\n}\n\n;// ./Actions/Action/ParallelActions.ts\n\n/**\n * Action that can run multiple {@apilink Action}s or {@apilink ActionSequence}s at the same time\n */\nclass ParallelActions {\n    constructor(parallelActions) {\n        this.id = nextActionId();\n        this._actions = parallelActions;\n    }\n    update(elapsed) {\n        for (let i = 0; i < this._actions.length; i++) {\n            this._actions[i].update(elapsed);\n        }\n    }\n    isComplete(entity) {\n        return this._actions.every((a) => a.isComplete(entity));\n    }\n    reset() {\n        this._actions.forEach((a) => a.reset());\n    }\n    stop() {\n        this._actions.forEach((a) => a.stop());\n    }\n}\n\n;// ./Actions/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Collision/Detection/QuadTree.ts\n\n\n/**\n * QuadTree spatial data structure. Useful for quickly retrieving all objects that might\n * be in a specific location.\n */\nclass QuadTree {\n    constructor(bounds, options) {\n        this.bounds = bounds;\n        this.options = options;\n        this._defaultOptions = {\n            maxDepth: 10,\n            capacity: 10,\n            level: 0\n        };\n        this.items = [];\n        this._isDivided = false;\n        this.topLeft = null;\n        this.topRight = null;\n        this.bottomLeft = null;\n        this.bottomRight = null;\n        this.options = { ...this._defaultOptions, ...options };\n        this.halfWidth = bounds.width / 2;\n        this.halfHeight = bounds.height / 2;\n    }\n    /**\n     * Splits the quad tree one level deeper\n     */\n    _split() {\n        this._isDivided = true;\n        const newLevelOptions = {\n            maxDepth: this.options.maxDepth,\n            capacity: this.options.capacity,\n            level: this.options.level + 1\n        };\n        this.topLeft = new QuadTree(new BoundingBox({\n            left: this.bounds.left,\n            top: this.bounds.top,\n            right: this.bounds.left + this.halfWidth,\n            bottom: this.bounds.top + this.halfHeight\n        }), newLevelOptions);\n        this.topRight = new QuadTree(new BoundingBox({\n            left: this.bounds.left + this.halfWidth,\n            top: this.bounds.top,\n            right: this.bounds.right,\n            bottom: this.bounds.top + this.halfHeight\n        }), newLevelOptions);\n        this.bottomLeft = new QuadTree(new BoundingBox({\n            left: this.bounds.left,\n            top: this.bounds.top + this.halfHeight,\n            right: this.bounds.left + this.halfWidth,\n            bottom: this.bounds.bottom\n        }), newLevelOptions);\n        this.bottomRight = new QuadTree(new BoundingBox({\n            left: this.bounds.left + this.halfWidth,\n            top: this.bounds.top + this.halfHeight,\n            right: this.bounds.right,\n            bottom: this.bounds.bottom\n        }), newLevelOptions);\n    }\n    _insertIntoSubNodes(item) {\n        var _a, _b, _c, _d;\n        if ((_a = this.topLeft) === null || _a === void 0 ? void 0 : _a.bounds.overlaps(item.bounds)) {\n            this.topLeft.insert(item);\n        }\n        if ((_b = this.topRight) === null || _b === void 0 ? void 0 : _b.bounds.overlaps(item.bounds)) {\n            this.topRight.insert(item);\n        }\n        if ((_c = this.bottomLeft) === null || _c === void 0 ? void 0 : _c.bounds.overlaps(item.bounds)) {\n            this.bottomLeft.insert(item);\n        }\n        if ((_d = this.bottomRight) === null || _d === void 0 ? void 0 : _d.bounds.overlaps(item.bounds)) {\n            this.bottomRight.insert(item);\n        }\n    }\n    /**\n     * Insert an item to be tracked in the QuadTree\n     * @param item\n     */\n    insert(item) {\n        // add to subnodes if it matches\n        if (this._isDivided) {\n            this._insertIntoSubNodes(item);\n            return;\n        }\n        // leaf case\n        this.items.push(item);\n        // capacity\n        if (this.items.length > this.options.capacity && this.options.level < this.options.maxDepth) {\n            if (!this._isDivided) {\n                this._split();\n            }\n            // divide this level's items into it's subnodes\n            for (const item of this.items) {\n                this._insertIntoSubNodes(item);\n            }\n            // clear this level\n            this.items.length = 0;\n        }\n    }\n    /**\n     * Remove a tracked item in the QuadTree\n     * @param item\n     */\n    remove(item) {\n        var _a, _b, _c, _d;\n        if (!this.bounds.overlaps(item.bounds)) {\n            return;\n        }\n        if (!this._isDivided) {\n            const index = this.items.indexOf(item);\n            if (index > -1) {\n                this.items.splice(index, 1);\n            }\n            return;\n        }\n        if ((_a = this.topLeft) === null || _a === void 0 ? void 0 : _a.bounds.overlaps(item.bounds)) {\n            this.topLeft.remove(item);\n        }\n        if ((_b = this.topRight) === null || _b === void 0 ? void 0 : _b.bounds.overlaps(item.bounds)) {\n            this.topRight.remove(item);\n        }\n        if ((_c = this.bottomLeft) === null || _c === void 0 ? void 0 : _c.bounds.overlaps(item.bounds)) {\n            this.bottomLeft.remove(item);\n        }\n        if ((_d = this.bottomRight) === null || _d === void 0 ? void 0 : _d.bounds.overlaps(item.bounds)) {\n            this.bottomRight.remove(item);\n        }\n    }\n    /**\n     * Query the structure for all objects that intersect the bounding box\n     * @param boundingBox\n     * @returns items\n     */\n    query(boundingBox) {\n        let results = this.items;\n        if (this._isDivided) {\n            if (this.topLeft.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.topLeft.query(boundingBox));\n            }\n            if (this.topRight.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.topRight.query(boundingBox));\n            }\n            if (this.bottomLeft.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.bottomLeft.query(boundingBox));\n            }\n            if (this.bottomRight.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.bottomRight.query(boundingBox));\n            }\n        }\n        results = results.filter((item, index) => {\n            return results.indexOf(item) >= index;\n        });\n        return results;\n    }\n    clear() {\n        this.items = [];\n        this._isDivided = false;\n        this.topLeft = null;\n        this.topRight = null;\n        this.bottomLeft = null;\n        this.bottomRight = null;\n    }\n    getAllItems() {\n        let results = this.items;\n        if (this._isDivided) {\n            results = results.concat(this.topLeft.getAllItems());\n            results = results.concat(this.topRight.getAllItems());\n            results = results.concat(this.bottomLeft.getAllItems());\n            results = results.concat(this.bottomRight.getAllItems());\n        }\n        results = results.filter((item, index) => {\n            return results.indexOf(item) >= index;\n        });\n        return results;\n    }\n    getTreeDepth() {\n        if (!this._isDivided) {\n            return 0;\n        }\n        return (1 +\n            Math.max(this.topLeft.getTreeDepth(), this.topRight.getTreeDepth(), this.bottomLeft.getTreeDepth(), this.bottomRight.getTreeDepth()));\n    }\n    debug(ctx) {\n        this.bounds.draw(ctx, Color.Yellow);\n        if (this._isDivided) {\n            this.topLeft.bounds.draw(ctx, Color.Yellow);\n            this.topRight.bounds.draw(ctx, Color.Yellow);\n            this.bottomLeft.bounds.draw(ctx, Color.Yellow);\n            this.bottomRight.bounds.draw(ctx, Color.Yellow);\n        }\n    }\n}\n\n;// ./Collision/Index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Interfaces/LifecycleEvents.ts\n/**\n * Type guard checking for internal initialize method\n * @internal\n * @param a\n */\nfunction has_initialize(a) {\n    return !!a._initialize;\n}\n/**\n *\n */\nfunction has_add(a) {\n    return !!a.onAdd;\n}\n/**\n *\n */\nfunction has_remove(a) {\n    return !!a.onRemove;\n}\n/**\n *\n */\nfunction hasOnInitialize(a) {\n    return !!a.onInitialize;\n}\n/**\n *\n */\nfunction has_preupdate(a) {\n    return !!a._preupdate;\n}\n/**\n *\n */\nfunction hasOnPreUpdate(a) {\n    return !!a.onPreUpdate;\n}\n/**\n *\n */\nfunction has_postupdate(a) {\n    return !!a.onPostUpdate;\n}\n/**\n *\n */\nfunction hasOnPostUpdate(a) {\n    return !!a.onPostUpdate;\n}\n/**\n *\n */\nfunction hasOnAdd(a) {\n    return !!a.onAdd;\n}\n/**\n *\n */\nfunction hasOnRemove(a) {\n    return !!a.onRemove;\n}\n/**\n *\n */\nfunction hasPreDraw(a) {\n    return !!a.onPreDraw;\n}\n/**\n *\n */\nfunction hasPostDraw(a) {\n    return !!a.onPostDraw;\n}\n\n;// ./Interfaces/Index.ts\n\n\n\n\n\n\n\n\n;// ./Resources/Sound/Index.ts\n\n\n\n\n;// ./Resources/Gif.ts\n\n\n\n\n/**\n * The {@apilink Texture} object allows games built in Excalibur to load image resources.\n * {@apilink Texture} is an {@apilink Loadable} which means it can be passed to a {@apilink Loader}\n * to pre-load before starting a level or game.\n */\nclass Gif {\n    /**\n     * @param path       Path to the image resource\n     * @param bustCache  Optionally load texture with cache busting\n     */\n    constructor(path, bustCache = false) {\n        this.path = path;\n        /**\n         * The width of the texture in pixels\n         */\n        this.width = 0;\n        /**\n         * The height of the texture in pixels\n         */\n        this.height = 0;\n        this._images = [];\n        this.data = [];\n        this._sprites = [];\n        this._resource = new Resource(path, 'arraybuffer', bustCache);\n    }\n    /**\n     * Should excalibur add a cache busting querystring? By default false.\n     * Must be set before loading\n     */\n    get bustCache() {\n        return this._resource.bustCache;\n    }\n    set bustCache(val) {\n        this._resource.bustCache = val;\n    }\n    /**\n     * Begins loading the texture and returns a promise to be resolved on completion\n     */\n    async load() {\n        const arraybuffer = await this._resource.load();\n        this._stream = new Stream(arraybuffer);\n        this._gif = new GifParser(this._stream);\n        const images = this._gif.images.map((i) => new ImageSource(i.src, false));\n        // Load all textures\n        await Promise.all(images.map((t) => t.load()));\n        this.data = this._images = images;\n        this._sprites = this._images.map((image) => {\n            return image.toSprite();\n        });\n        return this.data;\n    }\n    isLoaded() {\n        return !!this.data;\n    }\n    /**\n     * Return a frame of the gif as a sprite by id\n     * @param id\n     */\n    toSprite(id = 0) {\n        var _a;\n        return (_a = this._sprites[id]) !== null && _a !== void 0 ? _a : null;\n    }\n    /**\n     * Return the gif as a spritesheet\n     */\n    toSpriteSheet() {\n        const sprites = this._sprites;\n        if (sprites.length) {\n            return new SpriteSheet({ sprites });\n        }\n        return null;\n    }\n    /**\n     * Transform the GIF into an animation with duration per frame\n     * @param durationPerFrame Optionally override duration per frame\n     */\n    toAnimation(durationPerFrame) {\n        var _a;\n        const images = (_a = this._gif) === null || _a === void 0 ? void 0 : _a.images;\n        if (images === null || images === void 0 ? void 0 : images.length) {\n            const frames = images.map((image, index) => {\n                var _a;\n                return {\n                    graphic: this._sprites[index],\n                    duration: ((_a = this._gif) === null || _a === void 0 ? void 0 : _a.frames[index].delayMs) || undefined\n                };\n            });\n            this._animation = new Animation({\n                frames,\n                frameDuration: durationPerFrame\n            });\n            return this._animation;\n        }\n        return null;\n    }\n    get readCheckBytes() {\n        var _a, _b;\n        return (_b = (_a = this._gif) === null || _a === void 0 ? void 0 : _a.checkBytes) !== null && _b !== void 0 ? _b : [];\n    }\n}\nconst bitsToNum = (ba) => {\n    return ba.reduce(function (s, n) {\n        return s * 2 + n;\n    }, 0);\n};\nconst byteToBitArr = (bite) => {\n    const a = [];\n    for (let i = 7; i >= 0; i--) {\n        a.push(!!(bite & (1 << i)));\n    }\n    return a;\n};\nclass Stream {\n    constructor(dataArray) {\n        this.len = 0;\n        this.position = 0;\n        this.readByte = () => {\n            if (this.position >= this.data.byteLength) {\n                throw new Error('Attempted to read past end of stream.');\n            }\n            return this.data[this.position++];\n        };\n        this.readBytes = (n) => {\n            const bytes = [];\n            for (let i = 0; i < n; i++) {\n                bytes.push(this.readByte());\n            }\n            return bytes;\n        };\n        this.read = (n) => {\n            let s = '';\n            for (let i = 0; i < n; i++) {\n                s += String.fromCharCode(this.readByte());\n            }\n            return s;\n        };\n        this.readUnsigned = () => {\n            // Little-endian.\n            const a = this.readBytes(2);\n            return (a[1] << 8) + a[0];\n        };\n        this.data = new Uint8Array(dataArray);\n        this.len = this.data.byteLength;\n        if (this.len === 0) {\n            throw new Error('No data loaded from file');\n        }\n    }\n}\nconst lzwDecode = function (minCodeSize, data) {\n    // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\n    let pos = 0; // Maybe this streaming thing should be merged with the Stream?\n    const readCode = function (size) {\n        let code = 0;\n        for (let i = 0; i < size; i++) {\n            if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\n                code |= 1 << i;\n            }\n            pos++;\n        }\n        return code;\n    };\n    const output = [];\n    const clearCode = 1 << minCodeSize;\n    const eoiCode = clearCode + 1;\n    let codeSize = minCodeSize + 1;\n    let dict = [];\n    const clear = function () {\n        dict = [];\n        codeSize = minCodeSize + 1;\n        for (let i = 0; i < clearCode; i++) {\n            dict[i] = [i];\n        }\n        dict[clearCode] = [];\n        dict[eoiCode] = null;\n    };\n    let code = 0;\n    let last = 0;\n    while (true) {\n        last = code;\n        code = readCode(codeSize);\n        if (code === clearCode) {\n            clear();\n            continue;\n        }\n        if (code === eoiCode) {\n            break;\n        }\n        if (code < dict.length) {\n            if (last !== clearCode) {\n                dict.push(dict[last].concat(dict[code][0]));\n            }\n        }\n        else {\n            if (code !== dict.length) {\n                throw new Error('Invalid LZW code.');\n            }\n            dict.push(dict[last].concat(dict[last][0]));\n        }\n        output.push.apply(output, dict[code]);\n        if (dict.length === 1 << codeSize && codeSize < 12) {\n            // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\n            codeSize++;\n        }\n    }\n    // I don't know if this is technically an error, but some GIFs do it.\n    //if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\n    return output;\n};\n/**\n * GifParser for binary format\n *\n * Roughly based on the documentation https://giflib.sourceforge.net/whatsinagif/index.html\n */\nclass GifParser {\n    constructor(stream) {\n        this._handler = {};\n        this.frames = [];\n        this.images = [];\n        this.globalColorTableBytes = [];\n        this.checkBytes = [];\n        this.parseColorTableBytes = (entries) => {\n            // Each entry is 3 bytes, for RGB.\n            const colorTable = [];\n            for (let i = 0; i < entries; i++) {\n                const rgb = this._st.readBytes(3);\n                colorTable.push(rgb);\n            }\n            return colorTable;\n        };\n        this.readSubBlocks = () => {\n            let size, data;\n            data = '';\n            do {\n                size = this._st.readByte();\n                data += this._st.read(size);\n            } while (size !== 0);\n            return data;\n        };\n        this.parseHeader = () => {\n            const hdr = {\n                sig: '',\n                ver: '',\n                width: 0,\n                height: 0,\n                colorResolution: 0,\n                globalColorTableSize: 0,\n                gctFlag: false,\n                sortedFlag: false,\n                globalColorTable: [],\n                backgroundColorIndex: 0,\n                pixelAspectRatio: 0 // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n            };\n            hdr.sig = this._st.read(3);\n            hdr.ver = this._st.read(3);\n            if (hdr.sig !== 'GIF') {\n                throw new Error('Not a GIF file.'); // XXX: This should probably be handled more nicely.\n            }\n            hdr.width = this._st.readUnsigned();\n            hdr.height = this._st.readUnsigned();\n            this._currentFrameCanvas.width = hdr.width;\n            this._currentFrameCanvas.height = hdr.height;\n            const bits = byteToBitArr(this._st.readByte());\n            hdr.gctFlag = bits.shift();\n            hdr.colorResolution = bitsToNum(bits.splice(0, 3));\n            hdr.sortedFlag = bits.shift();\n            hdr.globalColorTableSize = bitsToNum(bits.splice(0, 3));\n            hdr.backgroundColorIndex = this._st.readByte();\n            hdr.pixelAspectRatio = this._st.readByte(); // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n            if (hdr.gctFlag) {\n                // hdr.globalColorTable = this.parseColorTable(1 << (hdr.globalColorTableSize + 1));\n                this.globalColorTableBytes = this.parseColorTableBytes(1 << (hdr.globalColorTableSize + 1));\n            }\n            if (this._handler.hdr && this._handler.hdr(hdr)) {\n                this.checkBytes.push(this._handler.hdr);\n            }\n        };\n        this.parseExt = (block) => {\n            const parseGCExt = (block) => {\n                this.checkBytes.push(this._st.readByte()); // Always 4\n                const bits = byteToBitArr(this._st.readByte());\n                block.reserved = bits.splice(0, 3); // Reserved; should be 000.\n                block.disposalMethod = bitsToNum(bits.splice(0, 3));\n                block.userInputFlag = bits.shift();\n                block.transparentColorFlag = bits.shift();\n                block.delayTime = this._st.readUnsigned();\n                block.transparentColorIndex = this._st.readByte();\n                block.terminator = this._st.readByte(); // always 0\n                if (this._handler.gce && this._handler.gce(block)) {\n                    this.checkBytes.push(this._handler.gce);\n                }\n                return block;\n            };\n            const parseComExt = (block) => {\n                block.comment = this.readSubBlocks();\n                if (this._handler.com && this._handler.com(block)) {\n                    this.checkBytes.push(this._handler.com);\n                }\n            };\n            const parsePTExt = (block) => {\n                this.checkBytes.push(this._st.readByte()); // Always 12\n                block.ptHeader = this._st.readBytes(12);\n                block.ptData = this.readSubBlocks();\n                if (this._handler.pte && this._handler.pte(block)) {\n                    this.checkBytes.push(this._handler.pte);\n                }\n            };\n            const parseAppExt = (block) => {\n                const parseNetscapeExt = (block) => {\n                    this.checkBytes.push(this._st.readByte()); // Always 3\n                    block.unknown = this._st.readByte(); // Q: Always 1? What is this?\n                    block.iterations = this._st.readUnsigned();\n                    block.terminator = this._st.readByte();\n                    if (this._handler.app && this._handler.app.NETSCAPE && this._handler.app.NETSCAPE(block)) {\n                        this.checkBytes.push(this._handler.app);\n                    }\n                };\n                const parseUnknownAppExt = (block) => {\n                    block.appData = this.readSubBlocks();\n                    // FIXME: This won't work if a handler wants to match on any identifier.\n                    if (this._handler.app && this._handler.app[block.identifier] && this._handler.app[block.identifier](block)) {\n                        this.checkBytes.push(this._handler.app[block.identifier]);\n                    }\n                };\n                this.checkBytes.push(this._st.readByte()); // Always 11\n                block.identifier = this._st.read(8);\n                block.authCode = this._st.read(3);\n                switch (block.identifier) {\n                    case 'NETSCAPE':\n                        parseNetscapeExt(block);\n                        break;\n                    default:\n                        parseUnknownAppExt(block);\n                        break;\n                }\n            };\n            const parseUnknownExt = (block) => {\n                block.data = this.readSubBlocks();\n                if (this._handler.unknown && this._handler.unknown(block)) {\n                    this.checkBytes.push(this._handler.unknown);\n                }\n            };\n            block.label = this._st.readByte();\n            switch (block.label) {\n                case 0xf9:\n                    block.extType = 'gce';\n                    this._gce = parseGCExt(block);\n                    break;\n                case 0xfe:\n                    block.extType = 'com';\n                    parseComExt(block);\n                    break;\n                case 0x01:\n                    block.extType = 'pte';\n                    parsePTExt(block);\n                    break;\n                case 0xff:\n                    block.extType = 'app';\n                    parseAppExt(block);\n                    break;\n                default:\n                    block.extType = 'unknown';\n                    parseUnknownExt(block);\n                    break;\n            }\n        };\n        this.parseImg = (img) => {\n            var _a;\n            const deinterlace = (pixels, width) => {\n                // Of course this defeats the purpose of interlacing. And it's *probably*\n                // the least efficient way it's ever been implemented. But nevertheless...\n                const newPixels = new Array(pixels.length);\n                const rows = pixels.length / width;\n                const cpRow = (toRow, fromRow) => {\n                    const fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n                    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n                };\n                const offsets = [0, 4, 2, 1];\n                const steps = [8, 8, 4, 2];\n                let fromRow = 0;\n                for (let pass = 0; pass < 4; pass++) {\n                    for (let toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n                        cpRow(toRow, fromRow);\n                        fromRow++;\n                    }\n                }\n                return newPixels;\n            };\n            img.leftPos = this._st.readUnsigned();\n            img.topPos = this._st.readUnsigned();\n            img.width = this._st.readUnsigned();\n            img.height = this._st.readUnsigned();\n            const bits = byteToBitArr(this._st.readByte());\n            img.lctFlag = bits.shift();\n            img.interlaced = bits.shift();\n            img.sorted = bits.shift();\n            img.reserved = bits.splice(0, 2);\n            img.lctSize = bitsToNum(bits.splice(0, 3));\n            if (img.lctFlag) {\n                img.lctBytes = this.parseColorTableBytes(1 << (img.lctSize + 1));\n            }\n            img.lzwMinCodeSize = this._st.readByte();\n            const lzwData = this.readSubBlocks();\n            img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData);\n            if (img.interlaced) {\n                // Move\n                img.pixels = deinterlace(img.pixels, img.width);\n            }\n            if ((_a = this._gce) === null || _a === void 0 ? void 0 : _a.delayTime) {\n                img.delayMs = this._gce.delayTime * 10;\n            }\n            this.frames.push(img);\n            this.arrayToImage(img, img.lctFlag ? img.lctBytes : this.globalColorTableBytes);\n            if (this._handler.img && this._handler.img(img)) {\n                this.checkBytes.push(this._handler);\n            }\n        };\n        this.parseBlocks = () => {\n            const block = {\n                sentinel: this._st.readByte(),\n                type: ''\n            };\n            const blockChar = String.fromCharCode(block.sentinel);\n            switch (blockChar) {\n                case '!':\n                    block.type = 'ext';\n                    this.parseExt(block);\n                    break;\n                case ',':\n                    block.type = 'img';\n                    this.parseImg(block);\n                    break;\n                case ';':\n                    block.type = 'eof';\n                    if (this._handler.eof && this._handler.eof(block)) {\n                        this.checkBytes.push(this._handler.eof);\n                    }\n                    break;\n                default:\n                    throw new Error('Unknown block: 0x' + block.sentinel.toString(16));\n            }\n            if (block.type !== 'eof') {\n                this.parseBlocks();\n            }\n        };\n        this.arrayToImage = (frame, colorTable) => {\n            var _a, _b, _c, _d;\n            const canvas = document.createElement('canvas');\n            canvas.width = frame.width;\n            canvas.height = frame.height;\n            const context = canvas.getContext('2d');\n            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n            let transparentColorIndex = -1;\n            if ((_a = this._gce) === null || _a === void 0 ? void 0 : _a.transparentColorFlag) {\n                transparentColorIndex = this._gce.transparentColorIndex;\n            }\n            for (let pixel = 0; pixel < frame.pixels.length; pixel++) {\n                const colorIndex = frame.pixels[pixel];\n                const color = colorTable[colorIndex];\n                if (colorIndex === transparentColorIndex) {\n                    imageData.data.set([0, 0, 0, 0], pixel * 4);\n                }\n                else {\n                    imageData.data.set([...color, 255], pixel * 4);\n                }\n            }\n            context.putImageData(imageData, 0, 0);\n            // A value of 1 which tells the decoder to leave the image in place and draw the next image on top of it.\n            // A value of 2 would have meant that the canvas should be restored to the background color (as indicated by the logical screen descriptor).\n            // A value of 3 is defined to mean that the decoder should restore the canvas to its previous state before the current image was drawn.\n            // The behavior for values 4-7 are yet to be defined.\n            if (((_b = this._gce) === null || _b === void 0 ? void 0 : _b.disposalMethod) === 1 && this.images.length) {\n                this._currentFrameContext.drawImage(this.images[this.images.length - 1], 0, 0);\n            }\n            else if (((_c = this._gce) === null || _c === void 0 ? void 0 : _c.disposalMethod) === 2 && ((_d = this._hdr) === null || _d === void 0 ? void 0 : _d.gctFlag)) {\n                const bg = colorTable[this._hdr.backgroundColorIndex];\n                this._currentFrameContext.fillStyle = `rgb(${bg[0]}, ${bg[1]}, ${bg[2]})`;\n                this._currentFrameContext.fillRect(0, 0, this._hdr.width, this._hdr.height);\n            }\n            else {\n                this._currentFrameContext.clearRect(0, 0, this._currentFrameCanvas.width, this._currentFrameCanvas.height);\n            }\n            this._currentFrameContext.drawImage(canvas, frame.leftPos, frame.topPos, frame.width, frame.height);\n            const img = new Image();\n            img.src = this._currentFrameCanvas.toDataURL(); // default is png\n            this.images.push(img);\n        };\n        this._st = stream;\n        this._handler = {};\n        this._currentFrameCanvas = document.createElement('canvas');\n        this._currentFrameContext = this._currentFrameCanvas.getContext('2d');\n        this.parseHeader();\n        this.parseBlocks();\n    }\n}\n\n;// ./Resources/Font.ts\n\n\nclass FontSource {\n    constructor(\n    /**\n     * Path to the font resource relative from the HTML document hosting the game, or absolute\n     */\n    path, \n    /**\n     * The font family name\n     */\n    family, { bustCache, ...options } = {}) {\n        this.path = path;\n        this.family = family;\n        this._isLoaded = false;\n        this._resource = new Resource(path, 'blob', bustCache);\n        this._options = options;\n    }\n    async load() {\n        if (this.isLoaded()) {\n            return this.data;\n        }\n        try {\n            const blob = await this._resource.load();\n            const url = URL.createObjectURL(blob);\n            if (!this.data) {\n                this.data = new FontFace(this.family, `url(${url})`);\n                document.fonts.add(this.data);\n            }\n            await this.data.load();\n            this._isLoaded = true;\n        }\n        catch (error) {\n            throw `Error loading FontSource from path '${this.path}' with error [${error.message}]`;\n        }\n        return this.data;\n    }\n    isLoaded() {\n        return this._isLoaded;\n    }\n    /**\n     * Build a font from this FontSource.\n     * @param options {FontOptions} Override the font options\n     */\n    toFont(options) {\n        return new Font({ family: this.family, ...this._options, ...options });\n    }\n}\n\n;// ./Resources/Index.ts\n\n\n\n\n\n;// ./EntityComponentSystem/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Util/Coroutine.ts\n\n\n\nconst InsideCoroutineContext = createContext();\nconst generatorFunctionDeclaration = /^\\s*(?:function)?\\*/;\n/**\n *\n */\nfunction isCoroutineGenerator(x) {\n    if (typeof x !== 'function') {\n        return false;\n    }\n    if (generatorFunctionDeclaration.test(Function.prototype.toString.call(x))) {\n        return true;\n    }\n    if (!Object.getPrototypeOf) {\n        return false;\n    }\n    return Object.getPrototypeOf(x) === Object.getPrototypeOf(new Function('return function * () {}')());\n}\n/**\n *\n */\nfunction coroutine(...args) {\n    var _a;\n    const logger = Logger.getInstance();\n    let coroutineGenerator;\n    let thisArg;\n    let options;\n    let passedEngine;\n    // coroutine(coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (isCoroutineGenerator(args[0])) {\n        thisArg = globalThis;\n        coroutineGenerator = args[0];\n        options = args[1];\n    }\n    // coroutine(thisArg: any, coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (isCoroutineGenerator(args[1])) {\n        thisArg = args[0];\n        coroutineGenerator = args[1];\n        options = args[2];\n    }\n    // coroutine(thisArg: any, engine: Engine, coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (args[1] instanceof Engine) {\n        thisArg = args[0];\n        passedEngine = args[1];\n        coroutineGenerator = args[2];\n        options = args[3];\n    }\n    // coroutine(engine: Engine, coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (args[0] instanceof Engine) {\n        thisArg = globalThis;\n        passedEngine = args[0];\n        coroutineGenerator = args[1];\n        options = args[2];\n    }\n    const inside = useContext(InsideCoroutineContext);\n    const schedule = options === null || options === void 0 ? void 0 : options.timing;\n    const autostart = inside ? false : (_a = options === null || options === void 0 ? void 0 : options.autostart) !== null && _a !== void 0 ? _a : true;\n    let engine;\n    try {\n        engine = passedEngine !== null && passedEngine !== void 0 ? passedEngine : Engine.useEngine();\n    }\n    catch (_) {\n        throw Error('Cannot run coroutine without engine parameter outside of an excalibur lifecycle method.\\n' +\n            'Pass an engine parameter to ex.coroutine(engine, function * {...})');\n    }\n    let started = false;\n    let completed = false;\n    let cancelled = false;\n    const generatorFcn = coroutineGenerator.bind(thisArg);\n    const generator = generatorFcn();\n    let loop;\n    const complete = new Promise((resolve, reject) => {\n        loop = (elapsed) => {\n            try {\n                if (cancelled) {\n                    completed = true;\n                    resolve();\n                    return;\n                }\n                const { done, value } = InsideCoroutineContext.scope(true, () => generator.next(elapsed));\n                if (done || cancelled) {\n                    completed = true;\n                    resolve();\n                    return;\n                }\n                if (value instanceof Promise) {\n                    value.then(() => {\n                        // schedule next loop\n                        engine.clock.schedule(loop, 0, schedule);\n                    });\n                }\n                else if (value === undefined || value === void 0) {\n                    // schedule next frame\n                    engine.clock.schedule(loop, 0, schedule);\n                }\n                else {\n                    // schedule value milliseconds from now\n                    engine.clock.schedule(loop, value || 0, schedule);\n                }\n            }\n            catch (e) {\n                reject(e);\n                return;\n            }\n        };\n        if (autostart) {\n            started = true;\n            loop(engine.clock.elapsed()); // run first frame immediately\n        }\n    });\n    const co = {\n        isRunning: () => {\n            return started && !cancelled && !completed;\n        },\n        isComplete: () => {\n            return completed;\n        },\n        cancel: () => {\n            cancelled = true;\n        },\n        start: () => {\n            if (!started) {\n                started = true;\n                loop(engine.clock.elapsed());\n            }\n            else {\n                logger.warn('.start() was called on a coroutine that was already started, this is probably a bug:\\n', Function.prototype.toString.call(generatorFcn));\n            }\n            return co;\n        },\n        generator,\n        done: complete,\n        then: complete.then.bind(complete),\n        [Symbol.iterator]: () => {\n            // TODO warn if a coroutine is already running\n            // TODO warn if a coroutine is cancelled\n            return generator;\n        }\n    };\n    return co;\n}\n\n;// ./Director/Transition.ts\n\n\n\n\n\n\n\n\n\n/**\n * Base Transition that can be extended to provide custom scene transitions in Excalibur.\n */\nclass Transition extends Entity {\n    /**\n     * Returns a number between [0, 1] indicating what state the transition is in.\n     *\n     * * For 'out' direction transitions start at 0 and end at 1\n     * * For 'in' direction transitions start at 1 and end at 0\n     */\n    get progress() {\n        return this._currentProgress;\n    }\n    get complete() {\n        if (this.direction === 'out') {\n            return this.progress >= 1;\n        }\n        else {\n            return this.progress <= 0;\n        }\n    }\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        this._logger = Logger.getInstance();\n        this.transform = new TransformComponent();\n        this.graphics = new GraphicsComponent();\n        this._completeFuture = new Future();\n        // State needs to be reset between uses\n        this.started = false;\n        this._currentDistance = 0;\n        this._currentProgress = 0;\n        this.done = this._completeFuture.promise;\n        this.name = `Transition#${this.id}`;\n        this.duration = options.duration;\n        this.easing = (_a = options.easing) !== null && _a !== void 0 ? _a : EasingFunctions.Linear;\n        this.direction = (_b = options.direction) !== null && _b !== void 0 ? _b : 'out';\n        this.hideLoader = (_c = options.hideLoader) !== null && _c !== void 0 ? _c : false;\n        this.blockInput = (_d = options.blockInput) !== null && _d !== void 0 ? _d : false;\n        this.transform.coordPlane = CoordPlane.Screen;\n        this.transform.pos = Vector.Zero;\n        this.transform.z = Infinity; // Transitions sit on top of everything\n        this.graphics.anchor = Vector.Zero;\n        this.addComponent(this.transform);\n        this.addComponent(this.graphics);\n        if (this.direction === 'out') {\n            this._currentProgress = 0;\n        }\n        else {\n            this._currentProgress = 1;\n        }\n    }\n    /**\n     * Overridable lifecycle method, called before each update.\n     *\n     * **WARNING BE SURE** to call `super.updateTransition()` if overriding in your own custom implementation\n     * @param engine\n     * @param elapsed\n     */\n    updateTransition(engine, elapsed) {\n        if (this.complete) {\n            return;\n        }\n        this._currentDistance += clamp(elapsed / this.duration, 0, 1);\n        if (this._currentDistance >= 1) {\n            this._currentDistance = 1;\n        }\n        if (this.direction === 'out') {\n            this._currentProgress = clamp(this.easing(this._currentDistance, 0, 1, 1), 0, 1);\n        }\n        else {\n            this._currentProgress = clamp(this.easing(this._currentDistance, 1, 0, 1), 0, 1);\n        }\n    }\n    /**\n     * Overridable lifecycle method, called right before the previous scene has deactivated.\n     *\n     * This gives incoming transition a chance to grab info from previous scene if desired\n     * @param scene\n     */\n    async onPreviousSceneDeactivate(scene) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called once at the beginning of the transition\n     *\n     * `progress` is given between 0 and 1\n     * @param progress\n     */\n    onStart(progress) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called every frame of the transition\n     *\n     * `progress` is given between 0 and 1\n     * @param progress\n     */\n    onUpdate(progress) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called at the end of the transition,\n     *\n     * `progress` is given between 0 and 1\n     * @param progress\n     */\n    onEnd(progress) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called when the transition is reset\n     *\n     * Use this to override and provide your own reset logic for internal state in custom transition implementations\n     */\n    onReset() {\n        // override me\n    }\n    /**\n     * reset() is called by the engine to reset transitions\n     */\n    reset() {\n        this.started = false;\n        this._completeFuture = new Future();\n        this.done = this._completeFuture.promise;\n        this._currentDistance = 0;\n        if (this.direction === 'out') {\n            this._currentProgress = 0;\n        }\n        else {\n            this._currentProgress = 1;\n        }\n        this.onReset();\n    }\n    /**\n     * @internal\n     */\n    _addToTargetScene(engine, targetScene) {\n        const currentScene = targetScene;\n        if (this.started) {\n            this._logger.warn(`Attempted to add a transition ${this.name} that is already playing.`);\n        }\n        if (currentScene.world.entityManager.getById(this.id)) {\n            return this._co;\n        }\n        this._engine = engine;\n        currentScene.add(this);\n        const self = this;\n        this._co = coroutine(engine, function* () {\n            while (!self.complete) {\n                const elapsed = yield; // per frame\n                self.updateTransition(self._engine, elapsed);\n                self._execute();\n            }\n        }, {\n            autostart: false\n        });\n        return this._co;\n    }\n    /**\n     * Called internally by excalibur to swap scenes with transition\n     * @internal\n     */\n    async _play() {\n        if (this.started) {\n            this.reset();\n            this._logger.warn(`Attempted to play a transition ${this.name} that is already playing, reset transition.`);\n        }\n        if (!this._engine || !this._co) {\n            this.reset();\n            this._logger.warn(`Attempted to play a transition ${this.name} that hasn't been added`);\n        }\n        if (this._co) {\n            await this._co.start();\n        }\n    }\n    /**\n     * execute() is called by the engine every frame to update the Transition lifecycle onStart/onUpdate/onEnd\n     * @internal\n     */\n    _execute() {\n        if (!this.isInitialized) {\n            return;\n        }\n        if (!this.started) {\n            this.started = true;\n            this.onStart(this.progress);\n        }\n        this.onUpdate(this.progress);\n        if (this.complete && !this._completeFuture.isCompleted) {\n            this.onEnd(this.progress);\n            this._completeFuture.resolve();\n        }\n    }\n}\n\n;// ./Director/FadeInOut.ts\n\n\n\nclass FadeInOut extends Transition {\n    constructor(options) {\n        var _a, _b;\n        super({\n            ...options,\n            duration: (_a = options.duration) !== null && _a !== void 0 ? _a : 2000\n        });\n        this.name = `FadeInOut#${this.id}`;\n        this.color = (_b = options.color) !== null && _b !== void 0 ? _b : Color.Black;\n    }\n    onInitialize(engine) {\n        this.transform.pos = engine.screen.unsafeArea.topLeft;\n        this.screenCover = new Rectangle({\n            width: engine.screen.resolution.width,\n            height: engine.screen.resolution.height,\n            color: this.color\n        });\n        this.graphics.add(this.screenCover);\n        this.graphics.opacity = this.progress;\n    }\n    onReset() {\n        this.graphics.opacity = this.progress;\n    }\n    onStart(progress) {\n        this.graphics.opacity = progress;\n    }\n    onEnd(progress) {\n        this.graphics.opacity = progress;\n    }\n    onUpdate(progress) {\n        this.graphics.opacity = progress;\n    }\n}\n\n;// ./Director/CrossFade.ts\n\n\n\n/**\n * CrossFades between the previous scene and the destination scene\n *\n * Note: CrossFade only works as an \"in\" transition\n */\nclass CrossFade extends Transition {\n    constructor(options) {\n        super({ direction: 'in', ...options }); // default the correct direction\n        this.name = `CrossFade#${this.id}`;\n    }\n    async onPreviousSceneDeactivate(scene) {\n        this.image = await scene.engine.screenshot(true);\n        // Firefox is particularly slow\n        // needed in case the image isn't ready yet\n        await this.image.decode();\n    }\n    onInitialize(engine) {\n        this.engine = engine;\n        this.transform.pos = engine.screen.unsafeArea.topLeft;\n        this.screenCover = ImageSource.fromHtmlImageElement(this.image).toSprite();\n        this.graphics.add(this.screenCover);\n        // This is because we preserve hidpi res on the screen shot which COULD be bigger than the logical resolution\n        this.transform.scale = vec(1 / engine.screen.pixelRatio, 1 / engine.screen.pixelRatio);\n        this.graphics.opacity = this.progress;\n    }\n    onStart(_progress) {\n        this.graphics.opacity = this.progress;\n    }\n    onReset() {\n        this.graphics.opacity = this.progress;\n    }\n    onEnd(progress) {\n        this.graphics.opacity = progress;\n    }\n    onUpdate(progress) {\n        this.graphics.opacity = progress;\n    }\n}\n\n;// ./Director/Slide.ts\n\n\n\n\n\n/**\n * Slide`s between the previous scene and the destination scene\n *\n * Note: Slide` only works as an \"in\" transition\n */\nclass Slide extends Transition {\n    constructor(options) {\n        var _a;\n        super({ direction: 'in', ...options }); // default the correct direction\n        this._easing = EasingFunctions.Linear;\n        this.name = `Slide#${this.id}`;\n        this.slideDirection = options.slideDirection;\n        this.transform.coordPlane = CoordPlane.World;\n        this.graphics.forceOnScreen = true;\n        this._easing = (_a = options.easingFunction) !== null && _a !== void 0 ? _a : this._easing;\n        this._vectorEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\n    }\n    async onPreviousSceneDeactivate(scene) {\n        this._image = await scene.engine.screenshot(true);\n        // Firefox is particularly slow\n        // needed in case the image isn't ready yet\n        await this._image.decode();\n        this._screenCover = ImageSource.fromHtmlImageElement(this._image).toSprite();\n    }\n    onInitialize(engine) {\n        this._engine = engine;\n        switch (this.slideDirection) {\n            case 'up': {\n                this._directionOffset = vec(0, -engine.screen.resolution.height);\n                break;\n            }\n            case 'down': {\n                this._directionOffset = vec(0, engine.screen.resolution.height);\n                break;\n            }\n            case 'left': {\n                this._directionOffset = vec(-engine.screen.resolution.width, 0);\n                break;\n            }\n            case 'right': {\n                this._directionOffset = vec(engine.screen.resolution.width, 0);\n                break;\n            }\n        }\n        this._camera = this._engine.currentScene.camera;\n        this._destinationCameraPosition = this._camera.pos.clone();\n        // For sliding shift the camera and the transition slide by offset\n        this._camera.pos = this._camera.pos.add(this._directionOffset);\n        this.transform.pos = this.transform.pos.add(this._directionOffset);\n        this._startCameraPosition = this._camera.pos.clone();\n        this.graphics.use(this._screenCover);\n        // This is because we preserve hidpi res on the screen shot which COULD be bigger than the logical resolution\n        this.transform.scale = vec(1 / engine.screen.pixelRatio, 1 / engine.screen.pixelRatio);\n    }\n    onUpdate(progress) {\n        // in-transitions count down from 1 -> 0, so our \"end\" is swapped\n        this._camera.pos = this._vectorEasing(progress, this._destinationCameraPosition, this._startCameraPosition, 1);\n    }\n}\n\n;// ./Director/index.ts\n\n\n\n\n\n\n\n\n;// ./Graphics/Line.ts\n\n\n\nclass Line extends Graphic {\n    constructor(options) {\n        super();\n        this.color = Color.Black;\n        this.thickness = 1;\n        const { start, end, color, thickness } = options;\n        this.start = start;\n        this.end = end;\n        this.color = color !== null && color !== void 0 ? color : this.color;\n        this.thickness = thickness !== null && thickness !== void 0 ? thickness : this.thickness;\n        this._localBounds = this._calculateBounds();\n        const { width, height } = this._localBounds;\n        this.width = width;\n        this.height = height;\n    }\n    get localBounds() {\n        return this._localBounds;\n    }\n    _calculateBounds() {\n        const lineNormal = this.end.sub(this.start).normal();\n        const halfThickness = this.thickness / 2;\n        const points = [\n            this.start.add(lineNormal.scale(halfThickness)),\n            this.end.add(lineNormal.scale(halfThickness)),\n            this.end.add(lineNormal.scale(-halfThickness)),\n            this.start.add(lineNormal.scale(-halfThickness))\n        ];\n        return BoundingBox.fromPoints(points);\n    }\n    _drawImage(ctx, _x, _y) {\n        ctx.drawLine(this.start, this.end, this.color, this.thickness);\n    }\n    clone() {\n        return new Line({\n            start: this.start,\n            end: this.end,\n            color: this.color,\n            thickness: this.thickness\n        });\n    }\n}\n\n;// ./Graphics/Polygon.ts\n\n\n\n/**\n * A polygon {@apilink Graphic} for drawing arbitrary polygons to the {@apilink ExcaliburGraphicsContext}\n *\n * Polygons default to {@apilink ImageFiltering.Blended}\n */\nclass Polygon extends Raster {\n    get points() {\n        return this._points;\n    }\n    set points(points) {\n        this._points = points;\n        const min = this.minPoint;\n        this.width = this._points.reduce((max, p) => Math.max(p.x, max), 0) - min.x;\n        this.height = this._points.reduce((max, p) => Math.max(p.y, max), 0) - min.y;\n        this.flagDirty();\n    }\n    get minPoint() {\n        const minX = this._points.reduce((min, p) => Math.min(p.x, min), Infinity);\n        const minY = this._points.reduce((min, p) => Math.min(p.y, min), Infinity);\n        return vec(minX, minY);\n    }\n    constructor(options) {\n        super(options);\n        this._points = [];\n        this.points = options.points;\n        this.filtering = ImageFiltering.Blended;\n        this.rasterize();\n    }\n    clone() {\n        return new Polygon({\n            points: this.points.map((p) => p.clone()),\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        if (this.points && this.points.length) {\n            ctx.beginPath();\n            // Iterate through the supplied points and construct a 'polygon'\n            const min = this.minPoint.negate();\n            const firstPoint = this.points[0].add(min);\n            ctx.moveTo(firstPoint.x, firstPoint.y);\n            this.points.forEach((point) => {\n                ctx.lineTo(point.x + min.x, point.y + min.y);\n            });\n            ctx.lineTo(firstPoint.x, firstPoint.y);\n            ctx.closePath();\n            if (this.color) {\n                ctx.fill();\n            }\n            if (this.strokeColor) {\n                ctx.stroke();\n            }\n        }\n    }\n}\n\n;// ./Graphics/NineSlice.ts\n\n\n\n/**\n * Nine slice stretch mode\n */\nvar NineSliceStretch;\n(function (NineSliceStretch) {\n    /**\n     * Stretch the image across a dimension\n     */\n    NineSliceStretch[\"Stretch\"] = \"stretch\";\n    /**\n     * Tile the image across a dimension\n     */\n    NineSliceStretch[\"Tile\"] = \"tile\";\n    /**\n     * Tile the image across a dimension but only by whole image amounts\n     */\n    NineSliceStretch[\"TileFit\"] = \"tile-fit\";\n})(NineSliceStretch || (NineSliceStretch = {}));\nclass NineSlice extends Graphic {\n    constructor(config) {\n        super(config);\n        this._logger = Logger.getInstance();\n        this._config = config;\n        this._imgSource = config.source;\n        this._canvasA = document.createElement('canvas');\n        this._canvasB = document.createElement('canvas');\n        this._canvasC = document.createElement('canvas');\n        this._canvasD = document.createElement('canvas');\n        this._canvasE = document.createElement('canvas');\n        this._canvasF = document.createElement('canvas');\n        this._canvasG = document.createElement('canvas');\n        this._canvasH = document.createElement('canvas');\n        this._canvasI = document.createElement('canvas');\n        this._initialize();\n        this._imgSource.ready.then(() => {\n            this._initialize();\n        });\n    }\n    /**\n     * Sets the target width of the 9 slice (pixels), and recalculates the 9 slice if desired (auto)\n     * @param newWidth\n     * @param auto\n     */\n    setTargetWidth(newWidth, auto = false) {\n        this._config.width = newWidth;\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     * Sets the target height of the 9 slice (pixels), and recalculates the 9 slice if desired (auto)\n     * @param newHeight\n     * @param auto\n     */\n    setTargetHeight(newHeight, auto = false) {\n        this._config.height = newHeight;\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     *  Sets the 9 slice margins (pixels), and recalculates the 9 slice if desired (auto)\n     */\n    setMargins(left, top, right, bottom, auto = false) {\n        this._config.sourceConfig.leftMargin = left;\n        this._config.sourceConfig.topMargin = top;\n        this._config.sourceConfig.rightMargin = right;\n        this._config.sourceConfig.bottomMargin = bottom;\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     *  Sets the stretching strategy for the 9 slice, and recalculates the 9 slice if desired (auto)\n     *\n     */\n    setStretch(type, stretch, auto = false) {\n        if (type === 'horizontal') {\n            this._config.destinationConfig.horizontalStretch = stretch;\n        }\n        else if (type === 'vertical') {\n            this._config.destinationConfig.verticalStretch = stretch;\n        }\n        else {\n            this._config.destinationConfig.horizontalStretch = stretch;\n            this._config.destinationConfig.verticalStretch = stretch;\n        }\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     *  Returns the config of the 9 slice\n     */\n    getConfig() {\n        return this._config;\n    }\n    /**\n     * Draws 1 of the 9 tiles based on parameters passed in\n     * context is the ExcaliburGraphicsContext from the _drawImage function\n     * destinationSize is the size of the destination image as a vector (width,height)\n     * targetCanvas is the canvas to draw to\n     * horizontalStretch and verticalStretch are the horizontal and vertical stretching strategies\n     * marginW and marginH are optional margins for the 9 slice for positioning\n     * @param context\n     * @param targetCanvas\n     * @param destinationSize\n     * @param horizontalStretch\n     * @param verticalStretch\n     * @param marginWidth\n     * @param marginHeight\n     */\n    _drawTile(context, targetCanvas, destinationSize, horizontalStretch, verticalStretch, marginWidth, marginHeight) {\n        const tempMarginW = marginWidth || 0;\n        const tempMarginH = marginHeight || 0;\n        let tempSizeX, tempPositionX, tempSizeY, tempPositionY;\n        const numTilesX = this._getNumberOfTiles(targetCanvas.width, destinationSize.x, horizontalStretch);\n        const numTilesY = this._getNumberOfTiles(targetCanvas.height, destinationSize.y, verticalStretch);\n        for (let i = 0; i < numTilesX; i++) {\n            for (let j = 0; j < numTilesY; j++) {\n                let { tempSize, tempPosition } = this._calculateParams(i, numTilesX, targetCanvas.width, destinationSize.x, this._config.destinationConfig.horizontalStretch);\n                tempSizeX = tempSize;\n                tempPositionX = tempPosition;\n                ({ tempSize, tempPosition } = this._calculateParams(j, numTilesY, targetCanvas.height, destinationSize.y, this._config.destinationConfig.verticalStretch));\n                tempSizeY = tempSize;\n                tempPositionY = tempPosition;\n                context.drawImage(targetCanvas, 0, 0, targetCanvas.width, targetCanvas.height, tempMarginW + tempPositionX, tempMarginH + tempPositionY, tempSizeX, tempSizeY);\n            }\n        }\n    }\n    /**\n     *  Draws the 9 slices to the canvas\n     */\n    _drawImage(ex, x, y) {\n        if (this._imgSource.isLoaded()) {\n            // Top left, no stretching\n            this._drawTile(ex, this._canvasA, new Vector(this._config.sourceConfig.leftMargin, this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch);\n            // Top, middle, horizontal stretching\n            this._drawTile(ex, this._canvasB, new Vector(this._config.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.sourceConfig.leftMargin, 0);\n            // Top right, no stretching\n            this._drawTile(ex, this._canvasC, new Vector(this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.width - this._config.sourceConfig.rightMargin, 0);\n            // middle, left, vertical stretching\n            this._drawTile(ex, this._canvasD, new Vector(this._config.sourceConfig.leftMargin, this._config.height - this._config.sourceConfig.bottomMargin - this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, 0, this._config.sourceConfig.topMargin);\n            // center, both stretching\n            if (this._config.destinationConfig.drawCenter) {\n                this._drawTile(ex, this._canvasE, new Vector(this._config.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin, this._config.height - this._config.sourceConfig.bottomMargin - this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.sourceConfig.leftMargin, this._config.sourceConfig.topMargin);\n            }\n            // middle, right, vertical stretching\n            this._drawTile(ex, this._canvasF, new Vector(this._config.sourceConfig.rightMargin, this._config.height - this._config.sourceConfig.bottomMargin - this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.width - this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin);\n            // bottom left, no stretching\n            this._drawTile(ex, this._canvasG, new Vector(this._config.sourceConfig.leftMargin, this._config.sourceConfig.bottomMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, 0, this._config.height - this._config.sourceConfig.bottomMargin);\n            // bottom middle, horizontal stretching\n            this._drawTile(ex, this._canvasH, new Vector(this._config.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin, this._config.sourceConfig.bottomMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.sourceConfig.leftMargin, this._config.height - this._config.sourceConfig.bottomMargin);\n            // bottom right, no stretching\n            this._drawTile(ex, this._canvasI, new Vector(this._config.sourceConfig.rightMargin, this._config.sourceConfig.bottomMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.width - this._config.sourceConfig.rightMargin, this._config.height - this._config.sourceConfig.bottomMargin);\n        }\n        else {\n            this._logger.warnOnce(`NineSlice ImageSource ${this._imgSource.path}` +\n                ` is not yet loaded and won't be drawn. Please call .load() or include in a Loader.\\n\\n` +\n                `Read https://excaliburjs.com/docs/imagesource for more information.`);\n        }\n    }\n    /**\n     * Slices the source sprite into the 9 slice canvases internally\n     */\n    _initialize() {\n        this._sourceSprite = this._imgSource.image;\n        // top left slice\n        this._canvasA.width = this._config.sourceConfig.leftMargin;\n        this._canvasA.height = this._config.sourceConfig.topMargin;\n        const aCtx = this._canvasA.getContext('2d');\n        aCtx === null || aCtx === void 0 ? void 0 : aCtx.drawImage(this._sourceSprite, 0, 0, this._canvasA.width, this._canvasA.height, 0, 0, this._canvasA.width, this._canvasA.height);\n        // top slice\n        this._canvasB.width = this._config.sourceConfig.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin;\n        this._canvasB.height = this._config.sourceConfig.topMargin;\n        const bCtx = this._canvasB.getContext('2d');\n        bCtx === null || bCtx === void 0 ? void 0 : bCtx.drawImage(this._sourceSprite, this._config.sourceConfig.leftMargin, 0, this._canvasB.width, this._canvasB.height, 0, 0, this._canvasB.width, this._canvasB.height);\n        // top right slice\n        this._canvasC.width = this._config.sourceConfig.rightMargin;\n        this._canvasC.height = this._config.sourceConfig.topMargin;\n        const cCtx = this._canvasC.getContext('2d');\n        cCtx === null || cCtx === void 0 ? void 0 : cCtx.drawImage(this._sourceSprite, this._sourceSprite.width - this._config.sourceConfig.rightMargin, 0, this._canvasC.width, this._canvasC.height, 0, 0, this._canvasC.width, this._canvasC.height);\n        // middle left slice\n        this._canvasD.width = this._config.sourceConfig.leftMargin;\n        this._canvasD.height = this._config.sourceConfig.height - this._config.sourceConfig.topMargin - this._config.sourceConfig.bottomMargin;\n        const dCtx = this._canvasD.getContext('2d');\n        dCtx === null || dCtx === void 0 ? void 0 : dCtx.drawImage(this._sourceSprite, 0, this._config.sourceConfig.topMargin, this._canvasD.width, this._canvasD.height, 0, 0, this._canvasD.width, this._canvasD.height);\n        // middle slice\n        this._canvasE.width = this._config.sourceConfig.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin;\n        this._canvasE.height = this._config.sourceConfig.height - this._config.sourceConfig.topMargin - this._config.sourceConfig.bottomMargin;\n        const eCtx = this._canvasE.getContext('2d');\n        eCtx === null || eCtx === void 0 ? void 0 : eCtx.drawImage(this._sourceSprite, this._config.sourceConfig.leftMargin, this._config.sourceConfig.topMargin, this._canvasE.width, this._canvasE.height, 0, 0, this._canvasE.width, this._canvasE.height);\n        // middle right slice\n        this._canvasF.width = this._config.sourceConfig.rightMargin;\n        this._canvasF.height = this._config.sourceConfig.height - this._config.sourceConfig.topMargin - this._config.sourceConfig.bottomMargin;\n        const fCtx = this._canvasF.getContext('2d');\n        fCtx === null || fCtx === void 0 ? void 0 : fCtx.drawImage(this._sourceSprite, this._config.sourceConfig.width - this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin, this._canvasF.width, this._canvasF.height, 0, 0, this._canvasF.width, this._canvasF.height);\n        // bottom left slice\n        this._canvasG.width = this._config.sourceConfig.leftMargin;\n        this._canvasG.height = this._config.sourceConfig.bottomMargin;\n        const gCtx = this._canvasG.getContext('2d');\n        gCtx === null || gCtx === void 0 ? void 0 : gCtx.drawImage(this._sourceSprite, 0, this._config.sourceConfig.height - this._config.sourceConfig.bottomMargin, this._canvasG.width, this._canvasG.height, 0, 0, this._canvasG.width, this._canvasG.height);\n        // bottom slice\n        this._canvasH.width = this._config.sourceConfig.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin;\n        this._canvasH.height = this._config.sourceConfig.bottomMargin;\n        const hCtx = this._canvasH.getContext('2d');\n        hCtx === null || hCtx === void 0 ? void 0 : hCtx.drawImage(this._sourceSprite, this._config.sourceConfig.leftMargin, this._config.sourceConfig.height - this._config.sourceConfig.bottomMargin, this._canvasH.width, this._canvasH.height, 0, 0, this._canvasH.width, this._canvasH.height);\n        // bottom right slice\n        this._canvasI.width = this._config.sourceConfig.rightMargin;\n        this._canvasI.height = this._config.sourceConfig.bottomMargin;\n        const iCtx = this._canvasI.getContext('2d');\n        iCtx === null || iCtx === void 0 ? void 0 : iCtx.drawImage(this._sourceSprite, this._sourceSprite.width - this._config.sourceConfig.rightMargin, this._config.sourceConfig.height - this._config.sourceConfig.bottomMargin, this._canvasI.width, this._canvasI.height, 0, 0, this._canvasI.width, this._canvasI.height);\n    }\n    /**\n     * Clones the 9 slice\n     */\n    clone() {\n        return new NineSlice(this._config);\n    }\n    /**\n     * Returns the number of tiles\n     */\n    _getNumberOfTiles(tileSize, destinationSize, strategy) {\n        switch (strategy) {\n            case NineSliceStretch.Stretch:\n                return 1;\n            case NineSliceStretch.Tile:\n                return Math.ceil(destinationSize / tileSize);\n            case NineSliceStretch.TileFit:\n                return Math.ceil(destinationSize / tileSize);\n        }\n    }\n    /**\n     * Returns the position and size of the tile\n     */\n    _calculateParams(tileNum, numTiles, tileSize, destinationSize, strategy) {\n        switch (strategy) {\n            case NineSliceStretch.Stretch:\n                return {\n                    tempPosition: 0,\n                    tempSize: destinationSize\n                };\n            case NineSliceStretch.Tile:\n                // if last tile, adjust size\n                if (tileNum === numTiles - 1) {\n                    //last tile\n                    return {\n                        tempPosition: tileNum * tileSize,\n                        tempSize: tileSize - (numTiles * tileSize - destinationSize)\n                    };\n                }\n                else {\n                    return {\n                        tempPosition: tileNum * tileSize,\n                        tempSize: tileSize\n                    };\n                }\n            case NineSliceStretch.TileFit:\n                const reducedTileSize = destinationSize / numTiles;\n                const position = tileNum * reducedTileSize;\n                return {\n                    tempPosition: position,\n                    tempSize: reducedTileSize\n                };\n        }\n    }\n}\n\n;// ./Graphics/TiledAnimation.ts\n\n\n\n\n\nclass TiledAnimation extends Animation {\n    constructor(options) {\n        super({\n            ...options,\n            frames: options.animation.frames.slice(),\n            strategy: options.animation.strategy,\n            frameDuration: options.animation.frameDuration,\n            speed: options.animation.speed,\n            reverse: options.animation.isReversed\n        });\n        this._ready = new Future();\n        this.ready = this._ready.promise;\n        this._tiledWidth = 0;\n        this._tiledHeight = 0;\n        this._sourceView = {};\n        this._sourceView = { ...options.sourceView };\n        this._tiledWidth = options.width;\n        this._tiledHeight = options.height;\n        const promises = [];\n        for (let i = 0; i < this.frames.length; i++) {\n            const graphic = this.frames[i].graphic;\n            if (graphic && graphic instanceof Sprite) {\n                const tiledSprite = new TiledSprite({\n                    image: graphic.image,\n                    width: options.width,\n                    height: options.height,\n                    sourceView: { ...graphic.sourceView },\n                    wrapping: options.wrapping,\n                    filtering: options.filtering\n                });\n                this.frames[i].graphic = tiledSprite;\n                // There is a new calc'd sourceView when ready\n                tiledSprite.ready.then(() => {\n                    tiledSprite.sourceView = { ...tiledSprite.sourceView, ...this._sourceView };\n                });\n                promises.push(tiledSprite.ready);\n            }\n        }\n        Promise.all(promises).then(() => this._ready.resolve());\n    }\n    static fromAnimation(animation, options) {\n        return new TiledAnimation({\n            width: animation.width,\n            height: animation.height,\n            ...options,\n            animation\n        });\n    }\n    _updateSourceView() {\n        for (let i = 0; i < this.frames.length; i++) {\n            const graphic = this.frames[i].graphic;\n            if (graphic && graphic instanceof Sprite) {\n                graphic.sourceView = { ...graphic.sourceView, ...this._sourceView };\n            }\n        }\n    }\n    get sourceView() {\n        return watch(this._sourceView, () => this._updateSourceView());\n    }\n    set sourceView(sourceView) {\n        this._sourceView = watch(sourceView, () => this._updateSourceView());\n        this._updateSourceView();\n    }\n    _updateWidthHeight() {\n        for (let i = 0; i < this.frames.length; i++) {\n            const graphic = this.frames[i].graphic;\n            if (graphic && graphic instanceof Sprite) {\n                graphic.sourceView.height = this._tiledHeight || graphic.height;\n                graphic.destSize.height = this._tiledHeight || graphic.height;\n                graphic.sourceView.width = this._tiledWidth || graphic.width;\n                graphic.destSize.width = this._tiledWidth || graphic.width;\n            }\n        }\n    }\n    get width() {\n        return this._tiledWidth;\n    }\n    get height() {\n        return this._tiledHeight;\n    }\n    set width(width) {\n        this._tiledWidth = width;\n        this._updateWidthHeight();\n    }\n    set height(height) {\n        this._tiledHeight = height;\n        this._updateWidthHeight();\n    }\n}\n\n;// ./Graphics/index.ts\n// Graphics\n\n\n\n\n\n\n\n// Graphics ECS\n\n\n\n\n\n// Raster graphics\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// TODO DELETEME\n\n\n// Post Processor\n\n\n\n\n\n\n\n// Rendering\n\n\n\n\n\n\n// Debug\n\n// Util\n\n\n\n;// ./Util/Index.ts\n\n\n\n\n\n\n\n;// ./Util/Decorators.ts\n\n\nconst maxMessages = 5;\nconst obsoleteMessage = {};\nconst resetObsoleteCounter = () => {\n    for (const message in obsoleteMessage) {\n        obsoleteMessage[message] = 0;\n    }\n};\nconst logMessage = (message, options) => {\n    const suppressObsoleteMessages = Flags.isEnabled('suppress-obsolete-message');\n    if (obsoleteMessage[message] < maxMessages && !suppressObsoleteMessages) {\n        Logger.getInstance().warn(message);\n        // tslint:disable-next-line: no-console\n        if (console.trace && options.showStackTrace) {\n            // tslint:disable-next-line: no-console\n            console.trace();\n        }\n    }\n    obsoleteMessage[message]++;\n};\n/**\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\n */\nfunction obsolete(options) {\n    options = {\n        message: 'This feature will be removed in future versions of Excalibur.',\n        alternateMethod: null,\n        showStackTrace: false,\n        ...options\n    };\n    return function (target, property, descriptor) {\n        if (descriptor &&\n            !(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')) {\n            throw new SyntaxError('Only classes/functions/getters/setters can be marked as obsolete');\n        }\n        const methodSignature = `${target.name || ''}${target.name && property ? '.' : ''}${property ? property : ''}`;\n        const message = `${methodSignature} is marked obsolete: ${options.message}` +\n            (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\n        if (!obsoleteMessage[message]) {\n            obsoleteMessage[message] = 0;\n        }\n        // If descriptor is null it is a class\n        const method = descriptor ? { ...descriptor } : target;\n        if (!descriptor) {\n            // with es2015 classes we need to change our decoration tactic\n            class DecoratedClass extends method {\n                constructor(...args) {\n                    logMessage(message, options);\n                    super(...args);\n                }\n            }\n            return DecoratedClass;\n        }\n        if (descriptor && descriptor.value) {\n            method.value = function () {\n                logMessage(message, options);\n                return descriptor.value.apply(this, arguments);\n            };\n            return method;\n        }\n        if (descriptor && descriptor.get) {\n            method.get = function () {\n                logMessage(message, options);\n                return descriptor.get.apply(this, arguments);\n            };\n        }\n        if (descriptor && descriptor.set) {\n            method.set = function () {\n                logMessage(message, options);\n                return descriptor.set.apply(this, arguments);\n            };\n        }\n        return method;\n    };\n}\n\n;// ./Util/Semaphore.ts\n\nclass AsyncWaitQueue {\n    constructor() {\n        // Code from StephenCleary https://gist.github.com/StephenCleary/ba50b2da419c03b9cba1d20cb4654d5e\n        this._queue = [];\n    }\n    get length() {\n        return this._queue.length;\n    }\n    enqueue() {\n        const future = new Future();\n        this._queue.push(future);\n        return future.promise;\n    }\n    dequeue(value) {\n        const future = this._queue.shift();\n        future.resolve(value);\n    }\n}\n/**\n * Semaphore allows you to limit the amount of async calls happening between `enter()` and `exit()`\n *\n * This can be useful when limiting the number of http calls, browser api calls, etc either for performance or to work\n * around browser limitations like max Image.decode() calls in chromium being 256.\n */\nclass Semaphore {\n    constructor(_count) {\n        this._count = _count;\n        this._waitQueue = new AsyncWaitQueue();\n    }\n    get count() {\n        return this._count;\n    }\n    get waiting() {\n        return this._waitQueue.length;\n    }\n    // eslint-disable-next-line require-await\n    async enter() {\n        if (this._count !== 0) {\n            this._count--;\n            return Promise.resolve();\n        }\n        return this._waitQueue.enqueue();\n    }\n    exit(count = 1) {\n        if (count === 0) {\n            return;\n        }\n        while (count !== 0 && this._waitQueue.length !== 0) {\n            this._waitQueue.dequeue(null);\n            count--;\n        }\n        this._count += count;\n    }\n}\n\n;// ./index.ts\n/**\n * The current Excalibur version string\n * @description `process.env.__EX_VERSION` gets replaced by Webpack on build\n */\nconst EX_VERSION = \"0.30.3\";\n\npolyfill();\n// This file is used as the bundle entry point and exports everything\n// that will be exposed as the `ex` global variable.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ex.Events namespace\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ex.Util namespaces\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ex.Deprecated\n// import * as deprecated from './Deprecated';\n// export { deprecated as Deprecated };\n// export * from './Deprecated';\n\nvar __webpack_exports__ActionCompleteEvent = __webpack_exports__.eKr;\nvar __webpack_exports__ActionContext = __webpack_exports__.yVm;\nvar __webpack_exports__ActionQueue = __webpack_exports__.a7j;\nvar __webpack_exports__ActionSequence = __webpack_exports__.U_w;\nvar __webpack_exports__ActionStartEvent = __webpack_exports__.JF2;\nvar __webpack_exports__ActionsComponent = __webpack_exports__.htg;\nvar __webpack_exports__ActionsSystem = __webpack_exports__.HXL;\nvar __webpack_exports__ActivateEvent = __webpack_exports__.mcg;\nvar __webpack_exports__Actor = __webpack_exports__.Agj;\nvar __webpack_exports__ActorEvents = __webpack_exports__.J3_;\nvar __webpack_exports__AddEvent = __webpack_exports__.Wgv;\nvar __webpack_exports__AddedComponent = __webpack_exports__.u6S;\nvar __webpack_exports__AffineMatrix = __webpack_exports__.x7M;\nvar __webpack_exports__Animation = __webpack_exports__.X55;\nvar __webpack_exports__AnimationDirection = __webpack_exports__.m3M;\nvar __webpack_exports__AnimationEvents = __webpack_exports__.aE5;\nvar __webpack_exports__AnimationStrategy = __webpack_exports__.YJU;\nvar __webpack_exports__ArcadeSolver = __webpack_exports__.eZi;\nvar __webpack_exports__AudioContextFactory = __webpack_exports__.GNv;\nvar __webpack_exports__Axes = __webpack_exports__.Y56;\nvar __webpack_exports__Axis = __webpack_exports__._0v;\nvar __webpack_exports__BaseAlign = __webpack_exports__.vhs;\nvar __webpack_exports__BezierCurve = __webpack_exports__.vrQ;\nvar __webpack_exports__Blink = __webpack_exports__.Z8b;\nvar __webpack_exports__BodyComponent = __webpack_exports__.Yfw;\nvar __webpack_exports__BoundingBox = __webpack_exports__.IcQ;\nvar __webpack_exports__BrowserComponent = __webpack_exports__.kgJ;\nvar __webpack_exports__BrowserEvents = __webpack_exports__.GTT;\nvar __webpack_exports__Buttons = __webpack_exports__.ypY;\nvar __webpack_exports__Camera = __webpack_exports__.i7d;\nvar __webpack_exports__CameraEvents = __webpack_exports__.fQ3;\nvar __webpack_exports__Canvas = __webpack_exports__.HlI;\nvar __webpack_exports__Circle = __webpack_exports__.jlt;\nvar __webpack_exports__CircleCollider = __webpack_exports__.VQc;\nvar __webpack_exports__Clock = __webpack_exports__.zD7;\nvar __webpack_exports__ClosestLineJumpTable = __webpack_exports__.AUF;\nvar __webpack_exports__Collider = __webpack_exports__.JoF;\nvar __webpack_exports__ColliderComponent = __webpack_exports__.MlA;\nvar __webpack_exports__CollisionContact = __webpack_exports__.PZh;\nvar __webpack_exports__CollisionEndEvent = __webpack_exports__.qA;\nvar __webpack_exports__CollisionGroup = __webpack_exports__.CrD;\nvar __webpack_exports__CollisionGroupManager = __webpack_exports__.dQK;\nvar __webpack_exports__CollisionJumpTable = __webpack_exports__.D3r;\nvar __webpack_exports__CollisionPostSolveEvent = __webpack_exports__.Qpo;\nvar __webpack_exports__CollisionPreSolveEvent = __webpack_exports__.D9n;\nvar __webpack_exports__CollisionStartEvent = __webpack_exports__.b6v;\nvar __webpack_exports__CollisionSystem = __webpack_exports__.mvh;\nvar __webpack_exports__CollisionType = __webpack_exports__.Bpo;\nvar __webpack_exports__Color = __webpack_exports__.Q1f;\nvar __webpack_exports__ColorBlindFlags = __webpack_exports__.IKv;\nvar __webpack_exports__ColorBlindnessMode = __webpack_exports__.fcV;\nvar __webpack_exports__ColorBlindnessPostProcessor = __webpack_exports__.Glf;\nvar __webpack_exports__Component = __webpack_exports__.uAl;\nvar __webpack_exports__CompositeCollider = __webpack_exports__.ElT;\nvar __webpack_exports__ConsoleAppender = __webpack_exports__.Z8r;\nvar __webpack_exports__ContactConstraintPoint = __webpack_exports__.QSL;\nvar __webpack_exports__ContactEndEvent = __webpack_exports__.sPV;\nvar __webpack_exports__ContactSolveBias = __webpack_exports__.nAn;\nvar __webpack_exports__ContactStartEvent = __webpack_exports__.zCU;\nvar __webpack_exports__CoordPlane = __webpack_exports__.QrV;\nvar __webpack_exports__CrossFade = __webpack_exports__.fF9;\nvar __webpack_exports__CurveBy = __webpack_exports__.Jqv;\nvar __webpack_exports__CurveTo = __webpack_exports__.d_u;\nvar __webpack_exports__DeactivateEvent = __webpack_exports__.xI8;\nvar __webpack_exports__Debug = __webpack_exports__.yar;\nvar __webpack_exports__DebugConfig = __webpack_exports__.SP7;\nvar __webpack_exports__DebugGraphicsComponent = __webpack_exports__.oRy;\nvar __webpack_exports__DebugSystem = __webpack_exports__.f5X;\nvar __webpack_exports__DebugText = __webpack_exports__.V1c;\nvar __webpack_exports__DefaultAntialiasOptions = __webpack_exports__.Mlx;\nvar __webpack_exports__DefaultGarbageCollectionOptions = __webpack_exports__.ZiM;\nvar __webpack_exports__DefaultLoader = __webpack_exports__.ZCo;\nvar __webpack_exports__DefaultPixelArtOptions = __webpack_exports__.J5p;\nvar __webpack_exports__DegreeOfFreedom = __webpack_exports__.mL_;\nvar __webpack_exports__Delay = __webpack_exports__.Guw;\nvar __webpack_exports__Detector = __webpack_exports__.N5j;\nvar __webpack_exports__Die = __webpack_exports__.pgY;\nvar __webpack_exports__Direction = __webpack_exports__.OP3;\nvar __webpack_exports__Director = __webpack_exports__.rl5;\nvar __webpack_exports__DirectorEvents = __webpack_exports__.eod;\nvar __webpack_exports__DisplayMode = __webpack_exports__.q5Z;\nvar __webpack_exports__DynamicTree = __webpack_exports__.YUC;\nvar __webpack_exports__DynamicTreeCollisionProcessor = __webpack_exports__.saR;\nvar __webpack_exports__EX_VERSION = __webpack_exports__.hvr;\nvar __webpack_exports__EaseBy = __webpack_exports__.Qol;\nvar __webpack_exports__EaseTo = __webpack_exports__.Wf4;\nvar __webpack_exports__EasingFunctions = __webpack_exports__.JCs;\nvar __webpack_exports__EdgeCollider = __webpack_exports__.gJV;\nvar __webpack_exports__ElasticToActorStrategy = __webpack_exports__.fWD;\nvar __webpack_exports__EmitterType = __webpack_exports__.Va_;\nvar __webpack_exports__Engine = __webpack_exports__.N$8;\nvar __webpack_exports__EngineEvents = __webpack_exports__._jQ;\nvar __webpack_exports__EnterTriggerEvent = __webpack_exports__.rxj;\nvar __webpack_exports__EnterViewPortEvent = __webpack_exports__.rhv;\nvar __webpack_exports__Entity = __webpack_exports__.wCu;\nvar __webpack_exports__EntityEvents = __webpack_exports__.HAp;\nvar __webpack_exports__EntityManager = __webpack_exports__.Zy1;\nvar __webpack_exports__EventEmitter = __webpack_exports__.bkB;\nvar __webpack_exports__EventTypes = __webpack_exports__.wfL;\nvar __webpack_exports__Events = __webpack_exports__.sVA;\nvar __webpack_exports__ExResponse = __webpack_exports__.$Gs;\nvar __webpack_exports__ExcaliburGraphicsContext2DCanvas = __webpack_exports__.CJ0;\nvar __webpack_exports__ExcaliburGraphicsContextWebGL = __webpack_exports__.NWh;\nvar __webpack_exports__ExitTriggerEvent = __webpack_exports__.tWi;\nvar __webpack_exports__ExitViewPortEvent = __webpack_exports__.xAj;\nvar __webpack_exports__Fade = __webpack_exports__.zWh;\nvar __webpack_exports__FadeInOut = __webpack_exports__.i_4;\nvar __webpack_exports__Flags = __webpack_exports__.iIx;\nvar __webpack_exports__Flash = __webpack_exports__.Hxo;\nvar __webpack_exports__Follow = __webpack_exports__.c9e;\nvar __webpack_exports__Font = __webpack_exports__.KQV;\nvar __webpack_exports__FontCache = __webpack_exports__.weH;\nvar __webpack_exports__FontSource = __webpack_exports__.jXp;\nvar __webpack_exports__FontStyle = __webpack_exports__.zzY;\nvar __webpack_exports__FontUnit = __webpack_exports__.yRQ;\nvar __webpack_exports__FpsSampler = __webpack_exports__.MtE;\nvar __webpack_exports__FrameStats = __webpack_exports__.rPj;\nvar __webpack_exports__Future = __webpack_exports__.KLc;\nvar __webpack_exports__GameEvent = __webpack_exports__.Fir;\nvar __webpack_exports__GameStartEvent = __webpack_exports__.V5f;\nvar __webpack_exports__GameStopEvent = __webpack_exports__.Xj7;\nvar __webpack_exports__Gamepad = __webpack_exports__.Wud;\nvar __webpack_exports__GamepadAxisEvent = __webpack_exports__.FVg;\nvar __webpack_exports__GamepadButtonEvent = __webpack_exports__.g5Y;\nvar __webpack_exports__GamepadConnectEvent = __webpack_exports__.YQB;\nvar __webpack_exports__GamepadDisconnectEvent = __webpack_exports__.KPb;\nvar __webpack_exports__Gamepads = __webpack_exports__.nHK;\nvar __webpack_exports__GarbageCollector = __webpack_exports__.Jrb;\nvar __webpack_exports__Gif = __webpack_exports__.TX_;\nvar __webpack_exports__GifParser = __webpack_exports__.Olt;\nvar __webpack_exports__GlobalCoordinates = __webpack_exports__.r3n;\nvar __webpack_exports__GpuParticleEmitter = __webpack_exports__.Fvk;\nvar __webpack_exports__GpuParticleRenderer = __webpack_exports__.gpR;\nvar __webpack_exports__Graphic = __webpack_exports__.vYh;\nvar __webpack_exports__GraphicsComponent = __webpack_exports__.hnk;\nvar __webpack_exports__GraphicsGroup = __webpack_exports__.D2R;\nvar __webpack_exports__GraphicsSystem = __webpack_exports__.n1o;\nvar __webpack_exports__HashColliderProxy = __webpack_exports__.h9O;\nvar __webpack_exports__HashGridCell = __webpack_exports__.X5j;\nvar __webpack_exports__HashGridProxy = __webpack_exports__.p3P;\nvar __webpack_exports__HiddenEvent = __webpack_exports__.RLG;\nvar __webpack_exports__HorizontalFirst = __webpack_exports__.fBU;\nvar __webpack_exports__ImageFiltering = __webpack_exports__.Adb;\nvar __webpack_exports__ImageSource = __webpack_exports__.bEs;\nvar __webpack_exports__ImageSourceAttributeConstants = __webpack_exports__.wCy;\nvar __webpack_exports__ImageWrapping = __webpack_exports__.CbD;\nvar __webpack_exports__InitializeEvent = __webpack_exports__.x_C;\nvar __webpack_exports__InputHost = __webpack_exports__.pGf;\nvar __webpack_exports__InputMapper = __webpack_exports__.ibQ;\nvar __webpack_exports__IsometricEntityComponent = __webpack_exports__.shR;\nvar __webpack_exports__IsometricEntitySystem = __webpack_exports__.Yjk;\nvar __webpack_exports__IsometricMap = __webpack_exports__._u1;\nvar __webpack_exports__IsometricTile = __webpack_exports__.OBI;\nvar __webpack_exports__KeyEvent = __webpack_exports__.klh;\nvar __webpack_exports__Keyboard = __webpack_exports__.s3S;\nvar __webpack_exports__Keys = __webpack_exports__.D$R;\nvar __webpack_exports__KillEvent = __webpack_exports__.xth;\nvar __webpack_exports__Label = __webpack_exports__.JU7;\nvar __webpack_exports__LimitCameraBoundsStrategy = __webpack_exports__.h9x;\nvar __webpack_exports__Line = __webpack_exports__.N1A;\nvar __webpack_exports__LineSegment = __webpack_exports__.e_k;\nvar __webpack_exports__Loader = __webpack_exports__.aHM;\nvar __webpack_exports__LoaderEvents = __webpack_exports__.tlv;\nvar __webpack_exports__LockCameraToActorAxisStrategy = __webpack_exports__.Vi9;\nvar __webpack_exports__LockCameraToActorStrategy = __webpack_exports__.ieR;\nvar __webpack_exports__LogLevel = __webpack_exports__.$bb;\nvar __webpack_exports__Logger = __webpack_exports__.VyI;\nvar __webpack_exports__Material = __webpack_exports__.imn;\nvar __webpack_exports__Matrix = __webpack_exports__.uqu;\nvar __webpack_exports__MatrixLocations = __webpack_exports__.QnL;\nvar __webpack_exports__MediaEvent = __webpack_exports__.vnc;\nvar __webpack_exports__Meet = __webpack_exports__.wk_;\nvar __webpack_exports__MotionComponent = __webpack_exports__.GH0;\nvar __webpack_exports__MotionSystem = __webpack_exports__._1r;\nvar __webpack_exports__MoveBy = __webpack_exports__.l0X;\nvar __webpack_exports__MoveByWithOptions = __webpack_exports__.bT;\nvar __webpack_exports__MoveTo = __webpack_exports__.HHX;\nvar __webpack_exports__MoveToWithOptions = __webpack_exports__.jtW;\nvar __webpack_exports__NativePointerButton = __webpack_exports__.tjk;\nvar __webpack_exports__NativeSoundEvent = __webpack_exports__.rWe;\nvar __webpack_exports__NativeSoundProcessedEvent = __webpack_exports__.j9l;\nvar __webpack_exports__NineSlice = __webpack_exports__.l0$;\nvar __webpack_exports__NineSliceStretch = __webpack_exports__.sGJ;\nvar __webpack_exports__None = __webpack_exports__.NVp;\nvar __webpack_exports__Observable = __webpack_exports__.cPK;\nvar __webpack_exports__OffscreenSystem = __webpack_exports__.XoL;\nvar __webpack_exports__Pair = __webpack_exports__.RmF;\nvar __webpack_exports__ParallaxComponent = __webpack_exports__.DXI;\nvar __webpack_exports__ParallelActions = __webpack_exports__.tCD;\nvar __webpack_exports__Particle = __webpack_exports__.J3D;\nvar __webpack_exports__ParticleEmitter = __webpack_exports__.vCJ;\nvar __webpack_exports__ParticleRenderer = __webpack_exports__.e6k;\nvar __webpack_exports__ParticleTransform = __webpack_exports__.f9l;\nvar __webpack_exports__PhysicsStats = __webpack_exports__.v9m;\nvar __webpack_exports__PhysicsWorld = __webpack_exports__.yRJ;\nvar __webpack_exports__PointerAbstraction = __webpack_exports__.EU6;\nvar __webpack_exports__PointerButton = __webpack_exports__.m3O;\nvar __webpack_exports__PointerComponent = __webpack_exports__.Ryz;\nvar __webpack_exports__PointerEvent = __webpack_exports__.OxP;\nvar __webpack_exports__PointerEventReceiver = __webpack_exports__.LEs;\nvar __webpack_exports__PointerScope = __webpack_exports__.Ec;\nvar __webpack_exports__PointerSystem = __webpack_exports__.Pi5;\nvar __webpack_exports__PointerType = __webpack_exports__.gmH;\nvar __webpack_exports__Polygon = __webpack_exports__.tS;\nvar __webpack_exports__PolygonCollider = __webpack_exports__.XxX;\nvar __webpack_exports__Pool = __webpack_exports__.bCz;\nvar __webpack_exports__PostCollisionEvent = __webpack_exports__.nYS;\nvar __webpack_exports__PostDebugDrawEvent = __webpack_exports__.yiT;\nvar __webpack_exports__PostDrawEvent = __webpack_exports__.NHl;\nvar __webpack_exports__PostFrameEvent = __webpack_exports__.mO8;\nvar __webpack_exports__PostKillEvent = __webpack_exports__.PXI;\nvar __webpack_exports__PostTransformDrawEvent = __webpack_exports__.bn5;\nvar __webpack_exports__PostUpdateEvent = __webpack_exports__.Ywr;\nvar __webpack_exports__PreCollisionEvent = __webpack_exports__.cMd;\nvar __webpack_exports__PreDebugDrawEvent = __webpack_exports__.Bs6;\nvar __webpack_exports__PreDrawEvent = __webpack_exports__.G0k;\nvar __webpack_exports__PreFrameEvent = __webpack_exports__.pyn;\nvar __webpack_exports__PreKillEvent = __webpack_exports__.QeM;\nvar __webpack_exports__PreLoadEvent = __webpack_exports__.aPX;\nvar __webpack_exports__PreTransformDrawEvent = __webpack_exports__.ITP;\nvar __webpack_exports__PreUpdateEvent = __webpack_exports__.BY0;\nvar __webpack_exports__Projection = __webpack_exports__.MFw;\nvar __webpack_exports__QuadIndexBuffer = __webpack_exports__.sBn;\nvar __webpack_exports__QuadTree = __webpack_exports__.S3L;\nvar __webpack_exports__Query = __webpack_exports__.XKQ;\nvar __webpack_exports__QueryManager = __webpack_exports__.ESI;\nvar __webpack_exports__RadiusAroundActorStrategy = __webpack_exports__.uxz;\nvar __webpack_exports__Random = __webpack_exports__.o8N;\nvar __webpack_exports__Raster = __webpack_exports__.u_r;\nvar __webpack_exports__Ray = __webpack_exports__.RlV;\nvar __webpack_exports__RealisticSolver = __webpack_exports__.gVA;\nvar __webpack_exports__Rectangle = __webpack_exports__.M_G;\nvar __webpack_exports__RemoveEvent = __webpack_exports__.BpG;\nvar __webpack_exports__RemovedComponent = __webpack_exports__.GRB;\nvar __webpack_exports__Repeat = __webpack_exports__.kM6;\nvar __webpack_exports__RepeatForever = __webpack_exports__.dO8;\nvar __webpack_exports__Resolution = __webpack_exports__.jgM;\nvar __webpack_exports__Resource = __webpack_exports__.FWq;\nvar __webpack_exports__ResourceEvents = __webpack_exports__.s3j;\nvar __webpack_exports__RotateBy = __webpack_exports__.hlw;\nvar __webpack_exports__RotateByWithOptions = __webpack_exports__.L0q;\nvar __webpack_exports__RotateTo = __webpack_exports__.B7e;\nvar __webpack_exports__RotateToWithOptions = __webpack_exports__.PGN;\nvar __webpack_exports__RotationType = __webpack_exports__.H_X;\nvar __webpack_exports__ScaleBy = __webpack_exports__.S_d;\nvar __webpack_exports__ScaleByWithOptions = __webpack_exports__._Tq;\nvar __webpack_exports__ScaleTo = __webpack_exports__.U7E;\nvar __webpack_exports__ScaleToWithOptions = __webpack_exports__.IOH;\nvar __webpack_exports__Scene = __webpack_exports__.Z58;\nvar __webpack_exports__SceneEvents = __webpack_exports__.yh2;\nvar __webpack_exports__Screen = __webpack_exports__.ff$;\nvar __webpack_exports__ScreenAppender = __webpack_exports__.cWi;\nvar __webpack_exports__ScreenElement = __webpack_exports__.NBt;\nvar __webpack_exports__ScreenEvents = __webpack_exports__.oNz;\nvar __webpack_exports__ScreenShader = __webpack_exports__.QlU;\nvar __webpack_exports__ScrollPreventionMode = __webpack_exports__.Xey;\nvar __webpack_exports__Semaphore = __webpack_exports__.jft;\nvar __webpack_exports__SeparatingAxis = __webpack_exports__._r8;\nvar __webpack_exports__SeparationInfo = __webpack_exports__.bTC;\nvar __webpack_exports__Shader = __webpack_exports__.Mtr;\nvar __webpack_exports__Shape = __webpack_exports__.ypk;\nvar __webpack_exports__Side = __webpack_exports__.mnM;\nvar __webpack_exports__Slide = __webpack_exports__.q7S;\nvar __webpack_exports__SolverStrategy = __webpack_exports__.bAZ;\nvar __webpack_exports__Sound = __webpack_exports__.ABN;\nvar __webpack_exports__SoundEvents = __webpack_exports__.VK6;\nvar __webpack_exports__SparseHashGrid = __webpack_exports__.Hj2;\nvar __webpack_exports__SparseHashGridCollisionProcessor = __webpack_exports__.Df8;\nvar __webpack_exports__SpatialPartitionStrategy = __webpack_exports__.oOx;\nvar __webpack_exports__Sprite = __webpack_exports__.kxk;\nvar __webpack_exports__SpriteFont = __webpack_exports__.DT1;\nvar __webpack_exports__SpriteSheet = __webpack_exports__.FLG;\nvar __webpack_exports__StandardClock = __webpack_exports__.qN_;\nvar __webpack_exports__StateMachine = __webpack_exports__.Z37;\nvar __webpack_exports__StrategyContainer = __webpack_exports__.FtL;\nvar __webpack_exports__Stream = __webpack_exports__.Z6X;\nvar __webpack_exports__System = __webpack_exports__.iQT;\nvar __webpack_exports__SystemManager = __webpack_exports__.ziO;\nvar __webpack_exports__SystemPriority = __webpack_exports__.OEF;\nvar __webpack_exports__SystemType = __webpack_exports__.uuE;\nvar __webpack_exports__TagQuery = __webpack_exports__.tiv;\nvar __webpack_exports__TestClock = __webpack_exports__.T$Y;\nvar __webpack_exports__Text = __webpack_exports__.EYj;\nvar __webpack_exports__TextAlign = __webpack_exports__.nOB;\nvar __webpack_exports__TextureLoader = __webpack_exports__.Tap;\nvar __webpack_exports__Tile = __webpack_exports__.FAs;\nvar __webpack_exports__TileMap = __webpack_exports__.B_P;\nvar __webpack_exports__TileMapEvents = __webpack_exports__.aA5;\nvar __webpack_exports__TiledAnimation = __webpack_exports__.J3s;\nvar __webpack_exports__TiledSprite = __webpack_exports__.Y0Q;\nvar __webpack_exports__Timer = __webpack_exports__.M4G;\nvar __webpack_exports__Toaster = __webpack_exports__.l$l;\nvar __webpack_exports__Transform = __webpack_exports__.dLy;\nvar __webpack_exports__TransformComponent = __webpack_exports__.WZP;\nvar __webpack_exports__Transition = __webpack_exports__.eB6;\nvar __webpack_exports__TreeNode = __webpack_exports__.nFK;\nvar __webpack_exports__Trigger = __webpack_exports__.l9z;\nvar __webpack_exports__TriggerEvents = __webpack_exports__.YOF;\nvar __webpack_exports__TwoPI = __webpack_exports__.yhB;\nvar __webpack_exports__Util = __webpack_exports__.J0N;\nvar __webpack_exports__Vector = __webpack_exports__.Miz;\nvar __webpack_exports__VectorView = __webpack_exports__.Bj4;\nvar __webpack_exports__VertexBuffer = __webpack_exports__.Rcs;\nvar __webpack_exports__VertexLayout = __webpack_exports__.vJ4;\nvar __webpack_exports__VerticalFirst = __webpack_exports__.TqC;\nvar __webpack_exports__VisibleEvent = __webpack_exports__.nM0;\nvar __webpack_exports__WebAudio = __webpack_exports__.X1u;\nvar __webpack_exports__WebAudioInstance = __webpack_exports__.SpZ;\nvar __webpack_exports__WheelDeltaMode = __webpack_exports__.DX8;\nvar __webpack_exports__WheelEvent = __webpack_exports__.Yx$;\nvar __webpack_exports__World = __webpack_exports__.HK4;\nvar __webpack_exports__approximatelyEqual = __webpack_exports__.yt5;\nvar __webpack_exports__assert = __webpack_exports__.vAR;\nvar __webpack_exports__canonicalizeAngle = __webpack_exports__.SE$;\nvar __webpack_exports__clamp = __webpack_exports__.qE8;\nvar __webpack_exports__coroutine = __webpack_exports__.Pz7;\nvar __webpack_exports__createId = __webpack_exports__.sX_;\nvar __webpack_exports__frac = __webpack_exports__.JuI;\nvar __webpack_exports__getDefaultPhysicsConfig = __webpack_exports__.pxT;\nvar __webpack_exports__hasGraphicsTick = __webpack_exports__.Nl$;\nvar __webpack_exports__hasOnAdd = __webpack_exports__.zDr;\nvar __webpack_exports__hasOnInitialize = __webpack_exports__.OwT;\nvar __webpack_exports__hasOnPostUpdate = __webpack_exports__.P$G;\nvar __webpack_exports__hasOnPreUpdate = __webpack_exports__.mHV;\nvar __webpack_exports__hasOnRemove = __webpack_exports__.kEA;\nvar __webpack_exports__hasPostDraw = __webpack_exports__.Fx_;\nvar __webpack_exports__hasPreDraw = __webpack_exports__.WFC;\nvar __webpack_exports__has_add = __webpack_exports__.vKu;\nvar __webpack_exports__has_initialize = __webpack_exports__.aDq;\nvar __webpack_exports__has_postupdate = __webpack_exports__.jIg;\nvar __webpack_exports__has_preupdate = __webpack_exports__.UH3;\nvar __webpack_exports__has_remove = __webpack_exports__.AJO;\nvar __webpack_exports__inverseLerp = __webpack_exports__.U4;\nvar __webpack_exports__inverseLerpVector = __webpack_exports__.xAc;\nvar __webpack_exports__isActor = __webpack_exports__._3Y;\nvar __webpack_exports__isAddedComponent = __webpack_exports__.K6X;\nvar __webpack_exports__isComponentCtor = __webpack_exports__.C1Y;\nvar __webpack_exports__isLoaderConstructor = __webpack_exports__.Aw1;\nvar __webpack_exports__isMoveByOptions = __webpack_exports__.tm8;\nvar __webpack_exports__isMoveToOptions = __webpack_exports__.LBV;\nvar __webpack_exports__isRemovedComponent = __webpack_exports__.A8$;\nvar __webpack_exports__isRotateByOptions = __webpack_exports__.F5e;\nvar __webpack_exports__isRotateToOptions = __webpack_exports__.ran;\nvar __webpack_exports__isScaleByOptions = __webpack_exports__.c8L;\nvar __webpack_exports__isScaleToOptions = __webpack_exports__.o6M;\nvar __webpack_exports__isSceneConstructor = __webpack_exports__.hsx;\nvar __webpack_exports__isScreenElement = __webpack_exports__.l9E;\nvar __webpack_exports__isSystemConstructor = __webpack_exports__.aSf;\nvar __webpack_exports__lerp = __webpack_exports__.CcK;\nvar __webpack_exports__lerpAngle = __webpack_exports__.nU8;\nvar __webpack_exports__lerpVector = __webpack_exports__.td6;\nvar __webpack_exports__maxMessages = __webpack_exports__.Zex;\nvar __webpack_exports__nextActionId = __webpack_exports__.bkJ;\nvar __webpack_exports__obsolete = __webpack_exports__.mXP;\nvar __webpack_exports__parseImageFiltering = __webpack_exports__.vt$;\nvar __webpack_exports__parseImageWrapping = __webpack_exports__.hCA;\nvar __webpack_exports__pixelSnapEpsilon = __webpack_exports__.pjR;\nvar __webpack_exports__randomInRange = __webpack_exports__.U43;\nvar __webpack_exports__randomIntInRange = __webpack_exports__.pSZ;\nvar __webpack_exports__range = __webpack_exports__.y17;\nvar __webpack_exports__remap = __webpack_exports__.Ew7;\nvar __webpack_exports__remapVector = __webpack_exports__.hG1;\nvar __webpack_exports__resetObsoleteCounter = __webpack_exports__.jVr;\nvar __webpack_exports__sign = __webpack_exports__._SZ;\nvar __webpack_exports__toDegrees = __webpack_exports__.xWn;\nvar __webpack_exports__toRadians = __webpack_exports__.ehJ;\nvar __webpack_exports__vec = __webpack_exports__.t6s;\nvar __webpack_exports__webgl = __webpack_exports__.Eyn;\nexport { __webpack_exports__ActionCompleteEvent as ActionCompleteEvent, __webpack_exports__ActionContext as ActionContext, __webpack_exports__ActionQueue as ActionQueue, __webpack_exports__ActionSequence as ActionSequence, __webpack_exports__ActionStartEvent as ActionStartEvent, __webpack_exports__ActionsComponent as ActionsComponent, __webpack_exports__ActionsSystem as ActionsSystem, __webpack_exports__ActivateEvent as ActivateEvent, __webpack_exports__Actor as Actor, __webpack_exports__ActorEvents as ActorEvents, __webpack_exports__AddEvent as AddEvent, __webpack_exports__AddedComponent as AddedComponent, __webpack_exports__AffineMatrix as AffineMatrix, __webpack_exports__Animation as Animation, __webpack_exports__AnimationDirection as AnimationDirection, __webpack_exports__AnimationEvents as AnimationEvents, __webpack_exports__AnimationStrategy as AnimationStrategy, __webpack_exports__ArcadeSolver as ArcadeSolver, __webpack_exports__AudioContextFactory as AudioContextFactory, __webpack_exports__Axes as Axes, __webpack_exports__Axis as Axis, __webpack_exports__BaseAlign as BaseAlign, __webpack_exports__BezierCurve as BezierCurve, __webpack_exports__Blink as Blink, __webpack_exports__BodyComponent as BodyComponent, __webpack_exports__BoundingBox as BoundingBox, __webpack_exports__BrowserComponent as BrowserComponent, __webpack_exports__BrowserEvents as BrowserEvents, __webpack_exports__Buttons as Buttons, __webpack_exports__Camera as Camera, __webpack_exports__CameraEvents as CameraEvents, __webpack_exports__Canvas as Canvas, __webpack_exports__Circle as Circle, __webpack_exports__CircleCollider as CircleCollider, __webpack_exports__Clock as Clock, __webpack_exports__ClosestLineJumpTable as ClosestLineJumpTable, __webpack_exports__Collider as Collider, __webpack_exports__ColliderComponent as ColliderComponent, __webpack_exports__CollisionContact as CollisionContact, __webpack_exports__CollisionEndEvent as CollisionEndEvent, __webpack_exports__CollisionGroup as CollisionGroup, __webpack_exports__CollisionGroupManager as CollisionGroupManager, __webpack_exports__CollisionJumpTable as CollisionJumpTable, __webpack_exports__CollisionPostSolveEvent as CollisionPostSolveEvent, __webpack_exports__CollisionPreSolveEvent as CollisionPreSolveEvent, __webpack_exports__CollisionStartEvent as CollisionStartEvent, __webpack_exports__CollisionSystem as CollisionSystem, __webpack_exports__CollisionType as CollisionType, __webpack_exports__Color as Color, __webpack_exports__ColorBlindFlags as ColorBlindFlags, __webpack_exports__ColorBlindnessMode as ColorBlindnessMode, __webpack_exports__ColorBlindnessPostProcessor as ColorBlindnessPostProcessor, __webpack_exports__Component as Component, __webpack_exports__CompositeCollider as CompositeCollider, __webpack_exports__ConsoleAppender as ConsoleAppender, __webpack_exports__ContactConstraintPoint as ContactConstraintPoint, __webpack_exports__ContactEndEvent as ContactEndEvent, __webpack_exports__ContactSolveBias as ContactSolveBias, __webpack_exports__ContactStartEvent as ContactStartEvent, __webpack_exports__CoordPlane as CoordPlane, __webpack_exports__CrossFade as CrossFade, __webpack_exports__CurveBy as CurveBy, __webpack_exports__CurveTo as CurveTo, __webpack_exports__DeactivateEvent as DeactivateEvent, __webpack_exports__Debug as Debug, __webpack_exports__DebugConfig as DebugConfig, __webpack_exports__DebugGraphicsComponent as DebugGraphicsComponent, __webpack_exports__DebugSystem as DebugSystem, __webpack_exports__DebugText as DebugText, __webpack_exports__DefaultAntialiasOptions as DefaultAntialiasOptions, __webpack_exports__DefaultGarbageCollectionOptions as DefaultGarbageCollectionOptions, __webpack_exports__DefaultLoader as DefaultLoader, __webpack_exports__DefaultPixelArtOptions as DefaultPixelArtOptions, __webpack_exports__DegreeOfFreedom as DegreeOfFreedom, __webpack_exports__Delay as Delay, __webpack_exports__Detector as Detector, __webpack_exports__Die as Die, __webpack_exports__Direction as Direction, __webpack_exports__Director as Director, __webpack_exports__DirectorEvents as DirectorEvents, __webpack_exports__DisplayMode as DisplayMode, __webpack_exports__DynamicTree as DynamicTree, __webpack_exports__DynamicTreeCollisionProcessor as DynamicTreeCollisionProcessor, __webpack_exports__EX_VERSION as EX_VERSION, __webpack_exports__EaseBy as EaseBy, __webpack_exports__EaseTo as EaseTo, __webpack_exports__EasingFunctions as EasingFunctions, __webpack_exports__EdgeCollider as EdgeCollider, __webpack_exports__ElasticToActorStrategy as ElasticToActorStrategy, __webpack_exports__EmitterType as EmitterType, __webpack_exports__Engine as Engine, __webpack_exports__EngineEvents as EngineEvents, __webpack_exports__EnterTriggerEvent as EnterTriggerEvent, __webpack_exports__EnterViewPortEvent as EnterViewPortEvent, __webpack_exports__Entity as Entity, __webpack_exports__EntityEvents as EntityEvents, __webpack_exports__EntityManager as EntityManager, __webpack_exports__EventEmitter as EventEmitter, __webpack_exports__EventTypes as EventTypes, __webpack_exports__Events as Events, __webpack_exports__ExResponse as ExResponse, __webpack_exports__ExcaliburGraphicsContext2DCanvas as ExcaliburGraphicsContext2DCanvas, __webpack_exports__ExcaliburGraphicsContextWebGL as ExcaliburGraphicsContextWebGL, __webpack_exports__ExitTriggerEvent as ExitTriggerEvent, __webpack_exports__ExitViewPortEvent as ExitViewPortEvent, __webpack_exports__Fade as Fade, __webpack_exports__FadeInOut as FadeInOut, __webpack_exports__Flags as Flags, __webpack_exports__Flash as Flash, __webpack_exports__Follow as Follow, __webpack_exports__Font as Font, __webpack_exports__FontCache as FontCache, __webpack_exports__FontSource as FontSource, __webpack_exports__FontStyle as FontStyle, __webpack_exports__FontUnit as FontUnit, __webpack_exports__FpsSampler as FpsSampler, __webpack_exports__FrameStats as FrameStats, __webpack_exports__Future as Future, __webpack_exports__GameEvent as GameEvent, __webpack_exports__GameStartEvent as GameStartEvent, __webpack_exports__GameStopEvent as GameStopEvent, __webpack_exports__Gamepad as Gamepad, __webpack_exports__GamepadAxisEvent as GamepadAxisEvent, __webpack_exports__GamepadButtonEvent as GamepadButtonEvent, __webpack_exports__GamepadConnectEvent as GamepadConnectEvent, __webpack_exports__GamepadDisconnectEvent as GamepadDisconnectEvent, __webpack_exports__Gamepads as Gamepads, __webpack_exports__GarbageCollector as GarbageCollector, __webpack_exports__Gif as Gif, __webpack_exports__GifParser as GifParser, __webpack_exports__GlobalCoordinates as GlobalCoordinates, __webpack_exports__GpuParticleEmitter as GpuParticleEmitter, __webpack_exports__GpuParticleRenderer as GpuParticleRenderer, __webpack_exports__Graphic as Graphic, __webpack_exports__GraphicsComponent as GraphicsComponent, __webpack_exports__GraphicsGroup as GraphicsGroup, __webpack_exports__GraphicsSystem as GraphicsSystem, __webpack_exports__HashColliderProxy as HashColliderProxy, __webpack_exports__HashGridCell as HashGridCell, __webpack_exports__HashGridProxy as HashGridProxy, __webpack_exports__HiddenEvent as HiddenEvent, __webpack_exports__HorizontalFirst as HorizontalFirst, __webpack_exports__ImageFiltering as ImageFiltering, __webpack_exports__ImageSource as ImageSource, __webpack_exports__ImageSourceAttributeConstants as ImageSourceAttributeConstants, __webpack_exports__ImageWrapping as ImageWrapping, __webpack_exports__InitializeEvent as InitializeEvent, __webpack_exports__InputHost as InputHost, __webpack_exports__InputMapper as InputMapper, __webpack_exports__IsometricEntityComponent as IsometricEntityComponent, __webpack_exports__IsometricEntitySystem as IsometricEntitySystem, __webpack_exports__IsometricMap as IsometricMap, __webpack_exports__IsometricTile as IsometricTile, __webpack_exports__KeyEvent as KeyEvent, __webpack_exports__Keyboard as Keyboard, __webpack_exports__Keys as Keys, __webpack_exports__KillEvent as KillEvent, __webpack_exports__Label as Label, __webpack_exports__LimitCameraBoundsStrategy as LimitCameraBoundsStrategy, __webpack_exports__Line as Line, __webpack_exports__LineSegment as LineSegment, __webpack_exports__Loader as Loader, __webpack_exports__LoaderEvents as LoaderEvents, __webpack_exports__LockCameraToActorAxisStrategy as LockCameraToActorAxisStrategy, __webpack_exports__LockCameraToActorStrategy as LockCameraToActorStrategy, __webpack_exports__LogLevel as LogLevel, __webpack_exports__Logger as Logger, __webpack_exports__Material as Material, __webpack_exports__Matrix as Matrix, __webpack_exports__MatrixLocations as MatrixLocations, __webpack_exports__MediaEvent as MediaEvent, __webpack_exports__Meet as Meet, __webpack_exports__MotionComponent as MotionComponent, __webpack_exports__MotionSystem as MotionSystem, __webpack_exports__MoveBy as MoveBy, __webpack_exports__MoveByWithOptions as MoveByWithOptions, __webpack_exports__MoveTo as MoveTo, __webpack_exports__MoveToWithOptions as MoveToWithOptions, __webpack_exports__NativePointerButton as NativePointerButton, __webpack_exports__NativeSoundEvent as NativeSoundEvent, __webpack_exports__NativeSoundProcessedEvent as NativeSoundProcessedEvent, __webpack_exports__NineSlice as NineSlice, __webpack_exports__NineSliceStretch as NineSliceStretch, __webpack_exports__None as None, __webpack_exports__Observable as Observable, __webpack_exports__OffscreenSystem as OffscreenSystem, __webpack_exports__Pair as Pair, __webpack_exports__ParallaxComponent as ParallaxComponent, __webpack_exports__ParallelActions as ParallelActions, __webpack_exports__Particle as Particle, __webpack_exports__ParticleEmitter as ParticleEmitter, __webpack_exports__ParticleRenderer as ParticleRenderer, __webpack_exports__ParticleTransform as ParticleTransform, __webpack_exports__PhysicsStats as PhysicsStats, __webpack_exports__PhysicsWorld as PhysicsWorld, __webpack_exports__PointerAbstraction as PointerAbstraction, __webpack_exports__PointerButton as PointerButton, __webpack_exports__PointerComponent as PointerComponent, __webpack_exports__PointerEvent as PointerEvent, __webpack_exports__PointerEventReceiver as PointerEventReceiver, __webpack_exports__PointerScope as PointerScope, __webpack_exports__PointerSystem as PointerSystem, __webpack_exports__PointerType as PointerType, __webpack_exports__Polygon as Polygon, __webpack_exports__PolygonCollider as PolygonCollider, __webpack_exports__Pool as Pool, __webpack_exports__PostCollisionEvent as PostCollisionEvent, __webpack_exports__PostDebugDrawEvent as PostDebugDrawEvent, __webpack_exports__PostDrawEvent as PostDrawEvent, __webpack_exports__PostFrameEvent as PostFrameEvent, __webpack_exports__PostKillEvent as PostKillEvent, __webpack_exports__PostTransformDrawEvent as PostTransformDrawEvent, __webpack_exports__PostUpdateEvent as PostUpdateEvent, __webpack_exports__PreCollisionEvent as PreCollisionEvent, __webpack_exports__PreDebugDrawEvent as PreDebugDrawEvent, __webpack_exports__PreDrawEvent as PreDrawEvent, __webpack_exports__PreFrameEvent as PreFrameEvent, __webpack_exports__PreKillEvent as PreKillEvent, __webpack_exports__PreLoadEvent as PreLoadEvent, __webpack_exports__PreTransformDrawEvent as PreTransformDrawEvent, __webpack_exports__PreUpdateEvent as PreUpdateEvent, __webpack_exports__Projection as Projection, __webpack_exports__QuadIndexBuffer as QuadIndexBuffer, __webpack_exports__QuadTree as QuadTree, __webpack_exports__Query as Query, __webpack_exports__QueryManager as QueryManager, __webpack_exports__RadiusAroundActorStrategy as RadiusAroundActorStrategy, __webpack_exports__Random as Random, __webpack_exports__Raster as Raster, __webpack_exports__Ray as Ray, __webpack_exports__RealisticSolver as RealisticSolver, __webpack_exports__Rectangle as Rectangle, __webpack_exports__RemoveEvent as RemoveEvent, __webpack_exports__RemovedComponent as RemovedComponent, __webpack_exports__Repeat as Repeat, __webpack_exports__RepeatForever as RepeatForever, __webpack_exports__Resolution as Resolution, __webpack_exports__Resource as Resource, __webpack_exports__ResourceEvents as ResourceEvents, __webpack_exports__RotateBy as RotateBy, __webpack_exports__RotateByWithOptions as RotateByWithOptions, __webpack_exports__RotateTo as RotateTo, __webpack_exports__RotateToWithOptions as RotateToWithOptions, __webpack_exports__RotationType as RotationType, __webpack_exports__ScaleBy as ScaleBy, __webpack_exports__ScaleByWithOptions as ScaleByWithOptions, __webpack_exports__ScaleTo as ScaleTo, __webpack_exports__ScaleToWithOptions as ScaleToWithOptions, __webpack_exports__Scene as Scene, __webpack_exports__SceneEvents as SceneEvents, __webpack_exports__Screen as Screen, __webpack_exports__ScreenAppender as ScreenAppender, __webpack_exports__ScreenElement as ScreenElement, __webpack_exports__ScreenEvents as ScreenEvents, __webpack_exports__ScreenShader as ScreenShader, __webpack_exports__ScrollPreventionMode as ScrollPreventionMode, __webpack_exports__Semaphore as Semaphore, __webpack_exports__SeparatingAxis as SeparatingAxis, __webpack_exports__SeparationInfo as SeparationInfo, __webpack_exports__Shader as Shader, __webpack_exports__Shape as Shape, __webpack_exports__Side as Side, __webpack_exports__Slide as Slide, __webpack_exports__SolverStrategy as SolverStrategy, __webpack_exports__Sound as Sound, __webpack_exports__SoundEvents as SoundEvents, __webpack_exports__SparseHashGrid as SparseHashGrid, __webpack_exports__SparseHashGridCollisionProcessor as SparseHashGridCollisionProcessor, __webpack_exports__SpatialPartitionStrategy as SpatialPartitionStrategy, __webpack_exports__Sprite as Sprite, __webpack_exports__SpriteFont as SpriteFont, __webpack_exports__SpriteSheet as SpriteSheet, __webpack_exports__StandardClock as StandardClock, __webpack_exports__StateMachine as StateMachine, __webpack_exports__StrategyContainer as StrategyContainer, __webpack_exports__Stream as Stream, __webpack_exports__System as System, __webpack_exports__SystemManager as SystemManager, __webpack_exports__SystemPriority as SystemPriority, __webpack_exports__SystemType as SystemType, __webpack_exports__TagQuery as TagQuery, __webpack_exports__TestClock as TestClock, __webpack_exports__Text as Text, __webpack_exports__TextAlign as TextAlign, __webpack_exports__TextureLoader as TextureLoader, __webpack_exports__Tile as Tile, __webpack_exports__TileMap as TileMap, __webpack_exports__TileMapEvents as TileMapEvents, __webpack_exports__TiledAnimation as TiledAnimation, __webpack_exports__TiledSprite as TiledSprite, __webpack_exports__Timer as Timer, __webpack_exports__Toaster as Toaster, __webpack_exports__Transform as Transform, __webpack_exports__TransformComponent as TransformComponent, __webpack_exports__Transition as Transition, __webpack_exports__TreeNode as TreeNode, __webpack_exports__Trigger as Trigger, __webpack_exports__TriggerEvents as TriggerEvents, __webpack_exports__TwoPI as TwoPI, __webpack_exports__Util as Util, __webpack_exports__Vector as Vector, __webpack_exports__VectorView as VectorView, __webpack_exports__VertexBuffer as VertexBuffer, __webpack_exports__VertexLayout as VertexLayout, __webpack_exports__VerticalFirst as VerticalFirst, __webpack_exports__VisibleEvent as VisibleEvent, __webpack_exports__WebAudio as WebAudio, __webpack_exports__WebAudioInstance as WebAudioInstance, __webpack_exports__WheelDeltaMode as WheelDeltaMode, __webpack_exports__WheelEvent as WheelEvent, __webpack_exports__World as World, __webpack_exports__approximatelyEqual as approximatelyEqual, __webpack_exports__assert as assert, __webpack_exports__canonicalizeAngle as canonicalizeAngle, __webpack_exports__clamp as clamp, __webpack_exports__coroutine as coroutine, __webpack_exports__createId as createId, __webpack_exports__frac as frac, __webpack_exports__getDefaultPhysicsConfig as getDefaultPhysicsConfig, __webpack_exports__hasGraphicsTick as hasGraphicsTick, __webpack_exports__hasOnAdd as hasOnAdd, __webpack_exports__hasOnInitialize as hasOnInitialize, __webpack_exports__hasOnPostUpdate as hasOnPostUpdate, __webpack_exports__hasOnPreUpdate as hasOnPreUpdate, __webpack_exports__hasOnRemove as hasOnRemove, __webpack_exports__hasPostDraw as hasPostDraw, __webpack_exports__hasPreDraw as hasPreDraw, __webpack_exports__has_add as has_add, __webpack_exports__has_initialize as has_initialize, __webpack_exports__has_postupdate as has_postupdate, __webpack_exports__has_preupdate as has_preupdate, __webpack_exports__has_remove as has_remove, __webpack_exports__inverseLerp as inverseLerp, __webpack_exports__inverseLerpVector as inverseLerpVector, __webpack_exports__isActor as isActor, __webpack_exports__isAddedComponent as isAddedComponent, __webpack_exports__isComponentCtor as isComponentCtor, __webpack_exports__isLoaderConstructor as isLoaderConstructor, __webpack_exports__isMoveByOptions as isMoveByOptions, __webpack_exports__isMoveToOptions as isMoveToOptions, __webpack_exports__isRemovedComponent as isRemovedComponent, __webpack_exports__isRotateByOptions as isRotateByOptions, __webpack_exports__isRotateToOptions as isRotateToOptions, __webpack_exports__isScaleByOptions as isScaleByOptions, __webpack_exports__isScaleToOptions as isScaleToOptions, __webpack_exports__isSceneConstructor as isSceneConstructor, __webpack_exports__isScreenElement as isScreenElement, __webpack_exports__isSystemConstructor as isSystemConstructor, __webpack_exports__lerp as lerp, __webpack_exports__lerpAngle as lerpAngle, __webpack_exports__lerpVector as lerpVector, __webpack_exports__maxMessages as maxMessages, __webpack_exports__nextActionId as nextActionId, __webpack_exports__obsolete as obsolete, __webpack_exports__parseImageFiltering as parseImageFiltering, __webpack_exports__parseImageWrapping as parseImageWrapping, __webpack_exports__pixelSnapEpsilon as pixelSnapEpsilon, __webpack_exports__randomInRange as randomInRange, __webpack_exports__randomIntInRange as randomIntInRange, __webpack_exports__range as range, __webpack_exports__remap as remap, __webpack_exports__remapVector as remapVector, __webpack_exports__resetObsoleteCounter as resetObsoleteCounter, __webpack_exports__sign as sign, __webpack_exports__toDegrees as toDegrees, __webpack_exports__toRadians as toRadians, __webpack_exports__vec as vec, __webpack_exports__webgl as webgl };\n\n//# sourceMappingURL=excalibur.js.map","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!(config === null || config === void 0 ? void 0 : config.name)) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair ✨\n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach(listener => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach(arg => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') ||\n        options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, buildRequestInit, registerPlugin, registerWebPlugin, setPlatform };\n//# sourceMappingURL=index.js.map\n","import { registerPlugin } from '@capacitor/core';\nconst Motion = registerPlugin('Motion', {\n    android: () => import('./web').then(m => new m.MotionWeb()),\n    ios: () => import('./web').then(m => new m.MotionWeb()),\n    web: () => import('./web').then(m => new m.MotionWeb()),\n});\nexport * from './definitions';\nexport { Motion };\n//# sourceMappingURL=index.js.map","import*as e from\"excalibur\";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},i={};t.d(i,{dd:()=>ai,UZ:()=>l,NN:()=>ni,e1:()=>Gt,a8:()=>Rt,u6:()=>Ut,oK:()=>$t,U_:()=>Ft,sn:()=>Kt,GY:()=>ui,$t:()=>oi,RI:()=>di,_k:()=>ri,eZ:()=>r,pf:()=>li,N5:()=>a,qD:()=>n,hu:()=>o,Uk:()=>d});const s=(e=>{var i={};return t.d(i,e),i})({Actor:()=>e.Actor,BoundingBox:()=>e.BoundingBox,Color:()=>e.Color,GraphicsComponent:()=>e.GraphicsComponent,ImageSource:()=>e.ImageSource,SpriteSheet:()=>e.SpriteSheet,TileMap:()=>e.TileMap,TransformComponent:()=>e.TransformComponent,Vector:()=>e.Vector,vec:()=>e.vec});class r{constructor(e,t,i,r){var a,n,o,d;this.order=r,this.worldPos=(0,s.vec)(e.ldtkLevel.worldX,e.ldtkLevel.worldY),this.offset=(0,s.vec)(t.__pxTotalOffsetX,t.__pxTotalOffsetY),this.ldtkLayer=t,this.tilemap=new s.TileMap({name:t.__identifier,pos:this.worldPos.add(this.offset),tileWidth:t.__gridSize,tileHeight:t.__gridSize,rows:t.__cHei,columns:t.__cWid}),this.tilemap.z=r;if(this.tilemap.get(s.GraphicsComponent).isVisible=t.visible,t.__tilesetDefUid){this.tileset=i.tilesets.get(t.__tilesetDefUid);for(let e of t.gridTiles){const i=Math.floor(e.px[0]/t.__gridSize),s=Math.floor(e.px[1]/t.__gridSize),r=this.tilemap.getTile(i,s);if(this.tileset){const t=Math.floor((e.src[0]-(null!==(a=this.tileset.ldtkTileset.padding)&&void 0!==a?a:0))/(this.tileset.ldtkTileset.tileGridSize+(null!==(n=this.tileset.ldtkTileset.spacing)&&void 0!==n?n:0))),i=Math.floor((e.src[1]-(null!==(o=this.tileset.ldtkTileset.padding)&&void 0!==o?o:0))/(this.tileset.ldtkTileset.tileGridSize+(null!==(d=this.tileset.ldtkTileset.spacing)&&void 0!==d?d:0))),s=!!(1&e.f),l=!!(2&e.f);let u=this.tileset.spritesheet.getSprite(t,i);(s||l)&&(u=u.clone(),u.flipHorizontal=s,u.flipVertical=l),u?r.addGraphic(u):console.error(\"Could not find sprite in LDtk spritesheet at\",t,i)}}}else console.error(\"Could not tileset in LDtk\",t.__tilesetDefUid,t.__tilesetRelPath)}}function a(e){const t=e.match(/[^/\\\\&\\?]+\\.\\w{2,4}(?=([\\#\\?&].*$|$))/gi);if(t){return t[0]}throw new Error(`Could not locate filename from path: ${e}`)}function n(e,t){for(const{path:i,output:s}of t)if(\"string\"==typeof i){if(e.includes(i))return s}else{const t=e.match(i);if(t)return s.replace(\"[match]\",t[0])}return e}function o(e,t){if(!t)return!1;for(const{path:i,output:s}of t)if(\"string\"==typeof i){if(e.includes(i))return!0}else{if(e.match(i))return!0}return!1}function d(e,t,i){if(o(t,i)&&i)return n(t,i);if(0===t.indexOf(\"/\"))return t;const s=e.split(\"/\"),r=t.split(\"/\");return s[s.length-1].includes(\".\")&&s.pop(),s.concat(r).join(\"/\")}const l=async(e,t)=>{const i=await fetch(e);switch(t.toLowerCase()){case\"xml\":default:return await i.text();case\"json\":return await i.json()}};var u,c;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const i of e)t[i]=i;return t},e.getValidEnumValues=t=>{const i=e.objectKeys(t).filter((e=>\"number\"!=typeof t[t[e]])),s={};for(const e of i)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys=\"function\"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},e.find=(e,t)=>{for(const i of e)if(t(i))return i},e.isInteger=\"function\"==typeof Number.isInteger?e=>Number.isInteger(e):e=>\"number\"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=\" | \"){return e.map((e=>\"string\"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>\"bigint\"==typeof t?t.toString():t}(u||(u={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(c||(c={}));const h=u.arrayToEnum([\"string\",\"nan\",\"number\",\"integer\",\"float\",\"boolean\",\"date\",\"bigint\",\"symbol\",\"function\",\"undefined\",\"null\",\"array\",\"object\",\"unknown\",\"promise\",\"void\",\"never\",\"map\",\"set\"]),p=e=>{switch(typeof e){case\"undefined\":return h.undefined;case\"string\":return h.string;case\"number\":return isNaN(e)?h.nan:h.number;case\"boolean\":return h.boolean;case\"function\":return h.function;case\"bigint\":return h.bigint;case\"symbol\":return h.symbol;case\"object\":return Array.isArray(e)?h.array:null===e?h.null:e.then&&\"function\"==typeof e.then&&e.catch&&\"function\"==typeof e.catch?h.promise:\"undefined\"!=typeof Map&&e instanceof Map?h.map:\"undefined\"!=typeof Set&&e instanceof Set?h.set:\"undefined\"!=typeof Date&&e instanceof Date?h.date:h.object;default:return h.unknown}},f=u.arrayToEnum([\"invalid_type\",\"invalid_literal\",\"custom\",\"invalid_union\",\"invalid_union_discriminator\",\"invalid_enum_value\",\"unrecognized_keys\",\"invalid_arguments\",\"invalid_return_type\",\"invalid_date\",\"invalid_string\",\"too_small\",\"too_big\",\"invalid_intersection_types\",\"not_multiple_of\",\"not_finite\"]);class m extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name=\"ZodError\",this.issues=e}format(e){const t=e||function(e){return e.message},i={_errors:[]},s=e=>{for(const r of e.issues)if(\"invalid_union\"===r.code)r.unionErrors.map(s);else if(\"invalid_return_type\"===r.code)s(r.returnTypeError);else if(\"invalid_arguments\"===r.code)s(r.argumentsError);else if(0===r.path.length)i._errors.push(t(r));else{let e=i,s=0;for(;s<r.path.length;){const i=r.path[s];s===r.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(t(r))):e[i]=e[i]||{_errors:[]},e=e[i],s++}}};return s(this),i}static assert(e){if(!(e instanceof m))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,u.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},i=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}m.create=e=>new m(e);const y=(e,t)=>{let i;switch(e.code){case f.invalid_type:i=e.received===h.undefined?\"Required\":`Expected ${e.expected}, received ${e.received}`;break;case f.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,u.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:i=`Unrecognized key(s) in object: ${u.joinValues(e.keys,\", \")}`;break;case f.invalid_union:i=\"Invalid input\";break;case f.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${u.joinValues(e.options)}`;break;case f.invalid_enum_value:i=`Invalid enum value. Expected ${u.joinValues(e.options)}, received '${e.received}'`;break;case f.invalid_arguments:i=\"Invalid function arguments\";break;case f.invalid_return_type:i=\"Invalid function return type\";break;case f.invalid_date:i=\"Invalid date\";break;case f.invalid_string:\"object\"==typeof e.validation?\"includes\"in e.validation?(i=`Invalid input: must include \"${e.validation.includes}\"`,\"number\"==typeof e.validation.position&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):\"startsWith\"in e.validation?i=`Invalid input: must start with \"${e.validation.startsWith}\"`:\"endsWith\"in e.validation?i=`Invalid input: must end with \"${e.validation.endsWith}\"`:u.assertNever(e.validation):i=\"regex\"!==e.validation?`Invalid ${e.validation}`:\"Invalid\";break;case f.too_small:i=\"array\"===e.type?`Array must contain ${e.exact?\"exactly\":e.inclusive?\"at least\":\"more than\"} ${e.minimum} element(s)`:\"string\"===e.type?`String must contain ${e.exact?\"exactly\":e.inclusive?\"at least\":\"over\"} ${e.minimum} character(s)`:\"number\"===e.type?`Number must be ${e.exact?\"exactly equal to \":e.inclusive?\"greater than or equal to \":\"greater than \"}${e.minimum}`:\"date\"===e.type?`Date must be ${e.exact?\"exactly equal to \":e.inclusive?\"greater than or equal to \":\"greater than \"}${new Date(Number(e.minimum))}`:\"Invalid input\";break;case f.too_big:i=\"array\"===e.type?`Array must contain ${e.exact?\"exactly\":e.inclusive?\"at most\":\"less than\"} ${e.maximum} element(s)`:\"string\"===e.type?`String must contain ${e.exact?\"exactly\":e.inclusive?\"at most\":\"under\"} ${e.maximum} character(s)`:\"number\"===e.type?`Number must be ${e.exact?\"exactly\":e.inclusive?\"less than or equal to\":\"less than\"} ${e.maximum}`:\"bigint\"===e.type?`BigInt must be ${e.exact?\"exactly\":e.inclusive?\"less than or equal to\":\"less than\"} ${e.maximum}`:\"date\"===e.type?`Date must be ${e.exact?\"exactly\":e.inclusive?\"smaller than or equal to\":\"smaller than\"} ${new Date(Number(e.maximum))}`:\"Invalid input\";break;case f.custom:i=\"Invalid input\";break;case f.invalid_intersection_types:i=\"Intersection results could not be merged\";break;case f.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case f.not_finite:i=\"Number must be finite\";break;default:i=t.defaultError,u.assertNever(e)}return{message:i}};let g=y;function _(){return g}const v=e=>{const{data:t,path:i,errorMaps:s,issueData:r}=e,a=[...i,...r.path||[]],n={...r,path:a};if(void 0!==r.message)return{...r,path:a,message:r.message};let o=\"\";const d=s.filter((e=>!!e)).slice().reverse();for(const e of d)o=e(n,{data:t,defaultError:o}).message;return{...r,path:a,message:o}};function b(e,t){const i=_(),s=v({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i,i===y?void 0:y].filter((e=>!!e))});e.common.issues.push(s)}class k{constructor(){this.value=\"valid\"}dirty(){\"valid\"===this.value&&(this.value=\"dirty\")}abort(){\"aborted\"!==this.value&&(this.value=\"aborted\")}static mergeArray(e,t){const i=[];for(const s of t){if(\"aborted\"===s.status)return x;\"dirty\"===s.status&&e.dirty(),i.push(s.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const e of t){const t=await e.key,s=await e.value;i.push({key:t,value:s})}return k.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const s of t){const{key:t,value:r}=s;if(\"aborted\"===t.status)return x;if(\"aborted\"===r.status)return x;\"dirty\"===t.status&&e.dirty(),\"dirty\"===r.status&&e.dirty(),\"__proto__\"===t.value||void 0===r.value&&!s.alwaysSet||(i[t.value]=r.value)}return{status:e.value,value:i}}}const x=Object.freeze({status:\"aborted\"}),w=e=>({status:\"dirty\",value:e}),T=e=>({status:\"valid\",value:e}),Z=e=>\"aborted\"===e.status,L=e=>\"dirty\"===e.status,C=e=>\"valid\"===e.status,S=e=>\"undefined\"!=typeof Promise&&e instanceof Promise;function E(e,t,i,s){if(\"a\"===i&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof t?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===i?s:\"a\"===i?s.call(e):s?s.value:t.get(e)}function O(e,t,i,s,r){if(\"m\"===s)throw new TypeError(\"Private method is not writable\");if(\"a\"===s&&!r)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof t?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===s?r.call(e,i):r?r.value=i:t.set(e,i),i}var j,I,A;\"function\"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>\"string\"==typeof e?{message:e}:e||{},e.toString=e=>\"string\"==typeof e?e:null==e?void 0:e.message}(j||(j={}));class N{constructor(e,t,i,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const P=(e,t)=>{if(C(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error(\"Validation failed but no issues detected.\");return{success:!1,get error(){if(this._error)return this._error;const t=new m(e.common.issues);return this._error=t,this._error}}};function M(e){if(!e)return{};const{errorMap:t,invalid_type_error:i,required_error:s,description:r}=e;if(t&&(i||s))throw new Error('Can\\'t use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.');if(t)return{errorMap:t,description:r};return{errorMap:(t,r)=>{var a,n;const{message:o}=e;return\"invalid_enum_value\"===t.code?{message:null!=o?o:r.defaultError}:void 0===r.data?{message:null!==(a=null!=o?o:s)&&void 0!==a?a:r.defaultError}:\"invalid_type\"!==t.code?{message:r.defaultError}:{message:null!==(n=null!=o?o:i)&&void 0!==n?n:r.defaultError}},description:r}}class R{get description(){return this._def.description}_getType(e){return p(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:p(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new k,ctx:{common:e.parent.common,data:e.data,parsedType:p(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(S(t))throw new Error(\"Synchronous parse encountered promise.\");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const s={common:{issues:[],async:null!==(i=null==t?void 0:t.async)&&void 0!==i&&i,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:p(e)},r=this._parseSync({data:e,path:s.path,parent:s});return P(s,r)}\"~validate\"(e){var t,i;const s={common:{issues:[],async:!!this[\"~standard\"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:p(e)};if(!this[\"~standard\"].async)try{const t=this._parseSync({data:e,path:[],parent:s});return C(t)?{value:t.value}:{issues:s.common.issues}}catch(e){(null===(i=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===i?void 0:i.includes(\"encountered\"))&&(this[\"~standard\"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then((e=>C(e)?{value:e.value}:{issues:s.common.issues}))}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:p(e)},s=this._parse({data:e,path:i.path,parent:i}),r=await(S(s)?s:Promise.resolve(s));return P(i,r)}refine(e,t){const i=e=>\"string\"==typeof t||void 0===t?{message:t}:\"function\"==typeof t?t(e):t;return this._refinement(((t,s)=>{const r=e(t),a=()=>s.addIssue({code:f.custom,...i(t)});return\"undefined\"!=typeof Promise&&r instanceof Promise?r.then((e=>!!e||(a(),!1))):!!r||(a(),!1)}))}refinement(e,t){return this._refinement(((i,s)=>!!e(i)||(s.addIssue(\"function\"==typeof t?t(i,s):t),!1)))}_refinement(e){return new Re({schema:this,typeName:Ye.ZodEffects,effect:{type:\"refinement\",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this[\"~standard\"]={version:1,vendor:\"zod\",validate:e=>this[\"~validate\"](e)}}optional(){return $e.create(this,this._def)}nullable(){return Fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _e.create(this)}promise(){return Me.create(this,this._def)}or(e){return ke.create([this,e],this._def)}and(e){return Ze.create(this,e,this._def)}transform(e){return new Re({...M(this._def),schema:this,typeName:Ye.ZodEffects,effect:{type:\"transform\",transform:e}})}default(e){const t=\"function\"==typeof e?e:()=>e;return new ze({...M(this._def),innerType:this,defaultValue:t,typeName:Ye.ZodDefault})}brand(){return new Ue({typeName:Ye.ZodBranded,type:this,...M(this._def)})}catch(e){const t=\"function\"==typeof e?e:()=>e;return new De({...M(this._def),innerType:this,catchValue:t,typeName:Ye.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ge.create(this,e)}readonly(){return We.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $=/^c[^\\s-]{8,}$/i,F=/^[0-9a-z]+$/,z=/^[0-9A-HJKMNP-TV-Z]{26}$/i,D=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,B=/^[a-z0-9_-]{21}$/i,V=/^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/,U=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,G=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;let W;const K=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,H=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,Y=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,X=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,q=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,J=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Q=\"((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))\",ee=new RegExp(`^${Q}$`);function te(e){let t=\"([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d\";return e.precision?t=`${t}\\\\.\\\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\\\.\\\\d+)?`),t}function ie(e){let t=`${Q}T${te(e)}`;const i=[];return i.push(e.local?\"Z?\":\"Z\"),e.offset&&i.push(\"([+-]\\\\d{2}:?\\\\d{2})\"),t=`${t}(${i.join(\"|\")})`,new RegExp(`^${t}$`)}function se(e,t){if(!V.test(e))return!1;try{const[i]=e.split(\".\"),s=i.replace(/-/g,\"+\").replace(/_/g,\"/\").padEnd(i.length+(4-i.length%4)%4,\"=\"),r=JSON.parse(atob(s));return\"object\"==typeof r&&null!==r&&(!(!r.typ||!r.alg)&&(!t||r.alg===t))}catch(e){return!1}}function re(e,t){return!(\"v4\"!==t&&t||!H.test(e))||!(\"v6\"!==t&&t||!X.test(e))}class ae extends R{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==h.string){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.string,received:t.parsedType}),x}const t=new k;let i;for(const a of this._def.checks)if(\"min\"===a.kind)e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_small,minimum:a.value,type:\"string\",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if(\"max\"===a.kind)e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_big,maximum:a.value,type:\"string\",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if(\"length\"===a.kind){const s=e.data.length>a.value,r=e.data.length<a.value;(s||r)&&(i=this._getOrReturnCtx(e,i),s?b(i,{code:f.too_big,maximum:a.value,type:\"string\",inclusive:!0,exact:!0,message:a.message}):r&&b(i,{code:f.too_small,minimum:a.value,type:\"string\",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if(\"email\"===a.kind)G.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"email\",code:f.invalid_string,message:a.message}),t.dirty());else if(\"emoji\"===a.kind)W||(W=new RegExp(\"^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$\",\"u\")),W.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"emoji\",code:f.invalid_string,message:a.message}),t.dirty());else if(\"uuid\"===a.kind)D.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"uuid\",code:f.invalid_string,message:a.message}),t.dirty());else if(\"nanoid\"===a.kind)B.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"nanoid\",code:f.invalid_string,message:a.message}),t.dirty());else if(\"cuid\"===a.kind)$.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"cuid\",code:f.invalid_string,message:a.message}),t.dirty());else if(\"cuid2\"===a.kind)F.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"cuid2\",code:f.invalid_string,message:a.message}),t.dirty());else if(\"ulid\"===a.kind)z.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"ulid\",code:f.invalid_string,message:a.message}),t.dirty());else if(\"url\"===a.kind)try{new URL(e.data)}catch(s){i=this._getOrReturnCtx(e,i),b(i,{validation:\"url\",code:f.invalid_string,message:a.message}),t.dirty()}else if(\"regex\"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"regex\",code:f.invalid_string,message:a.message}),t.dirty())}else if(\"trim\"===a.kind)e.data=e.data.trim();else if(\"includes\"===a.kind)e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if(\"toLowerCase\"===a.kind)e.data=e.data.toLowerCase();else if(\"toUpperCase\"===a.kind)e.data=e.data.toUpperCase();else if(\"startsWith\"===a.kind)e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if(\"endsWith\"===a.kind)e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if(\"datetime\"===a.kind){ie(a).test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:\"datetime\",message:a.message}),t.dirty())}else if(\"date\"===a.kind){ee.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:\"date\",message:a.message}),t.dirty())}else if(\"time\"===a.kind){new RegExp(`^${te(a)}$`).test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:\"time\",message:a.message}),t.dirty())}else\"duration\"===a.kind?U.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"duration\",code:f.invalid_string,message:a.message}),t.dirty()):\"ip\"===a.kind?(s=e.data,(\"v4\"!==(r=a.version)&&r||!K.test(s))&&(\"v6\"!==r&&r||!Y.test(s))&&(i=this._getOrReturnCtx(e,i),b(i,{validation:\"ip\",code:f.invalid_string,message:a.message}),t.dirty())):\"jwt\"===a.kind?se(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"jwt\",code:f.invalid_string,message:a.message}),t.dirty()):\"cidr\"===a.kind?re(e.data,a.version)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"cidr\",code:f.invalid_string,message:a.message}),t.dirty()):\"base64\"===a.kind?q.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"base64\",code:f.invalid_string,message:a.message}),t.dirty()):\"base64url\"===a.kind?J.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:\"base64url\",code:f.invalid_string,message:a.message}),t.dirty()):u.assertNever(a);var s,r;return{status:t.value,value:e.data}}_regex(e,t,i){return this.refinement((t=>e.test(t)),{validation:t,code:f.invalid_string,...j.errToObj(i)})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:\"email\",...j.errToObj(e)})}url(e){return this._addCheck({kind:\"url\",...j.errToObj(e)})}emoji(e){return this._addCheck({kind:\"emoji\",...j.errToObj(e)})}uuid(e){return this._addCheck({kind:\"uuid\",...j.errToObj(e)})}nanoid(e){return this._addCheck({kind:\"nanoid\",...j.errToObj(e)})}cuid(e){return this._addCheck({kind:\"cuid\",...j.errToObj(e)})}cuid2(e){return this._addCheck({kind:\"cuid2\",...j.errToObj(e)})}ulid(e){return this._addCheck({kind:\"ulid\",...j.errToObj(e)})}base64(e){return this._addCheck({kind:\"base64\",...j.errToObj(e)})}base64url(e){return this._addCheck({kind:\"base64url\",...j.errToObj(e)})}jwt(e){return this._addCheck({kind:\"jwt\",...j.errToObj(e)})}ip(e){return this._addCheck({kind:\"ip\",...j.errToObj(e)})}cidr(e){return this._addCheck({kind:\"cidr\",...j.errToObj(e)})}datetime(e){var t,i;return\"string\"==typeof e?this._addCheck({kind:\"datetime\",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:\"datetime\",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(i=null==e?void 0:e.local)&&void 0!==i&&i,...j.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:\"date\",message:e})}time(e){return\"string\"==typeof e?this._addCheck({kind:\"time\",precision:null,message:e}):this._addCheck({kind:\"time\",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...j.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:\"duration\",...j.errToObj(e)})}regex(e,t){return this._addCheck({kind:\"regex\",regex:e,...j.errToObj(t)})}includes(e,t){return this._addCheck({kind:\"includes\",value:e,position:null==t?void 0:t.position,...j.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:\"startsWith\",value:e,...j.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:\"endsWith\",value:e,...j.errToObj(t)})}min(e,t){return this._addCheck({kind:\"min\",value:e,...j.errToObj(t)})}max(e,t){return this._addCheck({kind:\"max\",value:e,...j.errToObj(t)})}length(e,t){return this._addCheck({kind:\"length\",value:e,...j.errToObj(t)})}nonempty(e){return this.min(1,j.errToObj(e))}trim(){return new ae({...this._def,checks:[...this._def.checks,{kind:\"trim\"}]})}toLowerCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:\"toLowerCase\"}]})}toUpperCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:\"toUpperCase\"}]})}get isDatetime(){return!!this._def.checks.find((e=>\"datetime\"===e.kind))}get isDate(){return!!this._def.checks.find((e=>\"date\"===e.kind))}get isTime(){return!!this._def.checks.find((e=>\"time\"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>\"duration\"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>\"email\"===e.kind))}get isURL(){return!!this._def.checks.find((e=>\"url\"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>\"emoji\"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>\"uuid\"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>\"nanoid\"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>\"cuid\"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>\"cuid2\"===e.kind))}get isULID(){return!!this._def.checks.find((e=>\"ulid\"===e.kind))}get isIP(){return!!this._def.checks.find((e=>\"ip\"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>\"cidr\"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>\"base64\"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>\"base64url\"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ne(e,t){const i=(e.toString().split(\".\")[1]||\"\").length,s=(t.toString().split(\".\")[1]||\"\").length,r=i>s?i:s;return parseInt(e.toFixed(r).replace(\".\",\"\"))%parseInt(t.toFixed(r).replace(\".\",\"\"))/Math.pow(10,r)}ae.create=e=>{var t;return new ae({checks:[],typeName:Ye.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...M(e)})};class oe extends R{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==h.number){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.number,received:t.parsedType}),x}let t;const i=new k;for(const s of this._def.checks)if(\"int\"===s.kind)u.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:f.invalid_type,expected:\"integer\",received:\"float\",message:s.message}),i.dirty());else if(\"min\"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_small,minimum:s.value,type:\"number\",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else if(\"max\"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_big,maximum:s.value,type:\"number\",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else\"multipleOf\"===s.kind?0!==ne(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):\"finite\"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:f.not_finite,message:s.message}),i.dirty()):u.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit(\"min\",e,!0,j.toString(t))}gt(e,t){return this.setLimit(\"min\",e,!1,j.toString(t))}lte(e,t){return this.setLimit(\"max\",e,!0,j.toString(t))}lt(e,t){return this.setLimit(\"max\",e,!1,j.toString(t))}setLimit(e,t,i,s){return new oe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:j.toString(s)}]})}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:\"int\",message:j.toString(e)})}positive(e){return this._addCheck({kind:\"min\",value:0,inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:\"max\",value:0,inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:\"max\",value:0,inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:\"min\",value:0,inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:\"multipleOf\",value:e,message:j.toString(t)})}finite(e){return this._addCheck({kind:\"finite\",message:j.toString(e)})}safe(e){return this._addCheck({kind:\"min\",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:j.toString(e)})._addCheck({kind:\"max\",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:j.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>\"int\"===e.kind||\"multipleOf\"===e.kind&&u.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(\"finite\"===i.kind||\"int\"===i.kind||\"multipleOf\"===i.kind)return!0;\"min\"===i.kind?(null===t||i.value>t)&&(t=i.value):\"max\"===i.kind&&(null===e||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}oe.create=e=>new oe({checks:[],typeName:Ye.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...M(e)});class de extends R{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==h.bigint)return this._getInvalidInput(e);let t;const i=new k;for(const s of this._def.checks)if(\"min\"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_small,type:\"bigint\",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty())}else if(\"max\"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_big,type:\"bigint\",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty())}else\"multipleOf\"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):u.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.bigint,received:t.parsedType}),x}gte(e,t){return this.setLimit(\"min\",e,!0,j.toString(t))}gt(e,t){return this.setLimit(\"min\",e,!1,j.toString(t))}lte(e,t){return this.setLimit(\"max\",e,!0,j.toString(t))}lt(e,t){return this.setLimit(\"max\",e,!1,j.toString(t))}setLimit(e,t,i,s){return new de({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:j.toString(s)}]})}_addCheck(e){return new de({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:\"min\",value:BigInt(0),inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:\"max\",value:BigInt(0),inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:\"max\",value:BigInt(0),inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:\"min\",value:BigInt(0),inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:\"multipleOf\",value:e,message:j.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}de.create=e=>{var t;return new de({checks:[],typeName:Ye.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...M(e)})};class le extends R{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==h.boolean){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.boolean,received:t.parsedType}),x}return T(e.data)}}le.create=e=>new le({typeName:Ye.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...M(e)});class ue extends R{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==h.date){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.date,received:t.parsedType}),x}if(isNaN(e.data.getTime())){return b(this._getOrReturnCtx(e),{code:f.invalid_date}),x}const t=new k;let i;for(const s of this._def.checks)\"min\"===s.kind?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:\"date\"}),t.dirty()):\"max\"===s.kind?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:\"date\"}),t.dirty()):u.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ue({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:\"min\",value:e.getTime(),message:j.toString(t)})}max(e,t){return this._addCheck({kind:\"max\",value:e.getTime(),message:j.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ue.create=e=>new ue({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Ye.ZodDate,...M(e)});class ce extends R{_parse(e){if(this._getType(e)!==h.symbol){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.symbol,received:t.parsedType}),x}return T(e.data)}}ce.create=e=>new ce({typeName:Ye.ZodSymbol,...M(e)});class he extends R{_parse(e){if(this._getType(e)!==h.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.undefined,received:t.parsedType}),x}return T(e.data)}}he.create=e=>new he({typeName:Ye.ZodUndefined,...M(e)});class pe extends R{_parse(e){if(this._getType(e)!==h.null){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.null,received:t.parsedType}),x}return T(e.data)}}pe.create=e=>new pe({typeName:Ye.ZodNull,...M(e)});class fe extends R{constructor(){super(...arguments),this._any=!0}_parse(e){return T(e.data)}}fe.create=e=>new fe({typeName:Ye.ZodAny,...M(e)});class me extends R{constructor(){super(...arguments),this._unknown=!0}_parse(e){return T(e.data)}}me.create=e=>new me({typeName:Ye.ZodUnknown,...M(e)});class ye extends R{_parse(e){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.never,received:t.parsedType}),x}}ye.create=e=>new ye({typeName:Ye.ZodNever,...M(e)});class ge extends R{_parse(e){if(this._getType(e)!==h.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.void,received:t.parsedType}),x}return T(e.data)}}ge.create=e=>new ge({typeName:Ye.ZodVoid,...M(e)});class _e extends R{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),s=this._def;if(t.parsedType!==h.array)return b(t,{code:f.invalid_type,expected:h.array,received:t.parsedType}),x;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,r=t.data.length<s.exactLength.value;(e||r)&&(b(t,{code:e?f.too_big:f.too_small,minimum:r?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:\"array\",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(b(t,{code:f.too_small,minimum:s.minLength.value,type:\"array\",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(b(t,{code:f.too_big,maximum:s.maxLength.value,type:\"array\",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map(((e,i)=>s.type._parseAsync(new N(t,e,t.path,i))))).then((e=>k.mergeArray(i,e)));const r=[...t.data].map(((e,i)=>s.type._parseSync(new N(t,e,t.path,i))));return k.mergeArray(i,r)}get element(){return this._def.type}min(e,t){return new _e({...this._def,minLength:{value:e,message:j.toString(t)}})}max(e,t){return new _e({...this._def,maxLength:{value:e,message:j.toString(t)}})}length(e,t){return new _e({...this._def,exactLength:{value:e,message:j.toString(t)}})}nonempty(e){return this.min(1,e)}}function ve(e){if(e instanceof be){const t={};for(const i in e.shape){const s=e.shape[i];t[i]=$e.create(ve(s))}return new be({...e._def,shape:()=>t})}return e instanceof _e?new _e({...e._def,type:ve(e.element)}):e instanceof $e?$e.create(ve(e.unwrap())):e instanceof Fe?Fe.create(ve(e.unwrap())):e instanceof Le?Le.create(e.items.map((e=>ve(e)))):e}_e.create=(e,t)=>new _e({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ye.ZodArray,...M(t)});class be extends R{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=u.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==h.object){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.object,received:t.parsedType}),x}const{status:t,ctx:i}=this._processInputParams(e),{shape:s,keys:r}=this._getCached(),a=[];if(!(this._def.catchall instanceof ye&&\"strip\"===this._def.unknownKeys))for(const e in i.data)r.includes(e)||a.push(e);const n=[];for(const e of r){const t=s[e],r=i.data[e];n.push({key:{status:\"valid\",value:e},value:t._parse(new N(i,r,i.path,e)),alwaysSet:e in i.data})}if(this._def.catchall instanceof ye){const e=this._def.unknownKeys;if(\"passthrough\"===e)for(const e of a)n.push({key:{status:\"valid\",value:e},value:{status:\"valid\",value:i.data[e]}});else if(\"strict\"===e)a.length>0&&(b(i,{code:f.unrecognized_keys,keys:a}),t.dirty());else if(\"strip\"!==e)throw new Error(\"Internal ZodObject error: invalid unknownKeys value.\")}else{const e=this._def.catchall;for(const t of a){const s=i.data[t];n.push({key:{status:\"valid\",value:t},value:e._parse(new N(i,s,i.path,t)),alwaysSet:t in i.data})}}return i.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of n){const i=await t.key,s=await t.value;e.push({key:i,value:s,alwaysSet:t.alwaysSet})}return e})).then((e=>k.mergeObjectSync(t,e))):k.mergeObjectSync(t,n)}get shape(){return this._def.shape()}strict(e){return j.errToObj,new be({...this._def,unknownKeys:\"strict\",...void 0!==e?{errorMap:(t,i)=>{var s,r,a,n;const o=null!==(a=null===(r=(s=this._def).errorMap)||void 0===r?void 0:r.call(s,t,i).message)&&void 0!==a?a:i.defaultError;return\"unrecognized_keys\"===t.code?{message:null!==(n=j.errToObj(e).message)&&void 0!==n?n:o}:{message:o}}}:{}})}strip(){return new be({...this._def,unknownKeys:\"strip\"})}passthrough(){return new be({...this._def,unknownKeys:\"passthrough\"})}extend(e){return new be({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new be({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ye.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new be({...this._def,catchall:e})}pick(e){const t={};return u.objectKeys(e).forEach((i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])})),new be({...this._def,shape:()=>t})}omit(e){const t={};return u.objectKeys(this.shape).forEach((i=>{e[i]||(t[i]=this.shape[i])})),new be({...this._def,shape:()=>t})}deepPartial(){return ve(this)}partial(e){const t={};return u.objectKeys(this.shape).forEach((i=>{const s=this.shape[i];e&&!e[i]?t[i]=s:t[i]=s.optional()})),new be({...this._def,shape:()=>t})}required(e){const t={};return u.objectKeys(this.shape).forEach((i=>{if(e&&!e[i])t[i]=this.shape[i];else{let e=this.shape[i];for(;e instanceof $e;)e=e._def.innerType;t[i]=e}})),new be({...this._def,shape:()=>t})}keyof(){return Ae(u.objectKeys(this.shape))}}be.create=(e,t)=>new be({shape:()=>e,unknownKeys:\"strip\",catchall:ye.create(),typeName:Ye.ZodObject,...M(t)}),be.strictCreate=(e,t)=>new be({shape:()=>e,unknownKeys:\"strict\",catchall:ye.create(),typeName:Ye.ZodObject,...M(t)}),be.lazycreate=(e,t)=>new be({shape:e,unknownKeys:\"strip\",catchall:ye.create(),typeName:Ye.ZodObject,...M(t)});class ke extends R{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;if(t.common.async)return Promise.all(i.map((async e=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}}))).then((function(e){for(const t of e)if(\"valid\"===t.result.status)return t.result;for(const i of e)if(\"dirty\"===i.result.status)return t.common.issues.push(...i.ctx.common.issues),i.result;const i=e.map((e=>new m(e.ctx.common.issues)));return b(t,{code:f.invalid_union,unionErrors:i}),x}));{let e;const s=[];for(const r of i){const i={...t,common:{...t.common,issues:[]},parent:null},a=r._parseSync({data:t.data,path:t.path,parent:i});if(\"valid\"===a.status)return a;\"dirty\"!==a.status||e||(e={result:a,ctx:i}),i.common.issues.length&&s.push(i.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=s.map((e=>new m(e)));return b(t,{code:f.invalid_union,unionErrors:r}),x}}get options(){return this._def.options}}ke.create=(e,t)=>new ke({options:e,typeName:Ye.ZodUnion,...M(t)});const xe=e=>e instanceof je?xe(e.schema):e instanceof Re?xe(e.innerType()):e instanceof Ie?[e.value]:e instanceof Ne?e.options:e instanceof Pe?u.objectValues(e.enum):e instanceof ze?xe(e._def.innerType):e instanceof he?[void 0]:e instanceof pe?[null]:e instanceof $e?[void 0,...xe(e.unwrap())]:e instanceof Fe?[null,...xe(e.unwrap())]:e instanceof Ue||e instanceof We?xe(e.unwrap()):e instanceof De?xe(e._def.innerType):[];class we extends R{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.object)return b(t,{code:f.invalid_type,expected:h.object,received:t.parsedType}),x;const i=this.discriminator,s=t.data[i],r=this.optionsMap.get(s);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:f.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),x)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const s=new Map;for(const i of t){const t=xe(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \\`${e}\\` could not be extracted from all schema options`);for(const r of t){if(s.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);s.set(r,i)}}return new we({typeName:Ye.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...M(i)})}}function Te(e,t){const i=p(e),s=p(t);if(e===t)return{valid:!0,data:e};if(i===h.object&&s===h.object){const i=u.objectKeys(t),s=u.objectKeys(e).filter((e=>-1!==i.indexOf(e))),r={...e,...t};for(const i of s){const s=Te(e[i],t[i]);if(!s.valid)return{valid:!1};r[i]=s.data}return{valid:!0,data:r}}if(i===h.array&&s===h.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const r=Te(e[s],t[s]);if(!r.valid)return{valid:!1};i.push(r.data)}return{valid:!0,data:i}}return i===h.date&&s===h.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ze extends R{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=(e,s)=>{if(Z(e)||Z(s))return x;const r=Te(e.value,s.value);return r.valid?((L(e)||L(s))&&t.dirty(),{status:t.value,value:r.data}):(b(i,{code:f.invalid_intersection_types}),x)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then((([e,t])=>s(e,t))):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Ze.create=(e,t,i)=>new Ze({left:e,right:t,typeName:Ye.ZodIntersection,...M(i)});class Le extends R{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.array)return b(i,{code:f.invalid_type,expected:h.array,received:i.parsedType}),x;if(i.data.length<this._def.items.length)return b(i,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:\"array\"}),x;!this._def.rest&&i.data.length>this._def.items.length&&(b(i,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:\"array\"}),t.dirty());const s=[...i.data].map(((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new N(i,e,i.path,t)):null})).filter((e=>!!e));return i.common.async?Promise.all(s).then((e=>k.mergeArray(t,e))):k.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Le({...this._def,rest:e})}}Le.create=(e,t)=>{if(!Array.isArray(e))throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");return new Le({items:e,typeName:Ye.ZodTuple,rest:null,...M(t)})};class Ce extends R{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.object)return b(i,{code:f.invalid_type,expected:h.object,received:i.parsedType}),x;const s=[],r=this._def.keyType,a=this._def.valueType;for(const e in i.data)s.push({key:r._parse(new N(i,e,i.path,e)),value:a._parse(new N(i,i.data[e],i.path,e)),alwaysSet:e in i.data});return i.common.async?k.mergeObjectAsync(t,s):k.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,i){return new Ce(t instanceof R?{keyType:e,valueType:t,typeName:Ye.ZodRecord,...M(i)}:{keyType:ae.create(),valueType:e,typeName:Ye.ZodRecord,...M(t)})}}class Se extends R{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.map)return b(i,{code:f.invalid_type,expected:h.map,received:i.parsedType}),x;const s=this._def.keyType,r=this._def.valueType,a=[...i.data.entries()].map((([e,t],a)=>({key:s._parse(new N(i,e,i.path,[a,\"key\"])),value:r._parse(new N(i,t,i.path,[a,\"value\"]))})));if(i.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const i of a){const s=await i.key,r=await i.value;if(\"aborted\"===s.status||\"aborted\"===r.status)return x;\"dirty\"!==s.status&&\"dirty\"!==r.status||t.dirty(),e.set(s.value,r.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const i of a){const s=i.key,r=i.value;if(\"aborted\"===s.status||\"aborted\"===r.status)return x;\"dirty\"!==s.status&&\"dirty\"!==r.status||t.dirty(),e.set(s.value,r.value)}return{status:t.value,value:e}}}}Se.create=(e,t,i)=>new Se({valueType:t,keyType:e,typeName:Ye.ZodMap,...M(i)});class Ee extends R{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.set)return b(i,{code:f.invalid_type,expected:h.set,received:i.parsedType}),x;const s=this._def;null!==s.minSize&&i.data.size<s.minSize.value&&(b(i,{code:f.too_small,minimum:s.minSize.value,type:\"set\",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&i.data.size>s.maxSize.value&&(b(i,{code:f.too_big,maximum:s.maxSize.value,type:\"set\",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const r=this._def.valueType;function a(e){const i=new Set;for(const s of e){if(\"aborted\"===s.status)return x;\"dirty\"===s.status&&t.dirty(),i.add(s.value)}return{status:t.value,value:i}}const n=[...i.data.values()].map(((e,t)=>r._parse(new N(i,e,i.path,t))));return i.common.async?Promise.all(n).then((e=>a(e))):a(n)}min(e,t){return new Ee({...this._def,minSize:{value:e,message:j.toString(t)}})}max(e,t){return new Ee({...this._def,maxSize:{value:e,message:j.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ee.create=(e,t)=>new Ee({valueType:e,minSize:null,maxSize:null,typeName:Ye.ZodSet,...M(t)});class Oe extends R{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.function)return b(t,{code:f.invalid_type,expected:h.function,received:t.parsedType}),x;function i(e,i){return v({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_(),y].filter((e=>!!e)),issueData:{code:f.invalid_arguments,argumentsError:i}})}function s(e,i){return v({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_(),y].filter((e=>!!e)),issueData:{code:f.invalid_return_type,returnTypeError:i}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Me){const e=this;return T((async function(...t){const n=new m([]),o=await e._def.args.parseAsync(t,r).catch((e=>{throw n.addIssue(i(t,e)),n})),d=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(d,r).catch((e=>{throw n.addIssue(s(d,e)),n}))}))}{const e=this;return T((function(...t){const n=e._def.args.safeParse(t,r);if(!n.success)throw new m([i(t,n.error)]);const o=Reflect.apply(a,this,n.data),d=e._def.returns.safeParse(o,r);if(!d.success)throw new m([s(o,d.error)]);return d.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Oe({...this._def,args:Le.create(e).rest(me.create())})}returns(e){return new Oe({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new Oe({args:e||Le.create([]).rest(me.create()),returns:t||me.create(),typeName:Ye.ZodFunction,...M(i)})}}class je extends R{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}je.create=(e,t)=>new je({getter:e,typeName:Ye.ZodLazy,...M(t)});class Ie extends R{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:f.invalid_literal,expected:this._def.value}),x}return{status:\"valid\",value:e.data}}get value(){return this._def.value}}function Ae(e,t){return new Ne({values:e,typeName:Ye.ZodEnum,...M(t)})}Ie.create=(e,t)=>new Ie({value:e,typeName:Ye.ZodLiteral,...M(t)});class Ne extends R{constructor(){super(...arguments),I.set(this,void 0)}_parse(e){if(\"string\"!=typeof e.data){const t=this._getOrReturnCtx(e),i=this._def.values;return b(t,{expected:u.joinValues(i),received:t.parsedType,code:f.invalid_type}),x}if(E(this,I,\"f\")||O(this,I,new Set(this._def.values),\"f\"),!E(this,I,\"f\").has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return b(t,{received:t.data,code:f.invalid_enum_value,options:i}),x}return T(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ne.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ne.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}I=new WeakMap,Ne.create=Ae;class Pe extends R{constructor(){super(...arguments),A.set(this,void 0)}_parse(e){const t=u.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==h.string&&i.parsedType!==h.number){const e=u.objectValues(t);return b(i,{expected:u.joinValues(e),received:i.parsedType,code:f.invalid_type}),x}if(E(this,A,\"f\")||O(this,A,new Set(u.getValidEnumValues(this._def.values)),\"f\"),!E(this,A,\"f\").has(e.data)){const e=u.objectValues(t);return b(i,{received:i.data,code:f.invalid_enum_value,options:e}),x}return T(e.data)}get enum(){return this._def.values}}A=new WeakMap,Pe.create=(e,t)=>new Pe({values:e,typeName:Ye.ZodNativeEnum,...M(t)});class Me extends R{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.promise&&!1===t.common.async)return b(t,{code:f.invalid_type,expected:h.promise,received:t.parsedType}),x;const i=t.parsedType===h.promise?t.data:Promise.resolve(t.data);return T(i.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Me.create=(e,t)=>new Me({type:e,typeName:Ye.ZodPromise,...M(t)});class Re extends R{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=this._def.effect||null,r={addIssue:e=>{b(i,e),e.fatal?t.abort():t.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),\"preprocess\"===s.type){const e=s.transform(i.data,r);if(i.common.async)return Promise.resolve(e).then((async e=>{if(\"aborted\"===t.value)return x;const s=await this._def.schema._parseAsync({data:e,path:i.path,parent:i});return\"aborted\"===s.status?x:\"dirty\"===s.status||\"dirty\"===t.value?w(s.value):s}));{if(\"aborted\"===t.value)return x;const s=this._def.schema._parseSync({data:e,path:i.path,parent:i});return\"aborted\"===s.status?x:\"dirty\"===s.status||\"dirty\"===t.value?w(s.value):s}}if(\"refinement\"===s.type){const e=e=>{const t=s.refinement(e,r);if(i.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");return e};if(!1===i.common.async){const s=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return\"aborted\"===s.status?x:(\"dirty\"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((i=>\"aborted\"===i.status?x:(\"dirty\"===i.status&&t.dirty(),e(i.value).then((()=>({status:t.value,value:i.value}))))))}if(\"transform\"===s.type){if(!1===i.common.async){const e=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!C(e))return e;const a=s.transform(e.value,r);if(a instanceof Promise)throw new Error(\"Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.\");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((e=>C(e)?Promise.resolve(s.transform(e.value,r)).then((e=>({status:t.value,value:e}))):e))}u.assertNever(s)}}Re.create=(e,t,i)=>new Re({schema:e,typeName:Ye.ZodEffects,effect:t,...M(i)}),Re.createWithPreprocess=(e,t,i)=>new Re({schema:t,effect:{type:\"preprocess\",transform:e},typeName:Ye.ZodEffects,...M(i)});class $e extends R{_parse(e){return this._getType(e)===h.undefined?T(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$e.create=(e,t)=>new $e({innerType:e,typeName:Ye.ZodOptional,...M(t)});class Fe extends R{_parse(e){return this._getType(e)===h.null?T(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fe.create=(e,t)=>new Fe({innerType:e,typeName:Ye.ZodNullable,...M(t)});class ze extends R{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===h.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ze.create=(e,t)=>new ze({innerType:e,typeName:Ye.ZodDefault,defaultValue:\"function\"==typeof t.default?t.default:()=>t.default,...M(t)});class De extends R{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return S(s)?s.then((e=>({status:\"valid\",value:\"valid\"===e.status?e.value:this._def.catchValue({get error(){return new m(i.common.issues)},input:i.data})}))):{status:\"valid\",value:\"valid\"===s.status?s.value:this._def.catchValue({get error(){return new m(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}De.create=(e,t)=>new De({innerType:e,typeName:Ye.ZodCatch,catchValue:\"function\"==typeof t.catch?t.catch:()=>t.catch,...M(t)});class Be extends R{_parse(e){if(this._getType(e)!==h.nan){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.nan,received:t.parsedType}),x}return{status:\"valid\",value:e.data}}}Be.create=e=>new Be({typeName:Ye.ZodNaN,...M(e)});const Ve=Symbol(\"zod_brand\");class Ue extends R{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ge extends R{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return\"aborted\"===e.status?x:\"dirty\"===e.status?(t.dirty(),w(e.value)):this._def.out._parseAsync({data:e.value,path:i.path,parent:i})})()}{const e=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return\"aborted\"===e.status?x:\"dirty\"===e.status?(t.dirty(),{status:\"dirty\",value:e.value}):this._def.out._parseSync({data:e.value,path:i.path,parent:i})}}static create(e,t){return new Ge({in:e,out:t,typeName:Ye.ZodPipeline})}}class We extends R{_parse(e){const t=this._def.innerType._parse(e),i=e=>(C(e)&&(e.value=Object.freeze(e.value)),e);return S(t)?t.then((e=>i(e))):i(t)}unwrap(){return this._def.innerType}}function Ke(e,t={},i){return e?fe.create().superRefine(((s,r)=>{var a,n;if(!e(s)){const e=\"function\"==typeof t?t(s):\"string\"==typeof t?{message:t}:t,o=null===(n=null!==(a=e.fatal)&&void 0!==a?a:i)||void 0===n||n,d=\"string\"==typeof e?{message:e}:e;r.addIssue({code:\"custom\",...d,fatal:o})}})):fe.create()}We.create=(e,t)=>new We({innerType:e,typeName:Ye.ZodReadonly,...M(t)});const He={object:be.lazycreate};var Ye;!function(e){e.ZodString=\"ZodString\",e.ZodNumber=\"ZodNumber\",e.ZodNaN=\"ZodNaN\",e.ZodBigInt=\"ZodBigInt\",e.ZodBoolean=\"ZodBoolean\",e.ZodDate=\"ZodDate\",e.ZodSymbol=\"ZodSymbol\",e.ZodUndefined=\"ZodUndefined\",e.ZodNull=\"ZodNull\",e.ZodAny=\"ZodAny\",e.ZodUnknown=\"ZodUnknown\",e.ZodNever=\"ZodNever\",e.ZodVoid=\"ZodVoid\",e.ZodArray=\"ZodArray\",e.ZodObject=\"ZodObject\",e.ZodUnion=\"ZodUnion\",e.ZodDiscriminatedUnion=\"ZodDiscriminatedUnion\",e.ZodIntersection=\"ZodIntersection\",e.ZodTuple=\"ZodTuple\",e.ZodRecord=\"ZodRecord\",e.ZodMap=\"ZodMap\",e.ZodSet=\"ZodSet\",e.ZodFunction=\"ZodFunction\",e.ZodLazy=\"ZodLazy\",e.ZodLiteral=\"ZodLiteral\",e.ZodEnum=\"ZodEnum\",e.ZodEffects=\"ZodEffects\",e.ZodNativeEnum=\"ZodNativeEnum\",e.ZodOptional=\"ZodOptional\",e.ZodNullable=\"ZodNullable\",e.ZodDefault=\"ZodDefault\",e.ZodCatch=\"ZodCatch\",e.ZodPromise=\"ZodPromise\",e.ZodBranded=\"ZodBranded\",e.ZodPipeline=\"ZodPipeline\",e.ZodReadonly=\"ZodReadonly\"}(Ye||(Ye={}));const Xe=ae.create,qe=oe.create,Je=Be.create,Qe=de.create,et=le.create,tt=ue.create,it=ce.create,st=he.create,rt=pe.create,at=fe.create,nt=me.create,ot=ye.create,dt=ge.create,lt=_e.create,ut=be.create,ct=be.strictCreate,ht=ke.create,pt=we.create,ft=Ze.create,mt=Le.create,yt=Ce.create,gt=Se.create,_t=Ee.create,vt=Oe.create,bt=je.create,kt=Ie.create,xt=Ne.create,wt=Pe.create,Tt=Me.create,Zt=Re.create,Lt=$e.create,Ct=Fe.create,St=Re.createWithPreprocess,Et=Ge.create,Ot={string:e=>ae.create({...e,coerce:!0}),number:e=>oe.create({...e,coerce:!0}),boolean:e=>le.create({...e,coerce:!0}),bigint:e=>de.create({...e,coerce:!0}),date:e=>ue.create({...e,coerce:!0})},jt=x;var It=Object.freeze({__proto__:null,defaultErrorMap:y,setErrorMap:function(e){g=e},getErrorMap:_,makeIssue:v,EMPTY_PATH:[],addIssueToContext:b,ParseStatus:k,INVALID:x,DIRTY:w,OK:T,isAborted:Z,isDirty:L,isValid:C,isAsync:S,get util(){return u},get objectUtil(){return c},ZodParsedType:h,getParsedType:p,ZodType:R,datetimeRegex:ie,ZodString:ae,ZodNumber:oe,ZodBigInt:de,ZodBoolean:le,ZodDate:ue,ZodSymbol:ce,ZodUndefined:he,ZodNull:pe,ZodAny:fe,ZodUnknown:me,ZodNever:ye,ZodVoid:ge,ZodArray:_e,ZodObject:be,ZodUnion:ke,ZodDiscriminatedUnion:we,ZodIntersection:Ze,ZodTuple:Le,ZodRecord:Ce,ZodMap:Se,ZodSet:Ee,ZodFunction:Oe,ZodLazy:je,ZodLiteral:Ie,ZodEnum:Ne,ZodNativeEnum:Pe,ZodPromise:Me,ZodEffects:Re,ZodTransformer:Re,ZodOptional:$e,ZodNullable:Fe,ZodDefault:ze,ZodCatch:De,ZodNaN:Be,BRAND:Ve,ZodBranded:Ue,ZodPipeline:Ge,ZodReadonly:We,custom:Ke,Schema:R,ZodSchema:R,late:He,get ZodFirstPartyTypeKind(){return Ye},coerce:Ot,any:at,array:lt,bigint:Qe,boolean:et,date:tt,discriminatedUnion:pt,effect:Zt,enum:xt,function:vt,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ke((t=>t instanceof e),t),intersection:ft,lazy:bt,literal:kt,map:gt,nan:Je,nativeEnum:wt,never:ot,null:rt,nullable:Ct,number:qe,object:ut,oboolean:()=>et().optional(),onumber:()=>qe().optional(),optional:Lt,ostring:()=>Xe().optional(),pipeline:Et,preprocess:St,promise:Tt,record:yt,set:_t,strictObject:ct,string:Xe,symbol:it,transformer:Zt,tuple:mt,undefined:st,union:ht,unknown:nt,void:dt,NEVER:jt,ZodIssueCode:f,quotelessJson:e=>JSON.stringify(e,null,2).replace(/\"([^\"]+)\":/g,\"$1:\"),ZodError:m});const At=It.object({h:It.number(),tilesetUid:It.number(),w:It.number(),x:It.number(),y:It.number()}),Nt=It.tuple([It.number(),It.number()]),Pt=It.object({__identifier:It.string(),__tile:At.nullable(),__type:It.string(),__value:It.any(),defUid:It.number()}),Mt=It.object({a:It.number(),f:It.number(),px:Nt,src:Nt,t:It.number()}),Rt=It.object({__grid:Nt,__identifier:It.string(),__pivot:Nt,__smartColor:It.string(),__tags:It.array(It.string()),__tile:At.nullable(),__worldX:It.number().nullable(),__worldY:It.number().nullable(),defUid:It.number(),fieldInstances:It.array(Pt),height:It.number(),iid:It.string(),px:Nt,width:It.number()}),$t=It.object({__cHei:It.number(),__cWid:It.number(),__gridSize:It.number(),__identifier:It.string(),__opacity:It.number(),__pxTotalOffsetX:It.number(),__pxTotalOffsetY:It.number(),__tilesetDefUid:It.number().nullable(),__tilesetRelPath:It.string().nullable(),__type:It.union([It.literal(\"IntGrid\"),It.literal(\"Entities\"),It.literal(\"Tiles\"),It.literal(\"AutoLayer\")]),autoLayerTiles:It.array(Mt),entityInstances:It.array(Rt),gridTiles:It.array(Mt),iid:It.string(),intGridCsv:It.array(It.number()),layerDefUid:It.number(),levelId:It.number(),overrideTilesetUid:It.number().nullable(),pxOffsetX:It.number(),pxOffsetY:It.number(),visible:It.boolean()}),Ft=It.object({__bgColor:It.string().nullable(),bgColor:It.string().nullable(),__bgPos:It.object({cropRect:It.array(It.tuple([It.number(),It.number(),It.number(),It.number()])),scale:It.tuple([It.number(),It.number()]),topLeftPx:Nt}).nullable(),__neighbours:It.array(It.object({dir:It.union([It.literal(\"n\"),It.literal(\"s\"),It.literal(\"w\"),It.literal(\"e\"),It.literal(\"ne\"),It.literal(\"nw\"),It.literal(\"se\"),It.literal(\"sw\"),It.literal(\"o\"),It.literal(\"<\"),It.literal(\">\")]),levelIid:It.string()})),bgRelPath:It.string().nullable(),externalRelPath:It.string().nullable(),fieldInstances:It.array(Pt),identifier:It.string(),iid:It.string(),layerInstances:It.array($t).nullable(),pxHei:It.number(),pxWid:It.number(),uid:It.number(),worldDepth:It.number(),worldX:It.number(),worldY:It.number()}),zt=It.object({identifier:It.string(),iid:It.string(),levels:It.array(Ft),worldGridHeight:It.number(),worldGridWidth:It.number(),worldLayout:It.union([It.literal(\"Free\"),It.literal(\"GridVania\"),It.literal(\"LinearHorizontal\"),It.literal(\"LinearVertical\")])}),Dt=It.object({color:It.number(),id:It.string(),tileRect:At.nullable()}),Bt=It.object({externalRelPath:It.string().nullable(),iconTilesetUid:It.number().nullable(),identifier:It.string(),tags:It.array(It.string()),uid:It.number(),values:It.array(Dt)}),Vt=It.object({__cHei:It.number(),__cWid:It.number(),customData:It.array(It.object({data:It.string(),tileId:It.number()})),embedAtlas:It.string().nullable(),enumTags:It.optional(It.array(It.object({enumValueId:It.string(),tileIds:It.array(It.number())}))),identifier:It.string(),padding:It.number(),pxHei:It.number(),pxWid:It.number(),relPath:It.string().nullable(),spacing:It.number(),tags:It.array(It.string()),tagsSourceEnumUid:It.number().nullable(),tileGridSize:It.number(),uid:It.number()}),Ut=It.object({__type:It.union([It.literal(\"IntGrid\"),It.literal(\"Entities\"),It.literal(\"Tiles\"),It.literal(\"AutoLayer\")]),autoSourceLayerDefUid:It.number().nullable(),displayOpacity:It.number(),gridSize:It.number(),identifier:It.string(),intGridValues:It.array(It.object({color:It.string(),groupUid:It.number(),identifier:It.string().nullable(),tile:At.nullable(),value:It.number()})),intGridValuesGroups:It.array(It.object({color:It.string().nullable(),identifier:It.string().nullable(),uid:It.number()})),parallaxFactorX:It.number(),parallaxFactorY:It.number(),parallaxScaling:It.boolean(),pxOffsetX:It.number(),pxOffsetY:It.number(),tilesetDefUid:It.number().nullable(),uid:It.number()}),Gt=It.object({color:It.string(),height:It.number(),identifier:It.string(),nineSliceBorders:It.array(It.number()),pivotX:It.number(),pivotY:It.number(),tileRect:At.nullable(),tileRenderMode:It.union([It.literal(\"Cover\"),It.literal(\"FitInside\"),It.literal(\"Repeat\"),It.literal(\"Stretch\"),It.literal(\"FullSizeCropped\"),It.literal(\"FullSizeUncropped\"),It.literal(\"NineSlice\")]),tilesetId:It.number().nullable(),uiTileRect:At.nullable(),uid:It.number(),width:It.number()}),Wt=It.object({tilesets:It.array(Vt),enums:It.array(Bt),layers:It.array(Ut),entities:It.array(Gt)}),Kt=It.object({iid:It.string(),bgColor:It.string().nullable(),defs:Wt,externalLevels:It.boolean(),jsonVersion:It.string(),levels:It.array(Ft),toc:It.array(It.object({identifier:It.string(),instancesData:It.array(It.object({fields:It.any(),heiPx:It.number(),iids:It.string(),widPix:It.number(),worldX:It.number(),worldY:It.number()}))})),worldGridHeight:It.number().nullable(),worldGridWidth:It.number().nullable(),worldLayout:It.union([It.literal(\"Free\"),It.literal(\"GridVania\"),It.literal(\"LinearHorizontal\"),It.literal(\"LinearVertical\")]).nullable(),worlds:It.array(zt)}),Ht=/^[v^~<>=]*?(\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+))?(?:-([\\da-z\\-]+(?:\\.[\\da-z\\-]+)*))?(?:\\+[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?)?)?$/i,Yt=e=>{if(\"string\"!=typeof e)throw new TypeError(\"Invalid argument expected string\");const t=e.match(Ht);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},Xt=e=>\"*\"===e||\"x\"===e||\"X\"===e,qt=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},Jt=(e,t)=>{if(Xt(e)||Xt(t))return 0;const[i,s]=((e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t])(qt(e),qt(t));return i>s?1:i<s?-1:0},Qt=(e,t)=>{for(let i=0;i<Math.max(e.length,t.length);i++){const s=Jt(e[i]||\"0\",t[i]||\"0\");if(0!==s)return s}return 0},ei=(e,t,i)=>{si(i);const s=((e,t)=>{const i=Yt(e),s=Yt(t),r=i.pop(),a=s.pop(),n=Qt(i,s);return 0!==n?n:r&&a?Qt(r.split(\".\"),a.split(\".\")):r||a?r?-1:1:0})(e,t);return ti[i].includes(s)},ti={\">\":[1],\">=\":[0,1],\"=\":[0],\"<=\":[-1,0],\"<\":[-1],\"!=\":[-1,1]},ii=Object.keys(ti),si=e=>{if(\"string\"!=typeof e)throw new TypeError(\"Invalid operator type, expected string but got \"+typeof e);if(-1===ii.indexOf(e))throw new Error(`Invalid operator, expected one of ${ii.join(\"|\")}`)};class ri{constructor(e){this.type=e,this._loaded=!1,this.cache=new Map}getOrAdd(...e){let t=this.cache.get(e.join(\"+\"));return t||(t=new this.type(...e),this.cache.set(e.join(\"+\"),t),t)}values(){if(this._loaded)return Array.from(this.cache.values());throw new Error(\"Read through cache not yet loaded! No values to return!\")}async load(){const e=Array.from(this.cache.entries()),t=await Promise.allSettled(e.map((e=>e[1].load())));let i=0;for(let s=0;s<t.length;s++){const r=t[s];\"rejected\"===r.status&&(console.error(`Error loading resource at ${e[s][0]}, is your pathMap correct? or your LDtk map corrupted?`,r.reason),i++)}if(i)throw new Error(`Error loading ${i} resources`);this._loaded=!0}}class ai{constructor(e,t,i,r){var a,n;if(this.ldtkLayer=t,this.resource=i,this.order=r,this.entities=[],this.ldtkToEntity=new Map,this.entityToLdtk=new Map,this.worldPos=(0,s.vec)(e.ldtkLevel.worldX,e.ldtkLevel.worldY),this.offset=(0,s.vec)(t.__pxTotalOffsetX,t.__pxTotalOffsetY),t.entityInstances)for(let e of t.entityInstances){const t=i.projectMetadata.defs.entities.find((t=>t.identifier===e.__identifier));if(i.factories.has(e.__identifier)){const r=i.factories.get(e.__identifier);if(r){const i=r({type:e.__identifier,worldPos:(0,s.vec)(e.px[0],e.px[1]).add(this.worldPos.add(this.offset)),entity:e,definition:t,layer:this});i&&(this.entities.push(i),this.ldtkToEntity.set(e,i),this.entityToLdtk.set(i,e))}}else{const o=new s.Actor({name:e.__identifier,pos:(0,s.vec)(e.px[0],e.px[1]).add(this.worldPos.add(this.offset)),width:e.width,height:e.height,anchor:(0,s.vec)(null!==(a=null==t?void 0:t.pivotX)&&void 0!==a?a:0,null!==(n=null==t?void 0:t.pivotY)&&void 0!==n?n:0),z:r});if(e.__tile){const t=i.tilesets.get(e.__tile.tilesetUid);if(t){const i=Math.floor(e.__tile.x/e.__tile.w),s=Math.floor(e.__tile.y/e.__tile.h),r=t.spritesheet.getSprite(i,s);r&&o.graphics.use(r)}}this.entities.push(o),this.ldtkToEntity.set(e,o),this.entityToLdtk.set(o,e)}}}runFactories(){for(let e of this.ldtkLayer.entityInstances){const t=this.resource.factories.get(e.__identifier);if(!t)continue;const i=this.resource.projectMetadata.defs.entities.find((t=>t.identifier===e.__identifier)),r=t({type:e.__identifier,worldPos:(0,s.vec)(e.px[0],e.px[1]).add(this.worldPos.add(this.offset)),entity:e,definition:i,layer:this});if(r){const t=this.ldtkToEntity.get(e);if(t){const i=this.entities.indexOf(t);i>-1&&(this.entities.splice(i,1),this.ldtkToEntity.delete(e),this.entityToLdtk.delete(t))}this.entities.push(r),this.ldtkToEntity.set(e,r),this.entityToLdtk.set(r,e)}}}getEntitiesByIdentifier(e){const t=this.getLdtkEntitiesByIdentifier(e);let i=[];for(const e of t){const t=this.ldtkToEntity.get(e);t&&i.push(t)}return i}getEntitiesByField(e,t){const i=this.getLdtkEntitiesByField(e,t);let s=[];for(const e of i){const t=this.ldtkToEntity.get(e);t&&s.push(t)}return s}getLdtkEntitiesByIdentifier(e){return this.ldtkLayer.entityInstances.filter((t=>t.__identifier.toLocaleLowerCase()===e.toLowerCase()))}getLdtkEntitiesByField(e,t){return this.ldtkLayer.entityInstances.filter((i=>{if(void 0!==t){let s=t;\"string\"==typeof t&&(s=t.toLocaleLowerCase());const r=i.fieldInstances.find((t=>t.__identifier.toLocaleLowerCase()===e.toLocaleLowerCase()));return!!r&&r.__value===s}return!!i.fieldInstances.find((t=>t.__identifier.toLocaleLowerCase()===e.toLocaleLowerCase()))}))}}class ni{constructor(e,t,i,r){var a,n,o,d;if(this.order=r,this.worldPos=(0,s.vec)(e.ldtkLevel.worldX,e.ldtkLevel.worldY),this.offset=(0,s.vec)(t.__pxTotalOffsetX,t.__pxTotalOffsetY),this.ldtkLayer=t,t.intGridCsv.length||t.autoLayerTiles.length){const e=t.__cHei,l=t.__cWid;this.tilemap=new s.TileMap({name:t.__identifier,pos:this.worldPos.add(this.offset),tileWidth:t.__gridSize,tileHeight:t.__gridSize,rows:e,columns:l}),this.tilemap.z=r;this.tilemap.get(s.GraphicsComponent).isVisible=t.visible;const u=i.projectMetadata.defs.layers.find((e=>t.__identifier===e.identifier));if(u){const e=u.intGridValues.find((e=>{var t;return\"solid\"===(null===(t=null==e?void 0:e.identifier)||void 0===t?void 0:t.toLocaleLowerCase())}));for(let i=0;i<t.intGridCsv.length;i++){const s=i%l,r=Math.floor(i/l),a=this.tilemap.getTile(s,r);e&&t.intGridCsv[i]===e.value&&(a.solid=!0),e||1!==t.intGridCsv[i]||(a.solid=!0)}if(t.__tilesetDefUid){this.tileset=i.tilesets.get(t.__tilesetDefUid);for(let e=0;e<t.autoLayerTiles.length;e++){const i=t.autoLayerTiles[e],s=Math.floor(i.px[0]/t.__gridSize),r=Math.floor(i.px[1]/t.__gridSize),l=this.tilemap.getTile(s,r);if(l&&this.tileset){const e=Math.floor((i.src[0]-(null!==(a=this.tileset.ldtkTileset.padding)&&void 0!==a?a:0))/(this.tileset.ldtkTileset.tileGridSize+(null!==(n=this.tileset.ldtkTileset.spacing)&&void 0!==n?n:0))),t=Math.floor((i.src[1]-(null!==(o=this.tileset.ldtkTileset.padding)&&void 0!==o?o:0))/(this.tileset.ldtkTileset.tileGridSize+(null!==(d=this.tileset.ldtkTileset.spacing)&&void 0!==d?d:0))),s=!!(1&i.f),r=!!(2&i.f);let u=this.tileset.spritesheet.getSprite(e,t);(s||r)&&(u=u.clone(),u.flipHorizontal=s,u.flipVertical=r),u?l.addGraphic(u):console.error(\"Could not find sprite in LDtk spritesheet at\",e,t)}}}}}}}class oi{constructor(e,t){var i,a,n,o;if(this.ldtkLevel=e,this.resource=t,this.layers=[],e.__bgColor&&(this.backgroundColor=s.Color.fromHex(e.__bgColor)),e.layerInstances){let s=t.startZIndex,d=e.layerInstances.slice().reverse();for(let e of d)0!==(null===(i=e.entityInstances)||void 0===i?void 0:i.length)&&this.layers.push(new ai(this,e,t,s)),0!==(null===(a=e.gridTiles)||void 0===a?void 0:a.length)&&this.layers.push(new r(this,e,t,s)),0===(null===(n=e.intGridCsv)||void 0===n?void 0:n.length)&&0===(null===(o=e.autoLayerTiles)||void 0===o?void 0:o.length)||this.layers.push(new ni(this,e,t,s)),s++}}}class di{constructor(e,t,i){this.path=e,this.resource=t,this.fileLoader=l,this.strict=!0,this.headless=!1;const{headless:r,strict:a,fileLoader:n,imageLoader:o,pathMap:d}={...i};this.fileLoader=null!=n?n:this.fileLoader,this.strict=null!=a?a:this.strict,this.headless=null!=r?r:this.headless,this.imageLoader=null!=o?o:new ri(s.ImageSource),this.pathMap=null!=d?d:this.pathMap}async load(){const e=await this.fileLoader(this.path,\"json\");let t;if(this.strict)try{t=Ft.parse(e)}catch(e){throw console.error(`Could not parse LDtk level data at ${this.path} are you sure a level is there and not corrupt?`),e}else t=e;return this.data=new oi(t,this.resource)}isLoaded(){return!!this.data}}class li{constructor(e){var t,i,r,a;const{image:n,ldtkTileset:o}=e;this.image=n,this.ldtkTileset=o,this.spritesheet=s.SpriteSheet.fromImageSource({image:n,grid:{rows:o.pxHei/o.tileGridSize,columns:o.pxWid/o.tileGridSize,spriteHeight:o.tileGridSize,spriteWidth:o.tileGridSize},spacing:{margin:{x:null!==(t=o.spacing)&&void 0!==t?t:0,y:null!==(i=o.spacing)&&void 0!==i?i:0},originOffset:{x:null!==(r=o.padding)&&void 0!==r?r:0,y:null!==(a=o.padding)&&void 0!==a?a:0}}})}}class ui{constructor(e,t){this.path=e,this.tilesets=new Map,this.levels=new Map,this.levelsByName=new Map,this.factories=new Map,this.fileLoader=l,this._imageLoader=new ri(s.ImageSource),this._levelLoader=new ri(di),this.startZIndex=0,this.textQuality=4,this.useExcaliburWiring=!0,this.useMapBackgroundColor=!1,this.useTilemapCameraStrategy=!1,this.headless=!1,this.strict=!0;const{useExcaliburWiring:i,useTilemapCameraStrategy:r,entityIdentifierFactories:a,pathMap:n,useMapBackgroundColor:o,fileLoader:d,strict:u,headless:c,startZIndex:h}={...t};this.strict=null!=u?u:this.strict,this.headless=null!=c?c:this.headless,this.useExcaliburWiring=null!=i?i:this.useExcaliburWiring,this.useTilemapCameraStrategy=null!=r?r:this.useTilemapCameraStrategy,this.useMapBackgroundColor=null!=o?o:this.useMapBackgroundColor,this.startZIndex=null!=h?h:this.startZIndex,this.fileLoader=null!=d?d:this.fileLoader,this.pathMap=n;for(const e in a)this.registerEntityIdentifierFactory(e,a[e])}async load(){var e;const t=await this.fileLoader(this.path,\"json\");if(this.strict)try{this.projectMetadata=Kt.parse(t)}catch(e){throw console.error(`Could not parse LDtk map from location ${this.path}.\\nExcalibur only supports the latest version of LDtk formats as of the plugin's release.`),console.error(\"Is your map file corrupted or being interpreted as the wrong type?\"),e}else this.projectMetadata=t;ei(ui.supportedLdtkVersion,null!==(e=this.projectMetadata.jsonVersion)&&void 0!==e?e:\"0.0.0\",\">\")&&console.warn(`The excalibur ldtk plugin officially supports ${ui.supportedLdtkVersion}+, the current map has LDtk version ${this.projectMetadata.jsonVersion}`);for(let e of this.projectMetadata.defs.tilesets)if(e.relPath){const t=d(this.path,e.relPath,this.pathMap),i=this._imageLoader.getOrAdd(t),s=new li({image:i,ldtkTileset:e});this.tilesets.set(e.uid,s)}else\"Internal_Icons\"!==e.identifier&&console.warn(`No tileset image provided for ${e.identifier}`);for(let e of this.projectMetadata.levels)if(e.externalRelPath){const t=d(this.path,e.externalRelPath,this.pathMap);this._levelLoader.getOrAdd(t,this,{headless:this.headless,strict:this.strict,fileLoader:this.fileLoader,imageLoader:this._imageLoader,pathMap:this.pathMap})}else{const t=new oi(e,this);this.levels.set(e.uid,t),this.levelsByName.set(e.identifier.toLowerCase(),t)}return await Promise.all([this._imageLoader.load(),this._levelLoader.load()]),this._levelLoader.values().forEach((e=>{this.levels.set(e.data.ldtkLevel.uid,e.data),this.levelsByName.set(e.data.ldtkLevel.identifier.toLowerCase(),e.data)})),this.data=this.projectMetadata}isLoaded(){return!!this.data}registerEntityIdentifierFactory(e,t){this.factories.set(e,t)}registerEntityIdentifierFactories(e){for(const t in e)this.registerEntityIdentifierFactory(t,e[t])}getLevel(e){return this.levelsByName.get(e.toLowerCase())}getEntityLayers(e){let t=[];if(e){const i=this.getLevel(e);if(i)for(let e of i.layers)e instanceof ai&&t.push(e)}else for(const e of this.levels.values())for(let i of e.layers)i instanceof ai&&t.push(i);return t}getTileLayers(e){let t=[];if(e){const i=this.getLevel(e);if(i)for(let e of i.layers)e instanceof r&&t.push(e)}else for(const e of this.levels.values())for(let i of e.layers)i instanceof r&&t.push(i);return t}getIntGridLayers(e){let t=[];if(e){const i=this.getLevel(e);if(i)for(let e of i.layers)e instanceof ni&&t.push(e)}else for(const e of this.levels.values())for(let i of e.layers)i instanceof ni&&t.push(i);return t}getLdtkEntitiesByIdentifier(e,t){let i=[];const s=null!=t?t:Array.from(this.levels.values()).map((e=>e.ldtkLevel.identifier));for(const t of s){const s=this.getEntityLayers(t);for(let t of s)i=i.concat(t.getLdtkEntitiesByIdentifier(e))}return i}getLdtkEntitiesByField(e,t,i){let s=[];const r=null!=i?i:Array.from(this.levels.values()).map((e=>e.ldtkLevel.identifier));for(const i of r){const r=this.getEntityLayers(i);for(let i of r)s=s.concat(i.getLdtkEntitiesByField(e,t))}return s}getEntitiesByIdentifier(e,t){let i=[];const s=null!=t?t:Array.from(this.levels.values()).map((e=>e.ldtkLevel.identifier));for(const t of s){const s=this.getEntityLayers(t);for(let t of s)i=i.concat(t.getEntitiesByIdentifier(e))}return i}getEntitiesByField(e,t,i){let s=[];const r=null!=i?i:Array.from(this.levels.values()).map((e=>e.ldtkLevel.identifier));for(const i of r){const r=this.getEntityLayers(i);for(let i of r)s=s.concat(i.getEntitiesByField(e,t))}return s}getLevelBounds(e){e=null!=e?e:Array.from(this.levelsByName.keys());let t=null;for(const i of this.levels.values()){if(!e.includes(i.ldtkLevel.identifier))continue;const r=this.getTileLayers(i.ldtkLevel.identifier)[0];if(r){const e=s.BoundingBox.fromDimension(r.tilemap.tileWidth*r.tilemap.columns,r.tilemap.tileHeight*r.tilemap.rows,s.Vector.Zero,r.tilemap.pos);t=t?t.combine(e):e}}return null!=t?t:new s.BoundingBox}addToScene(e,t){var i,a;const{pos:n,useLevelOffsets:o}={pos:(0,s.vec)(0,0),useLevelOffsets:!0,...t};for(let[a,d]of this.levels.entries())if(!(null===(i=null==t?void 0:t.levelFilter)||void 0===i?void 0:i.length)||t.levelFilter.includes(d.ldtkLevel.identifier))for(let t of d.layers)if(t instanceof r||t instanceof ni)t.tilemap.pos=t.tilemap.pos.add(n),o||(t.tilemap.pos=t.tilemap.pos.sub(t.worldPos)),e.add(t.tilemap);else{t.runFactories();for(let i of t.entities){const r=i.get(s.TransformComponent);r&&(r.pos=r.pos.add(n),o||(r.pos=r.pos.sub(t.worldPos))),e.add(i)}}if(this.useExcaliburWiring){const t=this.getLdtkEntitiesByField(\"camera\",!0)[0];if(t){e.camera.pos=(0,s.vec)(t.px[0],t.px[0]);const i=t.fieldInstances.find((e=>\"zoom\"===e.__identifier.toLocaleLowerCase()));i&&(e.camera.zoom=+i.__value)}}if(this.useTilemapCameraStrategy){let i=this.getLevelBounds(null==t?void 0:t.levelFilter);e.camera.strategy.limitCameraBounds(i)}if(this.useMapBackgroundColor)for(let[i,s]of this.levels.entries())if(!(null===(a=null==t?void 0:t.levelFilter)||void 0===a?void 0:a.length)||t.levelFilter.includes(s.ldtkLevel.identifier)){e.backgroundColor=s.backgroundColor;break}}}ui.supportedLdtkVersion=\"1.5.3\";var ci=i.dd,hi=i.UZ,pi=i.NN,fi=i.e1,mi=i.a8,yi=i.u6,gi=i.oK,_i=i.U_,vi=i.sn,bi=i.GY,ki=i.$t,xi=i.RI,wi=i._k,Ti=i.eZ,Zi=i.pf,Li=i.N5,Ci=i.qD,Si=i.hu,Ei=i.Uk;export{ci as EntityLayer,hi as FetchLoader,pi as IntGridLayer,fi as LdtkEntityDefinition,mi as LdtkEntityInstance,yi as LdtkLayerDefinition,gi as LdtkLayerInstance,_i as LdtkLevel,vi as LdtkProjectMetadata,bi as LdtkResource,ki as Level,xi as LevelResource,wi as LoaderCache,Ti as TileLayer,Zi as Tileset,Li as filenameFromPath,Ci as mapPath,Si as pathInMap,Ei as pathRelativeToBase};\n//# sourceMappingURL=excalibur-ldtk.min.js.map","/**\n * This code is an implementation of Alea algorithm; (C) 2010 Johannes Baagøe.\n * Alea is licensed according to the http://en.wikipedia.org/wiki/MIT_License.\n */\nconst FRAC = 2.3283064365386963e-10; /* 2^-32 */\nclass RNG {\n    constructor() {\n        this._seed = 0;\n        this._s0 = 0;\n        this._s1 = 0;\n        this._s2 = 0;\n        this._c = 0;\n    }\n    getSeed() { return this._seed; }\n    /**\n     * Seed the number generator\n     */\n    setSeed(seed) {\n        seed = (seed < 1 ? 1 / seed : seed);\n        this._seed = seed;\n        this._s0 = (seed >>> 0) * FRAC;\n        seed = (seed * 69069 + 1) >>> 0;\n        this._s1 = seed * FRAC;\n        seed = (seed * 69069 + 1) >>> 0;\n        this._s2 = seed * FRAC;\n        this._c = 1;\n        return this;\n    }\n    /**\n     * @returns Pseudorandom value [0,1), uniformly distributed\n     */\n    getUniform() {\n        let t = 2091639 * this._s0 + this._c * FRAC;\n        this._s0 = this._s1;\n        this._s1 = this._s2;\n        this._c = t | 0;\n        this._s2 = t - this._c;\n        return this._s2;\n    }\n    /**\n     * @param lowerBound The lower end of the range to return a value from, inclusive\n     * @param upperBound The upper end of the range to return a value from, inclusive\n     * @returns Pseudorandom value [lowerBound, upperBound], using ROT.RNG.getUniform() to distribute the value\n     */\n    getUniformInt(lowerBound, upperBound) {\n        let max = Math.max(lowerBound, upperBound);\n        let min = Math.min(lowerBound, upperBound);\n        return Math.floor(this.getUniform() * (max - min + 1)) + min;\n    }\n    /**\n     * @param mean Mean value\n     * @param stddev Standard deviation. ~95% of the absolute values will be lower than 2*stddev.\n     * @returns A normally distributed pseudorandom value\n     */\n    getNormal(mean = 0, stddev = 1) {\n        let u, v, r;\n        do {\n            u = 2 * this.getUniform() - 1;\n            v = 2 * this.getUniform() - 1;\n            r = u * u + v * v;\n        } while (r > 1 || r == 0);\n        let gauss = u * Math.sqrt(-2 * Math.log(r) / r);\n        return mean + gauss * stddev;\n    }\n    /**\n     * @returns Pseudorandom value [1,100] inclusive, uniformly distributed\n     */\n    getPercentage() {\n        return 1 + Math.floor(this.getUniform() * 100);\n    }\n    /**\n     * @returns Randomly picked item, null when length=0\n     */\n    getItem(array) {\n        if (!array.length) {\n            return null;\n        }\n        return array[Math.floor(this.getUniform() * array.length)];\n    }\n    /**\n     * @returns New array with randomized items\n     */\n    shuffle(array) {\n        let result = [];\n        let clone = array.slice();\n        while (clone.length) {\n            let index = clone.indexOf(this.getItem(clone));\n            result.push(clone.splice(index, 1)[0]);\n        }\n        return result;\n    }\n    /**\n     * @param data key=whatever, value=weight (relative probability)\n     * @returns whatever\n     */\n    getWeightedValue(data) {\n        let total = 0;\n        for (let id in data) {\n            total += data[id];\n        }\n        let random = this.getUniform() * total;\n        let id, part = 0;\n        for (id in data) {\n            part += data[id];\n            if (random < part) {\n                return id;\n            }\n        }\n        // If by some floating-point annoyance we have\n        // random >= total, just return the last id.\n        return id;\n    }\n    /**\n     * Get RNG state. Useful for storing the state and re-setting it via setState.\n     * @returns Internal state\n     */\n    getState() { return [this._s0, this._s1, this._s2, this._c]; }\n    /**\n     * Set a previously retrieved state.\n     */\n    setState(state) {\n        this._s0 = state[0];\n        this._s1 = state[1];\n        this._s2 = state[2];\n        this._c = state[3];\n        return this;\n    }\n    /**\n     * Returns a cloned RNG\n     */\n    clone() {\n        let clone = new RNG();\n        return clone.setState(this.getState());\n    }\n}\nexport default new RNG().setSeed(Date.now());\n","/**\n * @class Abstract display backend module\n * @private\n */\nexport default class Backend {\n    getContainer() { return null; }\n    setOptions(options) { this._options = options; }\n}\n","import Backend from \"./backend.js\";\nexport default class Canvas extends Backend {\n    constructor() {\n        super();\n        this._ctx = document.createElement(\"canvas\").getContext(\"2d\");\n    }\n    schedule(cb) { requestAnimationFrame(cb); }\n    getContainer() { return this._ctx.canvas; }\n    setOptions(opts) {\n        super.setOptions(opts);\n        const style = (opts.fontStyle ? `${opts.fontStyle} ` : ``);\n        const font = `${style} ${opts.fontSize}px ${opts.fontFamily}`;\n        this._ctx.font = font;\n        this._updateSize();\n        this._ctx.font = font;\n        this._ctx.textAlign = \"center\";\n        this._ctx.textBaseline = \"middle\";\n    }\n    clear() {\n        const oldComposite = this._ctx.globalCompositeOperation;\n        this._ctx.globalCompositeOperation = \"copy\";\n        this._ctx.fillStyle = this._options.bg;\n        this._ctx.fillRect(0, 0, this._ctx.canvas.width, this._ctx.canvas.height);\n        this._ctx.globalCompositeOperation = oldComposite;\n    }\n    eventToPosition(x, y) {\n        let canvas = this._ctx.canvas;\n        let rect = canvas.getBoundingClientRect();\n        x -= rect.left;\n        y -= rect.top;\n        x *= canvas.width / rect.width;\n        y *= canvas.height / rect.height;\n        if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) {\n            return [-1, -1];\n        }\n        return this._normalizedEventToPosition(x, y);\n    }\n}\n","import Canvas from \"./canvas.js\";\n/**\n * @class Rectangular backend\n * @private\n */\nexport default class Rect extends Canvas {\n    constructor() {\n        super();\n        this._spacingX = 0;\n        this._spacingY = 0;\n        this._canvasCache = {};\n    }\n    setOptions(options) {\n        super.setOptions(options);\n        this._canvasCache = {};\n    }\n    draw(data, clearBefore) {\n        if (Rect.cache) {\n            this._drawWithCache(data);\n        }\n        else {\n            this._drawNoCache(data, clearBefore);\n        }\n    }\n    _drawWithCache(data) {\n        let [x, y, ch, fg, bg] = data;\n        let hash = \"\" + ch + fg + bg;\n        let canvas;\n        if (hash in this._canvasCache) {\n            canvas = this._canvasCache[hash];\n        }\n        else {\n            let b = this._options.border;\n            canvas = document.createElement(\"canvas\");\n            let ctx = canvas.getContext(\"2d\");\n            canvas.width = this._spacingX;\n            canvas.height = this._spacingY;\n            ctx.fillStyle = bg;\n            ctx.fillRect(b, b, canvas.width - b, canvas.height - b);\n            if (ch) {\n                ctx.fillStyle = fg;\n                ctx.font = this._ctx.font;\n                ctx.textAlign = \"center\";\n                ctx.textBaseline = \"middle\";\n                let chars = [].concat(ch);\n                for (let i = 0; i < chars.length; i++) {\n                    ctx.fillText(chars[i], this._spacingX / 2, Math.ceil(this._spacingY / 2));\n                }\n            }\n            this._canvasCache[hash] = canvas;\n        }\n        this._ctx.drawImage(canvas, x * this._spacingX, y * this._spacingY);\n    }\n    _drawNoCache(data, clearBefore) {\n        let [x, y, ch, fg, bg] = data;\n        if (clearBefore) {\n            let b = this._options.border;\n            this._ctx.fillStyle = bg;\n            this._ctx.fillRect(x * this._spacingX + b, y * this._spacingY + b, this._spacingX - b, this._spacingY - b);\n        }\n        if (!ch) {\n            return;\n        }\n        this._ctx.fillStyle = fg;\n        let chars = [].concat(ch);\n        for (let i = 0; i < chars.length; i++) {\n            this._ctx.fillText(chars[i], (x + 0.5) * this._spacingX, Math.ceil((y + 0.5) * this._spacingY));\n        }\n    }\n    computeSize(availWidth, availHeight) {\n        let width = Math.floor(availWidth / this._spacingX);\n        let height = Math.floor(availHeight / this._spacingY);\n        return [width, height];\n    }\n    computeFontSize(availWidth, availHeight) {\n        let boxWidth = Math.floor(availWidth / this._options.width);\n        let boxHeight = Math.floor(availHeight / this._options.height);\n        /* compute char ratio */\n        let oldFont = this._ctx.font;\n        this._ctx.font = \"100px \" + this._options.fontFamily;\n        let width = Math.ceil(this._ctx.measureText(\"W\").width);\n        this._ctx.font = oldFont;\n        let ratio = width / 100;\n        let widthFraction = ratio * boxHeight / boxWidth;\n        if (widthFraction > 1) { /* too wide with current aspect ratio */\n            boxHeight = Math.floor(boxHeight / widthFraction);\n        }\n        return Math.floor(boxHeight / this._options.spacing);\n    }\n    _normalizedEventToPosition(x, y) {\n        return [Math.floor(x / this._spacingX), Math.floor(y / this._spacingY)];\n    }\n    _updateSize() {\n        const opts = this._options;\n        const charWidth = Math.ceil(this._ctx.measureText(\"W\").width);\n        this._spacingX = Math.ceil(opts.spacing * charWidth);\n        this._spacingY = Math.ceil(opts.spacing * opts.fontSize);\n        if (opts.forceSquareRatio) {\n            this._spacingX = this._spacingY = Math.max(this._spacingX, this._spacingY);\n        }\n        this._ctx.canvas.width = opts.width * this._spacingX;\n        this._ctx.canvas.height = opts.height * this._spacingY;\n    }\n}\nRect.cache = false;\n","/** Default with for display and map generators */\nexport let DEFAULT_WIDTH = 80;\n/** Default height for display and map generators */\nexport let DEFAULT_HEIGHT = 25;\nexport const DIRS = {\n    4: [[0, -1], [1, 0], [0, 1], [-1, 0]],\n    8: [[0, -1], [1, -1], [1, 0], [1, 1], [0, 1], [-1, 1], [-1, 0], [-1, -1]],\n    6: [[-1, -1], [1, -1], [2, 0], [1, 1], [-1, 1], [-2, 0]]\n};\nexport const KEYS = {\n    /** Cancel key. */\n    VK_CANCEL: 3,\n    /** Help key. */\n    VK_HELP: 6,\n    /** Backspace key. */\n    VK_BACK_SPACE: 8,\n    /** Tab key. */\n    VK_TAB: 9,\n    /** 5 key on Numpad when NumLock is unlocked. Or on Mac, clear key which is positioned at NumLock key. */\n    VK_CLEAR: 12,\n    /** Return/enter key on the main keyboard. */\n    VK_RETURN: 13,\n    /** Reserved, but not used. */\n    VK_ENTER: 14,\n    /** Shift key. */\n    VK_SHIFT: 16,\n    /** Control key. */\n    VK_CONTROL: 17,\n    /** Alt (Option on Mac) key. */\n    VK_ALT: 18,\n    /** Pause key. */\n    VK_PAUSE: 19,\n    /** Caps lock. */\n    VK_CAPS_LOCK: 20,\n    /** Escape key. */\n    VK_ESCAPE: 27,\n    /** Space bar. */\n    VK_SPACE: 32,\n    /** Page Up key. */\n    VK_PAGE_UP: 33,\n    /** Page Down key. */\n    VK_PAGE_DOWN: 34,\n    /** End key. */\n    VK_END: 35,\n    /** Home key. */\n    VK_HOME: 36,\n    /** Left arrow. */\n    VK_LEFT: 37,\n    /** Up arrow. */\n    VK_UP: 38,\n    /** Right arrow. */\n    VK_RIGHT: 39,\n    /** Down arrow. */\n    VK_DOWN: 40,\n    /** Print Screen key. */\n    VK_PRINTSCREEN: 44,\n    /** Ins(ert) key. */\n    VK_INSERT: 45,\n    /** Del(ete) key. */\n    VK_DELETE: 46,\n    /***/\n    VK_0: 48,\n    /***/\n    VK_1: 49,\n    /***/\n    VK_2: 50,\n    /***/\n    VK_3: 51,\n    /***/\n    VK_4: 52,\n    /***/\n    VK_5: 53,\n    /***/\n    VK_6: 54,\n    /***/\n    VK_7: 55,\n    /***/\n    VK_8: 56,\n    /***/\n    VK_9: 57,\n    /** Colon (:) key. Requires Gecko 15.0 */\n    VK_COLON: 58,\n    /** Semicolon (;) key. */\n    VK_SEMICOLON: 59,\n    /** Less-than (<) key. Requires Gecko 15.0 */\n    VK_LESS_THAN: 60,\n    /** Equals (=) key. */\n    VK_EQUALS: 61,\n    /** Greater-than (>) key. Requires Gecko 15.0 */\n    VK_GREATER_THAN: 62,\n    /** Question mark (?) key. Requires Gecko 15.0 */\n    VK_QUESTION_MARK: 63,\n    /** Atmark (@) key. Requires Gecko 15.0 */\n    VK_AT: 64,\n    /***/\n    VK_A: 65,\n    /***/\n    VK_B: 66,\n    /***/\n    VK_C: 67,\n    /***/\n    VK_D: 68,\n    /***/\n    VK_E: 69,\n    /***/\n    VK_F: 70,\n    /***/\n    VK_G: 71,\n    /***/\n    VK_H: 72,\n    /***/\n    VK_I: 73,\n    /***/\n    VK_J: 74,\n    /***/\n    VK_K: 75,\n    /***/\n    VK_L: 76,\n    /***/\n    VK_M: 77,\n    /***/\n    VK_N: 78,\n    /***/\n    VK_O: 79,\n    /***/\n    VK_P: 80,\n    /***/\n    VK_Q: 81,\n    /***/\n    VK_R: 82,\n    /***/\n    VK_S: 83,\n    /***/\n    VK_T: 84,\n    /***/\n    VK_U: 85,\n    /***/\n    VK_V: 86,\n    /***/\n    VK_W: 87,\n    /***/\n    VK_X: 88,\n    /***/\n    VK_Y: 89,\n    /***/\n    VK_Z: 90,\n    /***/\n    VK_CONTEXT_MENU: 93,\n    /** 0 on the numeric keypad. */\n    VK_NUMPAD0: 96,\n    /** 1 on the numeric keypad. */\n    VK_NUMPAD1: 97,\n    /** 2 on the numeric keypad. */\n    VK_NUMPAD2: 98,\n    /** 3 on the numeric keypad. */\n    VK_NUMPAD3: 99,\n    /** 4 on the numeric keypad. */\n    VK_NUMPAD4: 100,\n    /** 5 on the numeric keypad. */\n    VK_NUMPAD5: 101,\n    /** 6 on the numeric keypad. */\n    VK_NUMPAD6: 102,\n    /** 7 on the numeric keypad. */\n    VK_NUMPAD7: 103,\n    /** 8 on the numeric keypad. */\n    VK_NUMPAD8: 104,\n    /** 9 on the numeric keypad. */\n    VK_NUMPAD9: 105,\n    /** * on the numeric keypad. */\n    VK_MULTIPLY: 106,\n    /** + on the numeric keypad. */\n    VK_ADD: 107,\n    /***/\n    VK_SEPARATOR: 108,\n    /** - on the numeric keypad. */\n    VK_SUBTRACT: 109,\n    /** Decimal point on the numeric keypad. */\n    VK_DECIMAL: 110,\n    /** / on the numeric keypad. */\n    VK_DIVIDE: 111,\n    /** F1 key. */\n    VK_F1: 112,\n    /** F2 key. */\n    VK_F2: 113,\n    /** F3 key. */\n    VK_F3: 114,\n    /** F4 key. */\n    VK_F4: 115,\n    /** F5 key. */\n    VK_F5: 116,\n    /** F6 key. */\n    VK_F6: 117,\n    /** F7 key. */\n    VK_F7: 118,\n    /** F8 key. */\n    VK_F8: 119,\n    /** F9 key. */\n    VK_F9: 120,\n    /** F10 key. */\n    VK_F10: 121,\n    /** F11 key. */\n    VK_F11: 122,\n    /** F12 key. */\n    VK_F12: 123,\n    /** F13 key. */\n    VK_F13: 124,\n    /** F14 key. */\n    VK_F14: 125,\n    /** F15 key. */\n    VK_F15: 126,\n    /** F16 key. */\n    VK_F16: 127,\n    /** F17 key. */\n    VK_F17: 128,\n    /** F18 key. */\n    VK_F18: 129,\n    /** F19 key. */\n    VK_F19: 130,\n    /** F20 key. */\n    VK_F20: 131,\n    /** F21 key. */\n    VK_F21: 132,\n    /** F22 key. */\n    VK_F22: 133,\n    /** F23 key. */\n    VK_F23: 134,\n    /** F24 key. */\n    VK_F24: 135,\n    /** Num Lock key. */\n    VK_NUM_LOCK: 144,\n    /** Scroll Lock key. */\n    VK_SCROLL_LOCK: 145,\n    /** Circumflex (^) key. Requires Gecko 15.0 */\n    VK_CIRCUMFLEX: 160,\n    /** Exclamation (!) key. Requires Gecko 15.0 */\n    VK_EXCLAMATION: 161,\n    /** Double quote () key. Requires Gecko 15.0 */\n    VK_DOUBLE_QUOTE: 162,\n    /** Hash (#) key. Requires Gecko 15.0 */\n    VK_HASH: 163,\n    /** Dollar sign ($) key. Requires Gecko 15.0 */\n    VK_DOLLAR: 164,\n    /** Percent (%) key. Requires Gecko 15.0 */\n    VK_PERCENT: 165,\n    /** Ampersand (&) key. Requires Gecko 15.0 */\n    VK_AMPERSAND: 166,\n    /** Underscore (_) key. Requires Gecko 15.0 */\n    VK_UNDERSCORE: 167,\n    /** Open parenthesis (() key. Requires Gecko 15.0 */\n    VK_OPEN_PAREN: 168,\n    /** Close parenthesis ()) key. Requires Gecko 15.0 */\n    VK_CLOSE_PAREN: 169,\n    /* Asterisk (*) key. Requires Gecko 15.0 */\n    VK_ASTERISK: 170,\n    /** Plus (+) key. Requires Gecko 15.0 */\n    VK_PLUS: 171,\n    /** Pipe (|) key. Requires Gecko 15.0 */\n    VK_PIPE: 172,\n    /** Hyphen-US/docs/Minus (-) key. Requires Gecko 15.0 */\n    VK_HYPHEN_MINUS: 173,\n    /** Open curly bracket ({) key. Requires Gecko 15.0 */\n    VK_OPEN_CURLY_BRACKET: 174,\n    /** Close curly bracket (}) key. Requires Gecko 15.0 */\n    VK_CLOSE_CURLY_BRACKET: 175,\n    /** Tilde (~) key. Requires Gecko 15.0 */\n    VK_TILDE: 176,\n    /** Comma (,) key. */\n    VK_COMMA: 188,\n    /** Period (.) key. */\n    VK_PERIOD: 190,\n    /** Slash (/) key. */\n    VK_SLASH: 191,\n    /** Back tick (`) key. */\n    VK_BACK_QUOTE: 192,\n    /** Open square bracket ([) key. */\n    VK_OPEN_BRACKET: 219,\n    /** Back slash (\\) key. */\n    VK_BACK_SLASH: 220,\n    /** Close square bracket (]) key. */\n    VK_CLOSE_BRACKET: 221,\n    /** Quote (''') key. */\n    VK_QUOTE: 222,\n    /** Meta key on Linux, Command key on Mac. */\n    VK_META: 224,\n    /** AltGr key on Linux. Requires Gecko 15.0 */\n    VK_ALTGR: 225,\n    /** Windows logo key on Windows. Or Super or Hyper key on Linux. Requires Gecko 15.0 */\n    VK_WIN: 91,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_KANA: 21,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_HANGUL: 21,\n    /** 英数 key on Japanese Mac keyboard. Requires Gecko 15.0 */\n    VK_EISU: 22,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_JUNJA: 23,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_FINAL: 24,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_HANJA: 25,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_KANJI: 25,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_CONVERT: 28,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_NONCONVERT: 29,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_ACCEPT: 30,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_MODECHANGE: 31,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_SELECT: 41,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_PRINT: 42,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_EXECUTE: 43,\n    /** Linux support for this keycode was added in Gecko 4.0.\t */\n    VK_SLEEP: 95\n};\n","import { DEFAULT_WIDTH, DEFAULT_HEIGHT } from \"../constants.js\";\n;\nexport default class Map {\n    /**\n     * @class Base map generator\n     * @param {int} [width=ROT.DEFAULT_WIDTH]\n     * @param {int} [height=ROT.DEFAULT_HEIGHT]\n     */\n    constructor(width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT) {\n        this._width = width;\n        this._height = height;\n    }\n    ;\n    _fillMap(value) {\n        let map = [];\n        for (let i = 0; i < this._width; i++) {\n            map.push([]);\n            for (let j = 0; j < this._height; j++) {\n                map[i].push(value);\n            }\n        }\n        return map;\n    }\n}\n","import Map from \"./map.js\";\n/**\n * @class Simple empty rectangular room\n * @augments ROT.Map\n */\nexport default class Arena extends Map {\n    create(callback) {\n        let w = this._width - 1;\n        let h = this._height - 1;\n        for (let i = 0; i <= w; i++) {\n            for (let j = 0; j <= h; j++) {\n                let empty = (i && j && i < w && j < h);\n                callback(i, j, empty ? 0 : 1);\n            }\n        }\n        return this;\n    }\n}\n","import Map from \"./map.js\";\n/**\n * @class Dungeon map: has rooms and corridors\n * @augments ROT.Map\n */\nexport default class Dungeon extends Map {\n    constructor(width, height) {\n        super(width, height);\n        this._rooms = [];\n        this._corridors = [];\n    }\n    /**\n     * Get all generated rooms\n     * @returns {ROT.Map.Feature.Room[]}\n     */\n    getRooms() { return this._rooms; }\n    /**\n     * Get all generated corridors\n     * @returns {ROT.Map.Feature.Corridor[]}\n     */\n    getCorridors() { return this._corridors; }\n}\n","import RNG from \"../rng.js\";\n;\n/**\n * @class Dungeon feature; has own .create() method\n */\nclass Feature {\n}\n/**\n * @class Room\n * @augments ROT.Map.Feature\n * @param {int} x1\n * @param {int} y1\n * @param {int} x2\n * @param {int} y2\n * @param {int} [doorX]\n * @param {int} [doorY]\n */\nexport class Room extends Feature {\n    constructor(x1, y1, x2, y2, doorX, doorY) {\n        super();\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n        this._doors = {};\n        if (doorX !== undefined && doorY !== undefined) {\n            this.addDoor(doorX, doorY);\n        }\n    }\n    ;\n    /**\n     * Room of random size, with a given doors and direction\n     */\n    static createRandomAt(x, y, dx, dy, options) {\n        let min = options.roomWidth[0];\n        let max = options.roomWidth[1];\n        let width = RNG.getUniformInt(min, max);\n        min = options.roomHeight[0];\n        max = options.roomHeight[1];\n        let height = RNG.getUniformInt(min, max);\n        if (dx == 1) { /* to the right */\n            let y2 = y - Math.floor(RNG.getUniform() * height);\n            return new this(x + 1, y2, x + width, y2 + height - 1, x, y);\n        }\n        if (dx == -1) { /* to the left */\n            let y2 = y - Math.floor(RNG.getUniform() * height);\n            return new this(x - width, y2, x - 1, y2 + height - 1, x, y);\n        }\n        if (dy == 1) { /* to the bottom */\n            let x2 = x - Math.floor(RNG.getUniform() * width);\n            return new this(x2, y + 1, x2 + width - 1, y + height, x, y);\n        }\n        if (dy == -1) { /* to the top */\n            let x2 = x - Math.floor(RNG.getUniform() * width);\n            return new this(x2, y - height, x2 + width - 1, y - 1, x, y);\n        }\n        throw new Error(\"dx or dy must be 1 or -1\");\n    }\n    /**\n     * Room of random size, positioned around center coords\n     */\n    static createRandomCenter(cx, cy, options) {\n        let min = options.roomWidth[0];\n        let max = options.roomWidth[1];\n        let width = RNG.getUniformInt(min, max);\n        min = options.roomHeight[0];\n        max = options.roomHeight[1];\n        let height = RNG.getUniformInt(min, max);\n        let x1 = cx - Math.floor(RNG.getUniform() * width);\n        let y1 = cy - Math.floor(RNG.getUniform() * height);\n        let x2 = x1 + width - 1;\n        let y2 = y1 + height - 1;\n        return new this(x1, y1, x2, y2);\n    }\n    /**\n     * Room of random size within a given dimensions\n     */\n    static createRandom(availWidth, availHeight, options) {\n        let min = options.roomWidth[0];\n        let max = options.roomWidth[1];\n        let width = RNG.getUniformInt(min, max);\n        min = options.roomHeight[0];\n        max = options.roomHeight[1];\n        let height = RNG.getUniformInt(min, max);\n        let left = availWidth - width - 1;\n        let top = availHeight - height - 1;\n        let x1 = 1 + Math.floor(RNG.getUniform() * left);\n        let y1 = 1 + Math.floor(RNG.getUniform() * top);\n        let x2 = x1 + width - 1;\n        let y2 = y1 + height - 1;\n        return new this(x1, y1, x2, y2);\n    }\n    addDoor(x, y) {\n        this._doors[x + \",\" + y] = 1;\n        return this;\n    }\n    /**\n     * @param {function}\n     */\n    getDoors(cb) {\n        for (let key in this._doors) {\n            let parts = key.split(\",\");\n            cb(parseInt(parts[0]), parseInt(parts[1]));\n        }\n        return this;\n    }\n    clearDoors() {\n        this._doors = {};\n        return this;\n    }\n    addDoors(isWallCallback) {\n        let left = this._x1 - 1;\n        let right = this._x2 + 1;\n        let top = this._y1 - 1;\n        let bottom = this._y2 + 1;\n        for (let x = left; x <= right; x++) {\n            for (let y = top; y <= bottom; y++) {\n                if (x != left && x != right && y != top && y != bottom) {\n                    continue;\n                }\n                if (isWallCallback(x, y)) {\n                    continue;\n                }\n                this.addDoor(x, y);\n            }\n        }\n        return this;\n    }\n    debug() {\n        console.log(\"room\", this._x1, this._y1, this._x2, this._y2);\n    }\n    isValid(isWallCallback, canBeDugCallback) {\n        let left = this._x1 - 1;\n        let right = this._x2 + 1;\n        let top = this._y1 - 1;\n        let bottom = this._y2 + 1;\n        for (let x = left; x <= right; x++) {\n            for (let y = top; y <= bottom; y++) {\n                if (x == left || x == right || y == top || y == bottom) {\n                    if (!isWallCallback(x, y)) {\n                        return false;\n                    }\n                }\n                else {\n                    if (!canBeDugCallback(x, y)) {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n    /**\n     * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty, 1 = wall, 2 = door. Multiple doors are allowed.\n     */\n    create(digCallback) {\n        let left = this._x1 - 1;\n        let right = this._x2 + 1;\n        let top = this._y1 - 1;\n        let bottom = this._y2 + 1;\n        let value = 0;\n        for (let x = left; x <= right; x++) {\n            for (let y = top; y <= bottom; y++) {\n                if (x + \",\" + y in this._doors) {\n                    value = 2;\n                }\n                else if (x == left || x == right || y == top || y == bottom) {\n                    value = 1;\n                }\n                else {\n                    value = 0;\n                }\n                digCallback(x, y, value);\n            }\n        }\n    }\n    getCenter() {\n        return [Math.round((this._x1 + this._x2) / 2), Math.round((this._y1 + this._y2) / 2)];\n    }\n    getLeft() { return this._x1; }\n    getRight() { return this._x2; }\n    getTop() { return this._y1; }\n    getBottom() { return this._y2; }\n}\n/**\n * @class Corridor\n * @augments ROT.Map.Feature\n * @param {int} startX\n * @param {int} startY\n * @param {int} endX\n * @param {int} endY\n */\nexport class Corridor extends Feature {\n    constructor(startX, startY, endX, endY) {\n        super();\n        this._startX = startX;\n        this._startY = startY;\n        this._endX = endX;\n        this._endY = endY;\n        this._endsWithAWall = true;\n    }\n    static createRandomAt(x, y, dx, dy, options) {\n        let min = options.corridorLength[0];\n        let max = options.corridorLength[1];\n        let length = RNG.getUniformInt(min, max);\n        return new this(x, y, x + dx * length, y + dy * length);\n    }\n    debug() {\n        console.log(\"corridor\", this._startX, this._startY, this._endX, this._endY);\n    }\n    isValid(isWallCallback, canBeDugCallback) {\n        let sx = this._startX;\n        let sy = this._startY;\n        let dx = this._endX - sx;\n        let dy = this._endY - sy;\n        let length = 1 + Math.max(Math.abs(dx), Math.abs(dy));\n        if (dx) {\n            dx = dx / Math.abs(dx);\n        }\n        if (dy) {\n            dy = dy / Math.abs(dy);\n        }\n        let nx = dy;\n        let ny = -dx;\n        let ok = true;\n        for (let i = 0; i < length; i++) {\n            let x = sx + i * dx;\n            let y = sy + i * dy;\n            if (!canBeDugCallback(x, y)) {\n                ok = false;\n            }\n            if (!isWallCallback(x + nx, y + ny)) {\n                ok = false;\n            }\n            if (!isWallCallback(x - nx, y - ny)) {\n                ok = false;\n            }\n            if (!ok) {\n                length = i;\n                this._endX = x - dx;\n                this._endY = y - dy;\n                break;\n            }\n        }\n        /**\n         * If the length degenerated, this corridor might be invalid\n         */\n        /* not supported */\n        if (length == 0) {\n            return false;\n        }\n        /* length 1 allowed only if the next space is empty */\n        if (length == 1 && isWallCallback(this._endX + dx, this._endY + dy)) {\n            return false;\n        }\n        /**\n         * We do not want the corridor to crash into a corner of a room;\n         * if any of the ending corners is empty, the N+1th cell of this corridor must be empty too.\n         *\n         * Situation:\n         * #######1\n         * .......?\n         * #######2\n         *\n         * The corridor was dug from left to right.\n         * 1, 2 - problematic corners, ? = N+1th cell (not dug)\n         */\n        let firstCornerBad = !isWallCallback(this._endX + dx + nx, this._endY + dy + ny);\n        let secondCornerBad = !isWallCallback(this._endX + dx - nx, this._endY + dy - ny);\n        this._endsWithAWall = isWallCallback(this._endX + dx, this._endY + dy);\n        if ((firstCornerBad || secondCornerBad) && this._endsWithAWall) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty.\n     */\n    create(digCallback) {\n        let sx = this._startX;\n        let sy = this._startY;\n        let dx = this._endX - sx;\n        let dy = this._endY - sy;\n        let length = 1 + Math.max(Math.abs(dx), Math.abs(dy));\n        if (dx) {\n            dx = dx / Math.abs(dx);\n        }\n        if (dy) {\n            dy = dy / Math.abs(dy);\n        }\n        for (let i = 0; i < length; i++) {\n            let x = sx + i * dx;\n            let y = sy + i * dy;\n            digCallback(x, y, 0);\n        }\n        return true;\n    }\n    createPriorityWalls(priorityWallCallback) {\n        if (!this._endsWithAWall) {\n            return;\n        }\n        let sx = this._startX;\n        let sy = this._startY;\n        let dx = this._endX - sx;\n        let dy = this._endY - sy;\n        if (dx) {\n            dx = dx / Math.abs(dx);\n        }\n        if (dy) {\n            dy = dy / Math.abs(dy);\n        }\n        let nx = dy;\n        let ny = -dx;\n        priorityWallCallback(this._endX + dx, this._endY + dy);\n        priorityWallCallback(this._endX + nx, this._endY + ny);\n        priorityWallCallback(this._endX - nx, this._endY - ny);\n    }\n}\n","import Dungeon from \"./dungeon.js\";\nimport { Room, Corridor } from \"./features.js\";\nimport RNG from \"../rng.js\";\n;\n/**\n * @class Dungeon generator which tries to fill the space evenly. Generates independent rooms and tries to connect them.\n * @augments ROT.Map.Dungeon\n */\nexport default class Uniform extends Dungeon {\n    constructor(width, height, options) {\n        super(width, height);\n        this._options = {\n            roomWidth: [3, 9],\n            roomHeight: [3, 5],\n            roomDugPercentage: 0.1,\n            timeLimit: 1000 /* we stop after this much time has passed (msec) */\n        };\n        Object.assign(this._options, options);\n        this._map = [];\n        this._dug = 0;\n        this._roomAttempts = 20; /* new room is created N-times until is considered as impossible to generate */\n        this._corridorAttempts = 20; /* corridors are tried N-times until the level is considered as impossible to connect */\n        this._connected = []; /* list of already connected rooms */\n        this._unconnected = []; /* list of remaining unconnected rooms */\n        this._digCallback = this._digCallback.bind(this);\n        this._canBeDugCallback = this._canBeDugCallback.bind(this);\n        this._isWallCallback = this._isWallCallback.bind(this);\n    }\n    /**\n     * Create a map. If the time limit has been hit, returns null.\n     * @see ROT.Map#create\n     */\n    create(callback) {\n        let t1 = Date.now();\n        while (1) {\n            let t2 = Date.now();\n            if (t2 - t1 > this._options.timeLimit) {\n                return null;\n            } /* time limit! */\n            this._map = this._fillMap(1);\n            this._dug = 0;\n            this._rooms = [];\n            this._unconnected = [];\n            this._generateRooms();\n            if (this._rooms.length < 2) {\n                continue;\n            }\n            if (this._generateCorridors()) {\n                break;\n            }\n        }\n        if (callback) {\n            for (let i = 0; i < this._width; i++) {\n                for (let j = 0; j < this._height; j++) {\n                    callback(i, j, this._map[i][j]);\n                }\n            }\n        }\n        return this;\n    }\n    /**\n     * Generates a suitable amount of rooms\n     */\n    _generateRooms() {\n        let w = this._width - 2;\n        let h = this._height - 2;\n        let room;\n        do {\n            room = this._generateRoom();\n            if (this._dug / (w * h) > this._options.roomDugPercentage) {\n                break;\n            } /* achieved requested amount of free space */\n        } while (room);\n        /* either enough rooms, or not able to generate more of them :) */\n    }\n    /**\n     * Try to generate one room\n     */\n    _generateRoom() {\n        let count = 0;\n        while (count < this._roomAttempts) {\n            count++;\n            let room = Room.createRandom(this._width, this._height, this._options);\n            if (!room.isValid(this._isWallCallback, this._canBeDugCallback)) {\n                continue;\n            }\n            room.create(this._digCallback);\n            this._rooms.push(room);\n            return room;\n        }\n        /* no room was generated in a given number of attempts */\n        return null;\n    }\n    /**\n     * Generates connectors beween rooms\n     * @returns {bool} success Was this attempt successfull?\n     */\n    _generateCorridors() {\n        let cnt = 0;\n        while (cnt < this._corridorAttempts) {\n            cnt++;\n            this._corridors = [];\n            /* dig rooms into a clear map */\n            this._map = this._fillMap(1);\n            for (let i = 0; i < this._rooms.length; i++) {\n                let room = this._rooms[i];\n                room.clearDoors();\n                room.create(this._digCallback);\n            }\n            this._unconnected = RNG.shuffle(this._rooms.slice());\n            this._connected = [];\n            if (this._unconnected.length) {\n                this._connected.push(this._unconnected.pop());\n            } /* first one is always connected */\n            while (1) {\n                /* 1. pick random connected room */\n                let connected = RNG.getItem(this._connected);\n                if (!connected) {\n                    break;\n                }\n                /* 2. find closest unconnected */\n                let room1 = this._closestRoom(this._unconnected, connected);\n                if (!room1) {\n                    break;\n                }\n                /* 3. connect it to closest connected */\n                let room2 = this._closestRoom(this._connected, room1);\n                if (!room2) {\n                    break;\n                }\n                let ok = this._connectRooms(room1, room2);\n                if (!ok) {\n                    break;\n                } /* stop connecting, re-shuffle */\n                if (!this._unconnected.length) {\n                    return true;\n                } /* done; no rooms remain */\n            }\n        }\n        return false;\n    }\n    ;\n    /**\n     * For a given room, find the closest one from the list\n     */\n    _closestRoom(rooms, room) {\n        let dist = Infinity;\n        let center = room.getCenter();\n        let result = null;\n        for (let i = 0; i < rooms.length; i++) {\n            let r = rooms[i];\n            let c = r.getCenter();\n            let dx = c[0] - center[0];\n            let dy = c[1] - center[1];\n            let d = dx * dx + dy * dy;\n            if (d < dist) {\n                dist = d;\n                result = r;\n            }\n        }\n        return result;\n    }\n    _connectRooms(room1, room2) {\n        /*\n            room1.debug();\n            room2.debug();\n        */\n        let center1 = room1.getCenter();\n        let center2 = room2.getCenter();\n        let diffX = center2[0] - center1[0];\n        let diffY = center2[1] - center1[1];\n        let start;\n        let end;\n        let dirIndex1, dirIndex2, min, max, index;\n        if (Math.abs(diffX) < Math.abs(diffY)) { /* first try connecting north-south walls */\n            dirIndex1 = (diffY > 0 ? 2 : 0);\n            dirIndex2 = (dirIndex1 + 2) % 4;\n            min = room2.getLeft();\n            max = room2.getRight();\n            index = 0;\n        }\n        else { /* first try connecting east-west walls */\n            dirIndex1 = (diffX > 0 ? 1 : 3);\n            dirIndex2 = (dirIndex1 + 2) % 4;\n            min = room2.getTop();\n            max = room2.getBottom();\n            index = 1;\n        }\n        start = this._placeInWall(room1, dirIndex1); /* corridor will start here */\n        if (!start) {\n            return false;\n        }\n        if (start[index] >= min && start[index] <= max) { /* possible to connect with straight line (I-like) */\n            end = start.slice();\n            let value = 0;\n            switch (dirIndex2) {\n                case 0:\n                    value = room2.getTop() - 1;\n                    break;\n                case 1:\n                    value = room2.getRight() + 1;\n                    break;\n                case 2:\n                    value = room2.getBottom() + 1;\n                    break;\n                case 3:\n                    value = room2.getLeft() - 1;\n                    break;\n            }\n            end[(index + 1) % 2] = value;\n            this._digLine([start, end]);\n        }\n        else if (start[index] < min - 1 || start[index] > max + 1) { /* need to switch target wall (L-like) */\n            let diff = start[index] - center2[index];\n            let rotation = 0;\n            switch (dirIndex2) {\n                case 0:\n                case 1:\n                    rotation = (diff < 0 ? 3 : 1);\n                    break;\n                case 2:\n                case 3:\n                    rotation = (diff < 0 ? 1 : 3);\n                    break;\n            }\n            dirIndex2 = (dirIndex2 + rotation) % 4;\n            end = this._placeInWall(room2, dirIndex2);\n            if (!end) {\n                return false;\n            }\n            let mid = [0, 0];\n            mid[index] = start[index];\n            let index2 = (index + 1) % 2;\n            mid[index2] = end[index2];\n            this._digLine([start, mid, end]);\n        }\n        else { /* use current wall pair, but adjust the line in the middle (S-like) */\n            let index2 = (index + 1) % 2;\n            end = this._placeInWall(room2, dirIndex2);\n            if (!end) {\n                return false;\n            }\n            let mid = Math.round((end[index2] + start[index2]) / 2);\n            let mid1 = [0, 0];\n            let mid2 = [0, 0];\n            mid1[index] = start[index];\n            mid1[index2] = mid;\n            mid2[index] = end[index];\n            mid2[index2] = mid;\n            this._digLine([start, mid1, mid2, end]);\n        }\n        room1.addDoor(start[0], start[1]);\n        room2.addDoor(end[0], end[1]);\n        index = this._unconnected.indexOf(room1);\n        if (index != -1) {\n            this._unconnected.splice(index, 1);\n            this._connected.push(room1);\n        }\n        index = this._unconnected.indexOf(room2);\n        if (index != -1) {\n            this._unconnected.splice(index, 1);\n            this._connected.push(room2);\n        }\n        return true;\n    }\n    _placeInWall(room, dirIndex) {\n        let start = [0, 0];\n        let dir = [0, 0];\n        let length = 0;\n        switch (dirIndex) {\n            case 0:\n                dir = [1, 0];\n                start = [room.getLeft(), room.getTop() - 1];\n                length = room.getRight() - room.getLeft() + 1;\n                break;\n            case 1:\n                dir = [0, 1];\n                start = [room.getRight() + 1, room.getTop()];\n                length = room.getBottom() - room.getTop() + 1;\n                break;\n            case 2:\n                dir = [1, 0];\n                start = [room.getLeft(), room.getBottom() + 1];\n                length = room.getRight() - room.getLeft() + 1;\n                break;\n            case 3:\n                dir = [0, 1];\n                start = [room.getLeft() - 1, room.getTop()];\n                length = room.getBottom() - room.getTop() + 1;\n                break;\n        }\n        let avail = [];\n        let lastBadIndex = -2;\n        for (let i = 0; i < length; i++) {\n            let x = start[0] + i * dir[0];\n            let y = start[1] + i * dir[1];\n            avail.push(null);\n            let isWall = (this._map[x][y] == 1);\n            if (isWall) {\n                if (lastBadIndex != i - 1) {\n                    avail[i] = [x, y];\n                }\n            }\n            else {\n                lastBadIndex = i;\n                if (i) {\n                    avail[i - 1] = null;\n                }\n            }\n        }\n        for (let i = avail.length - 1; i >= 0; i--) {\n            if (!avail[i]) {\n                avail.splice(i, 1);\n            }\n        }\n        return (avail.length ? RNG.getItem(avail) : null);\n    }\n    /**\n     * Dig a polyline.\n     */\n    _digLine(points) {\n        for (let i = 1; i < points.length; i++) {\n            let start = points[i - 1];\n            let end = points[i];\n            let corridor = new Corridor(start[0], start[1], end[0], end[1]);\n            corridor.create(this._digCallback);\n            this._corridors.push(corridor);\n        }\n    }\n    _digCallback(x, y, value) {\n        this._map[x][y] = value;\n        if (value == 0) {\n            this._dug++;\n        }\n    }\n    _isWallCallback(x, y) {\n        if (x < 0 || y < 0 || x >= this._width || y >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n    _canBeDugCallback(x, y) {\n        if (x < 1 || y < 1 || x + 1 >= this._width || y + 1 >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n}\n","import Map from \"./map.js\";\nimport { DIRS } from \"../constants.js\";\nimport RNG from \"../rng.js\";\n;\n/**\n * @class Cellular automaton map generator\n * @augments ROT.Map\n * @param {int} [width=ROT.DEFAULT_WIDTH]\n * @param {int} [height=ROT.DEFAULT_HEIGHT]\n * @param {object} [options] Options\n * @param {int[]} [options.born] List of neighbor counts for a new cell to be born in empty space\n * @param {int[]} [options.survive] List of neighbor counts for an existing  cell to survive\n * @param {int} [options.topology] Topology 4 or 6 or 8\n */\nexport default class Cellular extends Map {\n    constructor(width, height, options = {}) {\n        super(width, height);\n        this._options = {\n            born: [5, 6, 7, 8],\n            survive: [4, 5, 6, 7, 8],\n            topology: 8\n        };\n        this.setOptions(options);\n        this._dirs = DIRS[this._options.topology];\n        this._map = this._fillMap(0);\n    }\n    /**\n     * Fill the map with random values\n     * @param {float} probability Probability for a cell to become alive; 0 = all empty, 1 = all full\n     */\n    randomize(probability) {\n        for (let i = 0; i < this._width; i++) {\n            for (let j = 0; j < this._height; j++) {\n                this._map[i][j] = (RNG.getUniform() < probability ? 1 : 0);\n            }\n        }\n        return this;\n    }\n    /**\n     * Change options.\n     * @see ROT.Map.Cellular\n     */\n    setOptions(options) { Object.assign(this._options, options); }\n    set(x, y, value) { this._map[x][y] = value; }\n    create(callback) {\n        let newMap = this._fillMap(0);\n        let born = this._options.born;\n        let survive = this._options.survive;\n        for (let j = 0; j < this._height; j++) {\n            let widthStep = 1;\n            let widthStart = 0;\n            if (this._options.topology == 6) {\n                widthStep = 2;\n                widthStart = j % 2;\n            }\n            for (let i = widthStart; i < this._width; i += widthStep) {\n                let cur = this._map[i][j];\n                let ncount = this._getNeighbors(i, j);\n                if (cur && survive.indexOf(ncount) != -1) { /* survive */\n                    newMap[i][j] = 1;\n                }\n                else if (!cur && born.indexOf(ncount) != -1) { /* born */\n                    newMap[i][j] = 1;\n                }\n            }\n        }\n        this._map = newMap;\n        callback && this._serviceCallback(callback);\n    }\n    _serviceCallback(callback) {\n        for (let j = 0; j < this._height; j++) {\n            let widthStep = 1;\n            let widthStart = 0;\n            if (this._options.topology == 6) {\n                widthStep = 2;\n                widthStart = j % 2;\n            }\n            for (let i = widthStart; i < this._width; i += widthStep) {\n                callback(i, j, this._map[i][j]);\n            }\n        }\n    }\n    /**\n     * Get neighbor count at [i,j] in this._map\n     */\n    _getNeighbors(cx, cy) {\n        let result = 0;\n        for (let i = 0; i < this._dirs.length; i++) {\n            let dir = this._dirs[i];\n            let x = cx + dir[0];\n            let y = cy + dir[1];\n            if (x < 0 || x >= this._width || y < 0 || y >= this._height) {\n                continue;\n            }\n            result += (this._map[x][y] == 1 ? 1 : 0);\n        }\n        return result;\n    }\n    /**\n     * Make sure every non-wall space is accessible.\n     * @param {function} callback to call to display map when do\n     * @param {int} value to consider empty space - defaults to 0\n     * @param {function} callback to call when a new connection is made\n     */\n    connect(callback, value, connectionCallback) {\n        if (!value)\n            value = 0;\n        let allFreeSpace = [];\n        let notConnected = {};\n        // find all free space\n        let widthStep = 1;\n        let widthStarts = [0, 0];\n        if (this._options.topology == 6) {\n            widthStep = 2;\n            widthStarts = [0, 1];\n        }\n        for (let y = 0; y < this._height; y++) {\n            for (let x = widthStarts[y % 2]; x < this._width; x += widthStep) {\n                if (this._freeSpace(x, y, value)) {\n                    let p = [x, y];\n                    notConnected[this._pointKey(p)] = p;\n                    allFreeSpace.push([x, y]);\n                }\n            }\n        }\n        let start = allFreeSpace[RNG.getUniformInt(0, allFreeSpace.length - 1)];\n        let key = this._pointKey(start);\n        let connected = {};\n        connected[key] = start;\n        delete notConnected[key];\n        // find what's connected to the starting point\n        this._findConnected(connected, notConnected, [start], false, value);\n        while (Object.keys(notConnected).length > 0) {\n            // find two points from notConnected to connected\n            let p = this._getFromTo(connected, notConnected);\n            let from = p[0]; // notConnected\n            let to = p[1]; // connected\n            // find everything connected to the starting point\n            let local = {};\n            local[this._pointKey(from)] = from;\n            this._findConnected(local, notConnected, [from], true, value);\n            // connect to a connected cell\n            let tunnelFn = (this._options.topology == 6 ? this._tunnelToConnected6 : this._tunnelToConnected);\n            tunnelFn.call(this, to, from, connected, notConnected, value, connectionCallback);\n            // now all of local is connected\n            for (let k in local) {\n                let pp = local[k];\n                this._map[pp[0]][pp[1]] = value;\n                connected[k] = pp;\n                delete notConnected[k];\n            }\n        }\n        callback && this._serviceCallback(callback);\n    }\n    /**\n     * Find random points to connect. Search for the closest point in the larger space.\n     * This is to minimize the length of the passage while maintaining good performance.\n     */\n    _getFromTo(connected, notConnected) {\n        let from = [0, 0], to = [0, 0], d;\n        let connectedKeys = Object.keys(connected);\n        let notConnectedKeys = Object.keys(notConnected);\n        for (let i = 0; i < 5; i++) {\n            if (connectedKeys.length < notConnectedKeys.length) {\n                let keys = connectedKeys;\n                to = connected[keys[RNG.getUniformInt(0, keys.length - 1)]];\n                from = this._getClosest(to, notConnected);\n            }\n            else {\n                let keys = notConnectedKeys;\n                from = notConnected[keys[RNG.getUniformInt(0, keys.length - 1)]];\n                to = this._getClosest(from, connected);\n            }\n            d = (from[0] - to[0]) * (from[0] - to[0]) + (from[1] - to[1]) * (from[1] - to[1]);\n            if (d < 64) {\n                break;\n            }\n        }\n        // console.log(\">>> connected=\" + to + \" notConnected=\" + from + \" dist=\" + d);\n        return [from, to];\n    }\n    _getClosest(point, space) {\n        let minPoint = null;\n        let minDist = null;\n        for (let k in space) {\n            let p = space[k];\n            let d = (p[0] - point[0]) * (p[0] - point[0]) + (p[1] - point[1]) * (p[1] - point[1]);\n            if (minDist == null || d < minDist) {\n                minDist = d;\n                minPoint = p;\n            }\n        }\n        return minPoint;\n    }\n    _findConnected(connected, notConnected, stack, keepNotConnected, value) {\n        while (stack.length > 0) {\n            let p = stack.splice(0, 1)[0];\n            let tests;\n            if (this._options.topology == 6) {\n                tests = [\n                    [p[0] + 2, p[1]],\n                    [p[0] + 1, p[1] - 1],\n                    [p[0] - 1, p[1] - 1],\n                    [p[0] - 2, p[1]],\n                    [p[0] - 1, p[1] + 1],\n                    [p[0] + 1, p[1] + 1],\n                ];\n            }\n            else {\n                tests = [\n                    [p[0] + 1, p[1]],\n                    [p[0] - 1, p[1]],\n                    [p[0], p[1] + 1],\n                    [p[0], p[1] - 1]\n                ];\n            }\n            for (let i = 0; i < tests.length; i++) {\n                let key = this._pointKey(tests[i]);\n                if (connected[key] == null && this._freeSpace(tests[i][0], tests[i][1], value)) {\n                    connected[key] = tests[i];\n                    if (!keepNotConnected) {\n                        delete notConnected[key];\n                    }\n                    stack.push(tests[i]);\n                }\n            }\n        }\n    }\n    _tunnelToConnected(to, from, connected, notConnected, value, connectionCallback) {\n        let a, b;\n        if (from[0] < to[0]) {\n            a = from;\n            b = to;\n        }\n        else {\n            a = to;\n            b = from;\n        }\n        for (let xx = a[0]; xx <= b[0]; xx++) {\n            this._map[xx][a[1]] = value;\n            let p = [xx, a[1]];\n            let pkey = this._pointKey(p);\n            connected[pkey] = p;\n            delete notConnected[pkey];\n        }\n        if (connectionCallback && a[0] < b[0]) {\n            connectionCallback(a, [b[0], a[1]]);\n        }\n        // x is now fixed\n        let x = b[0];\n        if (from[1] < to[1]) {\n            a = from;\n            b = to;\n        }\n        else {\n            a = to;\n            b = from;\n        }\n        for (let yy = a[1]; yy < b[1]; yy++) {\n            this._map[x][yy] = value;\n            let p = [x, yy];\n            let pkey = this._pointKey(p);\n            connected[pkey] = p;\n            delete notConnected[pkey];\n        }\n        if (connectionCallback && a[1] < b[1]) {\n            connectionCallback([b[0], a[1]], [b[0], b[1]]);\n        }\n    }\n    _tunnelToConnected6(to, from, connected, notConnected, value, connectionCallback) {\n        let a, b;\n        if (from[0] < to[0]) {\n            a = from;\n            b = to;\n        }\n        else {\n            a = to;\n            b = from;\n        }\n        // tunnel diagonally until horizontally level\n        let xx = a[0];\n        let yy = a[1];\n        while (!(xx == b[0] && yy == b[1])) {\n            let stepWidth = 2;\n            if (yy < b[1]) {\n                yy++;\n                stepWidth = 1;\n            }\n            else if (yy > b[1]) {\n                yy--;\n                stepWidth = 1;\n            }\n            if (xx < b[0]) {\n                xx += stepWidth;\n            }\n            else if (xx > b[0]) {\n                xx -= stepWidth;\n            }\n            else if (b[1] % 2) {\n                // Won't step outside map if destination on is map's right edge\n                xx -= stepWidth;\n            }\n            else {\n                // ditto for left edge\n                xx += stepWidth;\n            }\n            this._map[xx][yy] = value;\n            let p = [xx, yy];\n            let pkey = this._pointKey(p);\n            connected[pkey] = p;\n            delete notConnected[pkey];\n        }\n        if (connectionCallback) {\n            connectionCallback(from, to);\n        }\n    }\n    _freeSpace(x, y, value) {\n        return x >= 0 && x < this._width && y >= 0 && y < this._height && this._map[x][y] == value;\n    }\n    _pointKey(p) { return p[0] + \".\" + p[1]; }\n}\n","import Dungeon from \"./dungeon.js\";\nimport { Room, Corridor } from \"./features.js\";\nimport RNG from \"../rng.js\";\nimport { DIRS } from \"../constants.js\";\nconst FEATURES = {\n    \"room\": Room,\n    \"corridor\": Corridor\n};\n/**\n * Random dungeon generator using human-like digging patterns.\n * Heavily based on Mike Anderson's ideas from the \"Tyrant\" algo, mentioned at\n * http://roguebasin.com/index.php/Dungeon-Building_Algorithm\n */\nexport default class Digger extends Dungeon {\n    constructor(width, height, options = {}) {\n        super(width, height);\n        this._options = Object.assign({\n            roomWidth: [3, 9],\n            roomHeight: [3, 5],\n            corridorLength: [3, 10],\n            dugPercentage: 0.2,\n            timeLimit: 1000 /* we stop after this much time has passed (msec) */\n        }, options);\n        this._features = {\n            \"room\": 4,\n            \"corridor\": 4\n        };\n        this._map = [];\n        this._featureAttempts = 20; /* how many times do we try to create a feature on a suitable wall */\n        this._walls = {}; /* these are available for digging */\n        this._dug = 0;\n        this._digCallback = this._digCallback.bind(this);\n        this._canBeDugCallback = this._canBeDugCallback.bind(this);\n        this._isWallCallback = this._isWallCallback.bind(this);\n        this._priorityWallCallback = this._priorityWallCallback.bind(this);\n    }\n    create(callback) {\n        this._rooms = [];\n        this._corridors = [];\n        this._map = this._fillMap(1);\n        this._walls = {};\n        this._dug = 0;\n        let area = (this._width - 2) * (this._height - 2);\n        this._firstRoom();\n        let t1 = Date.now();\n        let priorityWalls;\n        do {\n            priorityWalls = 0;\n            let t2 = Date.now();\n            if (t2 - t1 > this._options.timeLimit) {\n                break;\n            }\n            /* find a good wall */\n            let wall = this._findWall();\n            if (!wall) {\n                break;\n            } /* no more walls */\n            let parts = wall.split(\",\");\n            let x = parseInt(parts[0]);\n            let y = parseInt(parts[1]);\n            let dir = this._getDiggingDirection(x, y);\n            if (!dir) {\n                continue;\n            } /* this wall is not suitable */\n            //\t\tconsole.log(\"wall\", x, y);\n            /* try adding a feature */\n            let featureAttempts = 0;\n            do {\n                featureAttempts++;\n                if (this._tryFeature(x, y, dir[0], dir[1])) { /* feature added */\n                    //if (this._rooms.length + this._corridors.length == 2) { this._rooms[0].addDoor(x, y); } /* first room oficially has doors */\n                    this._removeSurroundingWalls(x, y);\n                    this._removeSurroundingWalls(x - dir[0], y - dir[1]);\n                    break;\n                }\n            } while (featureAttempts < this._featureAttempts);\n            for (let id in this._walls) {\n                if (this._walls[id] > 1) {\n                    priorityWalls++;\n                }\n            }\n        } while (this._dug / area < this._options.dugPercentage || priorityWalls); /* fixme number of priority walls */\n        this._addDoors();\n        if (callback) {\n            for (let i = 0; i < this._width; i++) {\n                for (let j = 0; j < this._height; j++) {\n                    callback(i, j, this._map[i][j]);\n                }\n            }\n        }\n        this._walls = {};\n        this._map = [];\n        return this;\n    }\n    _digCallback(x, y, value) {\n        if (value == 0 || value == 2) { /* empty */\n            this._map[x][y] = 0;\n            this._dug++;\n        }\n        else { /* wall */\n            this._walls[x + \",\" + y] = 1;\n        }\n    }\n    _isWallCallback(x, y) {\n        if (x < 0 || y < 0 || x >= this._width || y >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n    _canBeDugCallback(x, y) {\n        if (x < 1 || y < 1 || x + 1 >= this._width || y + 1 >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n    _priorityWallCallback(x, y) { this._walls[x + \",\" + y] = 2; }\n    ;\n    _firstRoom() {\n        let cx = Math.floor(this._width / 2);\n        let cy = Math.floor(this._height / 2);\n        let room = Room.createRandomCenter(cx, cy, this._options);\n        this._rooms.push(room);\n        room.create(this._digCallback);\n    }\n    /**\n     * Get a suitable wall\n     */\n    _findWall() {\n        let prio1 = [];\n        let prio2 = [];\n        for (let id in this._walls) {\n            let prio = this._walls[id];\n            if (prio == 2) {\n                prio2.push(id);\n            }\n            else {\n                prio1.push(id);\n            }\n        }\n        let arr = (prio2.length ? prio2 : prio1);\n        if (!arr.length) {\n            return null;\n        } /* no walls :/ */\n        let id = RNG.getItem(arr.sort()); // sort to make the order deterministic\n        delete this._walls[id];\n        return id;\n    }\n    /**\n     * Tries adding a feature\n     * @returns {bool} was this a successful try?\n     */\n    _tryFeature(x, y, dx, dy) {\n        let featureName = RNG.getWeightedValue(this._features);\n        let ctor = FEATURES[featureName];\n        let feature = ctor.createRandomAt(x, y, dx, dy, this._options);\n        if (!feature.isValid(this._isWallCallback, this._canBeDugCallback)) {\n            //\t\tconsole.log(\"not valid\");\n            //\t\tfeature.debug();\n            return false;\n        }\n        feature.create(this._digCallback);\n        //\tfeature.debug();\n        if (feature instanceof Room) {\n            this._rooms.push(feature);\n        }\n        if (feature instanceof Corridor) {\n            feature.createPriorityWalls(this._priorityWallCallback);\n            this._corridors.push(feature);\n        }\n        return true;\n    }\n    _removeSurroundingWalls(cx, cy) {\n        let deltas = DIRS[4];\n        for (let i = 0; i < deltas.length; i++) {\n            let delta = deltas[i];\n            let x = cx + delta[0];\n            let y = cy + delta[1];\n            delete this._walls[x + \",\" + y];\n            x = cx + 2 * delta[0];\n            y = cy + 2 * delta[1];\n            delete this._walls[x + \",\" + y];\n        }\n    }\n    /**\n     * Returns vector in \"digging\" direction, or false, if this does not exist (or is not unique)\n     */\n    _getDiggingDirection(cx, cy) {\n        if (cx <= 0 || cy <= 0 || cx >= this._width - 1 || cy >= this._height - 1) {\n            return null;\n        }\n        let result = null;\n        let deltas = DIRS[4];\n        for (let i = 0; i < deltas.length; i++) {\n            let delta = deltas[i];\n            let x = cx + delta[0];\n            let y = cy + delta[1];\n            if (!this._map[x][y]) { /* there already is another empty neighbor! */\n                if (result) {\n                    return null;\n                }\n                result = delta;\n            }\n        }\n        /* no empty neighbor */\n        if (!result) {\n            return null;\n        }\n        return [-result[0], -result[1]];\n    }\n    /**\n     * Find empty spaces surrounding rooms, and apply doors.\n     */\n    _addDoors() {\n        let data = this._map;\n        function isWallCallback(x, y) {\n            return (data[x][y] == 1);\n        }\n        ;\n        for (let i = 0; i < this._rooms.length; i++) {\n            let room = this._rooms[i];\n            room.clearDoors();\n            room.addDoors(isWallCallback);\n        }\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\n/**\n * Join lists with \"i\" and \"i+1\"\n */\nfunction addToList(i, L, R) {\n    R[L[i + 1]] = R[i];\n    L[R[i]] = L[i + 1];\n    R[i] = i + 1;\n    L[i + 1] = i;\n}\n/**\n * Remove \"i\" from its list\n */\nfunction removeFromList(i, L, R) {\n    R[L[i]] = R[i];\n    L[R[i]] = L[i];\n    R[i] = i;\n    L[i] = i;\n}\n/**\n * Maze generator - Eller's algorithm\n * See http://homepages.cwi.nl/~tromp/maze.html for explanation\n */\nexport default class EllerMaze extends Map {\n    create(callback) {\n        let map = this._fillMap(1);\n        let w = Math.ceil((this._width - 2) / 2);\n        let rand = 9 / 24;\n        let L = [];\n        let R = [];\n        for (let i = 0; i < w; i++) {\n            L.push(i);\n            R.push(i);\n        }\n        L.push(w - 1); /* fake stop-block at the right side */\n        let j;\n        for (j = 1; j + 3 < this._height; j += 2) {\n            /* one row */\n            for (let i = 0; i < w; i++) {\n                /* cell coords (will be always empty) */\n                let x = 2 * i + 1;\n                let y = j;\n                map[x][y] = 0;\n                /* right connection */\n                if (i != L[i + 1] && RNG.getUniform() > rand) {\n                    addToList(i, L, R);\n                    map[x + 1][y] = 0;\n                }\n                /* bottom connection */\n                if (i != L[i] && RNG.getUniform() > rand) {\n                    /* remove connection */\n                    removeFromList(i, L, R);\n                }\n                else {\n                    /* create connection */\n                    map[x][y + 1] = 0;\n                }\n            }\n        }\n        /* last row */\n        for (let i = 0; i < w; i++) {\n            /* cell coords (will be always empty) */\n            let x = 2 * i + 1;\n            let y = j;\n            map[x][y] = 0;\n            /* right connection */\n            if (i != L[i + 1] && (i == L[i] || RNG.getUniform() > rand)) {\n                /* dig right also if the cell is separated, so it gets connected to the rest of maze */\n                addToList(i, L, R);\n                map[x + 1][y] = 0;\n            }\n            removeFromList(i, L, R);\n        }\n        for (let i = 0; i < this._width; i++) {\n            for (let j = 0; j < this._height; j++) {\n                callback(i, j, map[i][j]);\n            }\n        }\n        return this;\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\n/**\n * @class Recursively divided maze, http://en.wikipedia.org/wiki/Maze_generation_algorithm#Recursive_division_method\n * @augments ROT.Map\n */\nexport default class DividedMaze extends Map {\n    constructor() {\n        super(...arguments);\n        this._stack = [];\n        this._map = [];\n    }\n    create(callback) {\n        let w = this._width;\n        let h = this._height;\n        this._map = [];\n        for (let i = 0; i < w; i++) {\n            this._map.push([]);\n            for (let j = 0; j < h; j++) {\n                let border = (i == 0 || j == 0 || i + 1 == w || j + 1 == h);\n                this._map[i].push(border ? 1 : 0);\n            }\n        }\n        this._stack = [\n            [1, 1, w - 2, h - 2]\n        ];\n        this._process();\n        for (let i = 0; i < w; i++) {\n            for (let j = 0; j < h; j++) {\n                callback(i, j, this._map[i][j]);\n            }\n        }\n        this._map = [];\n        return this;\n    }\n    _process() {\n        while (this._stack.length) {\n            let room = this._stack.shift(); /* [left, top, right, bottom] */\n            this._partitionRoom(room);\n        }\n    }\n    _partitionRoom(room) {\n        let availX = [];\n        let availY = [];\n        for (let i = room[0] + 1; i < room[2]; i++) {\n            let top = this._map[i][room[1] - 1];\n            let bottom = this._map[i][room[3] + 1];\n            if (top && bottom && !(i % 2)) {\n                availX.push(i);\n            }\n        }\n        for (let j = room[1] + 1; j < room[3]; j++) {\n            let left = this._map[room[0] - 1][j];\n            let right = this._map[room[2] + 1][j];\n            if (left && right && !(j % 2)) {\n                availY.push(j);\n            }\n        }\n        if (!availX.length || !availY.length) {\n            return;\n        }\n        let x = RNG.getItem(availX);\n        let y = RNG.getItem(availY);\n        this._map[x][y] = 1;\n        let walls = [];\n        let w = [];\n        walls.push(w); /* left part */\n        for (let i = room[0]; i < x; i++) {\n            this._map[i][y] = 1;\n            if (i % 2)\n                w.push([i, y]);\n        }\n        w = [];\n        walls.push(w); /* right part */\n        for (let i = x + 1; i <= room[2]; i++) {\n            this._map[i][y] = 1;\n            if (i % 2)\n                w.push([i, y]);\n        }\n        w = [];\n        walls.push(w); /* top part */\n        for (let j = room[1]; j < y; j++) {\n            this._map[x][j] = 1;\n            if (j % 2)\n                w.push([x, j]);\n        }\n        w = [];\n        walls.push(w); /* bottom part */\n        for (let j = y + 1; j <= room[3]; j++) {\n            this._map[x][j] = 1;\n            if (j % 2)\n                w.push([x, j]);\n        }\n        let solid = RNG.getItem(walls);\n        for (let i = 0; i < walls.length; i++) {\n            let w = walls[i];\n            if (w == solid) {\n                continue;\n            }\n            let hole = RNG.getItem(w);\n            this._map[hole[0]][hole[1]] = 0;\n        }\n        this._stack.push([room[0], room[1], x - 1, y - 1]); /* left top */\n        this._stack.push([x + 1, room[1], room[2], y - 1]); /* right top */\n        this._stack.push([room[0], y + 1, x - 1, room[3]]); /* left bottom */\n        this._stack.push([x + 1, y + 1, room[2], room[3]]); /* right bottom */\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\n/**\n * Icey's Maze generator\n * See http://roguebasin.com/index.php/Simple_maze for explanation\n */\nexport default class IceyMaze extends Map {\n    constructor(width, height, regularity = 0) {\n        super(width, height);\n        this._regularity = regularity;\n        this._map = [];\n    }\n    create(callback) {\n        let width = this._width;\n        let height = this._height;\n        let map = this._fillMap(1);\n        width -= (width % 2 ? 1 : 2);\n        height -= (height % 2 ? 1 : 2);\n        let cx = 0;\n        let cy = 0;\n        let nx = 0;\n        let ny = 0;\n        let done = 0;\n        let blocked = false;\n        let dirs = [\n            [0, 0],\n            [0, 0],\n            [0, 0],\n            [0, 0]\n        ];\n        do {\n            cx = 1 + 2 * Math.floor(RNG.getUniform() * (width - 1) / 2);\n            cy = 1 + 2 * Math.floor(RNG.getUniform() * (height - 1) / 2);\n            if (!done) {\n                map[cx][cy] = 0;\n            }\n            if (!map[cx][cy]) {\n                this._randomize(dirs);\n                do {\n                    if (Math.floor(RNG.getUniform() * (this._regularity + 1)) == 0) {\n                        this._randomize(dirs);\n                    }\n                    blocked = true;\n                    for (let i = 0; i < 4; i++) {\n                        nx = cx + dirs[i][0] * 2;\n                        ny = cy + dirs[i][1] * 2;\n                        if (this._isFree(map, nx, ny, width, height)) {\n                            map[nx][ny] = 0;\n                            map[cx + dirs[i][0]][cy + dirs[i][1]] = 0;\n                            cx = nx;\n                            cy = ny;\n                            blocked = false;\n                            done++;\n                            break;\n                        }\n                    }\n                } while (!blocked);\n            }\n        } while (done + 1 < width * height / 4);\n        for (let i = 0; i < this._width; i++) {\n            for (let j = 0; j < this._height; j++) {\n                callback(i, j, map[i][j]);\n            }\n        }\n        this._map = [];\n        return this;\n    }\n    _randomize(dirs) {\n        for (let i = 0; i < 4; i++) {\n            dirs[i][0] = 0;\n            dirs[i][1] = 0;\n        }\n        switch (Math.floor(RNG.getUniform() * 4)) {\n            case 0:\n                dirs[0][0] = -1;\n                dirs[1][0] = 1;\n                dirs[2][1] = -1;\n                dirs[3][1] = 1;\n                break;\n            case 1:\n                dirs[3][0] = -1;\n                dirs[2][0] = 1;\n                dirs[1][1] = -1;\n                dirs[0][1] = 1;\n                break;\n            case 2:\n                dirs[2][0] = -1;\n                dirs[3][0] = 1;\n                dirs[0][1] = -1;\n                dirs[1][1] = 1;\n                break;\n            case 3:\n                dirs[1][0] = -1;\n                dirs[0][0] = 1;\n                dirs[3][1] = -1;\n                dirs[2][1] = 1;\n                break;\n        }\n    }\n    _isFree(map, x, y, width, height) {\n        if (x < 1 || y < 1 || x >= width || y >= height) {\n            return false;\n        }\n        return map[x][y];\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\nimport { DIRS } from \"../constants.js\";\n/**\n * Dungeon generator which uses the \"orginal\" Rogue dungeon generation algorithm. See https://github.com/Davidslv/rogue-like/blob/master/docs/references/Mark_Damon_Hughes/07_Roguelike_Dungeon_Generation.md\n * @author hyakugei\n */\nexport default class Rogue extends Map {\n    constructor(width, height, options) {\n        super(width, height);\n        this.map = [];\n        this.rooms = [];\n        this.connectedCells = [];\n        options = Object.assign({\n            cellWidth: 3,\n            cellHeight: 3 //     ie. as an array with min-max values for each direction....\n        }, options);\n        /*\n        Set the room sizes according to the over-all width of the map,\n        and the cell sizes.\n        */\n        if (!options.hasOwnProperty(\"roomWidth\")) {\n            options[\"roomWidth\"] = this._calculateRoomSize(this._width, options[\"cellWidth\"]);\n        }\n        if (!options.hasOwnProperty(\"roomHeight\")) {\n            options[\"roomHeight\"] = this._calculateRoomSize(this._height, options[\"cellHeight\"]);\n        }\n        this._options = options;\n    }\n    create(callback) {\n        this.map = this._fillMap(1);\n        this.rooms = [];\n        this.connectedCells = [];\n        this._initRooms();\n        this._connectRooms();\n        this._connectUnconnectedRooms();\n        this._createRandomRoomConnections();\n        this._createRooms();\n        this._createCorridors();\n        if (callback) {\n            for (let i = 0; i < this._width; i++) {\n                for (let j = 0; j < this._height; j++) {\n                    callback(i, j, this.map[i][j]);\n                }\n            }\n        }\n        return this;\n    }\n    _calculateRoomSize(size, cell) {\n        let max = Math.floor((size / cell) * 0.8);\n        let min = Math.floor((size / cell) * 0.25);\n        if (min < 2) {\n            min = 2;\n        }\n        if (max < 2) {\n            max = 2;\n        }\n        return [min, max];\n    }\n    _initRooms() {\n        // create rooms array. This is the \"grid\" list from the algo.\n        for (let i = 0; i < this._options.cellWidth; i++) {\n            this.rooms.push([]);\n            for (let j = 0; j < this._options.cellHeight; j++) {\n                this.rooms[i].push({ \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0, \"connections\": [], \"cellx\": i, \"celly\": j });\n            }\n        }\n    }\n    _connectRooms() {\n        //pick random starting grid\n        let cgx = RNG.getUniformInt(0, this._options.cellWidth - 1);\n        let cgy = RNG.getUniformInt(0, this._options.cellHeight - 1);\n        let idx;\n        let ncgx;\n        let ncgy;\n        let found = false;\n        let room;\n        let otherRoom;\n        let dirToCheck;\n        // find  unconnected neighbour cells\n        do {\n            //dirToCheck = [0, 1, 2, 3, 4, 5, 6, 7];\n            dirToCheck = [0, 2, 4, 6];\n            dirToCheck = RNG.shuffle(dirToCheck);\n            do {\n                found = false;\n                idx = dirToCheck.pop();\n                ncgx = cgx + DIRS[8][idx][0];\n                ncgy = cgy + DIRS[8][idx][1];\n                if (ncgx < 0 || ncgx >= this._options.cellWidth) {\n                    continue;\n                }\n                if (ncgy < 0 || ncgy >= this._options.cellHeight) {\n                    continue;\n                }\n                room = this.rooms[cgx][cgy];\n                if (room[\"connections\"].length > 0) {\n                    // as long as this room doesn't already coonect to me, we are ok with it.\n                    if (room[\"connections\"][0][0] == ncgx && room[\"connections\"][0][1] == ncgy) {\n                        break;\n                    }\n                }\n                otherRoom = this.rooms[ncgx][ncgy];\n                if (otherRoom[\"connections\"].length == 0) {\n                    otherRoom[\"connections\"].push([cgx, cgy]);\n                    this.connectedCells.push([ncgx, ncgy]);\n                    cgx = ncgx;\n                    cgy = ncgy;\n                    found = true;\n                }\n            } while (dirToCheck.length > 0 && found == false);\n        } while (dirToCheck.length > 0);\n    }\n    _connectUnconnectedRooms() {\n        //While there are unconnected rooms, try to connect them to a random connected neighbor\n        //(if a room has no connected neighbors yet, just keep cycling, you'll fill out to it eventually).\n        let cw = this._options.cellWidth;\n        let ch = this._options.cellHeight;\n        this.connectedCells = RNG.shuffle(this.connectedCells);\n        let room;\n        let otherRoom;\n        let validRoom;\n        for (let i = 0; i < this._options.cellWidth; i++) {\n            for (let j = 0; j < this._options.cellHeight; j++) {\n                room = this.rooms[i][j];\n                if (room[\"connections\"].length == 0) {\n                    let directions = [0, 2, 4, 6];\n                    directions = RNG.shuffle(directions);\n                    validRoom = false;\n                    do {\n                        let dirIdx = directions.pop();\n                        let newI = i + DIRS[8][dirIdx][0];\n                        let newJ = j + DIRS[8][dirIdx][1];\n                        if (newI < 0 || newI >= cw || newJ < 0 || newJ >= ch) {\n                            continue;\n                        }\n                        otherRoom = this.rooms[newI][newJ];\n                        validRoom = true;\n                        if (otherRoom[\"connections\"].length == 0) {\n                            break;\n                        }\n                        for (let k = 0; k < otherRoom[\"connections\"].length; k++) {\n                            if (otherRoom[\"connections\"][k][0] == i && otherRoom[\"connections\"][k][1] == j) {\n                                validRoom = false;\n                                break;\n                            }\n                        }\n                        if (validRoom) {\n                            break;\n                        }\n                    } while (directions.length);\n                    if (validRoom) {\n                        room[\"connections\"].push([otherRoom[\"cellx\"], otherRoom[\"celly\"]]);\n                    }\n                    else {\n                        console.log(\"-- Unable to connect room.\");\n                    }\n                }\n            }\n        }\n    }\n    _createRandomRoomConnections() {\n        // Empty for now.\n    }\n    _createRooms() {\n        let w = this._width;\n        let h = this._height;\n        let cw = this._options.cellWidth;\n        let ch = this._options.cellHeight;\n        let cwp = Math.floor(this._width / cw);\n        let chp = Math.floor(this._height / ch);\n        let roomw;\n        let roomh;\n        let roomWidth = this._options[\"roomWidth\"];\n        let roomHeight = this._options[\"roomHeight\"];\n        let sx;\n        let sy;\n        let otherRoom;\n        for (let i = 0; i < cw; i++) {\n            for (let j = 0; j < ch; j++) {\n                sx = cwp * i;\n                sy = chp * j;\n                if (sx == 0) {\n                    sx = 1;\n                }\n                if (sy == 0) {\n                    sy = 1;\n                }\n                roomw = RNG.getUniformInt(roomWidth[0], roomWidth[1]);\n                roomh = RNG.getUniformInt(roomHeight[0], roomHeight[1]);\n                if (j > 0) {\n                    otherRoom = this.rooms[i][j - 1];\n                    while (sy - (otherRoom[\"y\"] + otherRoom[\"height\"]) < 3) {\n                        sy++;\n                    }\n                }\n                if (i > 0) {\n                    otherRoom = this.rooms[i - 1][j];\n                    while (sx - (otherRoom[\"x\"] + otherRoom[\"width\"]) < 3) {\n                        sx++;\n                    }\n                }\n                let sxOffset = Math.round(RNG.getUniformInt(0, cwp - roomw) / 2);\n                let syOffset = Math.round(RNG.getUniformInt(0, chp - roomh) / 2);\n                while (sx + sxOffset + roomw >= w) {\n                    if (sxOffset) {\n                        sxOffset--;\n                    }\n                    else {\n                        roomw--;\n                    }\n                }\n                while (sy + syOffset + roomh >= h) {\n                    if (syOffset) {\n                        syOffset--;\n                    }\n                    else {\n                        roomh--;\n                    }\n                }\n                sx = sx + sxOffset;\n                sy = sy + syOffset;\n                this.rooms[i][j][\"x\"] = sx;\n                this.rooms[i][j][\"y\"] = sy;\n                this.rooms[i][j][\"width\"] = roomw;\n                this.rooms[i][j][\"height\"] = roomh;\n                for (let ii = sx; ii < sx + roomw; ii++) {\n                    for (let jj = sy; jj < sy + roomh; jj++) {\n                        this.map[ii][jj] = 0;\n                    }\n                }\n            }\n        }\n    }\n    _getWallPosition(aRoom, aDirection) {\n        let rx;\n        let ry;\n        let door;\n        if (aDirection == 1 || aDirection == 3) {\n            rx = RNG.getUniformInt(aRoom[\"x\"] + 1, aRoom[\"x\"] + aRoom[\"width\"] - 2);\n            if (aDirection == 1) {\n                ry = aRoom[\"y\"] - 2;\n                door = ry + 1;\n            }\n            else {\n                ry = aRoom[\"y\"] + aRoom[\"height\"] + 1;\n                door = ry - 1;\n            }\n            this.map[rx][door] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.\n        }\n        else {\n            ry = RNG.getUniformInt(aRoom[\"y\"] + 1, aRoom[\"y\"] + aRoom[\"height\"] - 2);\n            if (aDirection == 2) {\n                rx = aRoom[\"x\"] + aRoom[\"width\"] + 1;\n                door = rx - 1;\n            }\n            else {\n                rx = aRoom[\"x\"] - 2;\n                door = rx + 1;\n            }\n            this.map[door][ry] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.\n        }\n        return [rx, ry];\n    }\n    _drawCorridor(startPosition, endPosition) {\n        let xOffset = endPosition[0] - startPosition[0];\n        let yOffset = endPosition[1] - startPosition[1];\n        let xpos = startPosition[0];\n        let ypos = startPosition[1];\n        let tempDist;\n        let xDir;\n        let yDir;\n        let move; // 2 element array, element 0 is the direction, element 1 is the total value to move.\n        let moves = []; // a list of 2 element arrays\n        let xAbs = Math.abs(xOffset);\n        let yAbs = Math.abs(yOffset);\n        let percent = RNG.getUniform(); // used to split the move at different places along the long axis\n        let firstHalf = percent;\n        let secondHalf = 1 - percent;\n        xDir = xOffset > 0 ? 2 : 6;\n        yDir = yOffset > 0 ? 4 : 0;\n        if (xAbs < yAbs) {\n            // move firstHalf of the y offset\n            tempDist = Math.ceil(yAbs * firstHalf);\n            moves.push([yDir, tempDist]);\n            // move all the x offset\n            moves.push([xDir, xAbs]);\n            // move sendHalf of the  y offset\n            tempDist = Math.floor(yAbs * secondHalf);\n            moves.push([yDir, tempDist]);\n        }\n        else {\n            //  move firstHalf of the x offset\n            tempDist = Math.ceil(xAbs * firstHalf);\n            moves.push([xDir, tempDist]);\n            // move all the y offset\n            moves.push([yDir, yAbs]);\n            // move secondHalf of the x offset.\n            tempDist = Math.floor(xAbs * secondHalf);\n            moves.push([xDir, tempDist]);\n        }\n        this.map[xpos][ypos] = 0;\n        while (moves.length > 0) {\n            move = moves.pop();\n            while (move[1] > 0) {\n                xpos += DIRS[8][move[0]][0];\n                ypos += DIRS[8][move[0]][1];\n                this.map[xpos][ypos] = 0;\n                move[1] = move[1] - 1;\n            }\n        }\n    }\n    _createCorridors() {\n        // Draw Corridors between connected rooms\n        let cw = this._options.cellWidth;\n        let ch = this._options.cellHeight;\n        let room;\n        let connection;\n        let otherRoom;\n        let wall;\n        let otherWall;\n        for (let i = 0; i < cw; i++) {\n            for (let j = 0; j < ch; j++) {\n                room = this.rooms[i][j];\n                for (let k = 0; k < room[\"connections\"].length; k++) {\n                    connection = room[\"connections\"][k];\n                    otherRoom = this.rooms[connection[0]][connection[1]];\n                    // figure out what wall our corridor will start one.\n                    // figure out what wall our corridor will end on.\n                    if (otherRoom[\"cellx\"] > room[\"cellx\"]) {\n                        wall = 2;\n                        otherWall = 4;\n                    }\n                    else if (otherRoom[\"cellx\"] < room[\"cellx\"]) {\n                        wall = 4;\n                        otherWall = 2;\n                    }\n                    else if (otherRoom[\"celly\"] > room[\"celly\"]) {\n                        wall = 3;\n                        otherWall = 1;\n                    }\n                    else {\n                        wall = 1;\n                        otherWall = 3;\n                    }\n                    this._drawCorridor(this._getWallPosition(room, wall), this._getWallPosition(otherRoom, otherWall));\n                }\n            }\n        }\n    }\n}\n","import Arena from \"./arena.js\";\nimport Uniform from \"./uniform.js\";\nimport Cellular from \"./cellular.js\";\nimport Digger from \"./digger.js\";\nimport EllerMaze from \"./ellermaze.js\";\nimport DividedMaze from \"./dividedmaze.js\";\nimport IceyMaze from \"./iceymaze.js\";\nimport Rogue from \"./rogue.js\";\nexport default { Arena, Uniform, Cellular, Digger, EllerMaze, DividedMaze, IceyMaze, Rogue };\n","export default \"__VITE_ASSET__CjK8Ah_G__\"","export function generateAutoLayerTiles(\n  intGridCsv,\n  autoRuleGroups,\n  gridWidth,\n  gridHeight,\n  tileSize,\n  spritesheet\n) {\n  const autoLayerTiles = [];\n\n  // Obtener el valor de una celda en intGridCsv con manejo de límites\n  function getCell(x, y) {\n    if (x < 0 || x >= gridWidth || y < 0 || y >= gridHeight) {\n      return 1; // Valor por defecto para celdas fuera de los límites\n    }\n    return intGridCsv[y * gridWidth + x];\n  }\n\n  // Iterar sobre cada celda de la cuadrícula\n  for (let y = 0; y < gridHeight; y++) {\n    for (let x = 0; x < gridWidth; x++) {\n\n      // Aplicar reglas de auto-tileado\n      for (const ruleGroup of autoRuleGroups) {\n        if (!ruleGroup.active) continue;\n\n        for (const rule of ruleGroup.rules) {\n          if (!rule.active) continue;\n\n          // Verificar si la regla coincide con el patrón en la posición actual\n          let match = true;\n\n          let _pattern = [];\n          let _rulepat = [];\n          for (let py = 0; py < rule.size; py++) {\n            for (let px = 0; px < rule.size; px++) {\n              const patternValue = rule.pattern[py * rule.size + px];\n              const neighborValue = getCell(\n                x + (px - Math.floor(rule.size / 2)),\n                y + py - Math.floor(rule.size / 2)\n              );\n              _pattern.push(neighborValue);\n              _rulepat.push(patternValue);\n              if (\n                (patternValue == -1 && neighborValue == 1) ||\n                (patternValue == 1 && neighborValue == 0)\n              ) {\n                match = false;\n                break;\n              }\n            }\n            if (!match) break;\n          }\n          // for DEBUG\n          // if (match) {\n          //   console.log(\"--- \", x, y, \" tile \", rule.tileRectsIds[0][0]);\n          //   console.table({\n          //     orig: rule.pattern,\n          //     evaluated: _rulepat,\n          //     rpat: _pattern,\n          //   });\n          // }\n\n          if (match) {\n            // TODO: Seleccionar un tile aleatorio si hay varias opciones\n            const tileRectId = rule.tileRectsIds[0]; // Suponiendo una selección simple\n\n            // Calcular posición en píxeles\n            const px = x * tileSize;\n            const py = y * tileSize;\n\n            autoLayerTiles.push({\n              px: [px, py],\n              src: [\n                spritesheet.sprites[tileRectId].sourceView.x,\n                spritesheet.sprites[tileRectId].sourceView.y,\n              ],\n              f: 0,\n              t: tileRectId,\n              d: [x, y],\n              a: 1, // Alpha\n            });\n\n            // Salir del loop si se aplicó una regla\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  return autoLayerTiles;\n}\n","import { LdtkResource } from \"@excaliburjs/plugin-ldtk\";\nimport { Map, RNG } from \"rot-js\";\nimport vsl0_map from \"./assets/maps/vsm0.ldtk?url\";\n//import vsl0_level from \"./assets/maps/vsm0/Level_0.ldtkl?url\";\nimport { generateAutoLayerTiles } from \"./autolayer\";\n\n\nasync function calcAutoLayer(intGridCsv, mapWith, mapHeight, tileSize, spritesheet) {\n  const response = await fetch(vsl0_map);\n  const data = await response.json();\n  const rules = data.defs.layers[0].autoRuleGroups;\n  const autoLayerTiles = generateAutoLayerTiles(intGridCsv, rules, mapWith, mapHeight, tileSize, spritesheet);\n  return autoLayerTiles;\n}\n\nexport class AutoMap extends LdtkResource {\n  constructor(resource, options) {\n    super(resource, options);\n  }\n  async retile(seed = 0) {\n    const tilemap = this.getIntGridLayers()[0].tilemap;\n    const tileset = this.getIntGridLayers()[0].tileset;\n    window.tileset = tileset\n    const w = tilemap.columns;\n    const h = tilemap.rows;\n    RNG.setSeed(seed)\n    const map = new Map.Uniform(w, h);\n    const intGridCsv = []\n    function pushTile(x, y, solid) {\n      tilemap.tiles[x + y * w].solid = solid;\n      intGridCsv[x + y * w] = solid ? 1 : 0;\n    }\n    map.create(pushTile);\n\n    const ldtkLayer = this.getIntGridLayers()[0].ldtkLayer;\n\n    //const origIntGridCsv = ldtkLayer.intGridCsv;  // Mapa original\n    this.openSides(map, pushTile)\n\n    const autoLayerTiles = await calcAutoLayer(intGridCsv, tilemap.columns, tilemap.rows, tilemap.tileWidth, tileset.spritesheet);\n    \n    // Clear previous tiles\n    tilemap.tiles.forEach((tile) => {\n      tile.clearGraphics();\n    });\n\n    // Autotile from ldtk-plugin code\n    if (ldtkLayer.__tilesetDefUid) {\n      const tileset = this.tilesets.get(ldtkLayer.__tilesetDefUid);\n      for (let i = 0; i < autoLayerTiles.length; i++) {\n        const tile = autoLayerTiles[i];\n        const xCoord = Math.floor(tile.px[0] / ldtkLayer.__gridSize);\n        const yCoord = Math.floor(tile.px[1] / ldtkLayer.__gridSize);\n        const exTile = tilemap.getTile(xCoord, yCoord);\n        if (exTile && tileset) {\n          const tsxCoord = Math.floor(\n            (tile.src[0] - (tileset.ldtkTileset.padding ?? 0)) /\n              (tileset.ldtkTileset.tileGridSize +\n                (tileset.ldtkTileset.spacing ?? 0))\n          );\n          const tsyCoord = Math.floor(\n            (tile.src[1] - (tileset.ldtkTileset.padding ?? 0)) /\n              (tileset.ldtkTileset.tileGridSize +\n                (tileset.ldtkTileset.spacing ?? 0))\n          );\n          // Bit 0 toggles x flip\n          // Bit 1 toggles 1 flip\n          // Examples: f=0 (no flip), f=1 (X flip only), f=2 (Y flip only), f=3 (both flips)\n          const flipHorizontal = !!(tile.f & 0b01);\n          const flipVertical = !!(tile.f & 0b10);\n          let sprite = tileset.spritesheet.getSprite(tsxCoord, tsyCoord);\n          if (flipHorizontal || flipVertical) {\n            sprite = sprite.clone();\n            sprite.flipHorizontal = flipHorizontal;\n            sprite.flipVertical = flipVertical;\n          }\n          if (sprite) {\n            exTile.addGraphic(sprite);\n          } else {\n            console.error(\n              \"Could not find sprite in LDtk spritesheet at\",\n              tsxCoord,\n              tsyCoord\n            );\n          }\n        }\n      }\n    }\n    return map\n  }\n  openSides(map, pushTile) {\n    \n    const rooms = map.getRooms()\n    rooms.sort((r1, r2)=> r1.getLeft() < r2.getLeft()? -1:1)\n    const left = rooms[0]\n    const right = rooms[rooms.length - 1]\n\n    for(let x=left.getLeft(); x >= 0; x--) {\n      pushTile(x, left.getBottom(), 0)\n    }\n    \n    for(let x=right.getRight(); x < map._width; x++) {\n      pushTile(x, right.getBottom(), 0)\n    }\n\n  }\n}\n","export default \"__VITE_ASSET__BvYuIcl0__\"","export default \"__VITE_ASSET__CxjztYvo__\"","export default \"__VITE_ASSET__D3gpGJuu__\"","export default \"__VITE_ASSET__uCSCyvzE__\"","export default \"__VITE_ASSET__B3wVRfE6__\"","export default \"__VITE_ASSET__DpmvsCoF__\"","export default \"__VITE_ASSET__SkNHabxT__\"","export default \"__VITE_ASSET__j7jKmLXN__\"","export default \"__VITE_ASSET__Bnk6vpF7__\"","export default \"__VITE_ASSET__CCvAuY3n__\"","export default \"__VITE_ASSET__C$aHwYmE__\"","export default \"__VITE_ASSET__RNlkZyTk__\"","export default \"__VITE_ASSET__C_OA9nOO__\"","export default \"__VITE_ASSET__C4dwO_jh__\"","export default \"__VITE_ASSET__DnuXlTO___\"","export default \"__VITE_ASSET__KgEbxLjE__\"","export default \"__VITE_ASSET__B5JTFOkT__\"","export default \"__VITE_ASSET__DsrQHO2u__\"","export default \"__VITE_ASSET__COL$$0Zp__\"","export default \"__VITE_ASSET__CghdKJaE__\"","export default \"__VITE_ASSET__CsPQENBT__\"","export default \"__VITE_ASSET__CwsDzzFM__\"","export default \"__VITE_ASSET__CFBN2RTw__\"","export default \"__VITE_ASSET__CJRgWwBI__\"","export default \"__VITE_ASSET__Bu3$uIwv__\"","export default \"__VITE_ASSET__C$dACb13__\"","export default \"__VITE_ASSET__KY$tevP5__\"","export default \"__VITE_ASSET__DTYQsqWc__\"","export default \"__VITE_ASSET__O4U_3T9a__\"","import * as ex from \"excalibur\";\nimport { AutoMap } from \"./automap\";\n\nimport idleMan0 from \"./assets/L/obj_Idle000.png\";\nimport idleMan1 from \"./assets/L/obj_Idle001.png\";\nimport idleMan2 from \"./assets/L/obj_Idle002.png\";\nimport idleMan3 from \"./assets/L/obj_Idle003.png\";\nimport walkMan0 from \"./assets/L/obj_Walk000.png\";\nimport walkMan1 from \"./assets/L/obj_Walk001.png\";\nimport walkMan2 from \"./assets/L/obj_Walk002.png\";\nimport walkMan3 from \"./assets/L/obj_Walk003.png\";\nimport walkMan4 from \"./assets/L/obj_Walk004.png\";\nimport walkMan5 from \"./assets/L/obj_Walk005.png\";\nimport walkMan6 from \"./assets/L/obj_Walk006.png\";\nimport walkMan7 from \"./assets/L/obj_Walk007.png\";\nimport runMan0 from \"./assets/L/obj_Run000.png\";\nimport runMan1 from \"./assets/L/obj_Run001.png\";\nimport runMan2 from \"./assets/L/obj_Run002.png\";\nimport runMan3 from \"./assets/L/obj_Run003.png\";\nimport runMan4 from \"./assets/L/obj_Run004.png\";\nimport runMan5 from \"./assets/L/obj_Run005.png\";\nimport runMan6 from \"./assets/L/obj_Run006.png\";\nimport runMan7 from \"./assets/L/obj_Run007.png\";\nimport flyMan0 from \"./assets/L/obj_Flying000.png\";\nimport flyMan1 from \"./assets/L/obj_Flying001.png\";\nimport coin from \"./assets/coins.png\";\nimport portals from \"./assets/portalsSpriteSheet.png\"\nimport caverna from \"./assets/maps/Cavernas_by_Adam_Saltsman.png\";\nimport scifitm from \"./assets/maps/scifi_platformTiles_32x32.png\";\nimport vsl0_level from \"./assets/maps/vsm0/Level_0.ldtkl?url\";\nimport vsl0_map from \"./assets/maps/vsm0.ldtk?url\";\nimport cityBackFull from \"./assets/back/city/10.png\";\n\n// sonidos\n\nimport enter from \"./assets/sounds/elemental-magic-spell-impact-outgoing-228342.mp3\";\n\n\nexport const dsml1 = new AutoMap(vsl0_map, {\n  pathMap: [\n    { path: \"vsm0/Level_0.ldtk\", output: vsl0_level },\n    { path: \"Cavernas_by_Adam_Saltsman.png\", output: caverna },\n    { path: \"scifi_platformTiles_32x32.png\", output: scifitm },\n  ],\n});\n\nexport const sounds = {\n  enter : new ex.Sound(enter),\n};\n\n\nexport const resources = [\n  idleMan0,\n  idleMan1,\n  idleMan2,\n  idleMan3,\n  walkMan0,\n  walkMan1,\n  walkMan2,\n  walkMan3,\n  walkMan4,\n  walkMan5,\n  walkMan6,\n  walkMan7,\n  runMan0,\n  runMan1,\n  runMan2,\n  runMan3,\n  runMan4,\n  runMan5,\n  runMan6,\n  runMan7,\n  flyMan0,\n  flyMan1,\n  caverna,\n  cityBackFull,\n  scifitm,\n  coin,\n  portals,\n].map((resource) => new ex.ImageSource(resource));\n\nfunction resourceByPath(path) {\n  return resources.find((res) => res.path === path);\n}\n\nconst click = 100;\nexport const idleMan = new ex.Animation({\n  frames: [idleMan0, idleMan1, idleMan2, idleMan3, idleMan2, idleMan1].map(\n    (res) => ({\n      graphic: resourceByPath(res).toSprite(),\n      duration: click,\n    })\n  ),\n});\nexport const walkMan = new ex.Animation({\n  frames: [\n    walkMan0,\n    walkMan1,\n    walkMan2,\n    walkMan3,\n    walkMan4,\n    walkMan5,\n    walkMan6,\n    walkMan7,\n  ].map((res) => ({\n    graphic: resourceByPath(res).toSprite(),\n    duration: click,\n  })),\n});\nexport const runMan = new ex.Animation({\n  frames: [\n    runMan0,\n    runMan1,\n    runMan2,\n    runMan3,\n    runMan4,\n    runMan5,\n    runMan6,\n    runMan7,\n  ].map((res) => ({\n    graphic: resourceByPath(res).toSprite(),\n    duration: click,\n  })),\n});\nexport const flyMan = new ex.Animation({\n  frames: [flyMan0, flyMan1].map((res) => ({\n    graphic: resourceByPath(res).toSprite(),\n    duration: click,\n  })),\n});\n\nconst coinSheet = ex.SpriteSheet.fromImageSource({\n  image: resourceByPath(coin),\n  grid: {\n    rows: 1,\n    columns: 8,\n    spriteWidth: 16,\n    spriteHeight: 16,\n  },\n});\nconst portalSheet = ex.SpriteSheet.fromImageSource({\n  image: resourceByPath(portals),\n  grid: {\n    rows: 4,\n    columns: 4,\n    spriteWidth: 32,\n    spriteHeight: 48,\n  },\n});\n\nexport const coinAnim = ex.Animation.fromSpriteSheet(coinSheet, ex.range(0, 7), 200);\nexport const portalAnims = [\n  ex.Animation.fromSpriteSheet(portalSheet, ex.range(0, 3), 100),\n  ex.Animation.fromSpriteSheet(portalSheet, ex.range(4, 7), 100),\n  ex.Animation.fromSpriteSheet(portalSheet, ex.range(8, 11), 100),\n  ex.Animation.fromSpriteSheet(portalSheet, ex.range(12, 15), 100)\n]\n\nexport const cityBack = resourceByPath(cityBackFull).toSprite();\n","export const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\nexport function addPermission() {\n  if (\n    typeof DeviceMotionEvent !== \"undefined\" &&\n    typeof DeviceMotionEvent.requestPermission === \"function\"\n  ) {\n    alert(\"El soporte de sensor de movimiento es experimental. Debes otorgar permiso para activar.\");\n    DeviceMotionEvent.requestPermission()\n      .then((response) => {\n          console.log(\"Permission status:\", response);\n      })\n      .catch(console.error);\n  } else {\n      // do nothing\n  }\n}\n","export const VERSION = '0.9.1'; // x-release-please-version\n//# sourceMappingURL=version.mjs.map","export let auto = false;\nexport let kind = undefined;\nexport let fetch = undefined;\nexport let Request = undefined;\nexport let Response = undefined;\nexport let Headers = undefined;\nexport let FormData = undefined;\nexport let Blob = undefined;\nexport let File = undefined;\nexport let ReadableStream = undefined;\nexport let getMultipartRequestOptions = undefined;\nexport let getDefaultAgent = undefined;\nexport let fileFromPath = undefined;\nexport let isFsReadStream = undefined;\nexport function setShims(shims, options = { auto: false }) {\n    if (auto) {\n        throw new Error(`you must \\`import 'groq-sdk/shims/${shims.kind}'\\` before importing anything else from groq-sdk`);\n    }\n    if (kind) {\n        throw new Error(`can't \\`import 'groq-sdk/shims/${shims.kind}'\\` after \\`import 'groq-sdk/shims/${kind}'\\``);\n    }\n    auto = options.auto;\n    kind = shims.kind;\n    fetch = shims.fetch;\n    Request = shims.Request;\n    Response = shims.Response;\n    Headers = shims.Headers;\n    FormData = shims.FormData;\n    Blob = shims.Blob;\n    File = shims.File;\n    ReadableStream = shims.ReadableStream;\n    getMultipartRequestOptions = shims.getMultipartRequestOptions;\n    getDefaultAgent = shims.getDefaultAgent;\n    fileFromPath = shims.fileFromPath;\n    isFsReadStream = shims.isFsReadStream;\n}\n//# sourceMappingURL=registry.mjs.map","/**\n * Disclaimer: modules in _shims aren't intended to be imported by SDK users.\n */\nexport class MultipartBody {\n    constructor(body) {\n        this.body = body;\n    }\n    get [Symbol.toStringTag]() {\n        return 'MultipartBody';\n    }\n}\n//# sourceMappingURL=MultipartBody.mjs.map","import { MultipartBody } from \"./MultipartBody.mjs\";\nexport function getRuntime({ manuallyImported } = {}) {\n    const recommendation = manuallyImported ?\n        `You may need to use polyfills`\n        : `Add one of these imports before your first \\`import … from 'groq-sdk'\\`:\n- \\`import 'groq-sdk/shims/node'\\` (if you're running on Node)\n- \\`import 'groq-sdk/shims/web'\\` (otherwise)\n`;\n    let _fetch, _Request, _Response, _Headers;\n    try {\n        // @ts-ignore\n        _fetch = fetch;\n        // @ts-ignore\n        _Request = Request;\n        // @ts-ignore\n        _Response = Response;\n        // @ts-ignore\n        _Headers = Headers;\n    }\n    catch (error) {\n        throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);\n    }\n    return {\n        kind: 'web',\n        fetch: _fetch,\n        Request: _Request,\n        Response: _Response,\n        Headers: _Headers,\n        FormData: \n        // @ts-ignore\n        typeof FormData !== 'undefined' ? FormData : (class FormData {\n            // @ts-ignore\n            constructor() {\n                throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);\n            }\n        }),\n        Blob: typeof Blob !== 'undefined' ? Blob : (class Blob {\n            constructor() {\n                throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);\n            }\n        }),\n        File: \n        // @ts-ignore\n        typeof File !== 'undefined' ? File : (class File {\n            // @ts-ignore\n            constructor() {\n                throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);\n            }\n        }),\n        ReadableStream: \n        // @ts-ignore\n        typeof ReadableStream !== 'undefined' ? ReadableStream : (class ReadableStream {\n            // @ts-ignore\n            constructor() {\n                throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);\n            }\n        }),\n        getMultipartRequestOptions: async (\n        // @ts-ignore\n        form, opts) => ({\n            ...opts,\n            body: new MultipartBody(form),\n        }),\n        getDefaultAgent: (url) => undefined,\n        fileFromPath: () => {\n            throw new Error('The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads');\n        },\n        isFsReadStream: (value) => false,\n    };\n}\n//# sourceMappingURL=web-runtime.mjs.map","/**\n * Disclaimer: modules in _shims aren't intended to be imported by SDK users.\n */\nimport * as shims from './registry.mjs';\nimport * as auto from 'groq-sdk/_shims/auto/runtime';\nif (!shims.kind) shims.setShims(auto.getRuntime(), { auto: true });\nexport * from './registry.mjs';\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { castToError } from \"./core.mjs\";\nexport class GroqError extends Error {\n}\nexport class APIError extends GroqError {\n    constructor(status, error, message, headers) {\n        super(`${APIError.makeMessage(status, error, message)}`);\n        this.status = status;\n        this.headers = headers;\n        this.error = error;\n    }\n    static makeMessage(status, error, message) {\n        const msg = error?.message ?\n            typeof error.message === 'string' ?\n                error.message\n                : JSON.stringify(error.message)\n            : error ? JSON.stringify(error)\n                : message;\n        if (status && msg) {\n            return `${status} ${msg}`;\n        }\n        if (status) {\n            return `${status} status code (no body)`;\n        }\n        if (msg) {\n            return msg;\n        }\n        return '(no status code or body)';\n    }\n    static generate(status, errorResponse, message, headers) {\n        if (!status || !headers) {\n            return new APIConnectionError({ message, cause: castToError(errorResponse) });\n        }\n        const error = errorResponse;\n        if (status === 400) {\n            return new BadRequestError(status, error, message, headers);\n        }\n        if (status === 401) {\n            return new AuthenticationError(status, error, message, headers);\n        }\n        if (status === 403) {\n            return new PermissionDeniedError(status, error, message, headers);\n        }\n        if (status === 404) {\n            return new NotFoundError(status, error, message, headers);\n        }\n        if (status === 409) {\n            return new ConflictError(status, error, message, headers);\n        }\n        if (status === 422) {\n            return new UnprocessableEntityError(status, error, message, headers);\n        }\n        if (status === 429) {\n            return new RateLimitError(status, error, message, headers);\n        }\n        if (status >= 500) {\n            return new InternalServerError(status, error, message, headers);\n        }\n        return new APIError(status, error, message, headers);\n    }\n}\nexport class APIUserAbortError extends APIError {\n    constructor({ message } = {}) {\n        super(undefined, undefined, message || 'Request was aborted.', undefined);\n    }\n}\nexport class APIConnectionError extends APIError {\n    constructor({ message, cause }) {\n        super(undefined, undefined, message || 'Connection error.', undefined);\n        // in some environments the 'cause' property is already declared\n        // @ts-ignore\n        if (cause)\n            this.cause = cause;\n    }\n}\nexport class APIConnectionTimeoutError extends APIConnectionError {\n    constructor({ message } = {}) {\n        super({ message: message ?? 'Request timed out.' });\n    }\n}\nexport class BadRequestError extends APIError {\n}\nexport class AuthenticationError extends APIError {\n}\nexport class PermissionDeniedError extends APIError {\n}\nexport class NotFoundError extends APIError {\n}\nexport class ConflictError extends APIError {\n}\nexport class UnprocessableEntityError extends APIError {\n}\nexport class RateLimitError extends APIError {\n}\nexport class InternalServerError extends APIError {\n}\n//# sourceMappingURL=error.mjs.map","import { ReadableStream } from \"../_shims/index.mjs\";\nimport { GroqError } from \"../error.mjs\";\nimport { APIError } from \"../error.mjs\";\nexport class Stream {\n    constructor(iterator, controller) {\n        this.iterator = iterator;\n        this.controller = controller;\n    }\n    static fromSSEResponse(response, controller) {\n        let consumed = false;\n        const decoder = new SSEDecoder();\n        async function* iterMessages() {\n            if (!response.body) {\n                controller.abort();\n                throw new GroqError(`Attempted to iterate over a response with no body`);\n            }\n            const lineDecoder = new LineDecoder();\n            const iter = readableStreamAsyncIterable(response.body);\n            for await (const chunk of iter) {\n                for (const line of lineDecoder.decode(chunk)) {\n                    const sse = decoder.decode(line);\n                    if (sse)\n                        yield sse;\n                }\n            }\n            for (const line of lineDecoder.flush()) {\n                const sse = decoder.decode(line);\n                if (sse)\n                    yield sse;\n            }\n        }\n        async function* iterator() {\n            if (consumed) {\n                throw new Error('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n            }\n            consumed = true;\n            let done = false;\n            try {\n                for await (const sse of iterMessages()) {\n                    if (done)\n                        continue;\n                    if (sse.data.startsWith('[DONE]')) {\n                        done = true;\n                        continue;\n                    }\n                    if (sse.event === null || sse.event === 'error') {\n                        let data;\n                        try {\n                            data = JSON.parse(sse.data);\n                        }\n                        catch (e) {\n                            console.error(`Could not parse message into JSON:`, sse.data);\n                            console.error(`From chunk:`, sse.raw);\n                            throw e;\n                        }\n                        if (data && data.error) {\n                            throw new APIError(data.error.status_code, data.error, data.error.message, undefined);\n                        }\n                        yield data;\n                    }\n                }\n                done = true;\n            }\n            catch (e) {\n                // If the user calls `stream.controller.abort()`, we should exit without throwing.\n                if (e instanceof Error && e.name === 'AbortError')\n                    return;\n                throw e;\n            }\n            finally {\n                // If the user `break`s, abort the ongoing request.\n                if (!done)\n                    controller.abort();\n            }\n        }\n        return new Stream(iterator, controller);\n    }\n    /**\n     * Generates a Stream from a newline-separated ReadableStream\n     * where each item is a JSON value.\n     */\n    static fromReadableStream(readableStream, controller) {\n        let consumed = false;\n        async function* iterLines() {\n            const lineDecoder = new LineDecoder();\n            const iter = readableStreamAsyncIterable(readableStream);\n            for await (const chunk of iter) {\n                for (const line of lineDecoder.decode(chunk)) {\n                    yield line;\n                }\n            }\n            for (const line of lineDecoder.flush()) {\n                yield line;\n            }\n        }\n        async function* iterator() {\n            if (consumed) {\n                throw new Error('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n            }\n            consumed = true;\n            let done = false;\n            try {\n                for await (const line of iterLines()) {\n                    if (done)\n                        continue;\n                    if (line)\n                        yield JSON.parse(line);\n                }\n                done = true;\n            }\n            catch (e) {\n                // If the user calls `stream.controller.abort()`, we should exit without throwing.\n                if (e instanceof Error && e.name === 'AbortError')\n                    return;\n                throw e;\n            }\n            finally {\n                // If the user `break`s, abort the ongoing request.\n                if (!done)\n                    controller.abort();\n            }\n        }\n        return new Stream(iterator, controller);\n    }\n    [Symbol.asyncIterator]() {\n        return this.iterator();\n    }\n    /**\n     * Splits the stream into two streams which can be\n     * independently read from at different speeds.\n     */\n    tee() {\n        const left = [];\n        const right = [];\n        const iterator = this.iterator();\n        const teeIterator = (queue) => {\n            return {\n                next: () => {\n                    if (queue.length === 0) {\n                        const result = iterator.next();\n                        left.push(result);\n                        right.push(result);\n                    }\n                    return queue.shift();\n                },\n            };\n        };\n        return [\n            new Stream(() => teeIterator(left), this.controller),\n            new Stream(() => teeIterator(right), this.controller),\n        ];\n    }\n    /**\n     * Converts this stream to a newline-separated ReadableStream of\n     * JSON stringified values in the stream\n     * which can be turned back into a Stream with `Stream.fromReadableStream()`.\n     */\n    toReadableStream() {\n        const self = this;\n        let iter;\n        const encoder = new TextEncoder();\n        return new ReadableStream({\n            async start() {\n                iter = self[Symbol.asyncIterator]();\n            },\n            async pull(ctrl) {\n                try {\n                    const { value, done } = await iter.next();\n                    if (done)\n                        return ctrl.close();\n                    const bytes = encoder.encode(JSON.stringify(value) + '\\n');\n                    ctrl.enqueue(bytes);\n                }\n                catch (err) {\n                    ctrl.error(err);\n                }\n            },\n            async cancel() {\n                await iter.return?.();\n            },\n        });\n    }\n}\nclass SSEDecoder {\n    constructor() {\n        this.event = null;\n        this.data = [];\n        this.chunks = [];\n    }\n    decode(line) {\n        if (line.endsWith('\\r')) {\n            line = line.substring(0, line.length - 1);\n        }\n        if (!line) {\n            // empty line and we didn't previously encounter any messages\n            if (!this.event && !this.data.length)\n                return null;\n            const sse = {\n                event: this.event,\n                data: this.data.join('\\n'),\n                raw: this.chunks,\n            };\n            this.event = null;\n            this.data = [];\n            this.chunks = [];\n            return sse;\n        }\n        this.chunks.push(line);\n        if (line.startsWith(':')) {\n            return null;\n        }\n        let [fieldname, _, value] = partition(line, ':');\n        if (value.startsWith(' ')) {\n            value = value.substring(1);\n        }\n        if (fieldname === 'event') {\n            this.event = value;\n        }\n        else if (fieldname === 'data') {\n            this.data.push(value);\n        }\n        return null;\n    }\n}\n/**\n * A re-implementation of httpx's `LineDecoder` in Python that handles incrementally\n * reading lines from text.\n *\n * https://github.com/encode/httpx/blob/920333ea98118e9cf617f246905d7b202510941c/httpx/_decoders.py#L258\n */\nclass LineDecoder {\n    constructor() {\n        this.buffer = [];\n        this.trailingCR = false;\n    }\n    decode(chunk) {\n        let text = this.decodeText(chunk);\n        if (this.trailingCR) {\n            text = '\\r' + text;\n            this.trailingCR = false;\n        }\n        if (text.endsWith('\\r')) {\n            this.trailingCR = true;\n            text = text.slice(0, -1);\n        }\n        if (!text) {\n            return [];\n        }\n        const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || '');\n        let lines = text.split(LineDecoder.NEWLINE_REGEXP);\n        if (lines.length === 1 && !trailingNewline) {\n            this.buffer.push(lines[0]);\n            return [];\n        }\n        if (this.buffer.length > 0) {\n            lines = [this.buffer.join('') + lines[0], ...lines.slice(1)];\n            this.buffer = [];\n        }\n        if (!trailingNewline) {\n            this.buffer = [lines.pop() || ''];\n        }\n        return lines;\n    }\n    decodeText(bytes) {\n        if (bytes == null)\n            return '';\n        if (typeof bytes === 'string')\n            return bytes;\n        // Node:\n        if (typeof Buffer !== 'undefined') {\n            if (bytes instanceof Buffer) {\n                return bytes.toString();\n            }\n            if (bytes instanceof Uint8Array) {\n                return Buffer.from(bytes).toString();\n            }\n            throw new GroqError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global \"Buffer\" defined, which this library assumes to be Node. Please report this error.`);\n        }\n        // Browser\n        if (typeof TextDecoder !== 'undefined') {\n            if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {\n                this.textDecoder ?? (this.textDecoder = new TextDecoder('utf8'));\n                return this.textDecoder.decode(bytes);\n            }\n            throw new GroqError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);\n        }\n        throw new GroqError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);\n    }\n    flush() {\n        if (!this.buffer.length && !this.trailingCR) {\n            return [];\n        }\n        const lines = [this.buffer.join('')];\n        this.buffer = [];\n        this.trailingCR = false;\n        return lines;\n    }\n}\n// prettier-ignore\nLineDecoder.NEWLINE_CHARS = new Set(['\\n', '\\r', '\\x0b', '\\x0c', '\\x1c', '\\x1d', '\\x1e', '\\x85', '\\u2028', '\\u2029']);\nLineDecoder.NEWLINE_REGEXP = /\\r\\n|[\\n\\r\\x0b\\x0c\\x1c\\x1d\\x1e\\x85\\u2028\\u2029]/g;\nfunction partition(str, delimiter) {\n    const index = str.indexOf(delimiter);\n    if (index !== -1) {\n        return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];\n    }\n    return [str, '', ''];\n}\n/**\n * Most browsers don't yet have async iterable support for ReadableStream,\n * and Node has a very different way of reading bytes from its \"ReadableStream\".\n *\n * This polyfill was pulled from https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */\nexport function readableStreamAsyncIterable(stream) {\n    if (stream[Symbol.asyncIterator])\n        return stream;\n    const reader = stream.getReader();\n    return {\n        async next() {\n            try {\n                const result = await reader.read();\n                if (result?.done)\n                    reader.releaseLock(); // release lock when stream becomes closed\n                return result;\n            }\n            catch (e) {\n                reader.releaseLock(); // release lock when stream becomes errored\n                throw e;\n            }\n        },\n        async return() {\n            const cancelPromise = reader.cancel();\n            reader.releaseLock();\n            await cancelPromise;\n            return { done: true, value: undefined };\n        },\n        [Symbol.asyncIterator]() {\n            return this;\n        },\n    };\n}\n//# sourceMappingURL=streaming.mjs.map","import { FormData, File, getMultipartRequestOptions, isFsReadStream, } from \"./_shims/index.mjs\";\nexport { fileFromPath } from \"./_shims/index.mjs\";\nexport const isResponseLike = (value) => value != null &&\n    typeof value === 'object' &&\n    typeof value.url === 'string' &&\n    typeof value.blob === 'function';\nexport const isFileLike = (value) => value != null &&\n    typeof value === 'object' &&\n    typeof value.name === 'string' &&\n    typeof value.lastModified === 'number' &&\n    isBlobLike(value);\n/**\n * The BlobLike type omits arrayBuffer() because @types/node-fetch@^2.6.4 lacks it; but this check\n * adds the arrayBuffer() method type because it is available and used at runtime\n */\nexport const isBlobLike = (value) => value != null &&\n    typeof value === 'object' &&\n    typeof value.size === 'number' &&\n    typeof value.type === 'string' &&\n    typeof value.text === 'function' &&\n    typeof value.slice === 'function' &&\n    typeof value.arrayBuffer === 'function';\nexport const isUploadable = (value) => {\n    return isFileLike(value) || isResponseLike(value) || isFsReadStream(value);\n};\n/**\n * Helper for creating a {@link File} to pass to an SDK upload method from a variety of different data formats\n * @param value the raw content of the file.  Can be an {@link Uploadable}, {@link BlobLikePart}, or {@link AsyncIterable} of {@link BlobLikePart}s\n * @param {string=} name the name of the file. If omitted, toFile will try to determine a file name from bits if possible\n * @param {Object=} options additional properties\n * @param {string=} options.type the MIME type of the content\n * @param {number=} options.lastModified the last modified timestamp\n * @returns a {@link File} with the given properties\n */\nexport async function toFile(value, name, options) {\n    // If it's a promise, resolve it.\n    value = await value;\n    // If we've been given a `File` we don't need to do anything\n    if (isFileLike(value)) {\n        return value;\n    }\n    if (isResponseLike(value)) {\n        const blob = await value.blob();\n        name || (name = new URL(value.url).pathname.split(/[\\\\/]/).pop() ?? 'unknown_file');\n        // we need to convert the `Blob` into an array buffer because the `Blob` class\n        // that `node-fetch` defines is incompatible with the web standard which results\n        // in `new File` interpreting it as a string instead of binary data.\n        const data = isBlobLike(blob) ? [(await blob.arrayBuffer())] : [blob];\n        return new File(data, name, options);\n    }\n    const bits = await getBytes(value);\n    name || (name = getName(value) ?? 'unknown_file');\n    if (!options?.type) {\n        const type = bits[0]?.type;\n        if (typeof type === 'string') {\n            options = { ...options, type };\n        }\n    }\n    return new File(bits, name, options);\n}\nasync function getBytes(value) {\n    let parts = [];\n    if (typeof value === 'string' ||\n        ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.\n        value instanceof ArrayBuffer) {\n        parts.push(value);\n    }\n    else if (isBlobLike(value)) {\n        parts.push(await value.arrayBuffer());\n    }\n    else if (isAsyncIterableIterator(value) // includes Readable, ReadableStream, etc.\n    ) {\n        for await (const chunk of value) {\n            parts.push(chunk); // TODO, consider validating?\n        }\n    }\n    else {\n        throw new Error(`Unexpected data type: ${typeof value}; constructor: ${value?.constructor\n            ?.name}; props: ${propsForError(value)}`);\n    }\n    return parts;\n}\nfunction propsForError(value) {\n    const props = Object.getOwnPropertyNames(value);\n    return `[${props.map((p) => `\"${p}\"`).join(', ')}]`;\n}\nfunction getName(value) {\n    return (getStringFromMaybeBuffer(value.name) ||\n        getStringFromMaybeBuffer(value.filename) ||\n        // For fs.ReadStream\n        getStringFromMaybeBuffer(value.path)?.split(/[\\\\/]/).pop());\n}\nconst getStringFromMaybeBuffer = (x) => {\n    if (typeof x === 'string')\n        return x;\n    if (typeof Buffer !== 'undefined' && x instanceof Buffer)\n        return String(x);\n    return undefined;\n};\nconst isAsyncIterableIterator = (value) => value != null && typeof value === 'object' && typeof value[Symbol.asyncIterator] === 'function';\nexport const isMultipartBody = (body) => body && typeof body === 'object' && body.body && body[Symbol.toStringTag] === 'MultipartBody';\n/**\n * Returns a multipart/form-data request if any part of the given request body contains a File / Blob value.\n * Otherwise returns the request as is.\n */\nexport const maybeMultipartFormRequestOptions = async (opts) => {\n    if (!hasUploadableValue(opts.body))\n        return opts;\n    const form = await createForm(opts.body);\n    return getMultipartRequestOptions(form, opts);\n};\nexport const multipartFormRequestOptions = async (opts) => {\n    const form = await createForm(opts.body);\n    return getMultipartRequestOptions(form, opts);\n};\nexport const createForm = async (body) => {\n    const form = new FormData();\n    await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));\n    return form;\n};\nconst hasUploadableValue = (value) => {\n    if (isUploadable(value))\n        return true;\n    if (Array.isArray(value))\n        return value.some(hasUploadableValue);\n    if (value && typeof value === 'object') {\n        for (const k in value) {\n            if (hasUploadableValue(value[k]))\n                return true;\n        }\n    }\n    return false;\n};\nconst addFormValue = async (form, key, value) => {\n    if (value === undefined)\n        return;\n    if (value == null) {\n        throw new TypeError(`Received null for \"${key}\"; to pass null in FormData, you must use the string 'null'`);\n    }\n    // TODO: make nested formats configurable\n    if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n        form.append(key, String(value));\n    }\n    else if (isUploadable(value)) {\n        const file = await toFile(value);\n        form.append(key, file);\n    }\n    else if (Array.isArray(value)) {\n        await Promise.all(value.map((entry) => addFormValue(form, key + '[]', entry)));\n    }\n    else if (typeof value === 'object') {\n        await Promise.all(Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop)));\n    }\n    else {\n        throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`);\n    }\n};\n//# sourceMappingURL=uploads.mjs.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _AbstractPage_client;\nimport { VERSION } from \"./version.mjs\";\nimport { Stream } from \"./lib/streaming.mjs\";\nimport { GroqError, APIError, APIConnectionError, APIConnectionTimeoutError, APIUserAbortError, } from \"./error.mjs\";\nimport { kind as shimsKind, getDefaultAgent, fetch, } from \"./_shims/index.mjs\";\nimport { isBlobLike, isMultipartBody } from \"./uploads.mjs\";\nexport { maybeMultipartFormRequestOptions, multipartFormRequestOptions, createForm, } from \"./uploads.mjs\";\nasync function defaultParseResponse(props) {\n    const { response } = props;\n    if (props.options.stream) {\n        debug('response', response.status, response.url, response.headers, response.body);\n        // Note: there is an invariant here that isn't represented in the type system\n        // that if you set `stream: true` the response type must also be `Stream<T>`\n        if (props.options.__streamClass) {\n            return props.options.__streamClass.fromSSEResponse(response, props.controller);\n        }\n        return Stream.fromSSEResponse(response, props.controller);\n    }\n    // fetch refuses to read the body when the status code is 204.\n    if (response.status === 204) {\n        return null;\n    }\n    if (props.options.__binaryResponse) {\n        return response;\n    }\n    const contentType = response.headers.get('content-type');\n    const isJSON = contentType?.includes('application/json') || contentType?.includes('application/vnd.api+json');\n    if (isJSON) {\n        const json = await response.json();\n        debug('response', response.status, response.url, response.headers, json);\n        return json;\n    }\n    const text = await response.text();\n    debug('response', response.status, response.url, response.headers, text);\n    // TODO handle blob, arraybuffer, other content types, etc.\n    return text;\n}\n/**\n * A subclass of `Promise` providing additional helper methods\n * for interacting with the SDK.\n */\nexport class APIPromise extends Promise {\n    constructor(responsePromise, parseResponse = defaultParseResponse) {\n        super((resolve) => {\n            // this is maybe a bit weird but this has to be a no-op to not implicitly\n            // parse the response body; instead .then, .catch, .finally are overridden\n            // to parse the response\n            resolve(null);\n        });\n        this.responsePromise = responsePromise;\n        this.parseResponse = parseResponse;\n    }\n    _thenUnwrap(transform) {\n        return new APIPromise(this.responsePromise, async (props) => transform(await this.parseResponse(props), props));\n    }\n    /**\n     * Gets the raw `Response` instance instead of parsing the response\n     * data.\n     *\n     * If you want to parse the response body but still get the `Response`\n     * instance, you can use {@link withResponse()}.\n     *\n     * 👋 Getting the wrong TypeScript type for `Response`?\n     * Try setting `\"moduleResolution\": \"NodeNext\"` if you can,\n     * or add one of these imports before your first `import … from 'groq-sdk'`:\n     * - `import 'groq-sdk/shims/node'` (if you're running on Node)\n     * - `import 'groq-sdk/shims/web'` (otherwise)\n     */\n    asResponse() {\n        return this.responsePromise.then((p) => p.response);\n    }\n    /**\n     * Gets the parsed response data and the raw `Response` instance.\n     *\n     * If you just want to get the raw `Response` instance without parsing it,\n     * you can use {@link asResponse()}.\n     *\n     *\n     * 👋 Getting the wrong TypeScript type for `Response`?\n     * Try setting `\"moduleResolution\": \"NodeNext\"` if you can,\n     * or add one of these imports before your first `import … from 'groq-sdk'`:\n     * - `import 'groq-sdk/shims/node'` (if you're running on Node)\n     * - `import 'groq-sdk/shims/web'` (otherwise)\n     */\n    async withResponse() {\n        const [data, response] = await Promise.all([this.parse(), this.asResponse()]);\n        return { data, response };\n    }\n    parse() {\n        if (!this.parsedPromise) {\n            this.parsedPromise = this.responsePromise.then(this.parseResponse);\n        }\n        return this.parsedPromise;\n    }\n    then(onfulfilled, onrejected) {\n        return this.parse().then(onfulfilled, onrejected);\n    }\n    catch(onrejected) {\n        return this.parse().catch(onrejected);\n    }\n    finally(onfinally) {\n        return this.parse().finally(onfinally);\n    }\n}\nexport class APIClient {\n    constructor({ baseURL, maxRetries = 2, timeout = 60000, // 1 minute\n    httpAgent, fetch: overridenFetch, }) {\n        this.baseURL = baseURL;\n        this.maxRetries = validatePositiveInteger('maxRetries', maxRetries);\n        this.timeout = validatePositiveInteger('timeout', timeout);\n        this.httpAgent = httpAgent;\n        this.fetch = overridenFetch ?? fetch;\n    }\n    authHeaders(opts) {\n        return {};\n    }\n    /**\n     * Override this to add your own default headers, for example:\n     *\n     *  {\n     *    ...super.defaultHeaders(),\n     *    Authorization: 'Bearer 123',\n     *  }\n     */\n    defaultHeaders(opts) {\n        return {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            'User-Agent': this.getUserAgent(),\n            ...getPlatformHeaders(),\n            ...this.authHeaders(opts),\n        };\n    }\n    /**\n     * Override this to add your own headers validation:\n     */\n    validateHeaders(headers, customHeaders) { }\n    defaultIdempotencyKey() {\n        return `stainless-node-retry-${uuid4()}`;\n    }\n    get(path, opts) {\n        return this.methodRequest('get', path, opts);\n    }\n    post(path, opts) {\n        return this.methodRequest('post', path, opts);\n    }\n    patch(path, opts) {\n        return this.methodRequest('patch', path, opts);\n    }\n    put(path, opts) {\n        return this.methodRequest('put', path, opts);\n    }\n    delete(path, opts) {\n        return this.methodRequest('delete', path, opts);\n    }\n    methodRequest(method, path, opts) {\n        return this.request(Promise.resolve(opts).then(async (opts) => {\n            const body = opts && isBlobLike(opts?.body) ? new DataView(await opts.body.arrayBuffer())\n                : opts?.body instanceof DataView ? opts.body\n                    : opts?.body instanceof ArrayBuffer ? new DataView(opts.body)\n                        : opts && ArrayBuffer.isView(opts?.body) ? new DataView(opts.body.buffer)\n                            : opts?.body;\n            return { method, path, ...opts, body };\n        }));\n    }\n    getAPIList(path, Page, opts) {\n        return this.requestAPIList(Page, { method: 'get', path, ...opts });\n    }\n    calculateContentLength(body) {\n        if (typeof body === 'string') {\n            if (typeof Buffer !== 'undefined') {\n                return Buffer.byteLength(body, 'utf8').toString();\n            }\n            if (typeof TextEncoder !== 'undefined') {\n                const encoder = new TextEncoder();\n                const encoded = encoder.encode(body);\n                return encoded.length.toString();\n            }\n        }\n        else if (ArrayBuffer.isView(body)) {\n            return body.byteLength.toString();\n        }\n        return null;\n    }\n    buildRequest(options, { retryCount = 0 } = {}) {\n        const { method, path, query, headers: headers = {} } = options;\n        const body = ArrayBuffer.isView(options.body) || (options.__binaryRequest && typeof options.body === 'string') ?\n            options.body\n            : isMultipartBody(options.body) ? options.body.body\n                : options.body ? JSON.stringify(options.body, null, 2)\n                    : null;\n        const contentLength = this.calculateContentLength(body);\n        const url = this.buildURL(path, query);\n        if ('timeout' in options)\n            validatePositiveInteger('timeout', options.timeout);\n        const timeout = options.timeout ?? this.timeout;\n        const httpAgent = options.httpAgent ?? this.httpAgent ?? getDefaultAgent(url);\n        const minAgentTimeout = timeout + 1000;\n        if (typeof httpAgent?.options?.timeout === 'number' &&\n            minAgentTimeout > (httpAgent.options.timeout ?? 0)) {\n            // Allow any given request to bump our agent active socket timeout.\n            // This may seem strange, but leaking active sockets should be rare and not particularly problematic,\n            // and without mutating agent we would need to create more of them.\n            // This tradeoff optimizes for performance.\n            httpAgent.options.timeout = minAgentTimeout;\n        }\n        if (this.idempotencyHeader && method !== 'get') {\n            if (!options.idempotencyKey)\n                options.idempotencyKey = this.defaultIdempotencyKey();\n            headers[this.idempotencyHeader] = options.idempotencyKey;\n        }\n        const reqHeaders = this.buildHeaders({ options, headers, contentLength, retryCount });\n        const req = {\n            method,\n            ...(body && { body: body }),\n            headers: reqHeaders,\n            ...(httpAgent && { agent: httpAgent }),\n            // @ts-ignore node-fetch uses a custom AbortSignal type that is\n            // not compatible with standard web types\n            signal: options.signal ?? null,\n        };\n        return { req, url, timeout };\n    }\n    buildHeaders({ options, headers, contentLength, retryCount, }) {\n        const reqHeaders = {};\n        if (contentLength) {\n            reqHeaders['content-length'] = contentLength;\n        }\n        const defaultHeaders = this.defaultHeaders(options);\n        applyHeadersMut(reqHeaders, defaultHeaders);\n        applyHeadersMut(reqHeaders, headers);\n        // let builtin fetch set the Content-Type for multipart bodies\n        if (isMultipartBody(options.body) && shimsKind !== 'node') {\n            delete reqHeaders['content-type'];\n        }\n        // Don't set the retry count header if it was already set or removed through default headers or by the\n        // caller. We check `defaultHeaders` and `headers`, which can contain nulls, instead of `reqHeaders` to\n        // account for the removal case.\n        if (getHeader(defaultHeaders, 'x-stainless-retry-count') === undefined &&\n            getHeader(headers, 'x-stainless-retry-count') === undefined) {\n            reqHeaders['x-stainless-retry-count'] = String(retryCount);\n        }\n        this.validateHeaders(reqHeaders, headers);\n        return reqHeaders;\n    }\n    /**\n     * Used as a callback for mutating the given `FinalRequestOptions` object.\n     */\n    async prepareOptions(options) { }\n    /**\n     * Used as a callback for mutating the given `RequestInit` object.\n     *\n     * This is useful for cases where you want to add certain headers based off of\n     * the request properties, e.g. `method` or `url`.\n     */\n    async prepareRequest(request, { url, options }) { }\n    parseHeaders(headers) {\n        return (!headers ? {}\n            : Symbol.iterator in headers ?\n                Object.fromEntries(Array.from(headers).map((header) => [...header]))\n                : { ...headers });\n    }\n    makeStatusError(status, error, message, headers) {\n        return APIError.generate(status, error, message, headers);\n    }\n    request(options, remainingRetries = null) {\n        return new APIPromise(this.makeRequest(options, remainingRetries));\n    }\n    async makeRequest(optionsInput, retriesRemaining) {\n        const options = await optionsInput;\n        const maxRetries = options.maxRetries ?? this.maxRetries;\n        if (retriesRemaining == null) {\n            retriesRemaining = maxRetries;\n        }\n        await this.prepareOptions(options);\n        const { req, url, timeout } = this.buildRequest(options, { retryCount: maxRetries - retriesRemaining });\n        await this.prepareRequest(req, { url, options });\n        debug('request', url, options, req.headers);\n        if (options.signal?.aborted) {\n            throw new APIUserAbortError();\n        }\n        const controller = new AbortController();\n        const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);\n        if (response instanceof Error) {\n            if (options.signal?.aborted) {\n                throw new APIUserAbortError();\n            }\n            if (retriesRemaining) {\n                return this.retryRequest(options, retriesRemaining);\n            }\n            if (response.name === 'AbortError') {\n                throw new APIConnectionTimeoutError();\n            }\n            throw new APIConnectionError({ cause: response });\n        }\n        const responseHeaders = createResponseHeaders(response.headers);\n        if (!response.ok) {\n            if (retriesRemaining && this.shouldRetry(response)) {\n                const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n                debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders);\n                return this.retryRequest(options, retriesRemaining, responseHeaders);\n            }\n            const errText = await response.text().catch((e) => castToError(e).message);\n            const errJSON = safeJSON(errText);\n            const errMessage = errJSON ? undefined : errText;\n            const retryMessage = retriesRemaining ? `(error; no more retries left)` : `(error; not retryable)`;\n            debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders, errMessage);\n            const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);\n            throw err;\n        }\n        return { response, options, controller };\n    }\n    requestAPIList(Page, options) {\n        const request = this.makeRequest(options, null);\n        return new PagePromise(this, request, Page);\n    }\n    buildURL(path, query) {\n        const url = isAbsoluteURL(path) ?\n            new URL(path)\n            : new URL(this.baseURL + (this.baseURL.endsWith('/') && path.startsWith('/') ? path.slice(1) : path));\n        const defaultQuery = this.defaultQuery();\n        if (!isEmptyObj(defaultQuery)) {\n            query = { ...defaultQuery, ...query };\n        }\n        if (typeof query === 'object' && query && !Array.isArray(query)) {\n            url.search = this.stringifyQuery(query);\n        }\n        return url.toString();\n    }\n    stringifyQuery(query) {\n        return Object.entries(query)\n            .filter(([_, value]) => typeof value !== 'undefined')\n            .map(([key, value]) => {\n            if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n                return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n            }\n            if (value === null) {\n                return `${encodeURIComponent(key)}=`;\n            }\n            throw new GroqError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);\n        })\n            .join('&');\n    }\n    async fetchWithTimeout(url, init, ms, controller) {\n        const { signal, ...options } = init || {};\n        if (signal)\n            signal.addEventListener('abort', () => controller.abort());\n        const timeout = setTimeout(() => controller.abort(), ms);\n        return (\n        // use undefined this binding; fetch errors if bound to something else in browser/cloudflare\n        this.fetch.call(undefined, url, { signal: controller.signal, ...options }).finally(() => {\n            clearTimeout(timeout);\n        }));\n    }\n    shouldRetry(response) {\n        // Note this is not a standard header.\n        const shouldRetryHeader = response.headers.get('x-should-retry');\n        // If the server explicitly says whether or not to retry, obey.\n        if (shouldRetryHeader === 'true')\n            return true;\n        if (shouldRetryHeader === 'false')\n            return false;\n        // Retry on request timeouts.\n        if (response.status === 408)\n            return true;\n        // Retry on lock timeouts.\n        if (response.status === 409)\n            return true;\n        // Retry on rate limits.\n        if (response.status === 429)\n            return true;\n        // Retry internal errors.\n        if (response.status >= 500)\n            return true;\n        return false;\n    }\n    async retryRequest(options, retriesRemaining, responseHeaders) {\n        let timeoutMillis;\n        // Note the `retry-after-ms` header may not be standard, but is a good idea and we'd like proactive support for it.\n        const retryAfterMillisHeader = responseHeaders?.['retry-after-ms'];\n        if (retryAfterMillisHeader) {\n            const timeoutMs = parseFloat(retryAfterMillisHeader);\n            if (!Number.isNaN(timeoutMs)) {\n                timeoutMillis = timeoutMs;\n            }\n        }\n        // About the Retry-After header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After\n        const retryAfterHeader = responseHeaders?.['retry-after'];\n        if (retryAfterHeader && !timeoutMillis) {\n            const timeoutSeconds = parseFloat(retryAfterHeader);\n            if (!Number.isNaN(timeoutSeconds)) {\n                timeoutMillis = timeoutSeconds * 1000;\n            }\n            else {\n                timeoutMillis = Date.parse(retryAfterHeader) - Date.now();\n            }\n        }\n        // If the API asks us to wait a certain amount of time (and it's a reasonable amount),\n        // just do what it says, but otherwise calculate a default\n        if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1000)) {\n            const maxRetries = options.maxRetries ?? this.maxRetries;\n            timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);\n        }\n        await sleep(timeoutMillis);\n        return this.makeRequest(options, retriesRemaining - 1);\n    }\n    calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {\n        const initialRetryDelay = 0.5;\n        const maxRetryDelay = 8.0;\n        const numRetries = maxRetries - retriesRemaining;\n        // Apply exponential backoff, but not more than the max.\n        const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);\n        // Apply some jitter, take up to at most 25 percent of the retry time.\n        const jitter = 1 - Math.random() * 0.25;\n        return sleepSeconds * jitter * 1000;\n    }\n    getUserAgent() {\n        return `${this.constructor.name}/JS ${VERSION}`;\n    }\n}\nexport class AbstractPage {\n    constructor(client, response, body, options) {\n        _AbstractPage_client.set(this, void 0);\n        __classPrivateFieldSet(this, _AbstractPage_client, client, \"f\");\n        this.options = options;\n        this.response = response;\n        this.body = body;\n    }\n    hasNextPage() {\n        const items = this.getPaginatedItems();\n        if (!items.length)\n            return false;\n        return this.nextPageInfo() != null;\n    }\n    async getNextPage() {\n        const nextInfo = this.nextPageInfo();\n        if (!nextInfo) {\n            throw new GroqError('No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.');\n        }\n        const nextOptions = { ...this.options };\n        if ('params' in nextInfo && typeof nextOptions.query === 'object') {\n            nextOptions.query = { ...nextOptions.query, ...nextInfo.params };\n        }\n        else if ('url' in nextInfo) {\n            const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];\n            for (const [key, value] of params) {\n                nextInfo.url.searchParams.set(key, value);\n            }\n            nextOptions.query = undefined;\n            nextOptions.path = nextInfo.url.toString();\n        }\n        return await __classPrivateFieldGet(this, _AbstractPage_client, \"f\").requestAPIList(this.constructor, nextOptions);\n    }\n    async *iterPages() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let page = this;\n        yield page;\n        while (page.hasNextPage()) {\n            page = await page.getNextPage();\n            yield page;\n        }\n    }\n    async *[(_AbstractPage_client = new WeakMap(), Symbol.asyncIterator)]() {\n        for await (const page of this.iterPages()) {\n            for (const item of page.getPaginatedItems()) {\n                yield item;\n            }\n        }\n    }\n}\n/**\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\n *\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\n *\n *    for await (const item of client.items.list()) {\n *      console.log(item)\n *    }\n */\nexport class PagePromise extends APIPromise {\n    constructor(client, request, Page) {\n        super(request, async (props) => new Page(client, props.response, await defaultParseResponse(props), props.options));\n    }\n    /**\n     * Allow auto-paginating iteration on an unawaited list call, eg:\n     *\n     *    for await (const item of client.items.list()) {\n     *      console.log(item)\n     *    }\n     */\n    async *[Symbol.asyncIterator]() {\n        const page = await this;\n        for await (const item of page) {\n            yield item;\n        }\n    }\n}\nexport const createResponseHeaders = (headers) => {\n    return new Proxy(Object.fromEntries(\n    // @ts-ignore\n    headers.entries()), {\n        get(target, name) {\n            const key = name.toString();\n            return target[key.toLowerCase()] || target[key];\n        },\n    });\n};\n// This is required so that we can determine if a given object matches the RequestOptions\n// type at runtime. While this requires duplication, it is enforced by the TypeScript\n// compiler such that any missing / extraneous keys will cause an error.\nconst requestOptionsKeys = {\n    method: true,\n    path: true,\n    query: true,\n    body: true,\n    headers: true,\n    maxRetries: true,\n    stream: true,\n    timeout: true,\n    httpAgent: true,\n    signal: true,\n    idempotencyKey: true,\n    __binaryRequest: true,\n    __binaryResponse: true,\n    __streamClass: true,\n};\nexport const isRequestOptions = (obj) => {\n    return (typeof obj === 'object' &&\n        obj !== null &&\n        !isEmptyObj(obj) &&\n        Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k)));\n};\nconst getPlatformProperties = () => {\n    if (typeof Deno !== 'undefined' && Deno.build != null) {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': normalizePlatform(Deno.build.os),\n            'X-Stainless-Arch': normalizeArch(Deno.build.arch),\n            'X-Stainless-Runtime': 'deno',\n            'X-Stainless-Runtime-Version': typeof Deno.version === 'string' ? Deno.version : Deno.version?.deno ?? 'unknown',\n        };\n    }\n    if (typeof EdgeRuntime !== 'undefined') {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': 'Unknown',\n            'X-Stainless-Arch': `other:${EdgeRuntime}`,\n            'X-Stainless-Runtime': 'edge',\n            'X-Stainless-Runtime-Version': process.version,\n        };\n    }\n    // Check if Node.js\n    if (Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]') {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': normalizePlatform(process.platform),\n            'X-Stainless-Arch': normalizeArch(process.arch),\n            'X-Stainless-Runtime': 'node',\n            'X-Stainless-Runtime-Version': process.version,\n        };\n    }\n    const browserInfo = getBrowserInfo();\n    if (browserInfo) {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': 'Unknown',\n            'X-Stainless-Arch': 'unknown',\n            'X-Stainless-Runtime': `browser:${browserInfo.browser}`,\n            'X-Stainless-Runtime-Version': browserInfo.version,\n        };\n    }\n    // TODO add support for Cloudflare workers, etc.\n    return {\n        'X-Stainless-Lang': 'js',\n        'X-Stainless-Package-Version': VERSION,\n        'X-Stainless-OS': 'Unknown',\n        'X-Stainless-Arch': 'unknown',\n        'X-Stainless-Runtime': 'unknown',\n        'X-Stainless-Runtime-Version': 'unknown',\n    };\n};\n// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts\nfunction getBrowserInfo() {\n    if (typeof navigator === 'undefined' || !navigator) {\n        return null;\n    }\n    // NOTE: The order matters here!\n    const browserPatterns = [\n        { key: 'edge', pattern: /Edge(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'ie', pattern: /MSIE(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'ie', pattern: /Trident(?:.*rv\\:(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'chrome', pattern: /Chrome(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'firefox', pattern: /Firefox(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'safari', pattern: /(?:Version\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?(?:\\W+Mobile\\S*)?\\W+Safari/ },\n    ];\n    // Find the FIRST matching browser\n    for (const { key, pattern } of browserPatterns) {\n        const match = pattern.exec(navigator.userAgent);\n        if (match) {\n            const major = match[1] || 0;\n            const minor = match[2] || 0;\n            const patch = match[3] || 0;\n            return { browser: key, version: `${major}.${minor}.${patch}` };\n        }\n    }\n    return null;\n}\nconst normalizeArch = (arch) => {\n    // Node docs:\n    // - https://nodejs.org/api/process.html#processarch\n    // Deno docs:\n    // - https://doc.deno.land/deno/stable/~/Deno.build\n    if (arch === 'x32')\n        return 'x32';\n    if (arch === 'x86_64' || arch === 'x64')\n        return 'x64';\n    if (arch === 'arm')\n        return 'arm';\n    if (arch === 'aarch64' || arch === 'arm64')\n        return 'arm64';\n    if (arch)\n        return `other:${arch}`;\n    return 'unknown';\n};\nconst normalizePlatform = (platform) => {\n    // Node platforms:\n    // - https://nodejs.org/api/process.html#processplatform\n    // Deno platforms:\n    // - https://doc.deno.land/deno/stable/~/Deno.build\n    // - https://github.com/denoland/deno/issues/14799\n    platform = platform.toLowerCase();\n    // NOTE: this iOS check is untested and may not work\n    // Node does not work natively on IOS, there is a fork at\n    // https://github.com/nodejs-mobile/nodejs-mobile\n    // however it is unknown at the time of writing how to detect if it is running\n    if (platform.includes('ios'))\n        return 'iOS';\n    if (platform === 'android')\n        return 'Android';\n    if (platform === 'darwin')\n        return 'MacOS';\n    if (platform === 'win32')\n        return 'Windows';\n    if (platform === 'freebsd')\n        return 'FreeBSD';\n    if (platform === 'openbsd')\n        return 'OpenBSD';\n    if (platform === 'linux')\n        return 'Linux';\n    if (platform)\n        return `Other:${platform}`;\n    return 'Unknown';\n};\nlet _platformHeaders;\nconst getPlatformHeaders = () => {\n    return (_platformHeaders ?? (_platformHeaders = getPlatformProperties()));\n};\nexport const safeJSON = (text) => {\n    try {\n        return JSON.parse(text);\n    }\n    catch (err) {\n        return undefined;\n    }\n};\n// https://url.spec.whatwg.org/#url-scheme-string\nconst startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;\nconst isAbsoluteURL = (url) => {\n    return startsWithSchemeRegexp.test(url);\n};\nexport const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\nconst validatePositiveInteger = (name, n) => {\n    if (typeof n !== 'number' || !Number.isInteger(n)) {\n        throw new GroqError(`${name} must be an integer`);\n    }\n    if (n < 0) {\n        throw new GroqError(`${name} must be a positive integer`);\n    }\n    return n;\n};\nexport const castToError = (err) => {\n    if (err instanceof Error)\n        return err;\n    if (typeof err === 'object' && err !== null) {\n        try {\n            return new Error(JSON.stringify(err));\n        }\n        catch { }\n    }\n    return new Error(err);\n};\nexport const ensurePresent = (value) => {\n    if (value == null)\n        throw new GroqError(`Expected a value to be given but received ${value} instead.`);\n    return value;\n};\n/**\n * Read an environment variable.\n *\n * Trims beginning and trailing whitespace.\n *\n * Will return undefined if the environment variable doesn't exist or cannot be accessed.\n */\nexport const readEnv = (env) => {\n    if (typeof process !== 'undefined') {\n        return process.env?.[env]?.trim() ?? undefined;\n    }\n    if (typeof Deno !== 'undefined') {\n        return Deno.env?.get?.(env)?.trim();\n    }\n    return undefined;\n};\nexport const coerceInteger = (value) => {\n    if (typeof value === 'number')\n        return Math.round(value);\n    if (typeof value === 'string')\n        return parseInt(value, 10);\n    throw new GroqError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\nexport const coerceFloat = (value) => {\n    if (typeof value === 'number')\n        return value;\n    if (typeof value === 'string')\n        return parseFloat(value);\n    throw new GroqError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\nexport const coerceBoolean = (value) => {\n    if (typeof value === 'boolean')\n        return value;\n    if (typeof value === 'string')\n        return value === 'true';\n    return Boolean(value);\n};\nexport const maybeCoerceInteger = (value) => {\n    if (value === undefined) {\n        return undefined;\n    }\n    return coerceInteger(value);\n};\nexport const maybeCoerceFloat = (value) => {\n    if (value === undefined) {\n        return undefined;\n    }\n    return coerceFloat(value);\n};\nexport const maybeCoerceBoolean = (value) => {\n    if (value === undefined) {\n        return undefined;\n    }\n    return coerceBoolean(value);\n};\n// https://stackoverflow.com/a/34491287\nexport function isEmptyObj(obj) {\n    if (!obj)\n        return true;\n    for (const _k in obj)\n        return false;\n    return true;\n}\n// https://eslint.org/docs/latest/rules/no-prototype-builtins\nexport function hasOwn(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\n/**\n * Copies headers from \"newHeaders\" onto \"targetHeaders\",\n * using lower-case for all properties,\n * ignoring any keys with undefined values,\n * and deleting any keys with null values.\n */\nfunction applyHeadersMut(targetHeaders, newHeaders) {\n    for (const k in newHeaders) {\n        if (!hasOwn(newHeaders, k))\n            continue;\n        const lowerKey = k.toLowerCase();\n        if (!lowerKey)\n            continue;\n        const val = newHeaders[k];\n        if (val === null) {\n            delete targetHeaders[lowerKey];\n        }\n        else if (val !== undefined) {\n            targetHeaders[lowerKey] = val;\n        }\n    }\n}\nexport function debug(action, ...args) {\n    if (typeof process !== 'undefined' && process?.env?.['DEBUG'] === 'true') {\n        console.log(`Groq:DEBUG:${action}`, ...args);\n    }\n}\n/**\n * https://stackoverflow.com/a/2117523\n */\nconst uuid4 = () => {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n};\nexport const isRunningInBrowser = () => {\n    return (\n    // @ts-ignore\n    typeof window !== 'undefined' &&\n        // @ts-ignore\n        typeof window.document !== 'undefined' &&\n        // @ts-ignore\n        typeof navigator !== 'undefined');\n};\nexport const isHeadersProtocol = (headers) => {\n    return typeof headers?.get === 'function';\n};\nexport const getRequiredHeader = (headers, header) => {\n    const foundHeader = getHeader(headers, header);\n    if (foundHeader === undefined) {\n        throw new Error(`Could not find ${header} header`);\n    }\n    return foundHeader;\n};\nexport const getHeader = (headers, header) => {\n    const lowerCasedHeader = header.toLowerCase();\n    if (isHeadersProtocol(headers)) {\n        // to deal with the case where the header looks like Stainless-Event-Id\n        const intercapsHeader = header[0]?.toUpperCase() +\n            header.substring(1).replace(/([^\\w])(\\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());\n        for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {\n            const value = headers.get(key);\n            if (value) {\n                return value;\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(headers)) {\n        if (key.toLowerCase() === lowerCasedHeader) {\n            if (Array.isArray(value)) {\n                if (value.length <= 1)\n                    return value[0];\n                console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);\n                return value[0];\n            }\n            return value;\n        }\n    }\n    return undefined;\n};\n/**\n * Encodes a string to Base64 format.\n */\nexport const toBase64 = (str) => {\n    if (!str)\n        return '';\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str).toString('base64');\n    }\n    if (typeof btoa !== 'undefined') {\n        return btoa(str);\n    }\n    throw new GroqError('Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined');\n};\nexport function isObj(obj) {\n    return obj != null && typeof obj === 'object' && !Array.isArray(obj);\n}\n//# sourceMappingURL=core.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nexport class APIResource {\n    constructor(client) {\n        this._client = client;\n    }\n}\n//# sourceMappingURL=resource.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../../resource.mjs\";\nimport * as Core from \"../../core.mjs\";\nexport class Transcriptions extends APIResource {\n    /**\n     * Transcribes audio into the input language.\n     */\n    create(body, options) {\n        return this._client.post('/openai/v1/audio/transcriptions', Core.multipartFormRequestOptions({ body, ...options }));\n    }\n}\n//# sourceMappingURL=transcriptions.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../../resource.mjs\";\nimport * as Core from \"../../core.mjs\";\nexport class Translations extends APIResource {\n    /**\n     * Translates audio into English.\n     */\n    create(body, options) {\n        return this._client.post('/openai/v1/audio/translations', Core.multipartFormRequestOptions({ body, ...options }));\n    }\n}\n//# sourceMappingURL=translations.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../../resource.mjs\";\nimport * as TranscriptionsAPI from \"./transcriptions.mjs\";\nimport { Transcriptions } from \"./transcriptions.mjs\";\nimport * as TranslationsAPI from \"./translations.mjs\";\nimport { Translations } from \"./translations.mjs\";\nexport class Audio extends APIResource {\n    constructor() {\n        super(...arguments);\n        this.transcriptions = new TranscriptionsAPI.Transcriptions(this._client);\n        this.translations = new TranslationsAPI.Translations(this._client);\n    }\n}\nAudio.Transcriptions = Transcriptions;\nAudio.Translations = Translations;\n//# sourceMappingURL=audio.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../../resource.mjs\";\nexport class Completions extends APIResource {\n    create(body, options) {\n        return this._client.post('/openai/v1/chat/completions', {\n            body,\n            ...options,\n            stream: body.stream ?? false,\n        });\n    }\n}\n//# sourceMappingURL=completions.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../../resource.mjs\";\nimport * as CompletionsAPI from \"./completions.mjs\";\nimport { Completions, } from \"./completions.mjs\";\nexport class Chat extends APIResource {\n    constructor() {\n        super(...arguments);\n        this.completions = new CompletionsAPI.Completions(this._client);\n    }\n}\nChat.Completions = Completions;\n//# sourceMappingURL=chat.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../resource.mjs\";\nexport class Completions extends APIResource {\n}\n//# sourceMappingURL=completions.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../resource.mjs\";\nexport class Embeddings extends APIResource {\n    /**\n     * Creates an embedding vector representing the input text.\n     */\n    create(body, options) {\n        return this._client.post('/openai/v1/embeddings', { body, ...options });\n    }\n}\n//# sourceMappingURL=embeddings.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../resource.mjs\";\nexport class Models extends APIResource {\n    /**\n     * Get a specific model\n     */\n    retrieve(model, options) {\n        return this._client.get(`/openai/v1/models/${model}`, options);\n    }\n    /**\n     * get all available models\n     */\n    list(options) {\n        return this._client.get('/openai/v1/models', options);\n    }\n    /**\n     * Delete a model\n     */\n    delete(model, options) {\n        return this._client.delete(`/openai/v1/models/${model}`, options);\n    }\n}\n//# sourceMappingURL=models.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nvar _a;\nimport * as Core from \"./core.mjs\";\nimport * as Errors from \"./error.mjs\";\nimport * as Uploads from \"./uploads.mjs\";\nimport * as API from \"./resources/index.mjs\";\nimport { Completions } from \"./resources/completions.mjs\";\nimport { Embeddings, } from \"./resources/embeddings.mjs\";\nimport { Models } from \"./resources/models.mjs\";\nimport { Audio } from \"./resources/audio/audio.mjs\";\nimport { Chat } from \"./resources/chat/chat.mjs\";\n/**\n * API Client for interfacing with the Groq API.\n */\nexport class Groq extends Core.APIClient {\n    /**\n     * API Client for interfacing with the Groq API.\n     *\n     * @param {string | undefined} [opts.apiKey=process.env['GROQ_API_KEY'] ?? undefined]\n     * @param {string} [opts.baseURL=process.env['GROQ_BASE_URL'] ?? https://api.groq.com] - Override the default base URL for the API.\n     * @param {number} [opts.timeout=1 minute] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.\n     * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.\n     * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.\n     * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.\n     * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.\n     * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.\n     * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.\n     */\n    constructor({ baseURL = Core.readEnv('GROQ_BASE_URL'), apiKey = Core.readEnv('GROQ_API_KEY'), ...opts } = {}) {\n        if (apiKey === undefined) {\n            throw new Errors.GroqError(\"The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).\");\n        }\n        const options = {\n            apiKey,\n            ...opts,\n            baseURL: baseURL || `https://api.groq.com`,\n        };\n        if (!options.dangerouslyAllowBrowser && Core.isRunningInBrowser()) {\n            throw new Errors.GroqError(\"It looks like you're running in a browser-like environment.\\n\\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\\nIf you understand the risks and have appropriate mitigations in place,\\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\\n\\nnew Groq({ apiKey, dangerouslyAllowBrowser: true })\");\n        }\n        super({\n            baseURL: options.baseURL,\n            timeout: options.timeout ?? 60000 /* 1 minute */,\n            httpAgent: options.httpAgent,\n            maxRetries: options.maxRetries,\n            fetch: options.fetch,\n        });\n        this.completions = new API.Completions(this);\n        this.chat = new API.Chat(this);\n        this.embeddings = new API.Embeddings(this);\n        this.audio = new API.Audio(this);\n        this.models = new API.Models(this);\n        this._options = options;\n        this.apiKey = apiKey;\n    }\n    defaultQuery() {\n        return this._options.defaultQuery;\n    }\n    defaultHeaders(opts) {\n        return {\n            ...super.defaultHeaders(opts),\n            ...this._options.defaultHeaders,\n        };\n    }\n    authHeaders(opts) {\n        return { Authorization: `Bearer ${this.apiKey}` };\n    }\n}\n_a = Groq;\nGroq.Groq = _a;\nGroq.DEFAULT_TIMEOUT = 60000; // 1 minute\nGroq.GroqError = Errors.GroqError;\nGroq.APIError = Errors.APIError;\nGroq.APIConnectionError = Errors.APIConnectionError;\nGroq.APIConnectionTimeoutError = Errors.APIConnectionTimeoutError;\nGroq.APIUserAbortError = Errors.APIUserAbortError;\nGroq.NotFoundError = Errors.NotFoundError;\nGroq.ConflictError = Errors.ConflictError;\nGroq.RateLimitError = Errors.RateLimitError;\nGroq.BadRequestError = Errors.BadRequestError;\nGroq.AuthenticationError = Errors.AuthenticationError;\nGroq.InternalServerError = Errors.InternalServerError;\nGroq.PermissionDeniedError = Errors.PermissionDeniedError;\nGroq.UnprocessableEntityError = Errors.UnprocessableEntityError;\nGroq.toFile = Uploads.toFile;\nGroq.fileFromPath = Uploads.fileFromPath;\nGroq.Completions = Completions;\nGroq.Chat = Chat;\nGroq.Embeddings = Embeddings;\nGroq.Audio = Audio;\nGroq.Models = Models;\nexport { toFile, fileFromPath } from \"./uploads.mjs\";\nexport { GroqError, APIError, APIConnectionError, APIConnectionTimeoutError, APIUserAbortError, NotFoundError, ConflictError, RateLimitError, BadRequestError, AuthenticationError, InternalServerError, PermissionDeniedError, UnprocessableEntityError, } from \"./error.mjs\";\nexport default Groq;\n//# sourceMappingURL=index.mjs.map","/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.21';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function',\n      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading whitespace. */\n  var reTrimStart = /^\\s+/;\n\n  /** Used to match a single whitespace character. */\n  var reWhitespace = /\\s/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /**\n   * Used to validate the `validate` option in `_.template` variable.\n   *\n   * Forbids characters which could potentially change the meaning of the function argument definition:\n   * - \"(),\" (modification of function parameters)\n   * - \"=\" (default value)\n   * - \"[]{}\" (destructuring of function parameters)\n   * - \"/\" (beginning of a comment)\n   * - whitespace\n   */\n  var reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.trim`.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} Returns the trimmed string.\n   */\n  function baseTrim(string) {\n    return string\n      ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n      : string;\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedEndIndex(string) {\n    var index = string.length;\n\n    while (index-- && reWhitespace.test(string.charAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      if (iteratees.length) {\n        iteratees = arrayMap(iteratees, function(iteratee) {\n          if (isArray(iteratee)) {\n            return function(value) {\n              return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n            }\n          }\n          return iteratee;\n        });\n      } else {\n        iteratees = [identity];\n      }\n\n      var index = -1;\n      iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n          return object;\n        }\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      var low = 0,\n          high = array == null ? 0 : array.length;\n      if (high === 0) {\n        return 0;\n      }\n\n      value = iteratee(value);\n      var valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Check that cyclic values are equal.\n      var arrStacked = stack.get(array);\n      var othStacked = stack.get(other);\n      if (arrStacked && othStacked) {\n        return arrStacked == other && othStacked == array;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Check that cyclic values are equal.\n      var objStacked = stack.get(object);\n      var othStacked = stack.get(other);\n      if (objStacked && othStacked) {\n        return objStacked == other && othStacked == object;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     *\n     * // Combining several predicates using `_.overEvery` or `_.overSome`.\n     * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n     * // => objects for ['fred', 'barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 30 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = baseTrim(value);\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('déjà vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // to normalize all kinds of whitespace, so e.g. newlines (and unicode versions of it) can't sneak in\n      // and escape the comment, thus injecting code that gets evaled.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/\\s/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Throw an error if a forbidden character was found in `variable`, to prevent\n      // potential command injection attacks.\n      else if (reForbiddenIdentifierChars.test(variable)) {\n        throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);\n      }\n\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return baseTrim(string);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.slice(0, trimmedEndIndex(string) + 1);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     *\n     * var matchesFunc = _.overSome([{ 'a': 1 }, { 'a': 2 }])\n     * var matchesPropertyFunc = _.overSome([['a', 1], ['a', 2]])\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n","import levels from \"./assets/backrooms/levels.json\";\nimport { Groq } from \"groq-sdk\";\nimport { debounce } from \"lodash\";\n\nconst model = \"llama-3.3-70b-versatile\";\nwindow.levels = levels\n\nlet groq;\nexport function initGroq(apiKey) {\n  groq = new Groq({\n    apiKey: apiKey,\n    dangerouslyAllowBrowser: true,\n  });\n}\nif (localStorage.getItem(\"groqApiKey\")) {\n  initGroq(localStorage.getItem(\"groqApiKey\"));\n} else if (\n  window.location.hash.startsWith(\"#gsk_\") &&\n  window.location.hash.length == 57\n) {\n  initGroq(window.location.hash.slice(1));\n  // window.location.hash = \"\";\n}\nconst messages = [];\n\nfunction groqBanner() {\n  window.term.writeObject(\n    {\n      msg: `No es posible activar las funciones generativas.\nPara jugar R.O.K.E. con todas sus características necesitas una API KEY.\nPor favor, obtenga una API KEY.`,\n      \"dónde?\":\n        \"Puedes pedirle una a Sebastian (autor de R.O.K.E.) o crear la tuya propia en Groq.com.\",\n      listo: \"Bien, ahora escribe abajo la API KEY sin nada más.\",\n    },\n    \"msg\"\n  );\n}\n\nexport const converseDeBounced = debounce(converse, 2000);\n\n\nexport async function converse(text, player) {\n  if (!groq) {\n    groqBanner();\n    return;\n  }\n  window.term.loading(true);\n  let roomChat;\n  try {\n    roomChat = await groq.chat.completions.create({\n      messages: [\n        {\n          role: \"system\",\n          content: `Eres el guionista y dramaturgo de un videojuego llamado R.O.K.E. - \n          que consiste en explorar un espacio infinito del lore del Internet \n          llamado \"Backrooms\". \n          \n          Tu respuesta debe ser un objeto json que contenga al menos:\n           \"response\", \"advice\" y \"demotivationalQuote\".\n\n           El input del usuario vendrá en el campo \"content\" y el estatus del\n           usuario en el campo \"status\" del objeto json que recibiriás.\n          `,\n        },\n        ...messages,\n        {\n          role: \"user\",\n          content: JSON.stringify({ content: text, status: player.status }),\n        },\n      ],\n      response_format: {\n        type: \"json_object\",\n      },\n      model: model,\n      temperature: 1.4,\n      max_tokens: 5000,\n      top_p: 1,\n      stream: false,\n      stop: null,\n    });\n  } catch (error) {\n    console.error(error);\n  } finally {\n    window.term.loading(false);\n  }\n\n  const response = JSON.parse(roomChat.choices[0].message.content);\n  messages.push(roomChat.choices[0].message);\n  // writeln(response.response + \"\\n\");\n  // console.log(response)\n  return response;\n}\n\nexport const getRoomDescriptionDeBounced = debounce(getRoomDescription, 5000);\n\nexport async function getRoomDescription(room, player) {\n  if (!groq) {\n    groqBanner();\n    return;\n  }\n  window.term.loading(true);\n  let roomChat;\n  try {\n    roomChat = await groq.chat.completions.create({\n      messages: [\n        {\n          role: \"system\",\n          content: `Eres el guionista y dramaturgo de un videojuego llamado R.O.K.E. - \n          que consiste en explorar un espacio infinito del lore del Internet \n          llamado \"Backrooms\". En cada cambio de pantalla el front-end del \n          juego te enviará un json describiendo el nivel y opcionalmente el \n          estatus del jugador. Tu tarea es retornar una prosa del nivel y/o \n          la situación, muy breve y levemente sarcástica. No alucines.\n          \n          Piensa bien tu respuesta, que sea narrativa y no mucho más.\n          Usa oraciones completas y gramática correcta en todos los campos.\n          \n          El jugador acaba de entrar a: ${player.status.location.level} - ${player.status.location.room}.\n          Haz una referencia a la habitación.\n\n          Tu respuesta debe ser un objeto que contenga al menos:\n           \"shortDescription\", \"longDescription\" y \"easterEgg\".\n           \n           Recuerda ser breve.\n           `,\n        },\n        ...messages,\n        {\n          role: \"user\",\n          content: JSON.stringify({ room, player_status: player.status }),\n        },\n      ],\n      response_format: {\n        type: \"json_object\",\n      },\n      model: \"llama-3.3-70b-versatile\",\n      temperature: 1.6,\n      max_tokens: 5000,\n      top_p: 1,\n      stream: false,\n      stop: null,\n    });\n  } catch (error) {\n    console.error(error);\n  } finally {\n    window.term.loading(false);\n  }\n  const response = JSON.parse(roomChat.choices[0].message.content);\n  messages.push(roomChat.choices[0].message);\n  window.term.writeObject(response, \"shortDescription\");\n  //writeln(response.shortDescription + \"\\n\");\n  //writeln(response.longDescription + \"\\n\");\n  return roomChat;\n}\n\nfunction simpleChecksum(data) {\n  let checksum = 0;\n\n  // Iterate through each character in the data\n  for (let i = 0; i < data.length; i++) {\n    // Add the ASCII value of\n    //  the character to the checksum\n    checksum += data.charCodeAt(i);\n  }\n\n  // Ensure the checksum is within\n  //the range of 0-255 by using modulo\n  return checksum % 256;\n}\n\nexport function getRoom(player) {\n  const level = levels.find(\n    (level) => level.level == player.status.location.level\n  );\n  const room = player.status.location.room;\n  getRoomDescriptionDeBounced(level, player);\n  window.visual.flash(\n    <>\n      <h2>&quot;{level.name}&quot;</h2>\n      <h3>Sector {room}</h3>\n    </>\n  );\n  return { ...level, checksum: simpleChecksum(level.level + \"#\" + room) };\n}\n","\nexport function getOrSet(key, value) {\n  if (localStorage.getItem(key) === null) {\n    localStorage.setItem(key, value);\n  }\n  return localStorage.getItem(key);\n}\n","import { portalAnims } from \"./resources\";\nimport * as ex from 'excalibur';\nimport { RNG } from \"rot-js\";\n\nwindow.rng = RNG\n\nexport class Portal extends ex.Actor {\n  constructor(x, y) {\n    super({\n      x: x,\n      y: y,\n      width: 32,\n      height: 48,\n      z: 0,\n      collisionType: ex.CollisionType.Passive,\n    });\n    this.graphics.add(RNG.getItem(portalAnims));\n  }\n}","import { Portal } from \"./portal\";\n\n\nconst room = {\n    portals : []\n}\n\nexport function addPortal(x, y) {\n    const portal = new Portal(x, y);\n    window.game.add(portal)\n    room.portals.push(portal);\n    return portal\n}\n\nexport function clearPortals() {\n    room.portals.forEach((portal) => {\n        portal.kill();\n    });\n    room.portals = [];\n}","import { Actor, vec } from \"excalibur\";\nimport * as ex from \"excalibur\";\nimport { Motion } from \"@capacitor/motion\";\nimport { idleMan, walkMan, runMan, flyMan, \n  sounds\n } from \"./resources\";\nimport { isSafari } from \"./permission\";\nimport { getRoom } from \"./backrooms\";\nimport { getOrSet } from \"./util\";\nimport { addPortal, clearPortals } from \"./room\";\nimport { RNG } from \"rot-js\"\n\nexport class Player extends Actor {\n  status = {\n    firstGame: getOrSet(\"firstGame\", Date.now()),\n    location: { level: getOrSet(\"level\", \"Level 0\"), room: parseInt(getOrSet(\"room\", 0)) }\n  };\n  world = null;\n  gotoRoom(roomNumber) {\n    const tilemap = window.dsml1.getIntGridLayers()[0].tilemap;\n\n    this.status.enteredRoom = Date.now();\n    window.game.stop();\n    this.status.location = { level: this.world.level, \n                              room: roomNumber };\n    this.world = getRoom(this);\n    let tilepos = vec((this.pos.x % 32) + 16, this.pos.y % 32);\n    window.dsml1.retile(this.world.checksum).then((map) => {\n      let firstRoom = map.getRooms()[0];\n      let lastRoom = map.getRooms()[map.getRooms().length - 1];\n \n      if (this.pos.x < 0){\n        this.pos = vec(map._width * 32  - 32, lastRoom.getBottom() * 32).add(tilepos)\n      }\n      else if (this.pos.x > tilemap.width) {\n        this.pos = vec(0, firstRoom.getBottom() * 32).add(tilepos);\n      }\n\n      clearPortals()\n\n      const [x, y] = RNG.getItem(map.getRooms().slice(1)).getCenter()\n      addPortal(x * 32 + 16, y  * 32)\n\n      window.game.currentScene.camera.pos = this.pos;\n      window.game.start();\n    });\n  }\n  constructor(x, y) {\n    super({\n      name: getOrSet(\"name\", \"Roke\"),\n      pos: vec(x, y),\n      width: 36,\n      height: 72,\n      anchor: vec(0.5, 0.95),\n      scale: vec(0.4, 0.4),\n      z: 1,\n      collisionType: ex.CollisionType.Active,\n    });\n    Motion.addListener(\"accel\", (e) => this.handleAccel(e));\n    this.world = getRoom(this);\n  }\n  update(engine) {\n    const tilemap = window.dsml1.getIntGridLayers()[0].tilemap;\n    if (this.pos.x >= tilemap.width) {\n      this.gotoRoom(this.status.location.room + 1)\n    }\n    if (this.pos.x <= 0) {\n      this.gotoRoom(this.status.location.room - 1)\n    }\n\n    // *** Control\n\n    if (\n      engine.input.keyboard.isHeld(ex.Keys.Up) ||\n      engine.input.gamepads.at(0).getAxes(ex.Axes.LeftStickY) > 0.5\n    ) {\n      this.vel.addEqual(ex.vec(0, -10));\n    }\n    if (\n      engine.input.keyboard.isHeld(ex.Keys.Left) ||\n      engine.input.gamepads.at(0).getAxes(ex.Axes.LeftStickX) < -0.5\n    ) {\n      this.vel.addEqual(ex.vec(-10, 0));\n    }\n    if (\n      engine.input.keyboard.isHeld(ex.Keys.Right) ||\n      engine.input.gamepads.at(0).getAxes(ex.Axes.LeftStickX) > 0.5\n    ) {\n      this.vel.addEqual(ex.vec(10, 0));\n    }\n\n    // *** Animaciones\n\n    if (this.vel.y > 90) {\n      this.graphics.use(flyMan);\n    } else if (Math.abs(this.vel.x) > 120) {\n      this.graphics.use(runMan);\n    } else if (Math.abs(this.vel.x) > 2) {\n      this.graphics.use(walkMan);\n    } else {\n      this.graphics.use(idleMan);\n    }\n    if (this.vel.x > 0.1) {\n      this.graphics.flipHorizontal = false;\n    } else if (this.vel.x < -0.1) {\n      this.graphics.flipHorizontal = true;\n    }\n  }\n  experiment() {\n    sounds.enter.play(0.5)\n  }\n  handleAccel(event) {\n    if (\n      ex.vec(\n        event.accelerationIncludingGravity.x,\n        event.accelerationIncludingGravity.y\n      ).magnitude > 2\n    ) {\n      if (isSafari) {\n        this.vel.addEqual(\n          ex.vec(\n            event.accelerationIncludingGravity.x,\n            -event.accelerationIncludingGravity.y < 0\n              ? -event.accelerationIncludingGravity.y\n              : 0\n          )\n        );\n      } else {\n        this.vel.addEqual(\n          ex.vec(\n            -event.accelerationIncludingGravity.x,\n            event.accelerationIncludingGravity.y < 0\n              ? event.accelerationIncludingGravity.y\n              : 0\n          )\n        );\n      }\n    }\n  }\n}\n","export default \"__VITE_ASSET__DVoHy8LV__\"","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function d(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function h(n){return o=1,p(D,n)}function p(n,u,i){var o=d(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.u)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.u=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=d(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.i=u,r.__H.__h.push(i))}function _(n,u){var i=d(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.i=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==r?r:r.concat(n))}function T(n,r){var u=d(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=d(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=d(t++,10),i=h();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=d(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,100);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,p as useReducer,A as useRef,h as useState};\n//# sourceMappingURL=hooks.module.js.map\n","import{Component as n,createElement as t,options as e,toChildArray as r,Fragment as u,render as o,hydrate as i,createContext as c,createRef as f,cloneElement as l}from\"preact\";export{Component,Fragment,createContext,createElement,createRef}from\"preact\";import{useState as a,useLayoutEffect as s,useEffect as h,useCallback as v,useContext as d,useDebugValue as p,useId as m,useImperativeHandle as y,useMemo as _,useReducer as b,useRef as S}from\"preact/hooks\";export*from\"preact/hooks\";function g(n,t){for(var e in n)if(\"__source\"!==e&&!(e in t))return!0;for(var r in t)if(\"__source\"!==r&&n[r]!==t[r])return!0;return!1}function E(n,t){var e=t(),r=a({t:{__:e,u:t}}),u=r[0].t,o=r[1];return s(function(){u.__=e,u.u=t,C(u)&&o({t:u})},[n,e,t]),h(function(){return C(u)&&o({t:u}),n(function(){C(u)&&o({t:u})})},[n]),e}function C(n){var t,e,r=n.u,u=n.__;try{var o=r();return!((t=u)===(e=o)&&(0!==t||1/t==1/e)||t!=t&&e!=e)}catch(n){return!0}}function x(n){n()}function R(n){return n}function w(){return[!1,x]}var k=s;function I(n,t){this.props=n,this.context=t}function N(n,e){function r(n){var t=this.props.ref,r=t==n.ref;return!r&&t&&(t.call?t(null):t.current=null),e?!e(this.props,n)||!r:g(this.props,n)}function u(e){return this.shouldComponentUpdate=r,t(n,e)}return u.displayName=\"Memo(\"+(n.displayName||n.name)+\")\",u.prototype.isReactComponent=!0,u.__f=!0,u}(I.prototype=new n).isPureReactComponent=!0,I.prototype.shouldComponentUpdate=function(n,t){return g(this.props,n)||g(this.state,t)};var M=e.__b;e.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),M&&M(n)};var T=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.forward_ref\")||3911;function A(n){function t(t){if(!(\"ref\"in t))return n(t,null);var e=t.ref;delete t.ref;var r=n(t,e);return t.ref=e,r}return t.$$typeof=T,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName=\"ForwardRef(\"+(n.displayName||n.name)+\")\",t}var D=function(n,t){return null==n?null:r(r(n).map(t))},L={map:D,forEach:D,count:function(n){return n?r(n).length:0},only:function(n){var t=r(n);if(1!==t.length)throw\"Children.only\";return t[0]},toArray:r},O=e.__e;e.__e=function(n,t,e,r){if(n.then)for(var u,o=t;o=o.__;)if((u=o.__c)&&u.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),u.__c(n,t);O(n,t,e,r)};var F=e.unmount;function U(n,t,e){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(n){\"function\"==typeof n.__c&&n.__c()}),n.__c.__H=null),null!=(n=function(n,t){for(var e in t)n[e]=t[e];return n}({},n)).__c&&(n.__c.__P===e&&(n.__c.__P=t),n.__c=null),n.__k=n.__k&&n.__k.map(function(n){return U(n,t,e)})),n}function V(n,t,e){return n&&e&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(n){return V(n,t,e)}),n.__c&&n.__c.__P===t&&(n.__e&&e.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=e)),n}function W(){this.__u=0,this.o=null,this.__b=null}function P(n){var t=n.__.__c;return t&&t.__a&&t.__a(n)}function j(n){var e,r,u;function o(o){if(e||(e=n()).then(function(n){r=n.default||n},function(n){u=n}),u)throw u;if(!r)throw e;return t(r,o)}return o.displayName=\"Lazy\",o.__f=!0,o}function z(){this.i=null,this.l=null}e.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&32&n.__u&&(n.type=null),F&&F(n)},(W.prototype=new n).__c=function(n,t){var e=t.__c,r=this;null==r.o&&(r.o=[]),r.o.push(e);var u=P(r.__v),o=!1,i=function(){o||(o=!0,e.__R=null,u?u(c):c())};e.__R=i;var c=function(){if(!--r.__u){if(r.state.__a){var n=r.state.__a;r.__v.__k[0]=V(n,n.__c.__P,n.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.o.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(i,i)},W.prototype.componentWillUnmount=function(){this.o=[]},W.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var r=document.createElement(\"div\"),o=this.__v.__k[0].__c;this.__v.__k[0]=U(this.__b,r,o.__O=o.__P)}this.__b=null}var i=e.__a&&t(u,null,n.fallback);return i&&(i.__u&=-33),[t(u,null,e.__a?null:n.children),i]};var B=function(n,t,e){if(++e[1]===e[0]&&n.l.delete(t),n.props.revealOrder&&(\"t\"!==n.props.revealOrder[0]||!n.l.size))for(e=n.i;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.i=e=e[2]}};function H(n){return this.getChildContext=function(){return n.context},n.children}function Z(n){var e=this,r=n.h;e.componentWillUnmount=function(){o(null,e.v),e.v=null,e.h=null},e.h&&e.h!==r&&e.componentWillUnmount(),e.v||(e.h=r,e.v={nodeType:1,parentNode:r,childNodes:[],contains:function(){return!0},appendChild:function(n){this.childNodes.push(n),e.h.appendChild(n)},insertBefore:function(n,t){this.childNodes.push(n),e.h.insertBefore(n,t)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.h.removeChild(n)}}),o(t(H,{context:e.context},n.__v),e.v)}function Y(n,e){var r=t(Z,{__v:n,h:e});return r.containerInfo=e,r}(z.prototype=new n).__a=function(n){var t=this,e=P(t.__v),r=t.l.get(n);return r[0]++,function(u){var o=function(){t.props.revealOrder?(r.push(u),B(t,n,r)):u()};e?e(o):o()}},z.prototype.render=function(n){this.i=null,this.l=new Map;var t=r(n.children);n.revealOrder&&\"b\"===n.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.l.set(t[e],this.i=[1,0,this.i]);return n.children},z.prototype.componentDidUpdate=z.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(t,e){B(n,e,t)})};var $=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103,q=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,G=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,J=/[A-Z0-9]/g,K=\"undefined\"!=typeof document,Q=function(n){return(\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(n)};function X(n,t,e){return null==t.__k&&(t.textContent=\"\"),o(n,t),\"function\"==typeof e&&e(),n?n.__c:null}function nn(n,t,e){return i(n,t),\"function\"==typeof e&&e(),n?n.__c:null}n.prototype.isReactComponent={},[\"componentWillMount\",\"componentWillReceiveProps\",\"componentWillUpdate\"].forEach(function(t){Object.defineProperty(n.prototype,t,{configurable:!0,get:function(){return this[\"UNSAFE_\"+t]},set:function(n){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:n})}})});var tn=e.event;function en(){}function rn(){return this.cancelBubble}function un(){return this.defaultPrevented}e.event=function(n){return tn&&(n=tn(n)),n.persist=en,n.isPropagationStopped=rn,n.isDefaultPrevented=un,n.nativeEvent=n};var on,cn={enumerable:!1,configurable:!0,get:function(){return this.class}},fn=e.vnode;e.vnode=function(n){\"string\"==typeof n.type&&function(n){var t=n.props,e=n.type,u={},o=-1===e.indexOf(\"-\");for(var i in t){var c=t[i];if(!(\"value\"===i&&\"defaultValue\"in t&&null==c||K&&\"children\"===i&&\"noscript\"===e||\"class\"===i||\"className\"===i)){var f=i.toLowerCase();\"defaultValue\"===i&&\"value\"in t&&null==t.value?i=\"value\":\"download\"===i&&!0===c?c=\"\":\"translate\"===f&&\"no\"===c?c=!1:\"o\"===f[0]&&\"n\"===f[1]?\"ondoubleclick\"===f?i=\"ondblclick\":\"onchange\"!==f||\"input\"!==e&&\"textarea\"!==e||Q(t.type)?\"onfocus\"===f?i=\"onfocusin\":\"onblur\"===f?i=\"onfocusout\":G.test(i)&&(i=f):f=i=\"oninput\":o&&q.test(i)?i=i.replace(J,\"-$&\").toLowerCase():null===c&&(c=void 0),\"oninput\"===f&&u[i=f]&&(i=\"oninputCapture\"),u[i]=c}}\"select\"==e&&u.multiple&&Array.isArray(u.value)&&(u.value=r(t.children).forEach(function(n){n.props.selected=-1!=u.value.indexOf(n.props.value)})),\"select\"==e&&null!=u.defaultValue&&(u.value=r(t.children).forEach(function(n){n.props.selected=u.multiple?-1!=u.defaultValue.indexOf(n.props.value):u.defaultValue==n.props.value})),t.class&&!t.className?(u.class=t.class,Object.defineProperty(u,\"className\",cn)):(t.className&&!t.class||t.class&&t.className)&&(u.class=u.className=t.className),n.props=u}(n),n.$$typeof=$,fn&&fn(n)};var ln=e.__r;e.__r=function(n){ln&&ln(n),on=n.__c};var an=e.diffed;e.diffed=function(n){an&&an(n);var t=n.props,e=n.__e;null!=e&&\"textarea\"===n.type&&\"value\"in t&&t.value!==e.value&&(e.value=null==t.value?\"\":t.value),on=null};var sn={ReactCurrentDispatcher:{current:{readContext:function(n){return on.__n[n.__c].props.value},useCallback:v,useContext:d,useDebugValue:p,useDeferredValue:R,useEffect:h,useId:m,useImperativeHandle:y,useInsertionEffect:k,useLayoutEffect:s,useMemo:_,useReducer:b,useRef:S,useState:a,useSyncExternalStore:E,useTransition:w}}},hn=\"18.3.1\";function vn(n){return t.bind(null,n)}function dn(n){return!!n&&n.$$typeof===$}function pn(n){return dn(n)&&n.type===u}function mn(n){return!!n&&!!n.displayName&&(\"string\"==typeof n.displayName||n.displayName instanceof String)&&n.displayName.startsWith(\"Memo(\")}function yn(n){return dn(n)?l.apply(null,arguments):n}function _n(n){return!!n.__k&&(o(null,n),!0)}function bn(n){return n&&(n.base||1===n.nodeType&&n)||null}var Sn=function(n,t){return n(t)},gn=function(n,t){return n(t)},En=u,Cn=dn,xn={useState:a,useId:m,useReducer:b,useEffect:h,useLayoutEffect:s,useInsertionEffect:k,useTransition:w,useDeferredValue:R,useSyncExternalStore:E,startTransition:x,useRef:S,useImperativeHandle:y,useMemo:_,useCallback:v,useContext:d,useDebugValue:p,version:\"18.3.1\",Children:L,render:X,hydrate:nn,unmountComponentAtNode:_n,createPortal:Y,createElement:t,createContext:c,createFactory:vn,cloneElement:yn,createRef:f,Fragment:u,isValidElement:dn,isElement:Cn,isFragment:pn,isMemo:mn,findDOMNode:bn,Component:n,PureComponent:I,memo:N,forwardRef:A,flushSync:gn,unstable_batchedUpdates:Sn,StrictMode:En,Suspense:W,SuspenseList:z,lazy:j,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:sn};export{L as Children,I as PureComponent,En as StrictMode,W as Suspense,z as SuspenseList,sn as __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yn as cloneElement,vn as createFactory,Y as createPortal,xn as default,bn as findDOMNode,gn as flushSync,A as forwardRef,nn as hydrate,Cn as isElement,pn as isFragment,mn as isMemo,dn as isValidElement,j as lazy,N as memo,X as render,x as startTransition,_n as unmountComponentAtNode,Sn as unstable_batchedUpdates,R as useDeferredValue,k as useInsertionEffect,E as useSyncExternalStore,w as useTransition,hn as version};\n//# sourceMappingURL=compat.module.js.map\n","import React, { useState, useRef, useEffect, memo } from 'react';\n\nvar Keyboard;\r\n(function (Keyboard) {\r\n    Keyboard[\"ARROW_DOWN\"] = \"ArrowDown\";\r\n    Keyboard[\"ARROW_LEFT\"] = \"ArrowLeft\";\r\n    Keyboard[\"ARROW_RIGHT\"] = \"ArrowRight\";\r\n    Keyboard[\"ARROW_UP\"] = \"ArrowUp\";\r\n    Keyboard[\"END\"] = \"End\";\r\n    Keyboard[\"HOME\"] = \"Home\";\r\n    Keyboard[\"PAGE_DOWN\"] = \"PageDown\";\r\n    Keyboard[\"PAGE_UP\"] = \"PageUp\";\r\n    Keyboard[\"DELETE\"] = \"Delete\";\r\n    Keyboard[\"BACKSPACE\"] = \"Backspace\";\r\n    Keyboard[\"ENTER\"] = \"Enter\";\r\n})(Keyboard || (Keyboard = {}));\n\nvar exhaustiveCheck = function (msg) {\r\n    return function (arg) {\r\n        throw new Error(\"\".concat(msg).concat(arg));\r\n    };\r\n};\n\nvar moveActions = [\r\n    Keyboard.ARROW_LEFT,\r\n    Keyboard.ARROW_RIGHT,\r\n    Keyboard.HOME,\r\n    Keyboard.END,\r\n];\r\nvar setOfActions$4 = new Set(moveActions);\r\nvar isMoveActions = function (str) { return setOfActions$4.has(str); };\r\nvar moveLeft = function (cursorPosition) {\r\n    var newPos = cursorPosition - 1;\r\n    return newPos < 0 ? 0 : newPos;\r\n};\r\nvar moveRight = function (cursorPosition, lastPosition) {\r\n    var newPos = cursorPosition + 1;\r\n    return newPos > lastPosition ? lastPosition : newPos;\r\n};\r\nvar moveHome = function () { return 0; };\r\nvar moveEnd = function (lastPosition) { return lastPosition; };\r\nvar checkMoveActions = exhaustiveCheck('Invalid move action: ');\r\nvar newPosition$2 = function (_a, key) {\r\n    var cursorPosition = _a.cursorPosition, lastPosition = _a.lastPosition;\r\n    switch (key) {\r\n        case Keyboard.ARROW_LEFT:\r\n            return moveLeft(cursorPosition);\r\n        case Keyboard.ARROW_RIGHT:\r\n            return moveRight(cursorPosition, lastPosition);\r\n        case Keyboard.HOME:\r\n            return moveHome();\r\n        case Keyboard.END:\r\n            return moveEnd(lastPosition);\r\n        default:\r\n            checkMoveActions(key);\r\n    }\r\n    return cursorPosition;\r\n};\r\nvar moveCursor = function (_a, key) {\r\n    var renderValue = _a.renderValue, cursorPosition = _a.cursorPosition, inputValue = _a.inputValue;\r\n    var lastPosition = renderValue.length;\r\n    return {\r\n        renderValue: renderValue,\r\n        cursorPosition: newPosition$2({ cursorPosition: cursorPosition, lastPosition: lastPosition }, key),\r\n        inputValue: inputValue,\r\n    };\r\n};\n\nvar preventedActions = [\r\n    Keyboard.ARROW_DOWN,\r\n    Keyboard.ARROW_LEFT,\r\n    Keyboard.ARROW_RIGHT,\r\n    Keyboard.ARROW_UP,\r\n    Keyboard.END,\r\n    Keyboard.HOME,\r\n    Keyboard.PAGE_DOWN,\r\n    Keyboard.PAGE_UP,\r\n    Keyboard.DELETE,\r\n    Keyboard.BACKSPACE,\r\n    Keyboard.ENTER,\r\n];\r\nvar setOfActions$3 = new Set(preventedActions);\r\nvar isPreventedActions = function (str) { return setOfActions$3.has(str); };\r\nvar preventActions = function (event) {\r\n    event.preventDefault();\r\n};\n\nvar submitActions = [Keyboard.ENTER];\r\nvar setOfActions$2 = new Set(submitActions);\r\nvar isSubmitActions = function (str) { return setOfActions$2.has(str); };\r\nvar DEFAULT_INPUT = '';\r\nvar DEFAULT_RENDER = [];\r\nvar DEFAULT_POSITION = 0;\r\nvar submit = function () { return ({\r\n    inputValue: DEFAULT_INPUT,\r\n    renderValue: DEFAULT_RENDER,\r\n    cursorPosition: DEFAULT_POSITION,\r\n}); };\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nvar removeActions = [Keyboard.BACKSPACE, Keyboard.DELETE];\r\nvar setOfActions$1 = new Set(removeActions);\r\nvar isRemoveActions = function (str) { return setOfActions$1.has(str); };\r\nvar checkRemoveActions = exhaustiveCheck('Invalid remove action: ');\r\nvar newPosition$1 = function (newCursorPosition, lastPosition) {\r\n    if (newCursorPosition < 0)\r\n        return 0;\r\n    if (newCursorPosition > lastPosition)\r\n        return lastPosition;\r\n    return newCursorPosition;\r\n};\r\nvar newRender$1 = function (renderValue, removePosition) { return __spreadArray(__spreadArray([], renderValue.slice(0, removePosition), true), renderValue.slice(removePosition + 1), true); };\r\nvar newValue = function (inputValue, removePosition) {\r\n    return \"\".concat(inputValue.substring(0, removePosition)).concat(inputValue.substring(removePosition + 1));\r\n};\r\nvar handleBackspace = function (props) {\r\n    var renderValue = props.renderValue, inputValue = props.inputValue, cursorPosition = props.cursorPosition;\r\n    var prevPosition = cursorPosition - 1;\r\n    if (prevPosition < 0)\r\n        return props;\r\n    return {\r\n        renderValue: newRender$1(renderValue, prevPosition),\r\n        inputValue: newValue(inputValue, prevPosition),\r\n        cursorPosition: newPosition$1(prevPosition, renderValue.length),\r\n    };\r\n};\r\nvar handleDelete = function (props) {\r\n    var renderValue = props.renderValue, inputValue = props.inputValue, cursorPosition = props.cursorPosition;\r\n    if (cursorPosition === renderValue.length)\r\n        return props;\r\n    return {\r\n        renderValue: newRender$1(renderValue, cursorPosition),\r\n        inputValue: newValue(inputValue, cursorPosition),\r\n        cursorPosition: newPosition$1(cursorPosition, renderValue.length - 1),\r\n    };\r\n};\r\nvar remove = function (props, key) {\r\n    switch (key) {\r\n        case Keyboard.BACKSPACE:\r\n            return handleBackspace(props);\r\n        case Keyboard.DELETE:\r\n            return handleDelete(props);\r\n        default:\r\n            checkRemoveActions(key);\r\n    }\r\n    return props;\r\n};\n\nvar newPosition = function (_a) {\r\n    var oldLength = _a.oldLength, newLength = _a.newLength, cursorPosition = _a.cursorPosition;\r\n    var wasLast = oldLength === cursorPosition;\r\n    if (wasLast)\r\n        return newLength;\r\n    return cursorPosition;\r\n};\r\nvar newRender = function (_a) {\r\n    var renderValue = _a.renderValue, cursorPosition = _a.cursorPosition, newInput = _a.newInput;\r\n    var oldLength = renderValue.length;\r\n    var delta = newInput.length - renderValue.length;\r\n    var addedCharacters = newInput.substring(cursorPosition, cursorPosition + delta);\r\n    return __spreadArray(__spreadArray(__spreadArray([], renderValue.slice(0, cursorPosition), true), addedCharacters.split(''), true), renderValue.slice(cursorPosition, oldLength), true);\r\n};\r\nvar press = function (_a) {\r\n    var newInput = _a.newInput, renderValue = _a.renderValue, cursorPosition = _a.cursorPosition;\r\n    if (!newInput)\r\n        throw new Error('Cannot press without a new input');\r\n    if (newInput.length < renderValue.length)\r\n        throw new Error('New input is shorter then old one');\r\n    return {\r\n        inputValue: newInput,\r\n        renderValue: newRender({ newInput: newInput, renderValue: renderValue, cursorPosition: cursorPosition }),\r\n        cursorPosition: newPosition({\r\n            oldLength: renderValue.length,\r\n            newLength: newInput.length,\r\n            cursorPosition: cursorPosition,\r\n        }),\r\n    };\r\n};\n\nvar serviceActions = [Keyboard.ARROW_UP, Keyboard.ARROW_DOWN];\r\nvar setOfActions = new Set(serviceActions);\r\nvar isServiceActions = function (str) { return setOfActions.has(str); };\r\nvar checkServiceActions = exhaustiveCheck('Invalid service action: ');\r\nvar handleHistoryMove = function (serviceFunction) {\r\n    var inputValue = serviceFunction();\r\n    var cursorPosition = inputValue.length;\r\n    var renderValue = inputValue.split('');\r\n    return { renderValue: renderValue, inputValue: inputValue, cursorPosition: cursorPosition };\r\n};\r\nvar provideService = function (_a, key) {\r\n    var renderValue = _a.renderValue, inputValue = _a.inputValue, cursorPosition = _a.cursorPosition, _b = _a.services, nextCommand = _b.nextCommand, prevCommand = _b.prevCommand;\r\n    switch (key) {\r\n        case Keyboard.ARROW_UP:\r\n            return handleHistoryMove(prevCommand);\r\n        case Keyboard.ARROW_DOWN:\r\n            return handleHistoryMove(nextCommand);\r\n        default:\r\n            checkServiceActions(key);\r\n    }\r\n    return { renderValue: renderValue, inputValue: inputValue, cursorPosition: cursorPosition };\r\n};\n\nvar defaultState$3 = {\r\n    renderValue: [],\r\n    inputValue: '',\r\n    cursorPosition: 0,\r\n};\r\nfunction useCommandLine() {\r\n    var _a = useState(defaultState$3.inputValue), inputValue = _a[0], setInputValue = _a[1];\r\n    var _b = useState(defaultState$3.renderValue), renderValue = _b[0], setRenderValue = _b[1];\r\n    var _c = useState(defaultState$3.cursorPosition), cursorPosition = _c[0], setCursorPosition = _c[1];\r\n    var setState = function (_a) {\r\n        var newRenderValue = _a.renderValue, newInputValue = _a.inputValue, newCursorPosition = _a.cursorPosition;\r\n        if (renderValue !== newRenderValue)\r\n            setRenderValue(newRenderValue);\r\n        if (inputValue !== newInputValue)\r\n            setInputValue(newInputValue);\r\n        if (cursorPosition !== newCursorPosition)\r\n            setCursorPosition(newCursorPosition);\r\n    };\r\n    var preventDefault = function (event) { return preventActions(event); };\r\n    var addCharacter = function (newInput) {\r\n        return setState(press({ renderValue: renderValue, inputValue: inputValue, cursorPosition: cursorPosition, newInput: newInput }));\r\n    };\r\n    var setInput = function (newInput) {\r\n        return setState({\r\n            renderValue: newInput.split(''),\r\n            inputValue: newInput,\r\n            cursorPosition: newInput.length,\r\n        });\r\n    };\r\n    var removeCharacter = function (key) {\r\n        return setState(remove({ renderValue: renderValue, inputValue: inputValue, cursorPosition: cursorPosition }, key));\r\n    };\r\n    var moveCommandCursor = function (key) {\r\n        return setState(moveCursor({ renderValue: renderValue, inputValue: inputValue, cursorPosition: cursorPosition }, key));\r\n    };\r\n    var submitCommand = function () { return setState(submit()); };\r\n    var provideCommandService = function (key, services) {\r\n        return setState(provideService({ renderValue: renderValue, inputValue: inputValue, cursorPosition: cursorPosition, services: services }, key));\r\n    };\r\n    return {\r\n        state: {\r\n            inputValue: inputValue,\r\n            renderValue: renderValue,\r\n            cursorPosition: cursorPosition,\r\n        },\r\n        handlers: {\r\n            preventDefault: preventDefault,\r\n            addCharacter: addCharacter,\r\n            setInput: setInput,\r\n            moveCommandCursor: moveCommandCursor,\r\n            removeCharacter: removeCharacter,\r\n            submitCommand: submitCommand,\r\n            provideCommandService: provideCommandService,\r\n        },\r\n    };\r\n}\n\nfunction useCommandLineInput() {\r\n    var inputElementRef = useRef(null);\r\n    var setInputCursor = function (cursorPosition) {\r\n        if (inputElementRef.current) {\r\n            inputElementRef.current.selectionStart = cursorPosition;\r\n            inputElementRef.current.selectionEnd = cursorPosition;\r\n        }\r\n    };\r\n    var focus = function () { var _a; return (_a = inputElementRef.current) === null || _a === void 0 ? void 0 : _a.focus(); };\r\n    return { state: { inputElementRef: inputElementRef }, handlers: { focus: focus, setInputCursor: setInputCursor } };\r\n}\n\nvar DEFAULT_COMMAND = '';\r\nvar next$1 = function (_a) {\r\n    var commandsHistory = _a.commandsHistory, oldCursorPosition = _a.cursorPosition;\r\n    var lastIndex = commandsHistory.length - 1;\r\n    var nextIndex = oldCursorPosition + 1;\r\n    var cursorPosition = lastIndex < nextIndex ? commandsHistory.length : nextIndex;\r\n    var command = commandsHistory[cursorPosition] || DEFAULT_COMMAND;\r\n    return { commandsHistory: commandsHistory, cursorPosition: cursorPosition, command: command };\r\n};\r\nvar prev = function (_a) {\r\n    var commandsHistory = _a.commandsHistory, oldCursorPosition = _a.cursorPosition;\r\n    var prevIndex = oldCursorPosition - 1;\r\n    var cursorPosition = prevIndex < 0 ? -1 : prevIndex;\r\n    var command = commandsHistory[cursorPosition] || DEFAULT_COMMAND;\r\n    return { commandsHistory: commandsHistory, cursorPosition: cursorPosition, command: command };\r\n};\r\nvar add = function (_a) {\r\n    var commandsHistory = _a.commandsHistory, command = _a.command, maxHistoryCommands = _a.maxHistoryCommands;\r\n    var commandsLength = commandsHistory.length;\r\n    var lastIndex = commandsLength - 1;\r\n    var sameCommand = commandsHistory[lastIndex] === command;\r\n    if (sameCommand)\r\n        return { commandsHistory: commandsHistory, cursorPosition: commandsLength };\r\n    var canAppend = commandsLength < maxHistoryCommands;\r\n    if (canAppend)\r\n        return {\r\n            commandsHistory: __spreadArray(__spreadArray([], commandsHistory, true), [command], false),\r\n            cursorPosition: commandsLength + 1,\r\n        };\r\n    var canReplace = Boolean(commandsLength);\r\n    if (canReplace) {\r\n        return {\r\n            commandsHistory: __spreadArray(__spreadArray([], commandsHistory.slice(1), true), [command], false),\r\n            cursorPosition: commandsLength,\r\n        };\r\n    }\r\n    return { commandsHistory: commandsHistory, cursorPosition: commandsLength };\r\n};\n\nvar defaultState$2 = {\r\n    commandsHistory: [],\r\n    cursorPosition: 0,\r\n};\r\nfunction useCommandHistory(_a) {\r\n    var maxHistoryCommands = _a.maxHistoryCommands;\r\n    var _b = useState(defaultState$2.commandsHistory), commandsHistory = _b[0], setCommandsHistory = _b[1];\r\n    var _c = useState(defaultState$2.cursorPosition), cursorPosition = _c[0], setCursorPosition = _c[1];\r\n    var setState = function (_a) {\r\n        var newCommandsHistory = _a.commandsHistory, newCursorPosition = _a.cursorPosition;\r\n        if (commandsHistory !== newCommandsHistory)\r\n            setCommandsHistory(newCommandsHistory);\r\n        if (cursorPosition !== newCursorPosition)\r\n            setCursorPosition(newCursorPosition);\r\n    };\r\n    var addCommand = function (command) {\r\n        setState(add({ maxHistoryCommands: maxHistoryCommands, commandsHistory: commandsHistory, command: command }));\r\n    };\r\n    var nextCommand = function () {\r\n        var _a = next$1({\r\n            commandsHistory: commandsHistory,\r\n            cursorPosition: cursorPosition,\r\n        }), command = _a.command, rest = __rest(_a, [\"command\"]);\r\n        setState(rest);\r\n        return command;\r\n    };\r\n    var prevCommand = function () {\r\n        var _a = prev({\r\n            commandsHistory: commandsHistory,\r\n            cursorPosition: cursorPosition,\r\n        }), command = _a.command, rest = __rest(_a, [\"command\"]);\r\n        setState(rest);\r\n        return command;\r\n    };\r\n    return {\r\n        state: {\r\n            commandsHistory: commandsHistory,\r\n        },\r\n        handlers: {\r\n            addCommand: addCommand,\r\n            nextCommand: nextCommand,\r\n            prevCommand: prevCommand,\r\n        },\r\n    };\r\n}\n\nvar printWords = function (_a) {\r\n    var remainingWords = _a.remainingWords, printedWords = _a.printedWords, charactersToPrint = _a.charactersToPrint;\r\n    var firstWord = remainingWords[0];\r\n    if (!firstWord)\r\n        return { printedWords: printedWords, remainingWords: null, wordFullyPrinted: true };\r\n    var printedChunk = firstWord.characters.slice(0, charactersToPrint);\r\n    var printedLength = printedChunk.length;\r\n    if (printedLength === charactersToPrint) {\r\n        if (printedLength < firstWord.characters.length) {\r\n            return {\r\n                printedWords: __spreadArray(__spreadArray([], printedWords, true), [__assign(__assign({}, firstWord), { characters: printedChunk })], false),\r\n                remainingWords: __spreadArray([\r\n                    __assign(__assign({}, firstWord), { characters: firstWord.characters.slice(printedLength) })\r\n                ], remainingWords.slice(1), true),\r\n                wordFullyPrinted: false,\r\n            };\r\n        }\r\n        return {\r\n            printedWords: __spreadArray(__spreadArray([], printedWords, true), [firstWord], false),\r\n            remainingWords: remainingWords.slice(1),\r\n            wordFullyPrinted: true,\r\n        };\r\n    }\r\n    return printWords({\r\n        remainingWords: remainingWords.slice(1),\r\n        printedWords: __spreadArray(__spreadArray([], printedWords, true), [firstWord], false),\r\n        charactersToPrint: charactersToPrint - printedLength,\r\n    });\r\n};\n\nvar combineWords = function (_a) {\r\n    var prevWord = _a.prevWord, nextWord = _a.nextWord, wordFullyPrinted = _a.wordFullyPrinted;\r\n    return prevWord && nextWord && !wordFullyPrinted\r\n        ? __assign(__assign({}, prevWord), { characters: prevWord.characters + nextWord.characters }) : nextWord;\r\n};\r\nvar makeWordChunk = function (_a) {\r\n    var firstWord = _a.firstWord, printedWords = _a.printedWords;\r\n    if (!firstWord)\r\n        return printedWords;\r\n    return __spreadArray([firstWord], printedWords.slice(1), true);\r\n};\r\nvar appendWordChunk = function (_a) {\r\n    var printedWordsPrev = _a.printedWordsPrev, wordChunk = _a.wordChunk, wordFullyPrintedPrev = _a.wordFullyPrintedPrev;\r\n    return wordFullyPrintedPrev\r\n        ? __spreadArray(__spreadArray([], printedWordsPrev, true), wordChunk, true) : __spreadArray(__spreadArray([], printedWordsPrev.slice(0, printedWordsPrev.length - 1), true), wordChunk, true);\r\n};\r\nvar getRemainingLine = function (_a) {\r\n    var remainingLine = _a.remainingLine, remainingWords = _a.remainingWords;\r\n    return remainingWords && remainingWords.length > 0 ? __assign(__assign({}, remainingLine), { words: remainingWords }) : null;\r\n};\r\nvar printLine = function (_a) {\r\n    var remainingLine = _a.remainingLine, printedLine = _a.printedLine, charactersToPrint = _a.charactersToPrint, wordFullyPrintedPrev = _a.wordFullyPrinted;\r\n    var printedWordsPrev = printedLine.words;\r\n    var _b = printWords({\r\n        remainingWords: remainingLine.words,\r\n        printedWords: [],\r\n        charactersToPrint: charactersToPrint,\r\n    }), printedWords = _b.printedWords, remainingWords = _b.remainingWords, wordFullyPrinted = _b.wordFullyPrinted;\r\n    var prevWord = printedWordsPrev[printedWordsPrev.length - 1];\r\n    var nextWord = printedWords[0];\r\n    var firstWord = combineWords({ prevWord: prevWord, nextWord: nextWord, wordFullyPrinted: wordFullyPrintedPrev });\r\n    var wordChunk = makeWordChunk({ firstWord: firstWord, printedWords: printedWords });\r\n    return {\r\n        remainingLine: getRemainingLine({ remainingLine: remainingLine, remainingWords: remainingWords }),\r\n        printedLine: __assign(__assign({}, printedLine), { words: appendWordChunk({ printedWordsPrev: printedWordsPrev, wordChunk: wordChunk, wordFullyPrintedPrev: wordFullyPrintedPrev }) }),\r\n        wordFullyPrinted: wordFullyPrinted,\r\n    };\r\n};\n\nvar combinePrintedLines = function (_a) {\r\n    var printedLines = _a.printedLines, printedLine = _a.printedLine, newLine = _a.newLine;\r\n    return newLine\r\n        ? __spreadArray(__spreadArray([], printedLines, true), [printedLine], false) : __spreadArray(__spreadArray([], printedLines.slice(0, printedLines.length - 1), true), [printedLine], false);\r\n};\r\nvar combineRemainingLines = function (_a) {\r\n    var remainingLines = _a.remainingLines, remainingLine = _a.remainingLine;\r\n    var lines = !remainingLine\r\n        ? remainingLines.slice(1)\r\n        : __spreadArray([remainingLine], remainingLines.slice(1), true);\r\n    return lines.length > 0 ? lines : null;\r\n};\r\nvar printMultiline = function (_a) {\r\n    var remainingLines = _a.remainingLines, printedLines = _a.printedLines, wordFullyPrinted = _a.wordFullyPrinted, newLine = _a.newLine, charactersToPrint = _a.charactersToPrint;\r\n    var firstLine = remainingLines[0];\r\n    if (!firstLine)\r\n        return {\r\n            newLine: newLine,\r\n            wordFullyPrinted: wordFullyPrinted,\r\n            printedLines: printedLines,\r\n            remainingLines: null,\r\n        };\r\n    var _b = printLine({\r\n        remainingLine: firstLine,\r\n        printedLine: newLine ? __assign(__assign({}, firstLine), { words: [] }) : printedLines[printedLines.length - 1],\r\n        charactersToPrint: charactersToPrint,\r\n        wordFullyPrinted: wordFullyPrinted,\r\n    }), remainingLine = _b.remainingLine, printedLine = _b.printedLine, wordFullyPrintedAfterPrint = _b.wordFullyPrinted;\r\n    return {\r\n        newLine: !remainingLine,\r\n        wordFullyPrinted: wordFullyPrintedAfterPrint,\r\n        printedLines: combinePrintedLines({ printedLines: printedLines, printedLine: printedLine, newLine: newLine }),\r\n        remainingLines: combineRemainingLines({ remainingLines: remainingLines, remainingLine: remainingLine }),\r\n    };\r\n};\n\nvar makeNewState = function (_a) {\r\n    var prevState = _a.prevState, printedLinesNext = _a.printedLinesNext, newLine = _a.newLine;\r\n    return newLine\r\n        ? __spreadArray(__spreadArray([], prevState, true), printedLinesNext, true) : __spreadArray(__spreadArray([], prevState.slice(0, prevState.length - 1), true), printedLinesNext, true);\r\n};\r\nvar printer = function (_a) {\r\n    var remainingLines = _a.remainingLines, printedLines = _a.printedLines, prevState = _a.state, wordFullyPrinted = _a.wordFullyPrinted, newLine = _a.newLine, charactersToPrint = _a.charactersToPrint;\r\n    var _b = printMultiline({\r\n        remainingLines: remainingLines,\r\n        printedLines: printedLines,\r\n        wordFullyPrinted: wordFullyPrinted,\r\n        newLine: newLine,\r\n        charactersToPrint: charactersToPrint,\r\n    }), remainingLinesNext = _b.remainingLines, printedLinesNext = _b.printedLines, wordFullyPrintedNext = _b.wordFullyPrinted, newLineNext = _b.newLine;\r\n    return {\r\n        remainingLines: remainingLinesNext,\r\n        printedLines: printedLinesNext,\r\n        wordFullyPrinted: wordFullyPrintedNext,\r\n        newLine: newLineNext,\r\n        state: makeNewState({ prevState: prevState, printedLinesNext: printedLinesNext, newLine: newLine }),\r\n    };\r\n};\r\nvar createPrinterTask = function (nextPrint, printerSpeed) {\r\n    return setTimeout(function () { return nextPrint(); }, printerSpeed);\r\n};\n\nvar defaultState$1 = {\r\n    state: [],\r\n    remainingLines: null,\r\n    printedLines: [],\r\n    wordFullyPrinted: true,\r\n    newLine: true,\r\n};\r\nfunction usePrinter(_a) {\r\n    var _this = this;\r\n    var printerSpeed = _a.printerSpeed, charactersPerTick = _a.charactersPerTick, afterPrintCallback = _a.afterPrintCallback, onPrintStatusChange = _a.onPrintStatusChange;\r\n    var _b = useState(false), isPrinting = _b[0], setIsPrinting = _b[1];\r\n    var _c = useState(null), activeTimeout = _c[0], setActiveTimeout = _c[1];\r\n    var _d = useState(defaultState$1), printerResponse = _d[0], setPrinterResponse = _d[1];\r\n    var resolveRef = useRef(null);\r\n    var clearTimeoutState = function () {\r\n        if (activeTimeout) {\r\n            clearTimeout(activeTimeout);\r\n            setActiveTimeout(null);\r\n        }\r\n    };\r\n    var clearResolver = function () {\r\n        if (resolveRef.current) {\r\n            resolveRef.current(true);\r\n            resolveRef.current = null;\r\n        }\r\n    };\r\n    var nextPrint = function () {\r\n        var remainingLines = printerResponse.remainingLines, printedLines = printerResponse.printedLines, wordFullyPrinted = printerResponse.wordFullyPrinted, newLine = printerResponse.newLine, state = printerResponse.state;\r\n        if (!remainingLines)\r\n            return;\r\n        var resp = printer({\r\n            remainingLines: remainingLines,\r\n            printedLines: newLine ? [] : printedLines,\r\n            wordFullyPrinted: wordFullyPrinted,\r\n            newLine: newLine,\r\n            state: state,\r\n            charactersToPrint: charactersPerTick,\r\n        });\r\n        setPrinterResponse(resp);\r\n        setActiveTimeout(null);\r\n    };\r\n    var startPrint = function (line) { return __awaiter(_this, void 0, void 0, function () {\r\n        var resp;\r\n        return __generator(this, function (_a) {\r\n            resp = printer({\r\n                remainingLines: line,\r\n                printedLines: [],\r\n                state: printerResponse.state,\r\n                wordFullyPrinted: true,\r\n                newLine: true,\r\n                charactersToPrint: charactersPerTick,\r\n            });\r\n            setIsPrinting(true);\r\n            setPrinterResponse(resp);\r\n            onPrintStatusChange === null || onPrintStatusChange === void 0 ? void 0 : onPrintStatusChange(true);\r\n            return [2 /*return*/, new Promise(function (resolve) {\r\n                    resolveRef.current = resolve;\r\n                })];\r\n        });\r\n    }); };\r\n    var stopPrint = function () {\r\n        setIsPrinting(false);\r\n        clearResolver();\r\n        onPrintStatusChange === null || onPrintStatusChange === void 0 ? void 0 : onPrintStatusChange(false);\r\n    };\r\n    var clear = function () {\r\n        setPrinterResponse(defaultState$1);\r\n    };\r\n    useEffect(function () {\r\n        var shouldStopPrint = isPrinting && !printerResponse.remainingLines;\r\n        var shouldPrint = isPrinting && !activeTimeout;\r\n        var shouldClearTimeout = !isPrinting && activeTimeout;\r\n        if (shouldStopPrint) {\r\n            console.log(printerResponse);\r\n            stopPrint();\r\n            afterPrintCallback();\r\n        }\r\n        else if (shouldPrint) {\r\n            setActiveTimeout(createPrinterTask(nextPrint, printerSpeed));\r\n            afterPrintCallback();\r\n        }\r\n        else if (shouldClearTimeout) {\r\n            clearTimeoutState();\r\n        }\r\n        return function () { };\r\n        // disabled due to inner structure: nextSlide only matters when activeTimeout or isLoading updated\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isPrinting, activeTimeout]);\r\n    useEffect(function () { return function () {\r\n        clearTimeoutState();\r\n        clearResolver();\r\n    }; }, \r\n    // disabled due to inner structure: should be equal to \"onBeforeUnmount\"\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []);\r\n    return {\r\n        state: printerResponse.state,\r\n        handlers: {\r\n            startPrint: startPrint,\r\n            clear: clear,\r\n        },\r\n    };\r\n}\n\nfunction useCommandScreen(_a) {\r\n    var printerConfig = _a.printerConfig;\r\n    var _b = usePrinter(printerConfig), state = _b.state, _c = _b.handlers, startPrint = _c.startPrint, clear = _c.clear;\r\n    return {\r\n        state: state,\r\n        handlers: {\r\n            print: startPrint,\r\n            clear: clear,\r\n        },\r\n    };\r\n}\n\nvar WordTypes;\r\n(function (WordTypes) {\r\n    WordTypes[\"ANCHOR\"] = \"ANCHOR\";\r\n    WordTypes[\"TEXT\"] = \"TEXT\";\r\n    WordTypes[\"BUTTON\"] = \"BUTTON\";\r\n    WordTypes[\"COMMAND\"] = \"COMMAND\";\r\n})(WordTypes || (WordTypes = {}));\r\nvar anchorWord = function (_a) {\r\n    var characters = _a.characters, href = _a.href, onClick = _a.onClick, dataAttribute = _a.dataAttribute, className = _a.className, id = _a.id;\r\n    return ({\r\n        type: WordTypes.ANCHOR,\r\n        characters: characters,\r\n        href: href,\r\n        onClick: onClick,\r\n        dataAttribute: dataAttribute,\r\n        id: id,\r\n        className: className,\r\n    });\r\n};\r\nvar textWord = function (_a) {\r\n    var characters = _a.characters, dataAttribute = _a.dataAttribute, className = _a.className, id = _a.id;\r\n    return ({\r\n        type: WordTypes.TEXT,\r\n        characters: characters,\r\n        dataAttribute: dataAttribute,\r\n        id: id,\r\n        className: className,\r\n    });\r\n};\r\nvar buttonWord = function (_a) {\r\n    var characters = _a.characters, onClick = _a.onClick, dataAttribute = _a.dataAttribute, className = _a.className, id = _a.id;\r\n    return ({\r\n        type: WordTypes.BUTTON,\r\n        characters: characters,\r\n        onClick: onClick,\r\n        dataAttribute: dataAttribute,\r\n        id: id,\r\n        className: className,\r\n    });\r\n};\r\nvar commandWord = function (_a) {\r\n    var characters = _a.characters, prompt = _a.prompt, dataAttribute = _a.dataAttribute, className = _a.className, id = _a.id;\r\n    return ({\r\n        type: WordTypes.COMMAND,\r\n        characters: characters,\r\n        prompt: prompt,\r\n        dataAttribute: dataAttribute,\r\n        className: className,\r\n        id: id,\r\n    });\r\n};\r\nvar LineTypes;\r\n(function (LineTypes) {\r\n    LineTypes[\"TEXT\"] = \"TEXT\";\r\n    LineTypes[\"COMMAND\"] = \"COMMAND\";\r\n})(LineTypes || (LineTypes = {}));\r\nvar commandLine = function (_a) {\r\n    var words = _a.words, dataAttribute = _a.dataAttribute, className = _a.className, id = _a.id;\r\n    return ({\r\n        type: LineTypes.COMMAND,\r\n        words: words,\r\n        dataAttribute: dataAttribute,\r\n        className: className,\r\n        id: id,\r\n    });\r\n};\r\nvar textLine = function (_a) {\r\n    var words = _a.words, dataAttribute = _a.dataAttribute, className = _a.className, id = _a.id;\r\n    return ({\r\n        type: LineTypes.TEXT,\r\n        words: words,\r\n        dataAttribute: dataAttribute,\r\n        className: className,\r\n        id: id,\r\n    });\r\n};\n\nvar PrinterEvents;\r\n(function (PrinterEvents) {\r\n    PrinterEvents[\"PRINT\"] = \"PRINT\";\r\n    PrinterEvents[\"CLEAR\"] = \"CLEAR\";\r\n})(PrinterEvents || (PrinterEvents = {}));\r\nvar defaultQueue$2 = [];\r\nfunction usePrinterQueue() {\r\n    var queue = useRef(defaultQueue$2).current;\r\n    var _a = useState(__spreadArray([], defaultQueue$2, true)), queueState = _a[0], setQueueState = _a[1];\r\n    var enqueue = function (event) {\r\n        queue.push(event);\r\n        setQueueState(__spreadArray([], queue, true));\r\n    };\r\n    var dequeue = function (afterDequeue) {\r\n        queue.shift();\r\n        setQueueState(__spreadArray([], queue, true));\r\n        afterDequeue();\r\n    };\r\n    var nextEvent = function () { return queueState[0]; };\r\n    var print = function (payload) {\r\n        enqueue({\r\n            type: PrinterEvents.PRINT,\r\n            payload: payload,\r\n        });\r\n    };\r\n    var clear = function () {\r\n        enqueue({\r\n            type: PrinterEvents.CLEAR,\r\n        });\r\n    };\r\n    return {\r\n        state: queueState,\r\n        handlers: {\r\n            print: print,\r\n            clear: clear,\r\n            dequeue: dequeue,\r\n            nextEvent: nextEvent,\r\n        },\r\n    };\r\n}\n\nvar TerminalEvents;\r\n(function (TerminalEvents) {\r\n    TerminalEvents[\"FOCUS\"] = \"FOCUS\";\r\n    TerminalEvents[\"LOCK\"] = \"LOCK\";\r\n    TerminalEvents[\"LOADING\"] = \"LOADING\";\r\n})(TerminalEvents || (TerminalEvents = {}));\r\nvar defaultQueue$1 = [];\r\nfunction useTerminalQueue() {\r\n    var queue = useRef(defaultQueue$1).current;\r\n    var _a = useState(__spreadArray([], defaultQueue$1, true)), queueState = _a[0], setQueueState = _a[1];\r\n    var enqueue = function (event) {\r\n        queue.push(event);\r\n        setQueueState(__spreadArray([], queue, true));\r\n    };\r\n    var dequeue = function (afterDequeue) {\r\n        queue.shift();\r\n        setQueueState(__spreadArray([], queue, true));\r\n        afterDequeue();\r\n    };\r\n    var nextEvent = function () { return queueState[0]; };\r\n    var focus = function () {\r\n        enqueue({\r\n            type: TerminalEvents.FOCUS,\r\n        });\r\n    };\r\n    var lock = function (payload) {\r\n        enqueue({\r\n            type: TerminalEvents.LOCK,\r\n            payload: payload,\r\n        });\r\n    };\r\n    var loading = function (payload) {\r\n        enqueue({\r\n            type: TerminalEvents.LOADING,\r\n            payload: payload,\r\n        });\r\n    };\r\n    return {\r\n        state: queueState,\r\n        handlers: {\r\n            focus: focus,\r\n            lock: lock,\r\n            loading: loading,\r\n            dequeue: dequeue,\r\n            nextEvent: nextEvent,\r\n        },\r\n    };\r\n}\n\nvar defaultQueue = [];\r\nfunction useEventQueue() {\r\n    var queue = useRef(defaultQueue).current;\r\n    var _a = useState(__spreadArray([], defaultQueue, true)), queueState = _a[0], setQueueState = _a[1];\r\n    var enqueue = function (event) {\r\n        queue.push(event);\r\n        setQueueState(__spreadArray([], queue, true));\r\n    };\r\n    var dequeue = function (afterDequeue) {\r\n        queue.shift();\r\n        setQueueState(__spreadArray([], queue, true));\r\n        afterDequeue();\r\n    };\r\n    var nextEvent = function () { return queueState[0]; };\r\n    var print = function (payload) {\r\n        enqueue({\r\n            type: PrinterEvents.PRINT,\r\n            payload: payload,\r\n        });\r\n    };\r\n    var clear = function () {\r\n        enqueue({\r\n            type: PrinterEvents.CLEAR,\r\n        });\r\n    };\r\n    var focus = function () {\r\n        enqueue({\r\n            type: TerminalEvents.FOCUS,\r\n        });\r\n    };\r\n    var lock = function (payload) {\r\n        enqueue({\r\n            type: TerminalEvents.LOCK,\r\n            payload: payload,\r\n        });\r\n    };\r\n    var loading = function (payload) {\r\n        enqueue({\r\n            type: TerminalEvents.LOADING,\r\n            payload: payload,\r\n        });\r\n    };\r\n    return {\r\n        state: queueState,\r\n        api: { enqueue: enqueue, dequeue: dequeue, nextEvent: nextEvent },\r\n        handlers: {\r\n            print: print,\r\n            clear: clear,\r\n            focus: focus,\r\n            lock: lock,\r\n            loading: loading,\r\n        },\r\n    };\r\n}\n\nvar printCommandLine = function (_a) {\r\n    var characters = _a.characters, prompt = _a.prompt;\r\n    return commandLine({ words: [commandWord({ characters: characters, prompt: prompt })] });\r\n};\r\nfunction useTerminalController(_a) {\r\n    var _this = this;\r\n    var _b = _a.terminalApp, inputLocked = _b.state.inputLocked, lockApp = _b.handlers.lock, _c = _a.input.handlers, setInputCursor = _c.setInputCursor, focusInput = _c.focus, _d = _a.commandScreen.handlers, printOnScreen = _d.print, clearScreen = _d.clear, _e = _a.commandLine, _f = _e.state, cursorPosition = _f.cursorPosition, inputValue = _f.inputValue, _g = _e.handlers, preventDefault = _g.preventDefault, addCharacter = _g.addCharacter, removeCharacter = _g.removeCharacter, moveCommandCursor = _g.moveCommandCursor, submitCommand = _g.submitCommand, provideCommandService = _g.provideCommandService, _h = _a.commandHistory.handlers, addCommand = _h.addCommand, nextCommand = _h.nextCommand, prevCommand = _h.prevCommand, _j = _a.loaderComponent, loaderLoading = _j.isLoading, _k = _j.handlers, startComponentLoading = _k.startLoading, endComponentLoading = _k.endLoading, _l = _a.interface, onCommand = _l.onCommand, prompt = _l.prompt, banner = _l.banner, enqueue = _l.queue.api.enqueue, focusOnMount = _a.focusOnMount;\r\n    var _m = useState(false), lockedByLoader = _m[0], setLockedByLoader = _m[1];\r\n    var focus = function () {\r\n        focusInput();\r\n    };\r\n    var lock = function (locked) {\r\n        var attemptUnlockLoader = loaderLoading && !locked;\r\n        if (attemptUnlockLoader)\r\n            return;\r\n        lockApp(locked);\r\n    };\r\n    var clear = function () { return clearScreen(); };\r\n    var print = function (line) { return __awaiter(_this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, printOnScreen(line)];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    var lockByLoader = function (lockState) {\r\n        var needToLock = lockState && lockState !== inputLocked;\r\n        var needToUnlock = !lockState && lockedByLoader;\r\n        if (needToLock) {\r\n            lockApp(true);\r\n            setLockedByLoader(true);\r\n        }\r\n        else if (needToUnlock) {\r\n            lockApp(false);\r\n            setLockedByLoader(false);\r\n        }\r\n    };\r\n    var loading = function (loadingState) {\r\n        if (loadingState && !loaderLoading) {\r\n            lockByLoader(true);\r\n            startComponentLoading();\r\n        }\r\n        else if (!loadingState && loaderLoading) {\r\n            endComponentLoading();\r\n            lockByLoader(false);\r\n        }\r\n    };\r\n    var handleInputChange = function (newInput) {\r\n        if (!inputLocked)\r\n            addCharacter(newInput);\r\n    };\r\n    var handleKeyboardEvent = function (key) {\r\n        if (isMoveActions(key))\r\n            moveCommandCursor(key);\r\n        if (isRemoveActions(key))\r\n            removeCharacter(key);\r\n        if (isServiceActions(key))\r\n            provideCommandService(key, { nextCommand: nextCommand, prevCommand: prevCommand });\r\n        if (isSubmitActions(key)) {\r\n            submitCommand();\r\n            var characters = inputValue.trim();\r\n            if (characters) {\r\n                addCommand(characters);\r\n                enqueue({ type: PrinterEvents.PRINT, payload: [printCommandLine({ characters: characters, prompt: prompt })] });\r\n                onCommand(characters);\r\n            }\r\n        }\r\n    };\r\n    var handleKeyboardDown = function (event) {\r\n        var key = event.key;\r\n        if (isPreventedActions(key))\r\n            preventDefault(event);\r\n        if (!inputLocked)\r\n            handleKeyboardEvent(key);\r\n    };\r\n    useEffect(function () {\r\n        setInputCursor(cursorPosition);\r\n        // disabled due to inner structure: setInputCursor refers to ref input\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [cursorPosition]);\r\n    var loaded = useRef(false);\r\n    useEffect(function () {\r\n        if (banner && !loaded.current) {\r\n            loaded.current = true;\r\n            enqueue({ type: PrinterEvents.PRINT, payload: banner });\r\n        }\r\n        if (focusOnMount) {\r\n            focusInput();\r\n        }\r\n        // disabled due to inner structure: hook should print banner on mount\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    return {\r\n        handlers: {\r\n            focus: focus,\r\n            lock: lock,\r\n            clear: clear,\r\n            print: print,\r\n            handleInputChange: handleInputChange,\r\n            handleKeyboardDown: handleKeyboardDown,\r\n            loading: loading,\r\n        },\r\n    };\r\n}\n\nvar defaultState = {\r\n    inputLocked: false,\r\n};\r\nfunction useTerminalApp() {\r\n    var _a = useState(defaultState.inputLocked), inputLocked = _a[0], setInputLocked = _a[1];\r\n    var terminalRef = useRef(null);\r\n    var setState = function (_a) {\r\n        var newInputLocked = _a.inputLocked;\r\n        if (inputLocked !== newInputLocked)\r\n            setInputLocked(newInputLocked);\r\n    };\r\n    var lock = function (locked) { return setState({ inputLocked: locked }); };\r\n    var scrollDown = function () {\r\n        var current = terminalRef.current;\r\n        if (current) {\r\n            current.scrollTop = current.scrollHeight;\r\n        }\r\n    };\r\n    return {\r\n        state: {\r\n            terminalRef: terminalRef,\r\n            inputLocked: inputLocked,\r\n        },\r\n        handlers: {\r\n            lock: lock,\r\n            scrollDown: scrollDown,\r\n        },\r\n    };\r\n}\n\nfunction useSubscribePrinterQueue(_a) {\r\n    var _this = this;\r\n    var _b = _a.controller, clear = _b.clear, print = _b.print, _c = _a.queue, queueState = _c.state, _d = _c.handlers, dequeue = _d.dequeue, nextEvent = _d.nextEvent;\r\n    var _e = useState(null), activeEvent = _e[0], setActiveEvent = _e[1];\r\n    var nullifyActiveEvent = function () { return setActiveEvent(null); };\r\n    var interpretEvent = function (event) { return __awaiter(_this, void 0, void 0, function () {\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    _a = event.type;\r\n                    switch (_a) {\r\n                        case PrinterEvents.CLEAR: return [3 /*break*/, 1];\r\n                        case PrinterEvents.PRINT: return [3 /*break*/, 2];\r\n                    }\r\n                    return [3 /*break*/, 4];\r\n                case 1:\r\n                    clear();\r\n                    dequeue(nullifyActiveEvent);\r\n                    return [3 /*break*/, 4];\r\n                case 2: return [4 /*yield*/, print(event.payload)];\r\n                case 3:\r\n                    _b.sent();\r\n                    dequeue(nullifyActiveEvent);\r\n                    return [3 /*break*/, 4];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    useEffect(function () {\r\n        var event = nextEvent();\r\n        var isNew = activeEvent !== event;\r\n        if (event && isNew) {\r\n            setActiveEvent(event);\r\n            interpretEvent(event);\r\n        }\r\n        // disabled due to inner structure: nextEvent and interpretEvent only matter when queue state updated, i.e. item enqueued or dequeued\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [queueState, activeEvent]);\r\n}\n\nfunction useSubscribeTerminalQueue(_a) {\r\n    var _b = _a.controller, focus = _b.focus, loading = _b.loading, lock = _b.lock, _c = _a.queue, queueState = _c.state, _d = _c.handlers, dequeue = _d.dequeue, nextEvent = _d.nextEvent;\r\n    var _e = useState(null), activeEvent = _e[0], setActiveEvent = _e[1];\r\n    var nullifyActiveEvent = function () { return setActiveEvent(null); };\r\n    var interpretEvent = function (event) {\r\n        switch (event.type) {\r\n            case TerminalEvents.FOCUS:\r\n                focus();\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n            case TerminalEvents.LOADING:\r\n                loading(event.payload);\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n            case TerminalEvents.LOCK:\r\n                lock(event.payload);\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n        }\r\n    };\r\n    useEffect(function () {\r\n        var event = nextEvent();\r\n        var isNew = activeEvent !== event;\r\n        if (event && isNew) {\r\n            setActiveEvent(event);\r\n            interpretEvent(event);\r\n        }\r\n        // disabled due to inner structure: nextEvent and interpretEvent only matter when queue state updated, i.e. item enqueued or dequeued\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [queueState, activeEvent]);\r\n}\n\nfunction useSubscribeEventQueue(_a) {\r\n    var controller = _a.controller, _b = _a.queue, queueState = _b.state, _c = _b.api, dequeue = _c.dequeue, nextEvent = _c.nextEvent;\r\n    var _d = useState(null), activeEvent = _d[0], setActiveEvent = _d[1];\r\n    var nullifyActiveEvent = function () { return setActiveEvent(null); };\r\n    var printerQueue = usePrinterQueue();\r\n    var _e = printerQueue.handlers, printerPrint = _e.print, printerClear = _e.clear;\r\n    useSubscribePrinterQueue({ queue: printerQueue, controller: controller });\r\n    var terminalQueue = useTerminalQueue();\r\n    var _f = terminalQueue.handlers, terminalFocus = _f.focus, terminalLoading = _f.loading, terminalLock = _f.lock;\r\n    useSubscribeTerminalQueue({ queue: terminalQueue, controller: controller });\r\n    var interpretEvent = function (event) {\r\n        switch (event.type) {\r\n            case TerminalEvents.FOCUS:\r\n                terminalFocus();\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n            case TerminalEvents.LOADING:\r\n                terminalLoading(event.payload);\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n            case TerminalEvents.LOCK:\r\n                terminalLock(event.payload);\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n            case PrinterEvents.CLEAR:\r\n                printerClear();\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n            case PrinterEvents.PRINT:\r\n                printerPrint(event.payload);\r\n                dequeue(nullifyActiveEvent);\r\n                break;\r\n        }\r\n    };\r\n    useEffect(function () {\r\n        var event = nextEvent();\r\n        var isNew = activeEvent !== event;\r\n        if (event && isNew) {\r\n            setActiveEvent(event);\r\n            interpretEvent(event);\r\n        }\r\n        // disabled due to inner structure: nextEvent and interpretEvent only matter when queue state updated, i.e. item enqueued or dequeued\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [queueState, activeEvent]);\r\n}\n\nvar DEFAULT_SLIDE = '';\r\nvar DEFAULT_SLIDE_INDEX = -1;\r\nvar next = function (_a) {\r\n    var slides = _a.slides, slideIndex = _a.slideIndex;\r\n    var newIndex = slideIndex + 1;\r\n    var slide = slides[newIndex];\r\n    if (slide)\r\n        return { slideIndex: newIndex, slide: slide };\r\n    return { slideIndex: 0, slide: slides[0] || DEFAULT_SLIDE };\r\n};\r\nvar createLoader = function (nextSlide, loaderSpeed) {\r\n    return setTimeout(function () { return nextSlide(); }, loaderSpeed);\r\n};\n\nfunction useLoader(_a) {\r\n    var slides = _a.slides, loaderSpeed = _a.loaderSpeed, onSetOuterState = _a.onSetOuterState;\r\n    var _b = useState(false), isLoading = _b[0], setIsLoading = _b[1];\r\n    var _c = useState(DEFAULT_SLIDE_INDEX), slideIndex = _c[0], setSlide = _c[1];\r\n    var _d = useState(null), activeTimeout = _d[0], setActiveTimeout = _d[1];\r\n    var clearTimeoutState = function () {\r\n        if (activeTimeout) {\r\n            clearTimeout(activeTimeout);\r\n            setActiveTimeout(null);\r\n        }\r\n    };\r\n    var nextSlide = function (setOuterState) { return function () {\r\n        var _a = next({ slides: slides, slideIndex: slideIndex }), slide = _a.slide, newSlideIndex = _a.slideIndex;\r\n        setSlide(newSlideIndex);\r\n        setOuterState(slide);\r\n        setActiveTimeout(null);\r\n    }; };\r\n    var startLoading = function () {\r\n        setIsLoading(true);\r\n        nextSlide(onSetOuterState)();\r\n    };\r\n    var endLoading = function () {\r\n        setIsLoading(false);\r\n        onSetOuterState(DEFAULT_SLIDE);\r\n        setSlide(DEFAULT_SLIDE_INDEX);\r\n    };\r\n    useEffect(function () {\r\n        var shouldStopLoading = !isLoading && activeTimeout;\r\n        var shouldLoad = isLoading && !activeTimeout;\r\n        if (shouldLoad) {\r\n            setActiveTimeout(createLoader(nextSlide(onSetOuterState), loaderSpeed));\r\n        }\r\n        else if (shouldStopLoading) {\r\n            clearTimeoutState();\r\n        }\r\n        return function () { };\r\n        // disabled due to inner structure: nextSlide only matters when activeTimeout or isLoading updated\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isLoading, activeTimeout]);\r\n    useEffect(function () { return function () { return clearTimeoutState(); }; }, \r\n    // disabled due to inner structure: should be equal to \"onBeforeUnmount\"\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []);\r\n    return {\r\n        isLoading: isLoading,\r\n        handlers: {\r\n            startLoading: startLoading,\r\n            endLoading: endLoading,\r\n        },\r\n    };\r\n}\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z$7 = \".printer-line-module_commandLine__estqY {\\n  padding: 1.4285714286rem 1.4285714286rem 1.4285714286rem 1.4285714286rem;\\n}\\n\\n.printer-line-module_textLine__nz4P- {\\n  padding: 0 1.4285714286rem 0 2.8571428571rem;\\n}\";\nvar classes$7 = {\"commandLine\":\"printer-line-module_commandLine__estqY\",\"textLine\":\"printer-line-module_textLine__nz4P-\"};\nstyleInject(css_248z$7);\n\nvar checkLines = exhaustiveCheck('Unknown line type: ');\r\nvar PrinterLine = function PrinterLine(_a) {\r\n    var line = _a.line, children = _a.children;\r\n    var _b = line.className, className = _b === void 0 ? '' : _b, dataAttribute = line.dataAttribute, id = line.id;\r\n    return (function () {\r\n        switch (line.type) {\r\n            case LineTypes.TEXT:\r\n                return (React.createElement(\"div\", { id: id, className: [classes$7.textLine, 'crt-text-line', className].join(' '), \"data-crt-terminal\": dataAttribute }, children));\r\n            case LineTypes.COMMAND:\r\n                return (React.createElement(\"div\", { id: id, className: [classes$7.commandLine, 'crt-command-line', className].join(' '), \"data-crt-terminal\": dataAttribute }, children));\r\n            default:\r\n                return checkLines(line);\r\n        }\r\n    })();\r\n};\n\nvar css_248z$6 = \"@-webkit-keyframes character-module_blink-character__xvpwk {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@keyframes character-module_blink-character__xvpwk {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@-webkit-keyframes character-module_scanner__eZs7v {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@keyframes character-module_scanner__eZs7v {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@-webkit-keyframes character-module_pulse-text__PBNwr {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@keyframes character-module_pulse-text__PBNwr {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@-webkit-keyframes character-module_shiver-screen__37A2O {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n@keyframes character-module_shiver-screen__37A2O {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n.character-module_character__MzT4w {\\n  white-space: pre-wrap;\\n  word-break: break-all;\\n}\\n\\n.character-module_characterSelected__axWlO {\\n  color: #111010;\\n  background-color: #d0fc7e;\\n  -webkit-animation: character-module_blink-character__xvpwk 1s steps(1, end) infinite;\\n          animation: character-module_blink-character__xvpwk 1s steps(1, end) infinite;\\n}\";\nvar classes$6 = {\"character\":\"character-module_character__MzT4w\",\"characterSelected\":\"character-module_characterSelected__axWlO\",\"blink-character\":\"character-module_blink-character__xvpwk\",\"scanner\":\"character-module_scanner__eZs7v\",\"pulse-text\":\"character-module_pulse-text__PBNwr\",\"shiver-screen\":\"character-module_shiver-screen__37A2O\"};\nstyleInject(css_248z$6);\n\nvar Character = function Character(_a) {\r\n    var children = _a.children, _b = _a.selected, selected = _b === void 0 ? false : _b, _c = _a.className, className = _c === void 0 ? '' : _c;\r\n    var selectedStyle = selected ? classes$6.characterSelected : '';\r\n    return (React.createElement(\"span\", { className: [classes$6.character, selectedStyle, className, 'crt-character'].join(' ') }, children));\r\n};\n\nvar css_248z$5 = \".printer-word-module_commandWord__nSXjX {\\n  display: inline-block;\\n}\\n\\n.printer-word-module_textWord__akJYx {\\n  display: inline-block;\\n}\\n\\n.printer-word-module_buttonWord__iu6fj {\\n  font-family: \\\"Courier New\\\", courier, monospace;\\n  font-size: 1rem;\\n  line-height: 1.5;\\n  text-shadow: 0 0 1.1428571429rem #d0fc7e, 0 0 1.7142857143rem #d0fc7e;\\n  color: #d0fc7e;\\n  margin: 0;\\n  padding: 0 5px;\\n  display: inline-block;\\n  background-color: transparent;\\n  border: 1px solid #d0fc7e;\\n  cursor: pointer;\\n}\\n.printer-word-module_buttonWord__iu6fj:hover {\\n  color: #111010;\\n  background-color: #d0fc7e;\\n}\\n\\n.printer-word-module_anchorWord__dLnZB {\\n  font-family: \\\"Courier New\\\", courier, monospace;\\n  font-size: 1rem;\\n  line-height: 1.5;\\n  text-shadow: 0 0 1.1428571429rem #d0fc7e, 0 0 1.7142857143rem #d0fc7e;\\n  color: #d0fc7e;\\n  display: inline-block;\\n}\\n.printer-word-module_anchorWord__dLnZB:hover {\\n  color: white;\\n}\";\nvar classes$5 = {\"commandWord\":\"printer-word-module_commandWord__nSXjX\",\"textWord\":\"printer-word-module_textWord__akJYx\",\"buttonWord\":\"printer-word-module_buttonWord__iu6fj\",\"anchorWord\":\"printer-word-module_anchorWord__dLnZB\"};\nstyleInject(css_248z$5);\n\nvar checkWords = exhaustiveCheck('Unknown word type: ');\r\nvar PrinterWord = function PrinterWord(_a) {\r\n    var word = _a.word, children = _a.children;\r\n    var _b = word.className, className = _b === void 0 ? '' : _b, dataAttribute = word.dataAttribute, id = word.id;\r\n    return (function () {\r\n        switch (word.type) {\r\n            case WordTypes.TEXT:\r\n                return (React.createElement(\"span\", { id: id, className: [classes$5.textWord, 'crt-text-word', className].join(' '), \"data-crt-terminal\": dataAttribute },\r\n                    React.createElement(Character, null, children)));\r\n            case WordTypes.ANCHOR:\r\n                return (React.createElement(\"a\", { id: id, className: [classes$5.anchorWord, 'crt-anchor-word', className].join(' '), \"data-crt-terminal\": dataAttribute, href: word.href, onClick: word.onClick },\r\n                    React.createElement(Character, null, children)));\r\n            case WordTypes.BUTTON:\r\n                return (React.createElement(\"button\", { type: \"button\", id: id, className: [classes$5.buttonWord, 'crt-button-word', className].join(' '), \"data-crt-terminal\": dataAttribute, onClick: word.onClick },\r\n                    React.createElement(Character, null, children)));\r\n            case WordTypes.COMMAND:\r\n                return (React.createElement(\"span\", { id: id, className: [classes$5.commandWord, 'crt-command-word', className].join(' '), \"data-crt-terminal\": dataAttribute },\r\n                    React.createElement(Character, null, word.prompt),\r\n                    React.createElement(Character, null, children)));\r\n            default:\r\n                return checkWords(word);\r\n        }\r\n    })();\r\n};\n\nvar TerminalScreen = memo(function (_a) {\r\n    var state = _a.state;\r\n    return (React.createElement(\"div\", { className: \"crt-screen\" }, state.map(function (line, lineIndex) { return (React.createElement(PrinterLine, { line: line, key: lineIndex }, line.words.map(function (word, wordIndex) { return (React.createElement(PrinterWord, { word: word, key: wordIndex }, word.characters)); }))); })));\r\n});\n\nvar css_248z$4 = \"@-webkit-keyframes overlay-module_blink-character__Ye2qL {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@keyframes overlay-module_blink-character__Ye2qL {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@-webkit-keyframes overlay-module_scanner__jkhjA {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@keyframes overlay-module_scanner__jkhjA {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@-webkit-keyframes overlay-module_pulse-text__KyZ3A {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@keyframes overlay-module_pulse-text__KyZ3A {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@-webkit-keyframes overlay-module_shiver-screen__sjqEZ {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n@keyframes overlay-module_shiver-screen__sjqEZ {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n.overlay-module_overlay__zbWt1 {\\n  position: absolute;\\n  z-index: 2;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n}\\n\\n.overlay-module_scanner__jkhjA {\\n  position: absolute;\\n  z-index: 1;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  height: 1.7142857143rem;\\n  opacity: 0.05;\\n  background: linear-gradient(180deg, transparent 0, #fffcfc 85%, #d0fc7e 0, transparent);\\n  -webkit-animation: overlay-module_scanner__jkhjA 8s linear infinite forwards;\\n          animation: overlay-module_scanner__jkhjA 8s linear infinite forwards;\\n}\\n\\n.overlay-module_pixels__m5X6w {\\n  position: absolute;\\n  z-index: 2;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  display: block;\\n  background: linear-gradient(transparent 50%, rgba(0, 0, 0, 0.21) 0), linear-gradient(90deg, rgba(255, 0, 0, 0.055), rgba(0, 255, 0, 0.03), rgba(0, 0, 255, 0.055));\\n  background-position-y: 0.0714285714rem;\\n  background-size: 100% 0.2142857143rem, 0.2857142857rem 100%;\\n}\";\nvar classes$4 = {\"overlay\":\"overlay-module_overlay__zbWt1\",\"scanner\":\"overlay-module_scanner__jkhjA\",\"pixels\":\"overlay-module_pixels__m5X6w\",\"blink-character\":\"overlay-module_blink-character__Ye2qL\",\"pulse-text\":\"overlay-module_pulse-text__KyZ3A\",\"shiver-screen\":\"overlay-module_shiver-screen__sjqEZ\"};\nstyleInject(css_248z$4);\n\nvar Overlay = function Overlay(_a) {\r\n    var scanner = _a.scanner, pixels = _a.pixels;\r\n    return (React.createElement(\"div\", { className: [classes$4.overlay, 'crt-overlay'].join(' ') },\r\n        scanner && React.createElement(\"div\", { className: [classes$4.scanner, 'crt-scanner'].join(' ') }),\r\n        pixels && React.createElement(\"div\", { className: [classes$4.pixels, 'crt-pixels'].join(' ') })));\r\n};\n\nvar css_248z$3 = \"@-webkit-keyframes text-effects-module_blink-character__CrwdV {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@keyframes text-effects-module_blink-character__CrwdV {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@-webkit-keyframes text-effects-module_scanner__EXIFB {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@keyframes text-effects-module_scanner__EXIFB {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@-webkit-keyframes text-effects-module_pulse-text__AVts8 {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@keyframes text-effects-module_pulse-text__AVts8 {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@-webkit-keyframes text-effects-module_shiver-screen__ysQ0c {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n@keyframes text-effects-module_shiver-screen__ysQ0c {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n.text-effects-module_textEffects__OWNjV {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  -webkit-animation: text-effects-module_pulse-text__AVts8 5s linear infinite;\\n          animation: text-effects-module_pulse-text__AVts8 5s linear infinite;\\n}\";\nvar classes$3 = {\"textEffects\":\"text-effects-module_textEffects__OWNjV\",\"pulse-text\":\"text-effects-module_pulse-text__AVts8\",\"blink-character\":\"text-effects-module_blink-character__CrwdV\",\"scanner\":\"text-effects-module_scanner__EXIFB\",\"shiver-screen\":\"text-effects-module_shiver-screen__ysQ0c\"};\nstyleInject(css_248z$3);\n\nvar TextEffects = function TextEffects(_a) {\r\n    var enabled = _a.enabled, children = _a.children;\r\n    return (React.createElement(React.Fragment, null, enabled ? (React.createElement(\"div\", { className: [classes$3.textEffects, 'crt-text-effects'].join(' ') }, children)) : (children)));\r\n};\n\nvar css_248z$2 = \"@-webkit-keyframes screen-effects-module_blink-character__CftBz {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@keyframes screen-effects-module_blink-character__CftBz {\\n  50% {\\n    color: #d0fc7e;\\n    background-color: transparent;\\n  }\\n}\\n@-webkit-keyframes screen-effects-module_scanner__N91BH {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@keyframes screen-effects-module_scanner__N91BH {\\n  0% {\\n    top: 0%;\\n  }\\n  50% {\\n    top: 100%;\\n  }\\n  100% {\\n    top: 100%;\\n  }\\n}\\n@-webkit-keyframes screen-effects-module_pulse-text__awrsE {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@keyframes screen-effects-module_pulse-text__awrsE {\\n  50% {\\n    text-shadow: 0 0 1.1428571429rem white, 0 0 1.5714285714rem white;\\n    color: #c6fc7e;\\n  }\\n}\\n@-webkit-keyframes screen-effects-module_shiver-screen__xieUK {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n@keyframes screen-effects-module_shiver-screen__xieUK {\\n  0% {\\n    transform: skewX(0deg);\\n  }\\n  4% {\\n    transform: skewX(0.7deg) scale(1.0001);\\n  }\\n  8% {\\n    transform: skewX(0.2deg) skewY(-0.1deg);\\n  }\\n  16% {\\n    transform: skewX(0.2deg);\\n  }\\n  50% {\\n    transform: skewX(0.2deg);\\n  }\\n}\\n.screen-effects-module_screenEffects__bNTzl {\\n  width: 100%;\\n  height: 100%;\\n  -webkit-animation: screen-effects-module_shiver-screen__xieUK 10s linear infinite;\\n          animation: screen-effects-module_shiver-screen__xieUK 10s linear infinite;\\n}\";\nvar classes$2 = {\"screenEffects\":\"screen-effects-module_screenEffects__bNTzl\",\"shiver-screen\":\"screen-effects-module_shiver-screen__xieUK\",\"blink-character\":\"screen-effects-module_blink-character__CftBz\",\"scanner\":\"screen-effects-module_scanner__N91BH\",\"pulse-text\":\"screen-effects-module_pulse-text__awrsE\"};\nstyleInject(css_248z$2);\n\nvar ScreenEffects = function ScreenEffects(_a) {\r\n    var enabled = _a.enabled, children = _a.children;\r\n    return (React.createElement(React.Fragment, null, enabled ? (React.createElement(\"div\", { className: [classes$2.screenEffects, 'crt-screen-effects'].join(' ') }, children)) : (children)));\r\n};\n\nvar InputString = memo(function (_a) {\r\n    var cursorPosition = _a.cursorPosition, renderValue = _a.renderValue;\r\n    return (React.createElement(React.Fragment, null, renderValue.map(function (character, key) { return (React.createElement(Character, { selected: cursorPosition === key, key: key }, character)); })));\r\n});\n\nvar css_248z$1 = \".command-line-module_commandLine__lnMf6 {\\n  padding: 1.4285714286rem 1.4285714286rem 1.4285714286rem 1.4285714286rem;\\n}\\n\\n.command-line-module_inputWrap__OpY8r {\\n  display: inline-block;\\n}\\n\\n.command-line-module_input__ZPwEm {\\n  position: absolute;\\n  opacity: 0;\\n  pointer-events: none;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n\\n.command-line-module_inputString__J1jZF {\\n  display: inline-block;\\n  overflow: visible;\\n  white-space: normal;\\n  word-break: break-all;\\n}\";\nvar classes$1 = {\"commandLine\":\"command-line-module_commandLine__lnMf6\",\"inputWrap\":\"command-line-module_inputWrap__OpY8r\",\"input\":\"command-line-module_input__ZPwEm\",\"inputString\":\"command-line-module_inputString__J1jZF\"};\nstyleInject(css_248z$1);\n\nvar CommandLine = React.forwardRef(function (_a, inputElement) {\r\n    var _b = _a.state, cursorPosition = _b.cursorPosition, renderValue = _b.renderValue, inputValue = _b.inputValue, handleKeyboardDown = _a.handleKeyboardDown, handleInputChange = _a.handleInputChange, prompt = _a.prompt, cursorSymbol = _a.cursorSymbol;\r\n    var handleInput = function (event) {\r\n        var value = event.currentTarget.value;\r\n        handleInputChange(value);\r\n    };\r\n    var handleKeyDown = function (event) {\r\n        handleKeyboardDown(event);\r\n    };\r\n    var lastSelected = cursorPosition === renderValue.length;\r\n    return (React.createElement(\"div\", { className: [classes$1.commandLine, 'crt-command-line'].join(' ') },\r\n        React.createElement(\"span\", { className: \"crt-command-line__prompt\" }, prompt),\r\n        React.createElement(\"div\", { className: [classes$1.inputWrap, 'crt-command-line__input-wrapper'].join(' ') },\r\n            React.createElement(\"input\", { className: [classes$1.input, 'crt-command-line__input'].join(' '), id: \"crt-command-line-input\", ref: inputElement, value: inputValue, onInput: handleInput, onKeyDown: handleKeyDown, type: \"text\" }),\r\n            React.createElement(\"div\", { className: [classes$1.inputString, 'crt-command-line__input-string'].join(' ') },\r\n                React.createElement(InputString, { renderValue: renderValue, cursorPosition: cursorPosition }),\r\n                lastSelected && (React.createElement(Character, { className: \"crt-cursor-symbol\", selected: true }, cursorSymbol))))));\r\n});\n\nvar css_248z = \".terminal-module_terminal__4qfYI {\\n  font-family: \\\"Courier New\\\", courier, monospace;\\n  font-size: 1rem;\\n  line-height: 1.5;\\n  text-shadow: 0 0 1.1428571429rem #d0fc7e, 0 0 1.7142857143rem #d0fc7e;\\n  color: #d0fc7e;\\n  position: relative;\\n  margin: 0;\\n  padding: 1.1428571429rem 0.5714285714rem;\\n  display: block;\\n  overflow: hidden;\\n  box-sizing: border-box;\\n  width: 100%;\\n  height: 100%;\\n  max-height: 100%;\\n  background: radial-gradient(50% 50% at 50% 50%, #354228 0, #0f140a 100%);\\n  border: 1.1428571429rem solid #111010;\\n  border-radius: 3.4285714286rem;\\n  box-shadow: 0 0 2.8571428571rem #252925, inset 0 0 2rem 1.4285714286rem #000;\\n  -webkit-font-smoothing: antialiased;\\n}\\n.terminal-module_terminal__4qfYI ::-moz-selection {\\n  color: #111010;\\n  background: #d0fc7e;\\n  -moz-appearance: none;\\n       appearance: none;\\n}\\n.terminal-module_terminal__4qfYI ::selection {\\n  color: #111010;\\n  background: #d0fc7e;\\n  -webkit-appearance: none;\\n     -moz-appearance: none;\\n          appearance: none;\\n}\\n.terminal-module_terminal__4qfYI * {\\n  box-sizing: border-box;\\n}\\n\\n.terminal-module_overflowContainer__p2duW {\\n  position: relative;\\n  overflow-y: auto;\\n  width: 100%;\\n  max-height: 100%;\\n  border-radius: 1.2857142857rem;\\n}\\n.terminal-module_overflowContainer__p2duW::-webkit-scrollbar {\\n  width: 0.3571428571rem;\\n  height: 0.3571428571rem;\\n}\\n.terminal-module_overflowContainer__p2duW::-webkit-scrollbar-button {\\n  width: 0;\\n  height: 0;\\n}\\n.terminal-module_overflowContainer__p2duW::-webkit-scrollbar-thumb {\\n  background: #d0fc7e;\\n  border: 0 none #fffcfc;\\n  border-radius: 0.2857142857rem;\\n}\";\nvar classes = {\"terminal\":\"terminal-module_terminal__4qfYI\",\"overflowContainer\":\"terminal-module_overflowContainer__p2duW\"};\nstyleInject(css_248z);\n\nvar Terminal = function Terminal(_a) {\r\n    var onCommand = _a.onCommand, queue = _a.queue, banner = _a.banner, _b = _a.prompt, prompt = _b === void 0 ? '>\\xa0' : _b, _c = _a.cursorSymbol, cursorSymbol = _c === void 0 ? '\\xa0' : _c, _d = _a.maxHistoryCommands, maxHistoryCommands = _d === void 0 ? 10 : _d, _e = _a.loader, _f = _e === void 0 ? {} : _e, _g = _f.slides, slides = _g === void 0 ? ['.', '..', '...'] : _g, _h = _f.loaderSpeed, loaderSpeed = _h === void 0 ? 1000 : _h, _j = _a.printer, _k = _j === void 0 ? {} : _j, _l = _k.printerSpeed, printerSpeed = _l === void 0 ? 20 : _l, _m = _k.charactersPerTick, charactersPerTick = _m === void 0 ? 5 : _m, onPrintStatusChange = _k.onPrintStatusChange, _o = _a.effects, _p = _o === void 0 ? {} : _o, _q = _p.scanner, scanner = _q === void 0 ? true : _q, _r = _p.pixels, pixels = _r === void 0 ? true : _r, _s = _p.screenEffects, screenEffects = _s === void 0 ? true : _s, _t = _p.textEffects, textEffects = _t === void 0 ? true : _t, _u = _a.focusOnMount, focusOnMount = _u === void 0 ? true : _u;\r\n    var terminalApp = useTerminalApp();\r\n    var terminalRef = terminalApp.state.terminalRef, scrollDown = terminalApp.handlers.scrollDown;\r\n    var _v = useCommandScreen({\r\n        printerConfig: { printerSpeed: printerSpeed, charactersPerTick: charactersPerTick, afterPrintCallback: scrollDown, onPrintStatusChange: onPrintStatusChange },\r\n    }), state = _v.state, screenHandlers = _v.handlers;\r\n    var commandLine = useCommandLine();\r\n    var _w = useCommandLineInput(), inputElementRef = _w.state.inputElementRef, inputHandlers = _w.handlers;\r\n    var commandHistory = useCommandHistory({ maxHistoryCommands: maxHistoryCommands });\r\n    var loaderComponent = useLoader({\r\n        slides: slides,\r\n        loaderSpeed: loaderSpeed,\r\n        onSetOuterState: commandLine.handlers.setInput,\r\n    });\r\n    var controllerHandlers = useTerminalController({\r\n        input: {\r\n            handlers: inputHandlers,\r\n        },\r\n        terminalApp: terminalApp,\r\n        commandHistory: commandHistory,\r\n        commandLine: commandLine,\r\n        commandScreen: { handlers: screenHandlers },\r\n        loaderComponent: loaderComponent,\r\n        interface: { banner: banner, prompt: prompt, onCommand: onCommand, queue: queue },\r\n        focusOnMount: focusOnMount,\r\n    }).handlers;\r\n    var handleKeyboardDown = controllerHandlers.handleKeyboardDown, handleInputChange = controllerHandlers.handleInputChange;\r\n    useSubscribeEventQueue({ queue: queue, controller: controllerHandlers });\r\n    return (React.createElement(\"label\", { className: [classes.terminal, 'crt-terminal'].join(' '), htmlFor: \"crt-command-line-input\" },\r\n        React.createElement(Overlay, { scanner: scanner, pixels: pixels }),\r\n        React.createElement(ScreenEffects, { enabled: screenEffects },\r\n            React.createElement(\"div\", { ref: terminalRef, className: [classes.overflowContainer, 'crt-terminal__overflow-container'].join(' ') },\r\n                React.createElement(TextEffects, { enabled: textEffects },\r\n                    React.createElement(\"div\", { className: \"crt-terminal__screen\" },\r\n                        React.createElement(TerminalScreen, { state: state })),\r\n                    React.createElement(\"div\", { className: \"crt-terminal__command-line\" },\r\n                        React.createElement(CommandLine, { ref: inputElementRef, prompt: prompt, cursorSymbol: cursorSymbol, state: commandLine.state, handleKeyboardDown: handleKeyboardDown, handleInputChange: handleInputChange })))))));\r\n};\n\nexport { LineTypes, PrinterEvents, Terminal, TerminalEvents, WordTypes, anchorWord, buttonWord, commandLine, commandWord, textLine, textWord, useEventQueue };\n","/* eslint-disable react/react-in-jsx-scope */\nimport {\n  Terminal,\n  useEventQueue,\n  textLine,\n  textWord,\n  buttonWord,\n} from \"crt-terminal\";\nimport { initGroq, converseDeBounced } from \"./backrooms\";\n\nconst bannerText = `\\nIniciando R.O.K.E.\\n\\n`;\n\nexport function CrtTerminal() {\n  const eventQueue = useEventQueue();\n  const { print } = eventQueue.handlers;\n\n  function onButton(result, button) {\n    window.term.write(result + \"\\n\\n\");\n    button.remove();\n  }\n\n  function printObject(obj, first = null) {\n    const keys = Object.keys(obj).filter((key) => key != first);\n    print([\n      textLine({\n        words: [textWord({ characters: obj[first] || \"<=\" })],\n      }),\n      textLine({\n        words: keys.map((key) =>\n          buttonWord({\n            characters: key,\n            onClick: (ev) => onButton(obj[key].toString(), ev.target),\n          })\n        ),\n      }),\n    ]);\n  }\n\n  // BAD BAD DO NOT DO FIXME\n  window.term = {\n    write: (text) =>\n      print([textLine({ words: [textWord({ characters: text })] })]),\n    writeObject: printObject,\n    ...eventQueue.handlers,\n  };\n\n  async function onCommand(command) {\n    if (command.startsWith(\"gsk_\") && command.length == 56) {\n      localStorage.setItem(\"groqApiKey\", command)\n      initGroq(command)\n      window.term.write(\"API KEY guardada.\")\n      return;\n    }\n    let result;\n    try {\n      const res = eval(command);\n      console.log(res);\n      if (res) {\n        result = { response: res.toString ? res.toString() : res };\n      }\n    } catch (e) {\n      console.error(e);\n\n      try {\n        result = await converseDeBounced(command, window.player);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    if (result) {\n      printObject(result, \"response\");\n    }\n  }\n\n  return (\n    <div id=\"terminal\"\n    style={{ width: \"1000px\", height: \"550px\" }}>\n      <Terminal\n        queue={eventQueue}\n        banner={[textLine({ words: [textWord({ characters: bannerText })] })]}\n        onCommand={onCommand}\n      />\n    </div>\n  );\n}\n","import { useState } from \"preact/hooks\";\n\nexport function CrtVisual() {\n  const [osd, setOsd] = useState(\"\");\n\n  function flash(output) {\n    setOsd(output)\n  }\n  window.visual = {\n    flash: flash\n  }\n\n  return (\n    <div id=\"game\">\n      <div id=\"game_overlay\">\n        {osd}\n      </div>\n      <canvas tabIndex=\"1\" id=\"game_canvas\"></canvas>\n    </div>\n  );\n}\n",";(function(){\n\n  /* UNBUILD */\n  function USE(arg, req){\n    return req? require(arg) : arg.slice? USE[R(arg)] : function(mod, path){\n      arg(mod = {exports: {}});\n      USE[R(path)] = mod.exports;\n    }\n    function R(p){\n      return p.split('/').slice(-1).toString().replace('.js','');\n    }\n  }\n  if(typeof module !== \"undefined\"){ var MODULE = module }\n  /* UNBUILD */\n\n\t;USE(function(module){\n\t\t// Shim for generic javascript utilities.\n\t\tString.random = function(l, c){\n\t\t\tvar s = '';\n\t\t\tl = l || 24; // you are not going to make a 0 length random number, so no need to check type\n\t\t\tc = c || '0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz';\n\t\t\twhile(l-- > 0){ s += c.charAt(Math.floor(Math.random() * c.length)) }\n\t\t\treturn s;\n\t\t}\n\t\tString.match = function(t, o){ var tmp, u;\n\t\t\tif('string' !== typeof t){ return false }\n\t\t\tif('string' == typeof o){ o = {'=': o} }\n\t\t\to = o || {};\n\t\t\ttmp = (o['='] || o['*'] || o['>'] || o['<']);\n\t\t\tif(t === tmp){ return true }\n\t\t\tif(u !== o['=']){ return false }\n\t\t\ttmp = (o['*'] || o['>']);\n\t\t\tif(t.slice(0, (tmp||'').length) === tmp){ return true }\n\t\t\tif(u !== o['*']){ return false }\n\t\t\tif(u !== o['>'] && u !== o['<']){\n\t\t\t\treturn (t >= o['>'] && t <= o['<'])? true : false;\n\t\t\t}\n\t\t\tif(u !== o['>'] && t >= o['>']){ return true }\n\t\t\tif(u !== o['<'] && t <= o['<']){ return true }\n\t\t\treturn false;\n\t\t}\n\t\tString.hash = function(s, c){ // via SO\n\t\t\tif(typeof s !== 'string'){ return }\n\t    c = c || 0; // CPU schedule hashing by\n\t    if(!s.length){ return c }\n\t    for(var i=0,l=s.length,n; i<l; ++i){\n\t      n = s.charCodeAt(i);\n\t      c = ((c<<5)-c)+n;\n\t      c |= 0;\n\t    }\n\t    return c;\n\t  }\n\t\tvar has = Object.prototype.hasOwnProperty;\n\t\tObject.plain = function(o){ return o? (o instanceof Object && o.constructor === Object) || Object.prototype.toString.call(o).match(/^\\[object (\\w+)\\]$/)[1] === 'Object' : false }\n\t\tObject.empty = function(o, n){\n\t\t\tfor(var k in o){ if(has.call(o, k) && (!n || -1==n.indexOf(k))){ return false } }\n\t\t\treturn true;\n\t\t}\n\t\tObject.keys = Object.keys || function(o){\n\t\t\tvar l = [];\n\t\t\tfor(var k in o){ if(has.call(o, k)){ l.push(k) } }\n\t\t\treturn l;\n\t\t}\n\t\t;(function(){\n\t\t\tvar u, sT = setTimeout, l = 0, c = 0\n\t\t\t, sI = (typeof setImmediate !== ''+u && setImmediate) || (function(c,f){\n\t\t\t\tif(typeof MessageChannel == ''+u){ return sT }\n\t\t\t\t(c = new MessageChannel()).port1.onmessage = function(e){ ''==e.data && f() }\n\t\t\t\treturn function(q){ f=q;c.port2.postMessage('') }\n\t\t\t}()), check = sT.check = sT.check || (typeof performance !== ''+u && performance)\n\t\t\t|| {now: function(){ return +new Date }};\n\t\t\tsT.hold = sT.hold || 9; // half a frame benchmarks faster than < 1ms?\n\t\t\tsT.poll = sT.poll || function(f){\n\t\t\t\tif((sT.hold >= (check.now() - l)) && c++ < 3333){ f(); return }\n\t\t\t\tsI(function(){ l = check.now(); f() },c=0)\n\t\t\t}\n\t\t}());\n\t\t;(function(){ // Too many polls block, this \"threads\" them in turns over a single thread in time.\n\t\t\tvar sT = setTimeout, t = sT.turn = sT.turn || function(f){ 1 == s.push(f) && p(T) }\n\t\t\t, s = t.s = [], p = sT.poll, i = 0, f, T = function(){\n\t\t\t\tif(f = s[i++]){ f() }\n\t\t\t\tif(i == s.length || 99 == i){\n\t\t\t\t\ts = t.s = s.slice(i);\n\t\t\t\t\ti = 0;\n\t\t\t\t}\n\t\t\t\tif(s.length){ p(T) }\n\t\t\t}\n\t\t}());\n\t\t;(function(){\n\t\t\tvar u, sT = setTimeout, T = sT.turn;\n\t\t\t(sT.each = sT.each || function(l,f,e,S){ S = S || 9; (function t(s,L,r){\n\t\t\t  if(L = (s = (l||[]).splice(0,S)).length){\n\t\t\t  \tfor(var i = 0; i < L; i++){\n\t\t\t  \t\tif(u !== (r = f(s[i]))){ break }\n\t\t\t  \t}\n\t\t\t  \tif(u === r){ T(t); return }\n\t\t\t  } e && e(r);\n\t\t\t}())})();\n\t\t}());\n\t})(USE, './shim');\n\n\t;USE(function(module){\n\t\t// On event emitter generic javascript utility.\n\t\tmodule.exports = function onto(tag, arg, as){\n\t\t\tif(!tag){ return {to: onto} }\n\t\t\tvar u, f = 'function' == typeof arg, tag = (this.tag || (this.tag = {}))[tag] || f && (\n\t\t\t\tthis.tag[tag] = {tag: tag, to: onto._ = { next: function(arg){ var tmp;\n\t\t\t\t\tif(tmp = this.to){ tmp.next(arg) }\n\t\t\t}}});\n\t\t\tif(f){\n\t\t\t\tvar be = {\n\t\t\t\t\toff: onto.off ||\n\t\t\t\t\t(onto.off = function(){\n\t\t\t\t\t\tif(this.next === onto._.next){ return !0 }\n\t\t\t\t\t\tif(this === this.the.last){\n\t\t\t\t\t\t\tthis.the.last = this.back;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.to.back = this.back;\n\t\t\t\t\t\tthis.next = onto._.next;\n\t\t\t\t\t\tthis.back.to = this.to;\n\t\t\t\t\t\tif(this.the.last === this.the){\n\t\t\t\t\t\t\tdelete this.on.tag[this.the.tag];\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tto: onto._,\n\t\t\t\t\tnext: arg,\n\t\t\t\t\tthe: tag,\n\t\t\t\t\ton: this,\n\t\t\t\t\tas: as,\n\t\t\t\t};\n\t\t\t\t(be.back = tag.last || tag).to = be;\n\t\t\t\treturn tag.last = be;\n\t\t\t}\n\t\t\tif((tag = tag.to) && u !== arg){ tag.next(arg) }\n\t\t\treturn tag;\n\t\t};\n\t})(USE, './onto');\n\n\t;USE(function(module){\n\t\t// Valid values are a subset of JSON: null, binary, number (!Infinity), text,\n\t\t// or a soul relation. Arrays need special algorithms to handle concurrency,\n\t\t// so they are not supported directly. Use an extension that supports them if\n\t\t// needed but research their problems first.\n\t\tmodule.exports = function (v) {\n\t\t  // \"deletes\", nulling out keys.\n\t\t  return v === null ||\n\t\t\t\"string\" === typeof v ||\n\t\t\t\"boolean\" === typeof v ||\n\t\t\t// we want +/- Infinity to be, but JSON does not support it, sad face.\n\t\t\t// can you guess what v === v checks for? ;)\n\t\t\t(\"number\" === typeof v && v != Infinity && v != -Infinity && v === v) ||\n\t\t\t(!!v && \"string\" == typeof v[\"#\"] && Object.keys(v).length === 1 && v[\"#\"]);\n\t\t}\n\t})(USE, './valid');\n\n\t;USE(function(module){\n\t\tUSE('./shim');\n\t\tfunction State(){\n\t\t\tvar t = +new Date;\n\t\t\tif(last < t){\n\t\t\t\treturn N = 0, last = t + State.drift;\n\t\t\t}\n\t\t\treturn last = t + ((N += 1) / D) + State.drift;\n\t\t}\n\t\tState.drift = 0;\n\t\tvar NI = -Infinity, N = 0, D = 999, last = NI, u; // WARNING! In the future, on machines that are D times faster than 2016AD machines, you will want to increase D by another several orders of magnitude so the processing speed never out paces the decimal resolution (increasing an integer effects the state accuracy).\n\t\tState.is = function(n, k, o){ // convenience function to get the state on a key on a node and return it.\n\t\t\tvar tmp = (k && n && n._ && n._['>']) || o;\n\t\t\tif(!tmp){ return }\n\t\t\treturn ('number' == typeof (tmp = tmp[k]))? tmp : NI;\n\t\t}\n\t\tState.ify = function(n, k, s, v, soul){ // put a key's state on a node.\n\t\t\t(n = n || {})._ = n._ || {}; // safety check or init.\n\t\t\tif(soul){ n._['#'] = soul } // set a soul if specified.\n\t\t\tvar tmp = n._['>'] || (n._['>'] = {}); // grab the states data.\n\t\t\tif(u !== k && k !== '_'){\n\t\t\t\tif('number' == typeof s){ tmp[k] = s } // add the valid state.\n\t\t\t\tif(u !== v){ n[k] = v } // Note: Not its job to check for valid values!\n\t\t\t}\n\t\t\treturn n;\n\t\t}\n\t\tmodule.exports = State;\n\t})(USE, './state');\n\n\t;USE(function(module){\n\t\tUSE('./shim');\n\t\tfunction Dup(opt){\n\t\t\tvar dup = {s:{}}, s = dup.s;\n\t\t\topt = opt || {max: 999, age: 1000 * 9};//*/ 1000 * 9 * 3};\n\t\t\tdup.check = function(id){\n\t\t\t\tif(!s[id]){ return false }\n\t\t\t\treturn dt(id);\n\t\t\t}\n\t\t\tvar dt = dup.track = function(id){\n\t\t\t\tvar it = s[id] || (s[id] = {});\n\t\t\t\tit.was = dup.now = +new Date;\n\t\t\t\tif(!dup.to){ dup.to = setTimeout(dup.drop, opt.age + 9) }\n\t\t\t\tif(dt.ed){ dt.ed(id) }\n\t\t\t\treturn it;\n\t\t\t}\n\t\t\tdup.drop = function(age){\n\t\t\t\tdup.to = null;\n\t\t\t\tdup.now = +new Date;\n\t\t\t\tvar l = Object.keys(s);\n\t\t\t\tconsole.STAT && console.STAT(dup.now, +new Date - dup.now, 'dup drop keys'); // prev ~20% CPU 7% RAM 300MB // now ~25% CPU 7% RAM 500MB\n\t\t\t\tsetTimeout.each(l, function(id){ var it = s[id]; // TODO: .keys( is slow?\n\t\t\t\t\tif(it && (age || opt.age) > (dup.now - it.was)){ return }\n\t\t\t\t\tdelete s[id];\n\t\t\t\t},0,99);\n\t\t\t}\n\t\t\treturn dup;\n\t\t}\n\t\tmodule.exports = Dup;\n\t})(USE, './dup');\n\n\t;USE(function(module){\n\t\t// request / response module, for asking and acking messages.\n\t\tUSE('./onto'); // depends upon onto!\n\t\tmodule.exports = function ask(cb, as){\n\t\t\tif(!this.on){ return }\n\t\t\tvar lack = (this.opt||{}).lack || 9000;\n\t\t\tif(!('function' == typeof cb)){\n\t\t\t\tif(!cb){ return }\n\t\t\t\tvar id = cb['#'] || cb, tmp = (this.tag||'')[id];\n\t\t\t\tif(!tmp){ return }\n\t\t\t\tif(as){\n\t\t\t\t\ttmp = this.on(id, as);\n\t\t\t\t\tclearTimeout(tmp.err);\n\t\t\t\t\ttmp.err = setTimeout(function(){ tmp.off() }, lack);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar id = (as && as['#']) || random(9);\n\t\t\tif(!cb){ return id }\n\t\t\tvar to = this.on(id, cb, as);\n\t\t\tto.err = to.err || setTimeout(function(){ to.off();\n\t\t\t\tto.next({err: \"Error: No ACK yet.\", lack: true});\n\t\t\t}, lack);\n\t\t\treturn id;\n\t\t}\n\t\tvar random = String.random || function(){ return Math.random().toString(36).slice(2) }\n\t})(USE, './ask');\n\n\t;USE(function(module){\n\n\t\tfunction Gun(o){\n\t\t\tif(o instanceof Gun){ return (this._ = {$: this}).$ }\n\t\t\tif(!(this instanceof Gun)){ return new Gun(o) }\n\t\t\treturn Gun.create(this._ = {$: this, opt: o});\n\t\t}\n\n\t\tGun.is = function($){ return ($ instanceof Gun) || ($ && $._ && ($ === $._.$)) || false }\n\n\t\tGun.version = 0.2020;\n\n\t\tGun.chain = Gun.prototype;\n\t\tGun.chain.toJSON = function(){};\n\n\t\tUSE('./shim');\n\t\tGun.valid = USE('./valid');\n\t\tGun.state = USE('./state');\n\t\tGun.on = USE('./onto');\n\t\tGun.dup = USE('./dup');\n\t\tGun.ask = USE('./ask');\n\n\t\t;(function(){\n\t\t\tGun.create = function(at){\n\t\t\t\tat.root = at.root || at;\n\t\t\t\tat.graph = at.graph || {};\n\t\t\t\tat.on = at.on || Gun.on;\n\t\t\t\tat.ask = at.ask || Gun.ask;\n\t\t\t\tat.dup = at.dup || Gun.dup();\n\t\t\t\tvar gun = at.$.opt(at.opt);\n\t\t\t\tif(!at.once){\n\t\t\t\t\tat.on('in', universe, at);\n\t\t\t\t\tat.on('out', universe, at);\n\t\t\t\t\tat.on('put', map, at);\n\t\t\t\t\tGun.on('create', at);\n\t\t\t\t\tat.on('create', at);\n\t\t\t\t}\n\t\t\t\tat.once = 1;\n\t\t\t\treturn gun;\n\t\t\t}\n\t\t\tfunction universe(msg){\n\t\t\t\t// TODO: BUG! msg.out = null being set!\n\t\t\t\t//if(!F){ var eve = this; setTimeout(function(){ universe.call(eve, msg,1) },Math.random() * 100);return; } // ADD F TO PARAMS!\n\t\t\t\tif(!msg){ return }\n\t\t\t\tif(msg.out === universe){ this.to.next(msg); return }\n\t\t\t\tvar eve = this, as = eve.as, at = as.at || as, gun = at.$, dup = at.dup, tmp, DBG = msg.DBG;\n\t\t\t\t(tmp = msg['#']) || (tmp = msg['#'] = text_rand(9));\n\t\t\t\tif(dup.check(tmp)){ return } dup.track(tmp);\n\t\t\t\ttmp = msg._; msg._ = ('function' == typeof tmp)? tmp : function(){};\n\t\t\t\t(msg.$ && (msg.$ === (msg.$._||'').$)) || (msg.$ = gun);\n\t\t\t\tif(msg['@'] && !msg.put){ ack(msg) }\n\t\t\t\tif(!at.ask(msg['@'], msg)){ // is this machine listening for an ack?\n\t\t\t\t\tDBG && (DBG.u = +new Date);\n\t\t\t\t\tif(msg.put){ put(msg); return } else\n\t\t\t\t\tif(msg.get){ Gun.on.get(msg, gun) }\n\t\t\t\t}\n\t\t\t\tDBG && (DBG.uc = +new Date);\n\t\t\t\teve.to.next(msg);\n\t\t\t\tDBG && (DBG.ua = +new Date);\n\t\t\t\tif(msg.nts || msg.NTS){ return } // TODO: This shouldn't be in core, but fast way to prevent NTS spread. Delete this line after all peers have upgraded to newer versions.\n\t\t\t\tmsg.out = universe; at.on('out', msg);\n\t\t\t\tDBG && (DBG.ue = +new Date);\n\t\t\t}\n\t\t\tfunction put(msg){\n\t\t\t\tif(!msg){ return }\n\t\t\t\tvar ctx = msg._||'', root = ctx.root = ((ctx.$ = msg.$||'')._||'').root;\n\t\t\t\tif(msg['@'] && ctx.faith && !ctx.miss){ // TODO: AXE may split/route based on 'put' what should we do here? Detect @ in AXE? I think we don't have to worry, as DAM will route it on @.\n\t\t\t\t\tmsg.out = universe;\n\t\t\t\t\troot.on('out', msg);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tctx.latch = root.hatch; ctx.match = root.hatch = [];\n\t\t\t\tvar put = msg.put;\n\t\t\t\tvar DBG = ctx.DBG = msg.DBG, S = +new Date; CT = CT || S;\n\t\t\t\tif(put['#'] && put['.']){ /*root && root.on('put', msg);*/ return } // TODO: BUG! This needs to call HAM instead.\n\t\t\t\tDBG && (DBG.p = S);\n\t\t\t\tctx['#'] = msg['#'];\n\t\t\t\tctx.msg = msg;\n\t\t\t\tctx.all = 0;\n\t\t\t\tctx.stun = 1;\n\t\t\t\tvar nl = Object.keys(put);//.sort(); // TODO: This is unbounded operation, large graphs will be slower. Write our own CPU scheduled sort? Or somehow do it in below? Keys itself is not O(1) either, create ES5 shim over ?weak map? or custom which is constant.\n\t\t\t\tconsole.STAT && console.STAT(S, ((DBG||ctx).pk = +new Date) - S, 'put sort');\n\t\t\t\tvar ni = 0, nj, kl, soul, node, states, err, tmp;\n\t\t\t\t(function pop(o){\n\t\t\t\t\tif(nj != ni){ nj = ni;\n\t\t\t\t\t\tif(!(soul = nl[ni])){\n\t\t\t\t\t\t\tconsole.STAT && console.STAT(S, ((DBG||ctx).pd = +new Date) - S, 'put');\n\t\t\t\t\t\t\tfire(ctx);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!(node = put[soul])){ err = ERR+cut(soul)+\"no node.\" } else\n\t\t\t\t\t\tif(!(tmp = node._)){ err = ERR+cut(soul)+\"no meta.\" } else\n\t\t\t\t\t\tif(soul !== tmp['#']){ err = ERR+cut(soul)+\"soul not same.\" } else\n\t\t\t\t\t\tif(!(states = tmp['>'])){ err = ERR+cut(soul)+\"no state.\" }\n\t\t\t\t\t\tkl = Object.keys(node||{}); // TODO: .keys( is slow\n\t\t\t\t\t}\n\t\t\t\t\tif(err){\n\t\t\t\t\t\tmsg.err = ctx.err = err; // invalid data should error and stun the message.\n\t\t\t\t\t\tfire(ctx);\n\t\t\t\t\t\t//console.log(\"handle error!\", err) // handle!\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar i = 0, key; o = o || 0;\n\t\t\t\t\twhile(o++ < 9 && (key = kl[i++])){\n\t\t\t\t\t\tif('_' === key){ continue }\n\t\t\t\t\t\tvar val = node[key], state = states[key];\n\t\t\t\t\t\tif(u === state){ err = ERR+cut(key)+\"on\"+cut(soul)+\"no state.\"; break }\n\t\t\t\t\t\tif(!valid(val)){ err = ERR+cut(key)+\"on\"+cut(soul)+\"bad \"+(typeof val)+cut(val); break }\n\t\t\t\t\t\t//ctx.all++; //ctx.ack[soul+key] = '';\n\t\t\t\t\t\tham(val, key, soul, state, msg);\n\t\t\t\t\t\t++C; // courtesy count;\n\t\t\t\t\t}\n\t\t\t\t\tif((kl = kl.slice(i)).length){ turn(pop); return }\n\t\t\t\t\t++ni; kl = null; pop(o);\n\t\t\t\t}());\n\t\t\t} Gun.on.put = put;\n\t\t\t// TODO: MARK!!! clock below, reconnect sync, SEA certify wire merge, User.auth taking multiple times, // msg put, put, say ack, hear loop...\n\t\t\t// WASIS BUG! local peer not ack. .off other people: .open\n\t\t\tfunction ham(val, key, soul, state, msg){\n\t\t\t\tvar ctx = msg._||'', root = ctx.root, graph = root.graph, lot, tmp;\n\t\t\t\tvar vertex = graph[soul] || empty, was = state_is(vertex, key, 1), known = vertex[key];\n\t\t\t\t\n\t\t\t\tvar DBG = ctx.DBG; if(tmp = console.STAT){ if(!graph[soul] || !known){ tmp.has = (tmp.has || 0) + 1 } }\n\n\t\t\t\tvar now = State(), u;\n\t\t\t\tif(state > now){\n\t\t\t\t\tsetTimeout(function(){ ham(val, key, soul, state, msg) }, (tmp = state - now) > MD? MD : tmp); // Max Defer 32bit. :(\n\t\t\t\t\tconsole.STAT && console.STAT(((DBG||ctx).Hf = +new Date), tmp, 'future');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(state < was){ /*old;*/ if(true || !ctx.miss){ return } } // but some chains have a cache miss that need to re-fire. // TODO: Improve in future. // for AXE this would reduce rebroadcast, but GUN does it on message forwarding. // TURNS OUT CACHE MISS WAS NOT NEEDED FOR NEW CHAINS ANYMORE!!! DANGER DANGER DANGER, ALWAYS RETURN! (or am I missing something?)\n\t\t\t\tif(!ctx.faith){ // TODO: BUG? Can this be used for cache miss as well? // Yes this was a bug, need to check cache miss for RAD tests, but should we care about the faith check now? Probably not.\n\t\t\t\t\tif(state === was && (val === known || L(val) <= L(known))){ /*console.log(\"same\");*/ /*same;*/ if(!ctx.miss){ return } } // same\n\t\t\t\t}\n\t\t\t\tctx.stun++; // TODO: 'forget' feature in SEA tied to this, bad approach, but hacked in for now. Any changes here must update there.\n\t\t\t\tvar aid = msg['#']+ctx.all++, id = {toString: function(){ return aid }, _: ctx}; id.toJSON = id.toString; // this *trick* makes it compatible between old & new versions.\n\t\t\t\troot.dup.track(id)['#'] = msg['#']; // fixes new OK acks for RPC like RTC.\n\t\t\t\tDBG && (DBG.ph = DBG.ph || +new Date);\n\t\t\t\troot.on('put', {'#': id, '@': msg['@'], put: {'#': soul, '.': key, ':': val, '>': state}, ok: msg.ok, _: ctx});\n\t\t\t}\n\t\t\tfunction map(msg){\n\t\t\t\tvar DBG; if(DBG = (msg._||'').DBG){ DBG.pa = +new Date; DBG.pm = DBG.pm || +new Date}\n      \tvar eve = this, root = eve.as, graph = root.graph, ctx = msg._, put = msg.put, soul = put['#'], key = put['.'], val = put[':'], state = put['>'], id = msg['#'], tmp;\n      \tif((tmp = ctx.msg) && (tmp = tmp.put) && (tmp = tmp[soul])){ state_ify(tmp, key, state, val, soul) } // necessary! or else out messages do not get SEA transforms.\n      \t//var bytes = ((graph[soul]||'')[key]||'').length||1;\n\t\t\t\tgraph[soul] = state_ify(graph[soul], key, state, val, soul);\n\t\t\t\tif(tmp = (root.next||'')[soul]){\n\t\t\t\t\t//tmp.bytes = (tmp.bytes||0) + ((val||'').length||1) - bytes;\n\t\t\t\t\t//if(tmp.bytes > 2**13){ Gun.log.once('byte-limit', \"Note: In the future, GUN peers will enforce a ~4KB query limit. Please see https://gun.eco/docs/Page\") }\n\t\t\t\t\ttmp.on('in', msg)\n\t\t\t\t}\n\t\t\t\tfire(ctx);\n\t\t\t\teve.to.next(msg);\n\t\t\t}\n\t\t\tfunction fire(ctx, msg){ var root;\n\t\t\t\tif(ctx.stop){ return }\n\t\t\t\tif(!ctx.err && 0 < --ctx.stun){ return } // TODO: 'forget' feature in SEA tied to this, bad approach, but hacked in for now. Any changes here must update there.\n\t\t\t\tctx.stop = 1;\n\t\t\t\tif(!(root = ctx.root)){ return }\n\t\t\t\tvar tmp = ctx.match; tmp.end = 1;\n\t\t\t\tif(tmp === root.hatch){ if(!(tmp = ctx.latch) || tmp.end){ delete root.hatch } else { root.hatch = tmp } }\n\t\t\t\tctx.hatch && ctx.hatch(); // TODO: rename/rework how put & this interact.\n\t\t\t\tsetTimeout.each(ctx.match, function(cb){cb && cb()}); \n\t\t\t\tif(!(msg = ctx.msg) || ctx.err || msg.err){ return }\n\t\t\t\tmsg.out = universe;\n\t\t\t\tctx.root.on('out', msg);\n\n\t\t\t\tCF(); // courtesy check;\n\t\t\t}\n\t\t\tfunction ack(msg){ // aggregate ACKs.\n\t\t\t\tvar id = msg['@'] || '', ctx, ok, tmp;\n\t\t\t\tif(!(ctx = id._)){\n\t\t\t\t\tvar dup = (dup = msg.$) && (dup = dup._) && (dup = dup.root) && (dup = dup.dup);\n\t\t\t\t\tif(!(dup = dup.check(id))){ return }\n\t\t\t\t\tmsg['@'] = dup['#'] || msg['@']; // This doesn't do anything anymore, backtrack it to something else?\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tctx.acks = (ctx.acks||0) + 1;\n\t\t\t\tif(ctx.err = msg.err){\n\t\t\t\t\tmsg['@'] = ctx['#'];\n\t\t\t\t\tfire(ctx); // TODO: BUG? How it skips/stops propagation of msg if any 1 item is error, this would assume a whole batch/resync has same malicious intent.\n\t\t\t\t}\n\t\t\t\tctx.ok = msg.ok || ctx.ok;\n\t\t\t\tif(!ctx.stop && !ctx.crack){ ctx.crack = ctx.match && ctx.match.push(function(){back(ctx)}) } // handle synchronous acks. NOTE: If a storage peer ACKs synchronously then the PUT loop has not even counted up how many items need to be processed, so ctx.STOP flags this and adds only 1 callback to the end of the PUT loop.\n\t\t\t\tback(ctx);\n\t\t\t}\n\t\t\tfunction back(ctx){\n\t\t\t\tif(!ctx || !ctx.root){ return }\n\t\t\t\tif(ctx.stun || ctx.acks !== ctx.all){ return }\n\t\t\t\tctx.root.on('in', {'@': ctx['#'], err: ctx.err, ok: ctx.err? u : ctx.ok || {'':1}});\n\t\t\t}\n\n\t\t\tvar ERR = \"Error: Invalid graph!\";\n\t\t\tvar cut = function(s){ return \" '\"+(''+s).slice(0,9)+\"...' \" }\n\t\t\tvar L = JSON.stringify, MD = 2147483647, State = Gun.state;\n\t\t\tvar C = 0, CT, CF = function(){if(C>999 && (C/-(CT - (CT = +new Date))>1)){Gun.window && console.log(\"Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query.\");CF=function(){C=0}}};\n\n\t\t}());\n\n\t\t;(function(){\n\t\t\tGun.on.get = function(msg, gun){\n\t\t\t\tvar root = gun._, get = msg.get, soul = get['#'], node = root.graph[soul], has = get['.'];\n\t\t\t\tvar next = root.next || (root.next = {}), at = next[soul];\n\n\t\t\t\t// TODO: Azarattum bug, what is in graph is not same as what is in next. Fix!\n\n\t\t\t\t// queue concurrent GETs?\n\t\t\t\t// TODO: consider tagging original message into dup for DAM.\n\t\t\t\t// TODO: ^ above? In chat app, 12 messages resulted in same peer asking for `#user.pub` 12 times. (same with #user GET too, yipes!) // DAM note: This also resulted in 12 replies from 1 peer which all had same ##hash but none of them deduped because each get was different.\n\t\t\t\t// TODO: Moving quick hacks fixing these things to axe for now.\n\t\t\t\t// TODO: a lot of GET #foo then GET #foo.\"\" happening, why?\n\t\t\t\t// TODO: DAM's ## hash check, on same get ACK, producing multiple replies still, maybe JSON vs YSON?\n\t\t\t\t// TMP note for now: viMZq1slG was chat LEX query #.\n\t\t\t\t/*if(gun !== (tmp = msg.$) && (tmp = (tmp||'')._)){\n\t\t\t\t\tif(tmp.Q){ tmp.Q[msg['#']] = ''; return } // chain does not need to ask for it again.\n\t\t\t\t\ttmp.Q = {};\n\t\t\t\t}*/\n\t\t\t\t/*if(u === has){\n\t\t\t\t\tif(at.Q){\n\t\t\t\t\t\t//at.Q[msg['#']] = '';\n\t\t\t\t\t\t//return;\n\t\t\t\t\t}\n\t\t\t\t\tat.Q = {};\n\t\t\t\t}*/\n\t\t\t\tvar ctx = msg._||{}, DBG = ctx.DBG = msg.DBG;\n\t\t\t\tDBG && (DBG.g = +new Date);\n\t\t\t\t//console.log(\"GET:\", get, node, has, at);\n\t\t\t\t//if(!node && !at){ return root.on('get', msg) }\n\t\t\t\t//if(has && node){ // replace 2 below lines to continue dev?\n\t\t\t\tif(!node){ return root.on('get', msg) }\n\t\t\t\tif(has){\n\t\t\t\t\tif('string' != typeof has || u === node[has]){\n\t\t\t\t\t\tif(!((at||'').next||'')[has]){ root.on('get', msg); return }\n\t\t\t\t\t}\n\t\t\t\t\tnode = state_ify({}, has, state_is(node, has), node[has], soul);\n\t\t\t\t\t// If we have a key in-memory, do we really need to fetch?\n\t\t\t\t\t// Maybe... in case the in-memory key we have is a local write\n\t\t\t\t\t// we still need to trigger a pull/merge from peers.\n\t\t\t\t}\n\t\t\t\t//Gun.window? Gun.obj.copy(node) : node; // HNPERF: If !browser bump Performance? Is this too dangerous to reference root graph? Copy / shallow copy too expensive for big nodes. Gun.obj.to(node); // 1 layer deep copy // Gun.obj.copy(node); // too slow on big nodes\n\t\t\t\tnode && ack(msg, node);\n\t\t\t\troot.on('get', msg); // send GET to storage adapters.\n\t\t\t}\n\t\t\tfunction ack(msg, node){\n\t\t\t\tvar S = +new Date, ctx = msg._||{}, DBG = ctx.DBG = msg.DBG;\n\t\t\t\tvar to = msg['#'], id = text_rand(9), keys = Object.keys(node||'').sort(), soul = ((node||'')._||'')['#'], kl = keys.length, j = 0, root = msg.$._.root, F = (node === root.graph[soul]);\n\t\t\t\tconsole.STAT && console.STAT(S, ((DBG||ctx).gk = +new Date) - S, 'got keys');\n\t\t\t\t// PERF: Consider commenting this out to force disk-only reads for perf testing? // TODO: .keys( is slow\n\t\t\t\tnode && (function go(){\n\t\t\t\t\tS = +new Date;\n\t\t\t\t\tvar i = 0, k, put = {}, tmp;\n\t\t\t\t\twhile(i < 9 && (k = keys[i++])){\n\t\t\t\t\t\tstate_ify(put, k, state_is(node, k), node[k], soul);\n\t\t\t\t\t}\n\t\t\t\t\tkeys = keys.slice(i);\n\t\t\t\t\t(tmp = {})[soul] = put; put = tmp;\n\t\t\t\t\tvar faith; if(F){ faith = function(){}; faith.ram = faith.faith = true; } // HNPERF: We're testing performance improvement by skipping going through security again, but this should be audited.\n\t\t\t\t\ttmp = keys.length;\n\t\t\t\t\tconsole.STAT && console.STAT(S, -(S - (S = +new Date)), 'got copied some');\n\t\t\t\t\tDBG && (DBG.ga = +new Date);\n\t\t\t\t\troot.on('in', {'@': to, '#': id, put: put, '%': (tmp? (id = text_rand(9)) : u), $: root.$, _: faith, DBG: DBG, FOO: 1});\n\t\t\t\t\tconsole.STAT && console.STAT(S, +new Date - S, 'got in');\n\t\t\t\t\tif(!tmp){ return }\n\t\t\t\t\tsetTimeout.turn(go);\n\t\t\t\t}());\n\t\t\t\tif(!node){ root.on('in', {'@': msg['#']}) } // TODO: I don't think I like this, the default lS adapter uses this but \"not found\" is a sensitive issue, so should probably be handled more carefully/individually.\n\t\t\t} Gun.on.get.ack = ack;\n\t\t}());\n\n\t\t;(function(){\n\t\t\tGun.chain.opt = function(opt){\n\t\t\t\topt = opt || {};\n\t\t\t\tvar gun = this, at = gun._, tmp = opt.peers || opt;\n\t\t\t\tif(!Object.plain(opt)){ opt = {} }\n\t\t\t\tif(!Object.plain(at.opt)){ at.opt = opt }\n\t\t\t\tif('string' == typeof tmp){ tmp = [tmp] }\n\t\t\t\tif(!Object.plain(at.opt.peers)){ at.opt.peers = {}}\n\t\t\t\tif(tmp instanceof Array){\n\t\t\t\t\topt.peers = {};\n\t\t\t\t\ttmp.forEach(function(url){\n\t\t\t\t\t\tvar p = {}; p.id = p.url = url;\n\t\t\t\t\t\topt.peers[url] = at.opt.peers[url] = at.opt.peers[url] || p;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tobj_each(opt, function each(k){ var v = this[k];\n\t\t\t\t\tif((this && this.hasOwnProperty(k)) || 'string' == typeof v || Object.empty(v)){ this[k] = v; return }\n\t\t\t\t\tif(v && v.constructor !== Object && !(v instanceof Array)){ return }\n\t\t\t\t\tobj_each(v, each);\n\t\t\t\t});\n\t\t\t\tat.opt.from = opt;\n\t\t\t\tGun.on('opt', at);\n\t\t\t\tat.opt.uuid = at.opt.uuid || function uuid(l){ return Gun.state().toString(36).replace('.','') + String.random(l||12) }\n\t\t\t\treturn gun;\n\t\t\t}\n\t\t}());\n\n\t\tvar obj_each = function(o,f){ Object.keys(o).forEach(f,o) }, text_rand = String.random, turn = setTimeout.turn, valid = Gun.valid, state_is = Gun.state.is, state_ify = Gun.state.ify, u, empty = {}, C;\n\n\t\tGun.log = function(){ return (!Gun.log.off && C.log.apply(C, arguments)), [].slice.call(arguments).join(' ') };\n\t\tGun.log.once = function(w,s,o){ return (o = Gun.log.once)[w] = o[w] || 0, o[w]++ || Gun.log(s) };\n\n\t\tif(typeof window !== \"undefined\"){ (window.GUN = window.Gun = Gun).window = window }\n\t\ttry{ if(typeof MODULE !== \"undefined\"){ MODULE.exports = Gun } }catch(e){}\n\t\tmodule.exports = Gun;\n\t\t\n\t\t(Gun.window||{}).console = (Gun.window||{}).console || {log: function(){}};\n\t\t(C = console).only = function(i, s){ return (C.only.i && i === C.only.i && C.only.i++) && (C.log.apply(C, arguments) || s) };\n\n\t\t;\"Please do not remove welcome log unless you are paying for a monthly sponsorship, thanks!\";\n\t\tGun.log.once(\"welcome\", \"Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!\");\n\t})(USE, './root');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./root');\n\t\tGun.chain.back = function(n, opt){ var tmp;\n\t\t\tn = n || 1;\n\t\t\tif(-1 === n || Infinity === n){\n\t\t\t\treturn this._.root.$;\n\t\t\t} else\n\t\t\tif(1 === n){\n\t\t\t\treturn (this._.back || this._).$;\n\t\t\t}\n\t\t\tvar gun = this, at = gun._;\n\t\t\tif(typeof n === 'string'){\n\t\t\t\tn = n.split('.');\n\t\t\t}\n\t\t\tif(n instanceof Array){\n\t\t\t\tvar i = 0, l = n.length, tmp = at;\n\t\t\t\tfor(i; i < l; i++){\n\t\t\t\t\ttmp = (tmp||empty)[n[i]];\n\t\t\t\t}\n\t\t\t\tif(u !== tmp){\n\t\t\t\t\treturn opt? gun : tmp;\n\t\t\t\t} else\n\t\t\t\tif((tmp = at.back)){\n\t\t\t\t\treturn tmp.$.back(n, opt);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif('function' == typeof n){\n\t\t\t\tvar yes, tmp = {back: at};\n\t\t\t\twhile((tmp = tmp.back)\n\t\t\t\t&& u === (yes = n(tmp, opt))){}\n\t\t\t\treturn yes;\n\t\t\t}\n\t\t\tif('number' == typeof n){\n\t\t\t\treturn (at.back || at).$.back(n - 1);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tvar empty = {}, u;\n\t})(USE, './back');\n\n\t;USE(function(module){\n\t\t// WARNING: GUN is very simple, but the JavaScript chaining API around GUN\n\t\t// is complicated and was extremely hard to build. If you port GUN to another\n\t\t// language, consider implementing an easier API to build.\n\t\tvar Gun = USE('./root');\n\t\tGun.chain.chain = function(sub){\n\t\t\tvar gun = this, at = gun._, chain = new (sub || gun).constructor(gun), cat = chain._, root;\n\t\t\tcat.root = root = at.root;\n\t\t\tcat.id = ++root.once;\n\t\t\tcat.back = gun._;\n\t\t\tcat.on = Gun.on;\n\t\t\tcat.on('in', Gun.on.in, cat); // For 'in' if I add my own listeners to each then I MUST do it before in gets called. If I listen globally for all incoming data instead though, regardless of individual listeners, I can transform the data there and then as well.\n\t\t\tcat.on('out', Gun.on.out, cat); // However for output, there isn't really the global option. I must listen by adding my own listener individually BEFORE this one is ever called.\n\t\t\treturn chain;\n\t\t}\n\n\t\tfunction output(msg){\n\t\t\tvar put, get, at = this.as, back = at.back, root = at.root, tmp;\n\t\t\tif(!msg.$){ msg.$ = at.$ }\n\t\t\tthis.to.next(msg);\n\t\t\tif(at.err){ at.on('in', {put: at.put = u, $: at.$}); return }\n\t\t\tif(get = msg.get){\n\t\t\t\t/*if(u !== at.put){\n\t\t\t\t\tat.on('in', at);\n\t\t\t\t\treturn;\n\t\t\t\t}*/\n\t\t\t\tif(root.pass){ root.pass[at.id] = at; } // will this make for buggy behavior elsewhere?\n\t\t\t\tif(at.lex){ Object.keys(at.lex).forEach(function(k){ tmp[k] = at.lex[k] }, tmp = msg.get = msg.get || {}) }\n\t\t\t\tif(get['#'] || at.soul){\n\t\t\t\t\tget['#'] = get['#'] || at.soul;\n\t\t\t\t\t//root.graph[get['#']] = root.graph[get['#']] || {_:{'#':get['#'],'>':{}}};\n\t\t\t\t\tmsg['#'] || (msg['#'] = text_rand(9)); // A3120 ?\n\t\t\t\t\tback = (root.$.get(get['#'])._);\n\t\t\t\t\tif(!(get = get['.'])){ // soul\n\t\t\t\t\t\ttmp = back.ask && back.ask['']; // check if we have already asked for the full node\n\t\t\t\t\t\t(back.ask || (back.ask = {}))[''] = back; // add a flag that we are now.\n\t\t\t\t\t\tif(u !== back.put){ // if we already have data,\n\t\t\t\t\t\t\tback.on('in', back); // send what is cached down the chain\n\t\t\t\t\t\t\tif(tmp){ return } // and don't ask for it again.\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmsg.$ = back.$;\n\t\t\t\t\t} else\n\t\t\t\t\tif(obj_has(back.put, get)){ // TODO: support #LEX !\n\t\t\t\t\t\ttmp = back.ask && back.ask[get];\n\t\t\t\t\t\t(back.ask || (back.ask = {}))[get] = back.$.get(get)._;\n\t\t\t\t\t\tback.on('in', {get: get, put: {'#': back.soul, '.': get, ':': back.put[get], '>': state_is(root.graph[back.soul], get)}});\n\t\t\t\t\t\tif(tmp){ return }\n\t\t\t\t\t}\n\t\t\t\t\t\t/*put = (back.$.get(get)._);\n\t\t\t\t\t\tif(!(tmp = put.ack)){ put.ack = -1 }\n\t\t\t\t\t\tback.on('in', {\n\t\t\t\t\t\t\t$: back.$,\n\t\t\t\t\t\t\tput: Gun.state.ify({}, get, Gun.state(back.put, get), back.put[get]),\n\t\t\t\t\t\t\tget: back.get\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(tmp){ return }\n\t\t\t\t\t} else\n\t\t\t\t\tif('string' != typeof get){\n\t\t\t\t\t\tvar put = {}, meta = (back.put||{})._;\n\t\t\t\t\t\tGun.obj.map(back.put, function(v,k){\n\t\t\t\t\t\t\tif(!Gun.text.match(k, get)){ return }\n\t\t\t\t\t\t\tput[k] = v;\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(!Gun.obj.empty(put)){\n\t\t\t\t\t\t\tput._ = meta;\n\t\t\t\t\t\t\tback.on('in', {$: back.$, put: put, get: back.get})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(tmp = at.lex){\n\t\t\t\t\t\t\ttmp = (tmp._) || (tmp._ = function(){});\n\t\t\t\t\t\t\tif(back.ack < tmp.ask){ tmp.ask = back.ack }\n\t\t\t\t\t\t\tif(tmp.ask){ return }\n\t\t\t\t\t\t\ttmp.ask = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t\troot.ask(ack, msg); // A3120 ?\n\t\t\t\t\treturn root.on('in', msg);\n\t\t\t\t}\n\t\t\t\t//if(root.now){ root.now[at.id] = root.now[at.id] || true; at.pass = {} }\n\t\t\t\tif(get['.']){\n\t\t\t\t\tif(at.get){\n\t\t\t\t\t\tmsg = {get: {'.': at.get}, $: at.$};\n\t\t\t\t\t\t(back.ask || (back.ask = {}))[at.get] = msg.$._; // TODO: PERFORMANCE? More elegant way?\n\t\t\t\t\t\treturn back.on('out', msg);\n\t\t\t\t\t}\n\t\t\t\t\tmsg = {get: at.lex? msg.get : {}, $: at.$};\n\t\t\t\t\treturn back.on('out', msg);\n\t\t\t\t}\n\t\t\t\t(at.ask || (at.ask = {}))[''] = at;\t //at.ack = at.ack || -1;\n\t\t\t\tif(at.get){\n\t\t\t\t\tget['.'] = at.get;\n\t\t\t\t\t(back.ask || (back.ask = {}))[at.get] = msg.$._; // TODO: PERFORMANCE? More elegant way?\n\t\t\t\t\treturn back.on('out', msg);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn back.on('out', msg);\n\t\t}; Gun.on.out = output;\n\n\t\tfunction input(msg, cat){ cat = cat || this.as; // TODO: V8 may not be able to optimize functions with different parameter calls, so try to do benchmark to see if there is any actual difference.\n\t\t\tvar root = cat.root, gun = msg.$ || (msg.$ = cat.$), at = (gun||'')._ || empty, tmp = msg.put||'', soul = tmp['#'], key = tmp['.'], change = (u !== tmp['='])? tmp['='] : tmp[':'], state = tmp['>'] || -Infinity, sat; // eve = event, at = data at, cat = chain at, sat = sub at (children chains).\n\t\t\tif(u !== msg.put && (u === tmp['#'] || u === tmp['.'] || (u === tmp[':'] && u === tmp['=']) || u === tmp['>'])){ // convert from old format\n\t\t\t\tif(!valid(tmp)){\n\t\t\t\t\tif(!(soul = ((tmp||'')._||'')['#'])){ console.log(\"chain not yet supported for\", tmp, '...', msg, cat); return; }\n\t\t\t\t\tgun = cat.root.$.get(soul);\n\t\t\t\t\treturn setTimeout.each(Object.keys(tmp).sort(), function(k){ // TODO: .keys( is slow // BUG? ?Some re-in logic may depend on this being sync?\n\t\t\t\t\t\tif('_' == k || u === (state = state_is(tmp, k))){ return }\n\t\t\t\t\t\tcat.on('in', {$: gun, put: {'#': soul, '.': k, '=': tmp[k], '>': state}, VIA: msg});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcat.on('in', {$: at.back.$, put: {'#': soul = at.back.soul, '.': key = at.has || at.get, '=': tmp, '>': state_is(at.back.put, key)}, via: msg}); // TODO: This could be buggy! It assumes/approxes data, other stuff could have corrupted it.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif((msg.seen||'')[cat.id]){ return } (msg.seen || (msg.seen = function(){}))[cat.id] = cat; // help stop some infinite loops\n\n\t\t\tif(cat !== at){ // don't worry about this when first understanding the code, it handles changing contexts on a message. A soul chain will never have a different context.\n\t\t\t\tObject.keys(msg).forEach(function(k){ tmp[k] = msg[k] }, tmp = {}); // make copy of message\n\t\t\t\ttmp.get = cat.get || tmp.get;\n\t\t\t\tif(!cat.soul && !cat.has){ // if we do not recognize the chain type\n\t\t\t\t\ttmp.$$$ = tmp.$$$ || cat.$; // make a reference to wherever it came from.\n\t\t\t\t} else\n\t\t\t\tif(at.soul){ // a has (property) chain will have a different context sometimes if it is linked (to a soul chain). Anything that is not a soul or has chain, will always have different contexts.\n\t\t\t\t\ttmp.$ = cat.$;\n\t\t\t\t\ttmp.$$ = tmp.$$ || at.$;\n\t\t\t\t}\n\t\t\t\tmsg = tmp; // use the message with the new context instead;\n\t\t\t}\n\t\t\tunlink(msg, cat);\n\n\t\t\tif(((cat.soul/* && (cat.ask||'')['']*/) || msg.$$) && state >= state_is(root.graph[soul], key)){ // The root has an in-memory cache of the graph, but if our peer has asked for the data then we want a per deduplicated chain copy of the data that might have local edits on it.\n\t\t\t\t(tmp = root.$.get(soul)._).put = state_ify(tmp.put, key, state, change, soul);\n\t\t\t}\n\t\t\tif(!at.soul /*&& (at.ask||'')['']*/ && state >= state_is(root.graph[soul], key) && (sat = (root.$.get(soul)._.next||'')[key])){ // Same as above here, but for other types of chains. // TODO: Improve perf by preventing echoes recaching.\n\t\t\t\tsat.put = change; // update cache\n\t\t\t\tif('string' == typeof (tmp = valid(change))){\n\t\t\t\t\tsat.put = root.$.get(tmp)._.put || change; // share same cache as what we're linked to.\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.to && this.to.next(msg); // 1st API job is to call all chain listeners.\n\t\t\t// TODO: Make input more reusable by only doing these (some?) calls if we are a chain we recognize? This means each input listener would be responsible for when listeners need to be called, which makes sense, as they might want to filter.\n\t\t\tcat.any && setTimeout.each(Object.keys(cat.any), function(any){ (any = cat.any[any]) && any(msg) },0,99); // 1st API job is to call all chain listeners. // TODO: .keys( is slow // BUG: Some re-in logic may depend on this being sync.\n\t\t\tcat.echo && setTimeout.each(Object.keys(cat.echo), function(lat){ (lat = cat.echo[lat]) && lat.on('in', msg) },0,99); // & linked at chains // TODO: .keys( is slow // BUG: Some re-in logic may depend on this being sync.\n\n\t\t\tif(((msg.$$||'')._||at).soul){ // comments are linear, but this line of code is non-linear, so if I were to comment what it does, you'd have to read 42 other comments first... but you can't read any of those comments until you first read this comment. What!? // shouldn't this match link's check?\n\t\t\t\t// is there cases where it is a $$ that we do NOT want to do the following? \n\t\t\t\tif((sat = cat.next) && (sat = sat[key])){ // TODO: possible trick? Maybe have `ionmap` code set a sat? // TODO: Maybe we should do `cat.ask` instead? I guess does not matter.\n\t\t\t\t\ttmp = {}; Object.keys(msg).forEach(function(k){ tmp[k] = msg[k] });\n\t\t\t\t\ttmp.$ = (msg.$$||msg.$).get(tmp.get = key); delete tmp.$$; delete tmp.$$$;\n\t\t\t\t\tsat.on('in', tmp);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlink(msg, cat);\n\t\t}; Gun.on.in = input;\n\n\t\tfunction link(msg, cat){ cat = cat || this.as || msg.$._;\n\t\t\tif(msg.$$ && this !== Gun.on){ return } // $$ means we came from a link, so we are at the wrong level, thus ignore it unless overruled manually by being called directly.\n\t\t\tif(!msg.put || cat.soul){ return } // But you cannot overrule being linked to nothing, or trying to link a soul chain - that must never happen.\n\t\t\tvar put = msg.put||'', link = put['=']||put[':'], tmp;\n\t\t\tvar root = cat.root, tat = root.$.get(put['#']).get(put['.'])._;\n\t\t\tif('string' != typeof (link = valid(link))){\n\t\t\t\tif(this === Gun.on){ (tat.echo || (tat.echo = {}))[cat.id] = cat } // allow some chain to explicitly force linking to simple data.\n\t\t\t\treturn; // by default do not link to data that is not a link.\n\t\t\t}\n\t\t\tif((tat.echo || (tat.echo = {}))[cat.id] // we've already linked ourselves so we do not need to do it again. Except... (annoying implementation details)\n\t\t\t\t&& !(root.pass||'')[cat.id]){ return } // if a new event listener was added, we need to make a pass through for it. The pass will be on the chain, not always the chain passed down. \n\t\t\tif(tmp = root.pass){ if(tmp[link+cat.id]){ return } tmp[link+cat.id] = 1 } // But the above edge case may \"pass through\" on a circular graph causing infinite passes, so we hackily add a temporary check for that.\n\n\t\t\t(tat.echo||(tat.echo={}))[cat.id] = cat; // set ourself up for the echo! // TODO: BUG? Echo to self no longer causes problems? Confirm.\n\n\t\t\tif(cat.has){ cat.link = link }\n\t\t\tvar sat = root.$.get(tat.link = link)._; // grab what we're linking to.\n\t\t\t(sat.echo || (sat.echo = {}))[tat.id] = tat; // link it.\n\t\t\tvar tmp = cat.ask||''; // ask the chain for what needs to be loaded next!\n\t\t\tif(tmp[''] || cat.lex){ // we might need to load the whole thing // TODO: cat.lex probably has edge case bugs to it, need more test coverage.\n\t\t\t\tsat.on('out', {get: {'#': link}});\n\t\t\t}\n\t\t\tsetTimeout.each(Object.keys(tmp), function(get, sat){ // if sub chains are asking for data. // TODO: .keys( is slow // BUG? ?Some re-in logic may depend on this being sync?\n\t\t\t\tif(!get || !(sat = tmp[get])){ return }\n\t\t\t\tsat.on('out', {get: {'#': link, '.': get}}); // go get it.\n\t\t\t},0,99);\n\t\t}; Gun.on.link = link;\n\n\t\tfunction unlink(msg, cat){ // ugh, so much code for seemingly edge case behavior.\n\t\t\tvar put = msg.put||'', change = (u !== put['='])? put['='] : put[':'], root = cat.root, link, tmp;\n\t\t\tif(u === change){ // 1st edge case: If we have a brand new database, no data will be found.\n\t\t\t\t// TODO: BUG! because emptying cache could be async from below, make sure we are not emptying a newer cache. So maybe pass an Async ID to check against?\n\t\t\t\t// TODO: BUG! What if this is a map? // Warning! Clearing things out needs to be robust against sync/async ops, or else you'll see `map val get put` test catastrophically fail because map attempts to link when parent graph is streamed before child value gets set. Need to differentiate between lack acks and force clearing.\n\t\t\t\tif(cat.soul && u !== cat.put){ return } // data may not be found on a soul, but if a soul already has data, then nothing can clear the soul as a whole.\n\t\t\t\t//if(!cat.has){ return }\n\t\t\t\ttmp = (msg.$$||msg.$||'')._||'';\n\t\t\t\tif(msg['@'] && (u !== tmp.put || u !== cat.put)){ return } // a \"not found\" from other peers should not clear out data if we have already found it.\n\t\t\t\t//if(cat.has && u === cat.put && !(root.pass||'')[cat.id]){ return } // if we are already unlinked, do not call again, unless edge case. // TODO: BUG! This line should be deleted for \"unlink deeply nested\".\n\t\t\t\tif(link = cat.link || msg.linked){\n\t\t\t\t\tdelete (root.$.get(link)._.echo||'')[cat.id];\n\t\t\t\t}\n\t\t\t\tif(cat.has){ // TODO: Empty out links, maps, echos, acks/asks, etc.?\n\t\t\t\t\tcat.link = null;\n\t\t\t\t}\n\t\t\t\tcat.put = u; // empty out the cache if, for example, alice's car's color no longer exists (relative to alice) if alice no longer has a car.\n\t\t\t\t// TODO: BUG! For maps, proxy this so the individual sub is triggered, not all subs.\n\t\t\t\tsetTimeout.each(Object.keys(cat.next||''), function(get, sat){ // empty out all sub chains. // TODO: .keys( is slow // BUG? ?Some re-in logic may depend on this being sync? // TODO: BUG? This will trigger deeper put first, does put logic depend on nested order? // TODO: BUG! For map, this needs to be the isolated child, not all of them.\n\t\t\t\t\tif(!(sat = cat.next[get])){ return }\n\t\t\t\t\t//if(cat.has && u === sat.put && !(root.pass||'')[sat.id]){ return } // if we are already unlinked, do not call again, unless edge case. // TODO: BUG! This line should be deleted for \"unlink deeply nested\".\n\t\t\t\t\tif(link){ delete (root.$.get(link).get(get)._.echo||'')[sat.id] }\n\t\t\t\t\tsat.on('in', {get: get, put: u, $: sat.$}); // TODO: BUG? Add recursive seen check?\n\t\t\t\t},0,99);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(cat.soul){ return } // a soul cannot unlink itself.\n\t\t\tif(msg.$$){ return } // a linked chain does not do the unlinking, the sub chain does. // TODO: BUG? Will this cancel maps?\n\t\t\tlink = valid(change); // need to unlink anytime we are not the same link, though only do this once per unlink (and not on init).\n\t\t\ttmp = msg.$._||'';\n\t\t\tif(link === tmp.link || (cat.has && !tmp.link)){\n\t\t\t\tif((root.pass||'')[cat.id] && 'string' !== typeof link){\n\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete (tmp.echo||'')[cat.id];\n\t\t\tunlink({get: cat.get, put: u, $: msg.$, linked: msg.linked = msg.linked || tmp.link}, cat); // unlink our sub chains.\n\t\t}; Gun.on.unlink = unlink;\n\n\t\tfunction ack(msg, ev){\n\t\t\t//if(!msg['%'] && (this||'').off){ this.off() } // do NOT memory leak, turn off listeners! Now handled by .ask itself\n\t\t\t// manhattan:\n\t\t\tvar as = this.as, at = as.$._, root = at.root, get = as.get||'', tmp = (msg.put||'')[get['#']]||'';\n\t\t\tif(!msg.put || ('string' == typeof get['.'] && u === tmp[get['.']])){\n\t\t\t\tif(u !== at.put){ return }\n\t\t\t\tif(!at.soul && !at.has){ return } // TODO: BUG? For now, only core-chains will handle not-founds, because bugs creep in if non-core chains are used as $ but we can revisit this later for more powerful extensions.\n\t\t\t\tat.ack = (at.ack || 0) + 1;\n\t\t\t\tat.on('in', {\n\t\t\t\t\tget: at.get,\n\t\t\t\t\tput: at.put = u,\n\t\t\t\t\t$: at.$,\n\t\t\t\t\t'@': msg['@']\n\t\t\t\t});\n\t\t\t\t/*(tmp = at.Q) && setTimeout.each(Object.keys(tmp), function(id){ // TODO: Temporary testing, not integrated or being used, probably delete.\n\t\t\t\t\tObject.keys(msg).forEach(function(k){ tmp[k] = msg[k] }, tmp = {}); tmp['@'] = id; // copy message\n\t\t\t\t\troot.on('in', tmp);\n\t\t\t\t}); delete at.Q;*/\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t(msg._||{}).miss = 1;\n\t\t\tGun.on.put(msg);\n\t\t\treturn; // eom\n\t\t}\n\n\t\tvar empty = {}, u, text_rand = String.random, valid = Gun.valid, obj_has = function(o, k){ return o && Object.prototype.hasOwnProperty.call(o, k) }, state = Gun.state, state_is = state.is, state_ify = state.ify;\n\t})(USE, './chain');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./root');\n\t\tGun.chain.get = function(key, cb, as){\n\t\t\tvar gun, tmp;\n\t\t\tif(typeof key === 'string'){\n\t\t\t\tif(key.length == 0) {\t\n\t\t\t\t\t(gun = this.chain())._.err = {err: Gun.log('0 length key!', key)};\n\t\t\t\t\tif(cb){ cb.call(gun, gun._.err) }\n\t\t\t\t\treturn gun;\n\t\t\t\t}\n\t\t\t\tvar back = this, cat = back._;\n\t\t\t\tvar next = cat.next || empty;\n\t\t\t\tif(!(gun = next[key])){\n\t\t\t\t\tgun = key && cache(key, back);\n\t\t\t\t}\n\t\t\t\tgun = gun && gun.$;\n\t\t\t} else\n\t\t\tif('function' == typeof key){\n\t\t\t\tif(true === cb){ return soul(this, key, cb, as), this }\n\t\t\t\tgun = this;\n\t\t\t\tvar cat = gun._, opt = cb || {}, root = cat.root, id;\n\t\t\t\topt.at = cat;\n\t\t\t\topt.ok = key;\n\t\t\t\tvar wait = {}; // can we assign this to the at instead, like in once?\n\t\t\t\t//var path = []; cat.$.back(at => { at.get && path.push(at.get.slice(0,9))}); path = path.reverse().join('.');\n\t\t\t\tfunction any(msg, eve, f){\n\t\t\t\t\tif(any.stun){ return }\n\t\t\t\t\tif((tmp = root.pass) && !tmp[id]){ return }\n\t\t\t\t\tvar at = msg.$._, sat = (msg.$$||'')._, data = (sat||at).put, odd = (!at.has && !at.soul), test = {}, link, tmp;\n\t\t\t\t\tif(odd || u === data){ // handles non-core\n\t\t\t\t\t\tdata = (u === ((tmp = msg.put)||'')['='])? (u === (tmp||'')[':'])? tmp : tmp[':'] : tmp['='];\n\t\t\t\t\t}\n\t\t\t\t\tif(link = ('string' == typeof (tmp = Gun.valid(data)))){\n\t\t\t\t\t\tdata = (u === (tmp = root.$.get(tmp)._.put))? opt.not? u : data : tmp;\n\t\t\t\t\t}\n\t\t\t\t\tif(opt.not && u === data){ return }\n\t\t\t\t\tif(u === opt.stun){\n\t\t\t\t\t\tif((tmp = root.stun) && tmp.on){\n\t\t\t\t\t\t\tcat.$.back(function(a){ // our chain stunned?\n\t\t\t\t\t\t\t\ttmp.on(''+a.id, test = {});\n\t\t\t\t\t\t\t\tif((test.run || 0) < any.id){ return test } // if there is an earlier stun on gapless parents/self.\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t!test.run && tmp.on(''+at.id, test = {}); // this node stunned?\n\t\t\t\t\t\t\t!test.run && sat && tmp.on(''+sat.id, test = {}); // linked node stunned?\n\t\t\t\t\t\t\tif(any.id > test.run){\n\t\t\t\t\t\t\t\tif(!test.stun || test.stun.end){\n\t\t\t\t\t\t\t\t\ttest.stun = tmp.on('stun');\n\t\t\t\t\t\t\t\t\ttest.stun = test.stun && test.stun.last;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(test.stun && !test.stun.end){\n\t\t\t\t\t\t\t\t\t//if(odd && u === data){ return }\n\t\t\t\t\t\t\t\t\t//if(u === msg.put){ return } // \"not found\" acks will be found if there is stun, so ignore these.\n\t\t\t\t\t\t\t\t\t(test.stun.add || (test.stun.add = {}))[id] = function(){ any(msg,eve,1) } // add ourself to the stun callback list that is called at end of the write.\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(/*odd &&*/ u === data){ f = 0 } // if data not found, keep waiting/trying.\n\t\t\t\t\t\t/*if(f && u === data){\n\t\t\t\t\t\t\tcat.on('out', opt.out);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}*/\n\t\t\t\t\t\tif((tmp = root.hatch) && !tmp.end && u === opt.hatch && !f){ // quick hack! // What's going on here? Because data is streamed, we get things one by one, but a lot of developers would rather get a callback after each batch instead, so this does that by creating a wait list per chain id that is then called at the end of the batch by the hatch code in the root put listener.\n\t\t\t\t\t\t\tif(wait[at.$._.id]){ return } wait[at.$._.id] = 1;\n\t\t\t\t\t\t\ttmp.push(function(){any(msg,eve,1)});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}; wait = {}; // end quick hack.\n\t\t\t\t\t}\n\t\t\t\t\t// call:\n\t\t\t\t\tif(root.pass){ if(root.pass[id+at.id]){ return } root.pass[id+at.id] = 1 }\n\t\t\t\t\tif(opt.on){ opt.ok.call(at.$, data, at.get, msg, eve || any); return } // TODO: Also consider breaking `this` since a lot of people do `=>` these days and `.call(` has slower performance.\n\t\t\t\t\tif(opt.v2020){ opt.ok(msg, eve || any); return }\n\t\t\t\t\tObject.keys(msg).forEach(function(k){ tmp[k] = msg[k] }, tmp = {}); msg = tmp; msg.put = data; // 2019 COMPATIBILITY! TODO: GET RID OF THIS!\n\t\t\t\t\topt.ok.call(opt.as, msg, eve || any); // is this the right\n\t\t\t\t};\n\t\t\t\tany.at = cat;\n\t\t\t\t//(cat.any||(cat.any=function(msg){ setTimeout.each(Object.keys(cat.any||''), function(act){ (act = cat.any[act]) && act(msg) },0,99) }))[id = String.random(7)] = any; // maybe switch to this in future?\n\t\t\t\t(cat.any||(cat.any={}))[id = String.random(7)] = any;\n\t\t\t\tany.off = function(){ any.stun = 1; if(!cat.any){ return } delete cat.any[id] }\n\t\t\t\tany.rid = rid; // logic from old version, can we clean it up now?\n\t\t\t\tany.id = opt.run || ++root.once; // used in callback to check if we are earlier than a write. // will this ever cause an integer overflow?\n\t\t\t\ttmp = root.pass; (root.pass = {})[id] = 1; // Explanation: test trade-offs want to prevent recursion so we add/remove pass flag as it gets fulfilled to not repeat, however map map needs many pass flags - how do we reconcile?\n\t\t\t\topt.out = opt.out || {get: {}};\n\t\t\t\tcat.on('out', opt.out);\n\t\t\t\troot.pass = tmp;\n\t\t\t\treturn gun;\n\t\t\t} else\n\t\t\tif('number' == typeof key){\n\t\t\t\treturn this.get(''+key, cb, as);\n\t\t\t} else\n\t\t\tif('string' == typeof (tmp = valid(key))){\n\t\t\t\treturn this.get(tmp, cb, as);\n\t\t\t} else\n\t\t\tif(tmp = this.get.next){\n\t\t\t\tgun = tmp(this, key);\n\t\t\t}\n\t\t\tif(!gun){\n\t\t\t\t(gun = this.chain())._.err = {err: Gun.log('Invalid get request!', key)}; // CLEAN UP\n\t\t\t\tif(cb){ cb.call(gun, gun._.err) }\n\t\t\t\treturn gun;\n\t\t\t}\n\t\t\tif(cb && 'function' == typeof cb){\n\t\t\t\tgun.get(cb, as);\n\t\t\t}\n\t\t\treturn gun;\n\t\t}\n\t\tfunction cache(key, back){\n\t\t\tvar cat = back._, next = cat.next, gun = back.chain(), at = gun._;\n\t\t\tif(!next){ next = cat.next = {} }\n\t\t\tnext[at.get = key] = at;\n\t\t\tif(back === cat.root.$){\n\t\t\t\tat.soul = key;\n\t\t\t\t//at.put = {};\n\t\t\t} else\n\t\t\tif(cat.soul || cat.has){\n\t\t\t\tat.has = key;\n\t\t\t\t//if(obj_has(cat.put, key)){\n\t\t\t\t\t//at.put = cat.put[key];\n\t\t\t\t//}\n\t\t\t}\n\t\t\treturn at;\n\t\t}\n\t\tfunction soul(gun, cb, opt, as){\n\t\t\tvar cat = gun._, acks = 0, tmp;\n\t\t\tif(tmp = cat.soul || cat.link){ return cb(tmp, as, cat) }\n\t\t\tif(cat.jam){ return cat.jam.push([cb, as]) }\n\t\t\tcat.jam = [[cb,as]];\n\t\t\tgun.get(function go(msg, eve){\n\t\t\t\tif(u === msg.put && !cat.root.opt.super && (tmp = Object.keys(cat.root.opt.peers).length) && ++acks <= tmp){ // TODO: super should not be in core code, bring AXE up into core instead to fix? // TODO: .keys( is slow\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teve.rid(msg);\n\t\t\t\tvar at = ((at = msg.$) && at._) || {}, i = 0, as;\n\t\t\t\ttmp = cat.jam; delete cat.jam; // tmp = cat.jam.splice(0, 100);\n\t\t\t\t//if(tmp.length){ process.nextTick(function(){ go(msg, eve) }) }\n\t\t\t\twhile(as = tmp[i++]){ //Gun.obj.map(tmp, function(as, cb){\n\t\t\t\t\tvar cb = as[0], id; as = as[1];\n\t\t\t\t\tcb && cb(id = at.link || at.soul || Gun.valid(msg.put) || ((msg.put||{})._||{})['#'], as, msg, eve);\n\t\t\t\t} //);\n\t\t\t}, {out: {get: {'.':true}}});\n\t\t\treturn gun;\n\t\t}\n\t\tfunction rid(at){\n\t\t\tvar cat = this.at || this.on;\n\t\t\tif(!at || cat.soul || cat.has){ return this.off() }\n\t\t\tif(!(at = (at = (at = at.$ || at)._ || at).id)){ return }\n\t\t\tvar map = cat.map, tmp, seen;\n\t\t\t//if(!map || !(tmp = map[at]) || !(tmp = tmp.at)){ return }\n\t\t\tif(tmp = (seen = this.seen || (this.seen = {}))[at]){ return true }\n\t\t\tseen[at] = true;\n\t\t\treturn;\n\t\t\t//tmp.echo[cat.id] = {}; // TODO: Warning: This unsubscribes ALL of this chain's listeners from this link, not just the one callback event.\n\t\t\t//obj.del(map, at); // TODO: Warning: This unsubscribes ALL of this chain's listeners from this link, not just the one callback event.\n\t\t\treturn;\n\t\t}\n\t\tvar empty = {}, valid = Gun.valid, u;\n\t})(USE, './get');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./root');\n\t\tGun.chain.put = function(data, cb, as){ // I rewrote it :)\n\t\t\tvar gun = this, at = gun._, root = at.root;\n\t\t\tas = as || {};\n\t\t\tas.root = at.root;\n\t\t\tas.run || (as.run = root.once);\n\t\t\tstun(as, at.id); // set a flag for reads to check if this chain is writing.\n\t\t\tas.ack = as.ack || cb;\n\t\t\tas.via = as.via || gun;\n\t\t\tas.data = as.data || data;\n\t\t\tas.soul || (as.soul = at.soul || ('string' == typeof cb && cb));\n\t\t\tvar s = as.state = as.state || Gun.state();\n\t\t\tif('function' == typeof data){ data(function(d){ as.data = d; gun.put(u,u,as) }); return gun }\n\t\t\tif(!as.soul){ return get(as), gun }\n\t\t\tas.$ = root.$.get(as.soul); // TODO: This may not allow user chaining and similar?\n\t\t\tas.todo = [{it: as.data, ref: as.$}];\n\t\t\tas.turn = as.turn || turn;\n\t\t\tas.ran = as.ran || ran;\n\t\t\t//var path = []; as.via.back(at => { at.get && path.push(at.get.slice(0,9)) }); path = path.reverse().join('.');\n\t\t\t// TODO: Perf! We only need to stun chains that are being modified, not necessarily written to.\n\t\t\t(function walk(){\n\t\t\t\tvar to = as.todo, at = to.pop(), d = at.it, cid = at.ref && at.ref._.id, v, k, cat, tmp, g;\n\t\t\t\tstun(as, at.ref);\n\t\t\t\tif(tmp = at.todo){\n\t\t\t\t\tk = tmp.pop(); d = d[k];\n\t\t\t\t\tif(tmp.length){ to.push(at) }\n\t\t\t\t}\n\t\t\t\tk && (to.path || (to.path = [])).push(k);\n\t\t\t\tif(!(v = valid(d)) && !(g = Gun.is(d))){\n\t\t\t\t\tif(!Object.plain(d)){ ran.err(as, \"Invalid data: \"+ check(d) +\" at \" + (as.via.back(function(at){at.get && tmp.push(at.get)}, tmp = []) || tmp.join('.'))+'.'+(to.path||[]).join('.')); return }\n\t\t\t\t\tvar seen = as.seen || (as.seen = []), i = seen.length;\n\t\t\t\t\twhile(i--){ if(d === (tmp = seen[i]).it){ v = d = tmp.link; break } }\n\t\t\t\t}\n\t\t\t\tif(k && v){ at.node = state_ify(at.node, k, s, d) } // handle soul later.\n\t\t\t\telse {\n\t\t\t\t\tif(!as.seen){ ran.err(as, \"Data at root of graph must be a node (an object).\"); return }\n\t\t\t\t\tas.seen.push(cat = {it: d, link: {}, todo: g? [] : Object.keys(d).sort().reverse(), path: (to.path||[]).slice(), up: at}); // Any perf reasons to CPU schedule this .keys( ?\n\t\t\t\t\tat.node = state_ify(at.node, k, s, cat.link);\n\t\t\t\t\t!g && cat.todo.length && to.push(cat);\n\t\t\t\t\t// ---------------\n\t\t\t\t\tvar id = as.seen.length;\n\t\t\t\t\t(as.wait || (as.wait = {}))[id] = '';\n\t\t\t\t\ttmp = (cat.ref = (g? d : k? at.ref.get(k) : at.ref))._;\n\t\t\t\t\t(tmp = (d && (d._||'')['#']) || tmp.soul || tmp.link)? resolve({soul: tmp}) : cat.ref.get(resolve, {run: as.run, /*hatch: 0,*/ v2020:1, out:{get:{'.':' '}}}); // TODO: BUG! This should be resolve ONLY soul to prevent full data from being loaded. // Fixed now?\n\t\t\t\t\t//setTimeout(function(){ if(F){ return } console.log(\"I HAVE NOT BEEN CALLED!\", path, id, cat.ref._.id, k) }, 9000); var F; // MAKE SURE TO ADD F = 1 below!\n\t\t\t\t\tfunction resolve(msg, eve){\n\t\t\t\t\t\tvar end = cat.link['#'];\n\t\t\t\t\t\tif(eve){ eve.off(); eve.rid(msg) } // TODO: Too early! Check all peers ack not found.\n\t\t\t\t\t\t// TODO: BUG maybe? Make sure this does not pick up a link change wipe, that it uses the changign link instead.\n\t\t\t\t\t\tvar soul = end || msg.soul || (tmp = (msg.$$||msg.$)._||'').soul || tmp.link || ((tmp = tmp.put||'')._||'')['#'] || tmp['#'] || (((tmp = msg.put||'') && msg.$$)? tmp['#'] : (tmp['=']||tmp[':']||'')['#']);\n\t\t\t\t\t\t!end && stun(as, msg.$);\n\t\t\t\t\t\tif(!soul && !at.link['#']){ // check soul link above us\n\t\t\t\t\t\t\t(at.wait || (at.wait = [])).push(function(){ resolve(msg, eve) }) // wait\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!soul){\n\t\t\t\t\t\t\tsoul = [];\n\t\t\t\t\t\t\t(msg.$$||msg.$).back(function(at){\n\t\t\t\t\t\t\t\tif(tmp = at.soul || at.link){ return soul.push(tmp) }\n\t\t\t\t\t\t\t\tsoul.push(at.get);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsoul = soul.reverse().join('/');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcat.link['#'] = soul;\n\t\t\t\t\t\t!g && (((as.graph || (as.graph = {}))[soul] = (cat.node || (cat.node = {_:{}})))._['#'] = soul);\n\t\t\t\t\t\tdelete as.wait[id];\n\t\t\t\t\t\tcat.wait && setTimeout.each(cat.wait, function(cb){ cb && cb() });\n\t\t\t\t\t\tas.ran(as);\n\t\t\t\t\t};\n\t\t\t\t\t// ---------------\n\t\t\t\t}\n\t\t\t\tif(!to.length){ return as.ran(as) }\n\t\t\t\tas.turn(walk);\n\t\t\t}());\n\t\t\treturn gun;\n\t\t}\n\n\t\tfunction stun(as, id){\n\t\t\tif(!id){ return } id = (id._||'').id||id;\n\t\t\tvar run = as.root.stun || (as.root.stun = {on: Gun.on}), test = {}, tmp;\n\t\t\tas.stun || (as.stun = run.on('stun', function(){ }));\n\t\t\tif(tmp = run.on(''+id)){ tmp.the.last.next(test) }\n\t\t\tif(test.run >= as.run){ return }\n\t\t\trun.on(''+id, function(test){\n\t\t\t\tif(as.stun.end){\n\t\t\t\t\tthis.off();\n\t\t\t\t\tthis.to.next(test);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttest.run = test.run || as.run;\n\t\t\t\ttest.stun = test.stun || as.stun; return;\n\t\t\t\tif(this.to.to){\n\t\t\t\t\tthis.the.last.next(test);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttest.stun = as.stun;\n\t\t\t});\n\t\t}\n\n\t\tfunction ran(as){\n\t\t\tif(as.err){ ran.end(as.stun, as.root); return } // move log handle here.\n\t\t\tif(as.todo.length || as.end || !Object.empty(as.wait)){ return } as.end = 1;\n\t\t\t//(as.retry = function(){ as.acks = 0;\n\t\t\tvar cat = (as.$.back(-1)._), root = cat.root, ask = cat.ask(function(ack){\n\t\t\t\troot.on('ack', ack);\n\t\t\t\tif(ack.err && !ack.lack){ Gun.log(ack) }\n\t\t\t\tif(++acks > (as.acks || 0)){ this.off() } // Adjustable ACKs! Only 1 by default.\n\t\t\t\tif(!as.ack){ return }\n\t\t\t\tas.ack(ack, this);\n\t\t\t}, as.opt), acks = 0, stun = as.stun, tmp;\n\t\t\t(tmp = function(){ // this is not official yet, but quick solution to hack in for now.\n\t\t\t\tif(!stun){ return }\n\t\t\t\tran.end(stun, root);\n\t\t\t\tsetTimeout.each(Object.keys(stun = stun.add||''), function(cb){ if(cb = stun[cb]){cb()} }); // resume the stunned reads // Any perf reasons to CPU schedule this .keys( ?\n\t\t\t}).hatch = tmp; // this is not official yet ^\n\t\t\t//console.log(1, \"PUT\", as.run, as.graph);\n\t\t\tif(as.ack && !as.ok){ as.ok = as.acks || 9 } // TODO: In future! Remove this! This is just old API support.\n\t\t\t(as.via._).on('out', {put: as.out = as.graph, ok: as.ok && {'@': as.ok+1}, opt: as.opt, '#': ask, _: tmp});\n\t\t\t//})();\n\t\t}; ran.end = function(stun,root){\n\t\t\tstun.end = noop; // like with the earlier id, cheaper to make this flag a function so below callbacks do not have to do an extra type check.\n\t\t\tif(stun.the.to === stun && stun === stun.the.last){ delete root.stun }\n\t\t\tstun.off();\n\t\t}; ran.err = function(as, err){\n\t\t\t(as.ack||noop).call(as, as.out = { err: as.err = Gun.log(err) });\n\t\t\tas.ran(as);\n\t\t}\n\n\t\tfunction get(as){\n\t\t\tvar at = as.via._, tmp;\n\t\t\tas.via = as.via.back(function(at){\n\t\t\t\tif(at.soul || !at.get){ return at.$ }\n\t\t\t\ttmp = as.data; (as.data = {})[at.get] = tmp;\n\t\t\t});\n\t\t\tif(!as.via || !as.via._.soul){\n\t\t\t\tas.via = at.root.$.get(((as.data||'')._||'')['#'] || at.$.back('opt.uuid')())\n\t\t\t}\n\t\t\tas.via.put(as.data, as.ack, as);\n\t\t\t\n\n\t\t\treturn;\n\t\t\tif(at.get && at.back.soul){\n\t\t\t\ttmp = as.data;\n\t\t\t\tas.via = at.back.$;\n\t\t\t\t(as.data = {})[at.get] = tmp; \n\t\t\t\tas.via.put(as.data, as.ack, as);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tfunction check(d, tmp){ return ((d && (tmp = d.constructor) && tmp.name) || typeof d) }\n\n\t\tvar u, empty = {}, noop = function(){}, turn = setTimeout.turn, valid = Gun.valid, state_ify = Gun.state.ify;\n\t\tvar iife = function(fn,as){fn.call(as||empty)}\n\t})(USE, './put');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./root');\n\t\tUSE('./chain');\n\t\tUSE('./back');\n\t\tUSE('./put');\n\t\tUSE('./get');\n\t\tmodule.exports = Gun;\n\t})(USE, './index');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./index');\n\t\tGun.chain.on = function(tag, arg, eas, as){ // don't rewrite!\n\t\t\tvar gun = this, cat = gun._, root = cat.root, act, off, id, tmp;\n\t\t\tif(typeof tag === 'string'){\n\t\t\t\tif(!arg){ return cat.on(tag) }\n\t\t\t\tact = cat.on(tag, arg, eas || cat, as);\n\t\t\t\tif(eas && eas.$){\n\t\t\t\t\t(eas.subs || (eas.subs = [])).push(act);\n\t\t\t\t}\n\t\t\t\treturn gun;\n\t\t\t}\n\t\t\tvar opt = arg;\n\t\t\t(opt = (true === opt)? {change: true} : opt || {}).not = 1; opt.on = 1;\n\t\t\t//opt.at = cat;\n\t\t\t//opt.ok = tag;\n\t\t\t//opt.last = {};\n\t\t\tvar wait = {}; // can we assign this to the at instead, like in once?\n\t\t\tgun.get(tag, opt);\n\t\t\t/*gun.get(function on(data,key,msg,eve){ var $ = this;\n\t\t\t\tif(tmp = root.hatch){ // quick hack!\n\t\t\t\t\tif(wait[$._.id]){ return } wait[$._.id] = 1;\n\t\t\t\t\ttmp.push(function(){on.call($, data,key,msg,eve)});\n\t\t\t\t\treturn;\n\t\t\t\t}; wait = {}; // end quick hack.\n\t\t\t\ttag.call($, data,key,msg,eve);\n\t\t\t}, opt); // TODO: PERF! Event listener leak!!!?*/\n\t\t\t/*\n\t\t\tfunction one(msg, eve){\n\t\t\t\tif(one.stun){ return }\n\t\t\t\tvar at = msg.$._, data = at.put, tmp;\n\t\t\t\tif(tmp = at.link){ data = root.$.get(tmp)._.put }\n\t\t\t\tif(opt.not===u && u === data){ return }\n\t\t\t\tif(opt.stun===u && (tmp = root.stun) && (tmp = tmp[at.id] || tmp[at.back.id]) && !tmp.end){ // Remember! If you port this into `.get(cb` make sure you allow stun:0 skip option for `.put(`.\n\t\t\t\t\ttmp[id] = function(){one(msg,eve)};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//tmp = one.wait || (one.wait = {}); console.log(tmp[at.id] === ''); if(tmp[at.id] !== ''){ tmp[at.id] = tmp[at.id] || setTimeout(function(){tmp[at.id]='';one(msg,eve)},1); return } delete tmp[at.id];\n\t\t\t\t// call:\n\t\t\t\tif(opt.as){\n\t\t\t\t\topt.ok.call(opt.as, msg, eve || one);\n\t\t\t\t} else {\n\t\t\t\t\topt.ok.call(at.$, data, msg.get || at.get, msg, eve || one);\n\t\t\t\t}\n\t\t\t};\n\t\t\tone.at = cat;\n\t\t\t(cat.act||(cat.act={}))[id = String.random(7)] = one;\n\t\t\tone.off = function(){ one.stun = 1; if(!cat.act){ return } delete cat.act[id] }\n\t\t\tcat.on('out', {get: {}});*/\n\t\t\treturn gun;\n\t\t}\n\t\t// Rules:\n\t\t// 1. If cached, should be fast, but not read while write.\n\t\t// 2. Should not retrigger other listeners, should get triggered even if nothing found.\n\t\t// 3. If the same callback passed to many different once chains, each should resolve - an unsubscribe from the same callback should not effect the state of the other resolving chains, if you do want to cancel them all early you should mutate the callback itself with a flag & check for it at top of callback\n\t\tGun.chain.once = function(cb, opt){ opt = opt || {}; // avoid rewriting\n\t\t\tif(!cb){ return none(this,opt) }\n\t\t\tvar gun = this, cat = gun._, root = cat.root, data = cat.put, id = String.random(7), one, tmp;\n\t\t\tgun.get(function(data,key,msg,eve){\n\t\t\t\tvar $ = this, at = $._, one = (at.one||(at.one={}));\n\t\t\t\tif(eve.stun){ return } if('' === one[id]){ return }\n\t\t\t\tif(true === (tmp = Gun.valid(data))){ once(); return }\n\t\t\t\tif('string' == typeof tmp){ return } // TODO: BUG? Will this always load?\n\t\t\t\tclearTimeout((cat.one||'')[id]); // clear \"not found\" since they only get set on cat.\n\t\t\t\tclearTimeout(one[id]); one[id] = setTimeout(once, opt.wait||99); // TODO: Bug? This doesn't handle plural chains.\n\t\t\t\tfunction once(f){\n\t\t\t\t\tif(!at.has && !at.soul){ at = {put: data, get: key} } // handles non-core messages.\n\t\t\t\t\tif(u === (tmp = at.put)){ tmp = ((msg.$$||'')._||'').put }\n\t\t\t\t\tif('string' == typeof Gun.valid(tmp)){\n\t\t\t\t\t\ttmp = root.$.get(tmp)._.put;\n\t\t\t\t\t\tif(tmp === u && !f){\n\t\t\t\t\t\t\tone[id] = setTimeout(function(){ once(1) }, opt.wait||99); // TODO: Quick fix. Maybe use ack count for more predictable control?\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(\"AND VANISHED\", data);\n\t\t\t\t\tif(eve.stun){ return } if('' === one[id]){ return } one[id] = '';\n\t\t\t\t\tif(cat.soul || cat.has){ eve.off() } // TODO: Plural chains? // else { ?.off() } // better than one check?\n\t\t\t\t\tcb.call($, tmp, at.get);\n\t\t\t\t\tclearTimeout(one[id]); // clear \"not found\" since they only get set on cat. // TODO: This was hackily added, is it necessary or important? Probably not, in future try removing this. Was added just as a safety for the `&& !f` check.\n\t\t\t\t};\n\t\t\t}, {on: 1});\n\t\t\treturn gun;\n\t\t}\n\t\tfunction none(gun,opt,chain){\n\t\t\tGun.log.once(\"valonce\", \"Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it.\");\n\t\t\t(chain = gun.chain())._.nix = gun.once(function(data, key){ chain._.on('in', this._) });\n\t\t\tchain._.lex = gun._.lex; // TODO: Better approach in future? This is quick for now.\n\t\t\treturn chain;\n\t\t}\n\n\t\tGun.chain.off = function(){\n\t\t\t// make off more aggressive. Warning, it might backfire!\n\t\t\tvar gun = this, at = gun._, tmp;\n\t\t\tvar cat = at.back;\n\t\t\tif(!cat){ return }\n\t\t\tat.ack = 0; // so can resubscribe.\n\t\t\tif(tmp = cat.next){\n\t\t\t\tif(tmp[at.get]){\n\t\t\t\t\tdelete tmp[at.get];\n\t\t\t\t} else {\n\n\t\t\t\t}\n\t\t\t}\n\t\t\t// TODO: delete cat.one[map.id]?\n\t\t\tif (tmp = cat.any) {\n\t\t\t\tdelete cat.any;\n\t\t\t\tcat.any = {};\n\t\t\t}\n\t\t\tif(tmp = cat.ask){\n\t\t\t\tdelete tmp[at.get];\n\t\t\t}\n\t\t\tif(tmp = cat.put){\n\t\t\t\tdelete tmp[at.get];\n\t\t\t}\n\t\t\tif(tmp = at.soul){\n\t\t\t\tdelete cat.root.graph[tmp];\n\t\t\t}\n\t\t\tif(tmp = at.map){\n\t\t\t\tObject.keys(tmp).forEach(function(i,at){ at = tmp[i]; //obj_map(tmp, function(at){\n\t\t\t\t\tif(at.link){\n\t\t\t\t\t\tcat.root.$.get(at.link).off();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(tmp = at.next){\n\t\t\t\tObject.keys(tmp).forEach(function(i,neat){ neat = tmp[i]; //obj_map(tmp, function(neat){\n\t\t\t\t\tneat.$.off();\n\t\t\t\t});\n\t\t\t}\n\t\t\tat.on('off', {});\n\t\t\treturn gun;\n\t\t}\n\t\tvar empty = {}, noop = function(){}, u;\n\t})(USE, './on');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./index'), next = Gun.chain.get.next;\n\t\tGun.chain.get.next = function(gun, lex){ var tmp;\n\t\t\tif(!Object.plain(lex)){ return (next||noop)(gun, lex) }\n\t\t\tif(tmp = ((tmp = lex['#'])||'')['='] || tmp){ return gun.get(tmp) }\n\t\t\t(tmp = gun.chain()._).lex = lex; // LEX!\n\t\t\tgun.on('in', function(eve){\n\t\t\t\tif(String.match(eve.get|| (eve.put||'')['.'], lex['.'] || lex['#'] || lex)){\n\t\t\t\t\ttmp.on('in', eve);\n\t\t\t\t}\n\t\t\t\tthis.to.next(eve);\n\t\t\t});\n\t\t\treturn tmp.$;\n\t\t}\n\t\tGun.chain.map = function(cb, opt, t){\n\t\t\tvar gun = this, cat = gun._, lex, chain;\n\t\t\tif(Object.plain(cb)){ lex = cb['.']? cb : {'.': cb}; cb = u }\n\t\t\tif(!cb){\n\t\t\t\tif(chain = cat.each){ return chain }\n\t\t\t\t(cat.each = chain = gun.chain())._.lex = lex || chain._.lex || cat.lex;\n\t\t\t\tchain._.nix = gun.back('nix');\n\t\t\t\tgun.on('in', map, chain._);\n\t\t\t\treturn chain;\n\t\t\t}\n\t\t\tGun.log.once(\"mapfn\", \"Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it.\");\n\t\t\tchain = gun.chain();\n\t\t\tgun.map().on(function(data, key, msg, eve){\n\t\t\t\tvar next = (cb||noop).call(this, data, key, msg, eve);\n\t\t\t\tif(u === next){ return }\n\t\t\t\tif(data === next){ return chain._.on('in', msg) }\n\t\t\t\tif(Gun.is(next)){ return chain._.on('in', next._) }\n\t\t\t\tvar tmp = {}; Object.keys(msg.put).forEach(function(k){ tmp[k] = msg.put[k] }, tmp); tmp['='] = next; \n\t\t\t\tchain._.on('in', {get: key, put: tmp});\n\t\t\t});\n\t\t\treturn chain;\n\t\t}\n\t\tfunction map(msg){ this.to.next(msg);\n\t\t\tvar cat = this.as, gun = msg.$, at = gun._, put = msg.put, tmp;\n\t\t\tif(!at.soul && !msg.$$){ return } // this line took hundreds of tries to figure out. It only works if core checks to filter out above chains during link tho. This says \"only bother to map on a node\" for this layer of the chain. If something is not a node, map should not work.\n\t\t\tif((tmp = cat.lex) && !String.match(msg.get|| (put||'')['.'], tmp['.'] || tmp['#'] || tmp)){ return }\n\t\t\tGun.on.link(msg, cat);\n\t\t}\n\t\tvar noop = function(){}, event = {stun: noop, off: noop}, u;\n\t})(USE, './map');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./index');\n\t\tGun.chain.set = function(item, cb, opt){\n\t\t\tvar gun = this, root = gun.back(-1), soul, tmp;\n\t\t\tcb = cb || function(){};\n\t\t\topt = opt || {}; opt.item = opt.item || item;\n\t\t\tif(soul = ((item||'')._||'')['#']){ (item = {})['#'] = soul } // check if node, make link.\n\t\t\tif('string' == typeof (tmp = Gun.valid(item))){ return gun.get(soul = tmp).put(item, cb, opt) } // check if link\n\t\t\tif(!Gun.is(item)){\n\t\t\t\tif(Object.plain(item)){\n\t\t\t\t\titem = root.get(soul = gun.back('opt.uuid')()).put(item);\n\t\t\t\t}\n\t\t\t\treturn gun.get(soul || root.back('opt.uuid')(7)).put(item, cb, opt);\n\t\t\t}\n\t\t\tgun.put(function(go){\n\t\t\t\titem.get(function(soul, o, msg){ // TODO: BUG! We no longer have this option? & go error not handled?\n\t\t\t\t\tif(!soul){ return cb.call(gun, {err: Gun.log('Only a node can be linked! Not \"' + msg.put + '\"!')}) }\n\t\t\t\t\t(tmp = {})[soul] = {'#': soul}; go(tmp);\n\t\t\t\t},true);\n\t\t\t})\n\t\t\treturn item;\n\t\t}\n\t})(USE, './set');\n\n\t;USE(function(module){\n\t\tUSE('./shim');\n\n\t\tvar noop = function(){}\n\t\tvar parse = JSON.parseAsync || function(t,cb,r){ var u, d = +new Date; try{ cb(u, JSON.parse(t,r), json.sucks(+new Date - d)) }catch(e){ cb(e) } }\n\t\tvar json = JSON.stringifyAsync || function(v,cb,r,s){ var u, d = +new Date; try{ cb(u, JSON.stringify(v,r,s), json.sucks(+new Date - d)) }catch(e){ cb(e) } }\n\t\tjson.sucks = function(d){ if(d > 99){ console.log(\"Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix.\"); json.sucks = noop } }\n\n\t\tfunction Mesh(root){\n\t\t\tvar mesh = function(){};\n\t\t\tvar opt = root.opt || {};\n\t\t\topt.log = opt.log || console.log;\n\t\t\topt.gap = opt.gap || opt.wait || 0;\n\t\t\topt.max = opt.max || (opt.memory? (opt.memory * 999 * 999) : 300000000) * 0.3;\n\t\t\topt.pack = opt.pack || (opt.max * 0.01 * 0.01);\n\t\t\topt.puff = opt.puff || 9; // IDEA: do a start/end benchmark, divide ops/result.\n\t\t\tvar puff = setTimeout.turn || setTimeout;\n\n\t\t\tvar dup = root.dup, dup_check = dup.check, dup_track = dup.track;\n\n\t\t\tvar ST = +new Date, LT = ST;\n\n\t\t\tvar hear = mesh.hear = function(raw, peer){\n\t\t\t\tif(!raw){ return }\n\t\t\t\tif(opt.max <= raw.length){ return mesh.say({dam: '!', err: \"Message too big!\"}, peer) }\n\t\t\t\tif(mesh === this){\n\t\t\t\t\t/*if('string' == typeof raw){ try{\n\t\t\t\t\t\tvar stat = console.STAT || {};\n\t\t\t\t\t\t//console.log('HEAR:', peer.id, (raw||'').slice(0,250), ((raw||'').length / 1024 / 1024).toFixed(4));\n\t\t\t\t\t\t\n\t\t\t\t\t\t//console.log(setTimeout.turn.s.length, 'stacks', parseFloat((-(LT - (LT = +new Date))/1000).toFixed(3)), 'sec', parseFloat(((LT-ST)/1000 / 60).toFixed(1)), 'up', stat.peers||0, 'peers', stat.has||0, 'has', stat.memhused||0, stat.memused||0, stat.memax||0, 'heap mem max');\n\t\t\t\t\t}catch(e){ console.log('DBG err', e) }}*/\n\t\t\t\t\thear.d += raw.length||0 ; ++hear.c } // STATS!\n\t\t\t\tvar S = peer.SH = +new Date;\n\t\t\t\tvar tmp = raw[0], msg;\n\t\t\t\t//raw && raw.slice && console.log(\"hear:\", ((peer.wire||'').headers||'').origin, raw.length, raw.slice && raw.slice(0,50)); //tc-iamunique-tc-package-ds1\n\t\t\t\tif('[' === tmp){\n\t\t\t\t\tparse(raw, function(err, msg){\n\t\t\t\t\t\tif(err || !msg){ return mesh.say({dam: '!', err: \"DAM JSON parse error.\"}, peer) }\n\t\t\t\t\t\tconsole.STAT && console.STAT(+new Date, msg.length, '# on hear batch');\n\t\t\t\t\t\tvar P = opt.puff;\n\t\t\t\t\t\t(function go(){\n\t\t\t\t\t\t\tvar S = +new Date;\n\t\t\t\t\t\t\tvar i = 0, m; while(i < P && (m = msg[i++])){ mesh.hear(m, peer) }\n\t\t\t\t\t\t\tmsg = msg.slice(i); // slicing after is faster than shifting during.\n\t\t\t\t\t\t\tconsole.STAT && console.STAT(S, +new Date - S, 'hear loop');\n\t\t\t\t\t\t\tflush(peer); // force send all synchronously batched acks.\n\t\t\t\t\t\t\tif(!msg.length){ return }\n\t\t\t\t\t\t\tpuff(go, 0);\n\t\t\t\t\t\t}());\n\t\t\t\t\t});\n\t\t\t\t\traw = ''; // \n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif('{' === tmp || ((raw['#'] || Object.plain(raw)) && (msg = raw))){\n\t\t\t\t\tif(msg){ return hear.one(msg, peer, S) }\n\t\t\t\t\tparse(raw, function(err, msg){\n\t\t\t\t\t\tif(err || !msg){ return mesh.say({dam: '!', err: \"DAM JSON parse error.\"}, peer) }\n\t\t\t\t\t\thear.one(msg, peer, S);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\thear.one = function(msg, peer, S){ // S here is temporary! Undo.\n\t\t\t\tvar id, hash, tmp, ash, DBG;\n\t\t\t\tif(msg.DBG){ msg.DBG = DBG = {DBG: msg.DBG} }\n\t\t\t\tDBG && (DBG.h = S);\n\t\t\t\tDBG && (DBG.hp = +new Date);\n\t\t\t\tif(!(id = msg['#'])){ id = msg['#'] = String.random(9) }\n\t\t\t\tif(tmp = dup_check(id)){ return }\n\t\t\t\t// DAM logic:\n\t\t\t\tif(!(hash = msg['##']) && false && u !== msg.put){ /*hash = msg['##'] = Type.obj.hash(msg.put)*/ } // disable hashing for now // TODO: impose warning/penalty instead (?)\n\t\t\t\tif(hash && (tmp = msg['@'] || (msg.get && id)) && dup.check(ash = tmp+hash)){ return } // Imagine A <-> B <=> (C & D), C & D reply with same ACK but have different IDs, B can use hash to dedup. Or if a GET has a hash already, we shouldn't ACK if same.\n\t\t\t\t(msg._ = function(){}).via = mesh.leap = peer;\n\t\t\t\tif((tmp = msg['><']) && 'string' == typeof tmp){ tmp.slice(0,99).split(',').forEach(function(k){ this[k] = 1 }, (msg._).yo = {}) } // Peers already sent to, do not resend.\n\t\t\t\t// DAM ^\n\t\t\t\tif(tmp = msg.dam){\n\t\t\t\t\tif(tmp = mesh.hear[tmp]){\n\t\t\t\t\t\ttmp(msg, peer, root);\n\t\t\t\t\t}\n\t\t\t\t\tdup_track(id);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(tmp = msg.ok){ msg._.near = tmp['/'] }\n\t\t\t\tvar S = +new Date;\n\t\t\t\tDBG && (DBG.is = S); peer.SI = id;\n\t\t\t\tdup_track.ed = function(d){\n\t\t\t\t\tif(id !== d){ return }\n\t\t\t\t\tdup_track.ed = 0;\n\t\t\t\t\tif(!(d = dup.s[id])){ return }\n\t\t\t\t\td.via = peer;\n\t\t\t\t\tif(msg.get){ d.it = msg }\n\t\t\t\t}\n\t\t\t\troot.on('in', mesh.last = msg);\n\t\t\t\tDBG && (DBG.hd = +new Date);\n\t\t\t\tconsole.STAT && console.STAT(S, +new Date - S, msg.get? 'msg get' : msg.put? 'msg put' : 'msg');\n\t\t\t\tdup_track(id); // in case 'in' does not call track.\n\t\t\t\tif(ash){ dup_track(ash) } //dup.track(tmp+hash, true).it = it(msg);\n\t\t\t\tmesh.leap = mesh.last = null; // warning! mesh.leap could be buggy.\n\t\t\t}\n\t\t\tvar tomap = function(k,i,m){m(k,true)};\n\t\t\thear.c = hear.d = 0;\n\n\t\t\t;(function(){\n\t\t\t\tvar SMIA = 0;\n\t\t\t\tvar loop;\n\t\t\t\tmesh.hash = function(msg, peer){ var h, s, t;\n\t\t\t\t\tvar S = +new Date;\n\t\t\t\t\tjson(msg.put, function hash(err, text){\n\t\t\t\t\t\tvar ss = (s || (s = t = text||'')).slice(0, 32768); // 1024 * 32\n\t\t\t\t\t  h = String.hash(ss, h); s = s.slice(32768);\n\t\t\t\t\t  if(s){ puff(hash, 0); return }\n\t\t\t\t\t\tconsole.STAT && console.STAT(S, +new Date - S, 'say json+hash');\n\t\t\t\t\t  msg._.$put = t;\n\t\t\t\t\t  msg['##'] = h;\n\t\t\t\t\t  mesh.say(msg, peer);\n\t\t\t\t\t  delete msg._.$put;\n\t\t\t\t\t}, sort);\n\t\t\t\t}\n\t\t\t\tfunction sort(k, v){ var tmp;\n\t\t\t\t\tif(!(v instanceof Object)){ return v }\n\t\t\t\t\tObject.keys(v).sort().forEach(sorta, {to: tmp = {}, on: v});\n\t\t\t\t\treturn tmp;\n\t\t\t\t} function sorta(k){ this.to[k] = this.on[k] }\n\n\t\t\t\tvar say = mesh.say = function(msg, peer){ var tmp;\n\t\t\t\t\tif((tmp = this) && (tmp = tmp.to) && tmp.next){ tmp.next(msg) } // compatible with middleware adapters.\n\t\t\t\t\tif(!msg){ return false }\n\t\t\t\t\tvar id, hash, raw, ack = msg['@'];\n//if(opt.super && (!ack || !msg.put)){ return } // TODO: MANHATTAN STUB //OBVIOUSLY BUG! But squelch relay. // :( get only is 100%+ CPU usage :(\n\t\t\t\t\tvar meta = msg._||(msg._=function(){});\n\t\t\t\t\tvar DBG = msg.DBG, S = +new Date; meta.y = meta.y || S; if(!peer){ DBG && (DBG.y = S) }\n\t\t\t\t\tif(!(id = msg['#'])){ id = msg['#'] = String.random(9) }\n\t\t\t\t\t!loop && dup_track(id);//.it = it(msg); // track for 9 seconds, default. Earth<->Mars would need more! // always track, maybe move this to the 'after' logic if we split function.\n\t\t\t\t\t//if(msg.put && (msg.err || (dup.s[id]||'').err)){ return false } // TODO: in theory we should not be able to stun a message, but for now going to check if it can help network performance preventing invalid data to relay.\n\t\t\t\t\tif(!(hash = msg['##']) && u !== msg.put && !meta.via && ack){ mesh.hash(msg, peer); return } // TODO: Should broadcasts be hashed?\n\t\t\t\t\tif(!peer && ack){ peer = ((tmp = dup.s[ack]) && (tmp.via || ((tmp = tmp.it) && (tmp = tmp._) && tmp.via))) || ((tmp = mesh.last) && ack === tmp['#'] && mesh.leap) } // warning! mesh.leap could be buggy! mesh last check reduces this. // TODO: CLEAN UP THIS LINE NOW? `.it` should be reliable.\n\t\t\t\t\tif(!peer && ack){ // still no peer, then ack daisy chain 'tunnel' got lost.\n\t\t\t\t\t\tif(dup.s[ack]){ return } // in dups but no peer hints that this was ack to ourself, ignore.\n\t\t\t\t\t\tconsole.STAT && console.STAT(+new Date, ++SMIA, 'total no peer to ack to'); // TODO: Delete this now. Dropping lost ACKs is protocol fine now.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} // TODO: Temporary? If ack via trace has been lost, acks will go to all peers, which trashes browser bandwidth. Not relaying the ack will force sender to ask for ack again. Note, this is technically wrong for mesh behavior.\n\t\t\t\t\tif(ack && !msg.put && !hash && ((dup.s[ack]||'').it||'')['##']){ return false } // If we're saying 'not found' but a relay had data, do not bother sending our not found. // Is this correct, return false? // NOTE: ADD PANIC TEST FOR THIS!\n\t\t\t\t\tif(!peer && mesh.way){ return mesh.way(msg) }\n\t\t\t\t\tDBG && (DBG.yh = +new Date);\n\t\t\t\t\tif(!(raw = meta.raw)){ mesh.raw(msg, peer); return }\n\t\t\t\t\tDBG && (DBG.yr = +new Date);\n\t\t\t\t\tif(!peer || !peer.id){\n\t\t\t\t\t\tif(!Object.plain(peer || opt.peers)){ return false }\n\t\t\t\t\t\tvar S = +new Date;\n\t\t\t\t\t\tvar P = opt.puff, ps = opt.peers, pl = Object.keys(peer || opt.peers || {}); // TODO: .keys( is slow\n\t\t\t\t\t\tconsole.STAT && console.STAT(S, +new Date - S, 'peer keys');\n\t\t\t\t\t\t;(function go(){\n\t\t\t\t\t\t\tvar S = +new Date;\n\t\t\t\t\t\t\t//Type.obj.map(peer || opt.peers, each); // in case peer is a peer list.\n\t\t\t\t\t\t\tloop = 1; var wr = meta.raw; meta.raw = raw; // quick perf hack\n\t\t\t\t\t\t\tvar i = 0, p; while(i < 9 && (p = (pl||'')[i++])){\n\t\t\t\t\t\t\t\tif(!(p = ps[p] || (peer||'')[p])){ continue }\n\t\t\t\t\t\t\t\tmesh.say(msg, p);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmeta.raw = wr; loop = 0;\n\t\t\t\t\t\t\tpl = pl.slice(i); // slicing after is faster than shifting during.\n\t\t\t\t\t\t\tconsole.STAT && console.STAT(S, +new Date - S, 'say loop');\n\t\t\t\t\t\t\tif(!pl.length){ return }\n\t\t\t\t\t\t\tpuff(go, 0);\n\t\t\t\t\t\t\tack && dup_track(ack); // keep for later\n\t\t\t\t\t\t}());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// TODO: PERF: consider splitting function here, so say loops do less work.\n\t\t\t\t\tif(!peer.wire && mesh.wire){ mesh.wire(peer) }\n\t\t\t\t\tif(id === peer.last){ return } peer.last = id;  // was it just sent?\n\t\t\t\t\tif(peer === meta.via){ return false } // don't send back to self.\n\t\t\t\t\tif((tmp = meta.yo) && (tmp[peer.url] || tmp[peer.pid] || tmp[peer.id]) /*&& !o*/){ return false }\n\t\t\t\t\tconsole.STAT && console.STAT(S, ((DBG||meta).yp = +new Date) - (meta.y || S), 'say prep');\n\t\t\t\t\t!loop && ack && dup_track(ack); // streaming long responses needs to keep alive the ack.\n\t\t\t\t\tif(peer.batch){\n\t\t\t\t\t\tpeer.tail = (tmp = peer.tail || 0) + raw.length;\n\t\t\t\t\t\tif(peer.tail <= opt.pack){\n\t\t\t\t\t\t\tpeer.batch += (tmp?',':'')+raw;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tflush(peer);\n\t\t\t\t\t}\n\t\t\t\t\tpeer.batch = '['; // Prevents double JSON!\n\t\t\t\t\tvar ST = +new Date;\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tconsole.STAT && console.STAT(ST, +new Date - ST, '0ms TO');\n\t\t\t\t\t\tflush(peer);\n\t\t\t\t\t}, opt.gap); // TODO: queuing/batching might be bad for low-latency video game performance! Allow opt out?\n\t\t\t\t\tsend(raw, peer);\n\t\t\t\t\tconsole.STAT && (ack === peer.SI) && console.STAT(S, +new Date - peer.SH, 'say ack');\n\t\t\t\t}\n\t\t\t\tmesh.say.c = mesh.say.d = 0;\n\t\t\t\t// TODO: this caused a out-of-memory crash!\n\t\t\t\tmesh.raw = function(msg, peer){ // TODO: Clean this up / delete it / move logic out!\n\t\t\t\t\tif(!msg){ return '' }\n\t\t\t\t\tvar meta = (msg._) || {}, put, tmp;\n\t\t\t\t\tif(tmp = meta.raw){ return tmp }\n\t\t\t\t\tif('string' == typeof msg){ return msg }\n\t\t\t\t\tvar hash = msg['##'], ack = msg['@'];\n\t\t\t\t\tif(hash && ack){\n\t\t\t\t\t\tif(!meta.via && dup_check(ack+hash)){ return false } // for our own out messages, memory & storage may ack the same thing, so dedup that. Tho if via another peer, we already tracked it upon hearing, so this will always trigger false positives, so don't do that!\n\t\t\t\t\t\tif(tmp = (dup.s[ack]||'').it){\n\t\t\t\t\t\t\tif(hash === tmp['##']){ return false } // if ask has a matching hash, acking is optional.\n\t\t\t\t\t\t\tif(!tmp['##']){ tmp['##'] = hash } // if none, add our hash to ask so anyone we relay to can dedup. // NOTE: May only check against 1st ack chunk, 2nd+ won't know and still stream back to relaying peers which may then dedup. Any way to fix this wasted bandwidth? I guess force rate limiting breaking change, that asking peer has to ask for next lexical chunk.\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!msg.dam && !msg['@']){\n\t\t\t\t\t\tvar i = 0, to = []; tmp = opt.peers;\n\t\t\t\t\t\tfor(var k in tmp){ var p = tmp[k]; // TODO: Make it up peers instead!\n\t\t\t\t\t\t\tto.push(p.url || p.pid || p.id);\n\t\t\t\t\t\t\tif(++i > 6){ break }\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(i > 1){ msg['><'] = to.join() } // TODO: BUG! This gets set regardless of peers sent to! Detect?\n\t\t\t\t\t}\n\t\t\t\t\tif(msg.put && (tmp = msg.ok)){ msg.ok = {'@':(tmp['@']||1)-1, '/': (tmp['/']==msg._.near)? mesh.near : tmp['/']}; }\n\t\t\t\t\tif(put = meta.$put){\n\t\t\t\t\t\ttmp = {}; Object.keys(msg).forEach(function(k){ tmp[k] = msg[k] });\n\t\t\t\t\t\ttmp.put = ':])([:';\n\t\t\t\t\t\tjson(tmp, function(err, raw){\n\t\t\t\t\t\t\tif(err){ return } // TODO: Handle!!\n\t\t\t\t\t\t\tvar S = +new Date;\n\t\t\t\t\t\t\ttmp = raw.indexOf('\"put\":\":])([:\"');\n\t\t\t\t\t\t\tres(u, raw = raw.slice(0, tmp+6) + put + raw.slice(tmp + 14));\n\t\t\t\t\t\t\tconsole.STAT && console.STAT(S, +new Date - S, 'say slice');\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tjson(msg, res);\n\t\t\t\t\tfunction res(err, raw){\n\t\t\t\t\t\tif(err){ return } // TODO: Handle!!\n\t\t\t\t\t\tmeta.raw = raw; //if(meta && (raw||'').length < (999 * 99)){ meta.raw = raw } // HNPERF: If string too big, don't keep in memory.\n\t\t\t\t\t\tmesh.say(msg, peer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}());\n\n\t\t\tfunction flush(peer){\n\t\t\t\tvar tmp = peer.batch, t = 'string' == typeof tmp, l;\n\t\t\t\tif(t){ tmp += ']' }// TODO: Prevent double JSON!\n\t\t\t\tpeer.batch = peer.tail = null;\n\t\t\t\tif(!tmp){ return }\n\t\t\t\tif(t? 3 > tmp.length : !tmp.length){ return } // TODO: ^\n\t\t\t\tif(!t){try{tmp = (1 === tmp.length? tmp[0] : JSON.stringify(tmp));\n\t\t\t\t}catch(e){return opt.log('DAM JSON stringify error', e)}}\n\t\t\t\tif(!tmp){ return }\n\t\t\t\tsend(tmp, peer);\n\t\t\t}\n\t\t\t// for now - find better place later.\n\t\t\tfunction send(raw, peer){ try{\n\t\t\t\tvar wire = peer.wire;\n\t\t\t\tif(peer.say){\n\t\t\t\t\tpeer.say(raw);\n\t\t\t\t} else\n\t\t\t\tif(wire.send){\n\t\t\t\t\twire.send(raw);\n\t\t\t\t}\n\t\t\t\tmesh.say.d += raw.length||0; ++mesh.say.c; // STATS!\n\t\t\t}catch(e){\n\t\t\t\t(peer.queue = peer.queue || []).push(raw);\n\t\t\t}}\n\n\t\t\tmesh.near = 0;\n\t\t\tmesh.hi = function(peer){\n\t\t\t\tvar wire = peer.wire, tmp;\n\t\t\t\tif(!wire){ mesh.wire((peer.length && {url: peer, id: peer}) || peer); return }\n\t\t\t\tif(peer.id){\n\t\t\t\t\topt.peers[peer.url || peer.id] = peer;\n\t\t\t\t} else {\n\t\t\t\t\ttmp = peer.id = peer.id || peer.url || String.random(9);\n\t\t\t\t\tmesh.say({dam: '?', pid: root.opt.pid}, opt.peers[tmp] = peer);\n\t\t\t\t\tdelete dup.s[peer.last]; // IMPORTANT: see https://gun.eco/docs/DAM#self\n\t\t\t\t}\n\t\t\t\tif(!peer.met){\n\t\t\t\t\tmesh.near++;\n\t\t\t\t\tpeer.met = +(new Date);\n\t\t\t\t\troot.on('hi', peer)\n\t\t\t\t}\n\t\t\t\t// @rogowski I need this here by default for now to fix go1dfish's bug\n\t\t\t\ttmp = peer.queue; peer.queue = [];\n\t\t\t\tsetTimeout.each(tmp||[],function(msg){\n\t\t\t\t\tsend(msg, peer);\n\t\t\t\t},0,9);\n\t\t\t\t//Type.obj.native && Type.obj.native(); // dirty place to check if other JS polluted.\n\t\t\t}\n\t\t\tmesh.bye = function(peer){\n\t\t\t\tpeer.met && --mesh.near;\n\t\t\t\tdelete peer.met;\n\t\t\t\troot.on('bye', peer);\n\t\t\t\tvar tmp = +(new Date); tmp = (tmp - (peer.met||tmp));\n\t\t\t\tmesh.bye.time = ((mesh.bye.time || tmp) + tmp) / 2;\n\t\t\t}\n\t\t\tmesh.hear['!'] = function(msg, peer){ opt.log('Error:', msg.err) }\n\t\t\tmesh.hear['?'] = function(msg, peer){\n\t\t\t\tif(msg.pid){\n\t\t\t\t\tif(!peer.pid){ peer.pid = msg.pid }\n\t\t\t\t\tif(msg['@']){ return }\n\t\t\t\t}\n\t\t\t\tmesh.say({dam: '?', pid: opt.pid, '@': msg['#']}, peer);\n\t\t\t\tdelete dup.s[peer.last]; // IMPORTANT: see https://gun.eco/docs/DAM#self\n\t\t\t}\n\t\t\tmesh.hear['mob'] = function(msg, peer){ // NOTE: AXE will overload this with better logic.\n\t\t\t\tif(!msg.peers){ return }\n\t\t\t\tvar peers = Object.keys(msg.peers), one = peers[(Math.random()*peers.length) >> 0];\n\t\t\t\tif(!one){ return }\n\t\t\t\tmesh.bye(peer);\n\t\t\t\tmesh.hi(one);\n\t\t\t}\n\n\t\t\troot.on('create', function(root){\n\t\t\t\troot.opt.pid = root.opt.pid || String.random(9);\n\t\t\t\tthis.to.next(root);\n\t\t\t\troot.on('out', mesh.say);\n\t\t\t});\n\n\t\t\troot.on('bye', function(peer, tmp){\n\t\t\t\tpeer = opt.peers[peer.id || peer] || peer;\n\t\t\t\tthis.to.next(peer);\n\t\t\t\tpeer.bye? peer.bye() : (tmp = peer.wire) && tmp.close && tmp.close();\n\t\t\t\tdelete opt.peers[peer.id];\n\t\t\t\tpeer.wire = null;\n\t\t\t});\n\n\t\t\tvar gets = {};\n\t\t\troot.on('bye', function(peer, tmp){ this.to.next(peer);\n\t\t\t\tif(tmp = console.STAT){ tmp.peers = mesh.near; }\n\t\t\t\tif(!(tmp = peer.url)){ return } gets[tmp] = true;\n\t\t\t\tsetTimeout(function(){ delete gets[tmp] },opt.lack || 9000);\n\t\t\t});\n\t\t\troot.on('hi', function(peer, tmp){ this.to.next(peer);\n\t\t\t\tif(tmp = console.STAT){ tmp.peers = mesh.near }\n\t\t\t\tif(opt.super){ return } // temporary (?) until we have better fix/solution?\n\t\t\t\tvar souls = Object.keys(root.next||''); // TODO: .keys( is slow\n\t\t\t\tif(souls.length > 9999 && !console.SUBS){ console.log(console.SUBS = \"Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`.\") }\n\t\t\t\tsetTimeout.each(souls, function(soul){ var node = root.next[soul];\n\t\t\t\t\tif(opt.super || (node.ask||'')['']){ mesh.say({get: {'#': soul}}, peer); return }\n\t\t\t\t\tsetTimeout.each(Object.keys(node.ask||''), function(key){ if(!key){ return }\n\t\t\t\t\t\t// is the lack of ## a !onion hint?\n\t\t\t\t\t\tmesh.say({'##': String.hash((root.graph[soul]||'')[key]), get: {'#': soul, '.': key}}, peer);\n\t\t\t\t\t\t// TODO: Switch this so Book could route?\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn mesh;\n\t\t}\n\t  var empty = {}, ok = true, u;\n\n\t  try{ module.exports = Mesh }catch(e){}\n\n\t})(USE, './mesh');\n\n\t;USE(function(module){\n\t\tvar Gun = USE('./index');\n\t\tGun.Mesh = USE('./mesh');\n\n\t\t// TODO: resync upon reconnect online/offline\n\t\t//window.ononline = window.onoffline = function(){ console.log('online?', navigator.onLine) }\n\n\t\tGun.on('opt', function(root){\n\t\t\tthis.to.next(root);\n\t\t\tif(root.once){ return }\n\t\t\tvar opt = root.opt;\n\t\t\tif(false === opt.WebSocket){ return }\n\n\t\t\tvar env = Gun.window || {};\n\t\t\tvar websocket = opt.WebSocket || env.WebSocket || env.webkitWebSocket || env.mozWebSocket;\n\t\t\tif(!websocket){ return }\n\t\t\topt.WebSocket = websocket;\n\n\t\t\tvar mesh = opt.mesh = opt.mesh || Gun.Mesh(root);\n\n\t\t\tvar wire = mesh.wire || opt.wire;\n\t\t\tmesh.wire = opt.wire = open;\n\t\t\tfunction open(peer){ try{\n\t\t\t\tif(!peer || !peer.url){ return wire && wire(peer) }\n\t\t\t\tvar url = peer.url.replace(/^http/, 'ws');\n\t\t\t\tvar wire = peer.wire = new opt.WebSocket(url);\n\t\t\t\twire.onclose = function(){\n\t\t\t\t\treconnect(peer);\n\t\t\t\t\topt.mesh.bye(peer);\n\t\t\t\t};\n\t\t\t\twire.onerror = function(err){\n\t\t\t\t\treconnect(peer);\n\t\t\t\t};\n\t\t\t\twire.onopen = function(){\n\t\t\t\t\topt.mesh.hi(peer);\n\t\t\t\t}\n\t\t\t\twire.onmessage = function(msg){\n\t\t\t\t\tif(!msg){ return }\n\t\t\t\t\topt.mesh.hear(msg.data || msg, peer);\n\t\t\t\t};\n\t\t\t\treturn wire;\n\t\t\t}catch(e){ opt.mesh.bye(peer) }}\n\n\t\t\tsetTimeout(function(){ !opt.super && root.on('out', {dam:'hi'}) },1); // it can take a while to open a socket, so maybe no longer lazy load for perf reasons?\n\n\t\t\tvar wait = 2 * 999;\n\t\t\tfunction reconnect(peer){\n\t\t\t\tclearTimeout(peer.defer);\n\t\t\t\tif(!opt.peers[peer.url]){ return }\n\t\t\t\tif(doc && peer.retry <= 0){ return }\n\t\t\t\tpeer.retry = (peer.retry || opt.retry+1 || 60) - ((-peer.tried + (peer.tried = +new Date) < wait*4)?1:0);\n\t\t\t\tpeer.defer = setTimeout(function to(){\n\t\t\t\t\tif(doc && doc.hidden){ return setTimeout(to,wait) }\n\t\t\t\t\topen(peer);\n\t\t\t\t}, wait);\n\t\t\t}\n\t\t\tvar doc = (''+u !== typeof document) && document;\n\t\t});\n\t\tvar noop = function(){}, u;\n\t})(USE, './websocket');\n\n\t;USE(function(module){\n\t\tif(typeof Gun === 'undefined'){ return }\n\n\t\tvar noop = function(){}, store, u;\n\t\ttry{store = (Gun.window||noop).localStorage}catch(e){}\n\t\tif(!store){\n\t\t\tGun.log(\"Warning: No localStorage exists to persist data to!\");\n\t\t\tstore = {setItem: function(k,v){this[k]=v}, removeItem: function(k){delete this[k]}, getItem: function(k){return this[k]}};\n\t\t}\n\n\t\tvar parse = JSON.parseAsync || function(t,cb,r){ var u; try{ cb(u, JSON.parse(t,r)) }catch(e){ cb(e) } }\n\t\tvar json = JSON.stringifyAsync || function(v,cb,r,s){ var u; try{ cb(u, JSON.stringify(v,r,s)) }catch(e){ cb(e) } }\n\n\t\tGun.on('create', function lg(root){\n\t\t\tthis.to.next(root);\n\t\t\tvar opt = root.opt, graph = root.graph, acks = [], disk, to, size, stop;\n\t\t\tif(false === opt.localStorage){ return }\n\t\t\topt.prefix = opt.file || 'gun/';\n\t\t\ttry{ disk = lg[opt.prefix] = lg[opt.prefix] || JSON.parse(size = store.getItem(opt.prefix)) || {}; // TODO: Perf! This will block, should we care, since limited to 5MB anyways?\n\t\t\t}catch(e){ disk = lg[opt.prefix] = {}; }\n\t\t\tsize = (size||'').length;\n\n\t\t\troot.on('get', function(msg){\n\t\t\t\tthis.to.next(msg);\n\t\t\t\tvar lex = msg.get, soul, data, tmp, u;\n\t\t\t\tif(!lex || !(soul = lex['#'])){ return }\n\t\t\t\tdata = disk[soul] || u;\n\t\t\t\tif(data && (tmp = lex['.']) && !Object.plain(tmp)){ // pluck!\n\t\t\t\t\tdata = Gun.state.ify({}, tmp, Gun.state.is(data, tmp), data[tmp], soul);\n\t\t\t\t}\n\t\t\t\t//if(data){ (tmp = {})[soul] = data } // back into a graph.\n\t\t\t\t//setTimeout(function(){\n\t\t\t\tGun.on.get.ack(msg, data); //root.on('in', {'@': msg['#'], put: tmp, lS:1});// || root.$});\n\t\t\t\t//}, Math.random() * 10); // FOR TESTING PURPOSES!\n\t\t\t});\n\n\t\t\troot.on('put', function(msg){\n\t\t\t\tthis.to.next(msg); // remember to call next middleware adapter\n\t\t\t\tvar put = msg.put, soul = put['#'], key = put['.'], id = msg['#'], ok = msg.ok||'', tmp; // pull data off wire envelope\n\t\t\t\tdisk[soul] = Gun.state.ify(disk[soul], key, put['>'], put[':'], soul); // merge into disk object\n\t\t\t\tif(stop && size > (4999880)){ root.on('in', {'@': id, err: \"localStorage max!\"}); return; }\n\t\t\t\t//if(!msg['@']){ acks.push(id) } // then ack any non-ack write. // TODO: use batch id.\n\t\t\t\tif(!msg['@'] && (!msg._.via || Math.random() < (ok['@'] / ok['/']))){ acks.push(id) } // then ack any non-ack write. // TODO: use batch id.\n\t\t\t\tif(to){ return }\n\t\t\t\tto = setTimeout(flush, 9+(size / 333)); // 0.1MB = 0.3s, 5MB = 15s \n\t\t\t});\n\t\t\tfunction flush(){\n\t\t\t\tif(!acks.length && ((setTimeout.turn||'').s||'').length){ setTimeout(flush,99); return; } // defer if \"busy\" && no saves.\n\t\t\t\tvar err, ack = acks; clearTimeout(to); to = false; acks = [];\n\t\t\t\tjson(disk, function(err, tmp){\n\t\t\t\t\ttry{!err && store.setItem(opt.prefix, tmp);\n\t\t\t\t\t}catch(e){ err = stop = e || \"localStorage failure\" }\n\t\t\t\t\tif(err){\n\t\t\t\t\t\tGun.log(err + \" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install\");\n\t\t\t\t\t\troot.on('localStorage:error', {err: err, get: opt.prefix, put: disk});\n\t\t\t\t\t}\n\t\t\t\t\tsize = tmp.length;\n\n\t\t\t\t\t//if(!err && !Object.empty(opt.peers)){ return } // only ack if there are no peers. // Switch this to probabilistic mode\n\t\t\t\t\tsetTimeout.each(ack, function(id){\n\t\t\t\t\t\troot.on('in', {'@': id, err: err, ok: 0}); // localStorage isn't reliable, so make its `ok` code be a low number.\n\t\t\t\t\t},0,99);\n\t\t\t\t})\n\t\t\t}\n\t\t\n\t\t});\n\t})(USE, './localStorage');\n\n}());\n\n/* BELOW IS TEMPORARY FOR OLD INTERNAL COMPATIBILITY, THEY ARE IMMEDIATELY DEPRECATED AND WILL BE REMOVED IN NEXT VERSION */\n;(function(){\n\tvar u;\n\tif(''+u == typeof Gun){ return }\n\tvar DEP = function(n){ console.warn(\"Warning! Deprecated internal utility will break in next version:\", n) }\n\t// Generic javascript utilities.\n\tvar Type = Gun;\n\t//Type.fns = Type.fn = {is: function(fn){ return (!!fn && fn instanceof Function) }}\n\tType.fn = Type.fn || {is: function(fn){ DEP('fn'); return (!!fn && 'function' == typeof fn) }}\n\tType.bi = Type.bi || {is: function(b){ DEP('bi');return (b instanceof Boolean || typeof b == 'boolean') }}\n\tType.num = Type.num || {is: function(n){ DEP('num'); return !list_is(n) && ((n - parseFloat(n) + 1) >= 0 || Infinity === n || -Infinity === n) }}\n\tType.text = Type.text || {is: function(t){ DEP('text'); return (typeof t == 'string') }}\n\tType.text.ify = Type.text.ify || function(t){ DEP('text.ify');\n\t\tif(Type.text.is(t)){ return t }\n\t\tif(typeof JSON !== \"undefined\"){ return JSON.stringify(t) }\n\t\treturn (t && t.toString)? t.toString() : t;\n\t}\n\tType.text.random = Type.text.random || function(l, c){ DEP('text.random');\n\t\tvar s = '';\n\t\tl = l || 24; // you are not going to make a 0 length random number, so no need to check type\n\t\tc = c || '0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz';\n\t\twhile(l > 0){ s += c.charAt(Math.floor(Math.random() * c.length)); l-- }\n\t\treturn s;\n\t}\n\tType.text.match = Type.text.match || function(t, o){ var tmp, u; DEP('text.match');\n\t\tif('string' !== typeof t){ return false }\n\t\tif('string' == typeof o){ o = {'=': o} }\n\t\to = o || {};\n\t\ttmp = (o['='] || o['*'] || o['>'] || o['<']);\n\t\tif(t === tmp){ return true }\n\t\tif(u !== o['=']){ return false }\n\t\ttmp = (o['*'] || o['>'] || o['<']);\n\t\tif(t.slice(0, (tmp||'').length) === tmp){ return true }\n\t\tif(u !== o['*']){ return false }\n\t\tif(u !== o['>'] && u !== o['<']){\n\t\t\treturn (t >= o['>'] && t <= o['<'])? true : false;\n\t\t}\n\t\tif(u !== o['>'] && t >= o['>']){ return true }\n\t\tif(u !== o['<'] && t <= o['<']){ return true }\n\t\treturn false;\n\t}\n\tType.text.hash = Type.text.hash || function(s, c){ // via SO\n\t\tDEP('text.hash');\n\t\tif(typeof s !== 'string'){ return }\n\t  c = c || 0;\n\t  if(!s.length){ return c }\n\t  for(var i=0,l=s.length,n; i<l; ++i){\n\t    n = s.charCodeAt(i);\n\t    c = ((c<<5)-c)+n;\n\t    c |= 0;\n\t  }\n\t  return c;\n\t}\n\tType.list = Type.list || {is: function(l){ DEP('list'); return (l instanceof Array) }}\n\tType.list.slit = Type.list.slit || Array.prototype.slice;\n\tType.list.sort = Type.list.sort || function(k){ // creates a new sort function based off some key\n\t\tDEP('list.sort');\n\t\treturn function(A,B){\n\t\t\tif(!A || !B){ return 0 } A = A[k]; B = B[k];\n\t\t\tif(A < B){ return -1 }else if(A > B){ return 1 }\n\t\t\telse { return 0 }\n\t\t}\n\t}\n\tType.list.map = Type.list.map || function(l, c, _){ DEP('list.map'); return obj_map(l, c, _) }\n\tType.list.index = 1; // change this to 0 if you want non-logical, non-mathematical, non-matrix, non-convenient array notation\n\tType.obj = Type.boj || {is: function(o){ DEP('obj'); return o? (o instanceof Object && o.constructor === Object) || Object.prototype.toString.call(o).match(/^\\[object (\\w+)\\]$/)[1] === 'Object' : false }}\n\tType.obj.put = Type.obj.put || function(o, k, v){ DEP('obj.put'); return (o||{})[k] = v, o }\n\tType.obj.has = Type.obj.has || function(o, k){ DEP('obj.has'); return o && Object.prototype.hasOwnProperty.call(o, k) }\n\tType.obj.del = Type.obj.del || function(o, k){ DEP('obj.del'); \n\t\tif(!o){ return }\n\t\to[k] = null;\n\t\tdelete o[k];\n\t\treturn o;\n\t}\n\tType.obj.as = Type.obj.as || function(o, k, v, u){ DEP('obj.as'); return o[k] = o[k] || (u === v? {} : v) }\n\tType.obj.ify = Type.obj.ify || function(o){ DEP('obj.ify'); \n\t\tif(obj_is(o)){ return o }\n\t\ttry{o = JSON.parse(o);\n\t\t}catch(e){o={}};\n\t\treturn o;\n\t}\n\t;(function(){ var u;\n\t\tfunction map(v,k){\n\t\t\tif(obj_has(this,k) && u !== this[k]){ return }\n\t\t\tthis[k] = v;\n\t\t}\n\t\tType.obj.to = Type.obj.to || function(from, to){ DEP('obj.to'); \n\t\t\tto = to || {};\n\t\t\tobj_map(from, map, to);\n\t\t\treturn to;\n\t\t}\n\t}());\n\tType.obj.copy = Type.obj.copy || function(o){ DEP('obj.copy'); // because http://web.archive.org/web/20140328224025/http://jsperf.com/cloning-an-object/2\n\t\treturn !o? o : JSON.parse(JSON.stringify(o)); // is shockingly faster than anything else, and our data has to be a subset of JSON anyways!\n\t}\n\t;(function(){\n\t\tfunction empty(v,i){ var n = this.n, u;\n\t\t\tif(n && (i === n || (obj_is(n) && obj_has(n, i)))){ return }\n\t\t\tif(u !== i){ return true }\n\t\t}\n\t\tType.obj.empty = Type.obj.empty || function(o, n){ DEP('obj.empty'); \n\t\t\tif(!o){ return true }\n\t\t\treturn obj_map(o,empty,{n:n})? false : true;\n\t\t}\n\t}());\n\t;(function(){\n\t\tfunction t(k,v){\n\t\t\tif(2 === arguments.length){\n\t\t\t\tt.r = t.r || {};\n\t\t\t\tt.r[k] = v;\n\t\t\t\treturn;\n\t\t\t} t.r = t.r || [];\n\t\t\tt.r.push(k);\n\t\t};\n\t\tvar keys = Object.keys, map, u;\n\t\tObject.keys = Object.keys || function(o){ return map(o, function(v,k,t){t(k)}) }\n\t\tType.obj.map = map = Type.obj.map || function(l, c, _){ DEP('obj.map'); \n\t\t\tvar u, i = 0, x, r, ll, lle, f = 'function' == typeof c;\n\t\t\tt.r = u;\n\t\t\tif(keys && obj_is(l)){\n\t\t\t\tll = keys(l); lle = true;\n\t\t\t}\n\t\t\t_ = _ || {};\n\t\t\tif(list_is(l) || ll){\n\t\t\t\tx = (ll || l).length;\n\t\t\t\tfor(;i < x; i++){\n\t\t\t\t\tvar ii = (i + Type.list.index);\n\t\t\t\t\tif(f){\n\t\t\t\t\t\tr = lle? c.call(_, l[ll[i]], ll[i], t) : c.call(_, l[i], ii, t);\n\t\t\t\t\t\tif(r !== u){ return r }\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//if(Type.test.is(c,l[i])){ return ii } // should implement deep equality testing!\n\t\t\t\t\t\tif(c === l[lle? ll[i] : i]){ return ll? ll[i] : ii } // use this for now\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor(i in l){\n\t\t\t\t\tif(f){\n\t\t\t\t\t\tif(obj_has(l,i)){\n\t\t\t\t\t\t\tr = _? c.call(_, l[i], i, t) : c(l[i], i, t);\n\t\t\t\t\t\t\tif(r !== u){ return r }\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//if(a.test.is(c,l[i])){ return i } // should implement deep equality testing!\n\t\t\t\t\t\tif(c === l[i]){ return i } // use this for now\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn f? t.r : Type.list.index? 0 : -1;\n\t\t}\n\t}());\n\tType.time = Type.time || {};\n\tType.time.is = Type.time.is || function(t){ DEP('time'); return t? t instanceof Date : (+new Date().getTime()) }\n\n\tvar fn_is = Type.fn.is;\n\tvar list_is = Type.list.is;\n\tvar obj = Type.obj, obj_is = obj.is, obj_has = obj.has, obj_map = obj.map;\n\n\tvar Val = {};\n\tVal.is = function(v){ DEP('val.is'); // Valid values are a subset of JSON: null, binary, number (!Infinity), text, or a soul relation. Arrays need special algorithms to handle concurrency, so they are not supported directly. Use an extension that supports them if needed but research their problems first.\n\t\tif(v === u){ return false }\n\t\tif(v === null){ return true } // \"deletes\", nulling out keys.\n\t\tif(v === Infinity){ return false } // we want this to be, but JSON does not support it, sad face.\n\t\tif(text_is(v) // by \"text\" we mean strings.\n\t\t|| bi_is(v) // by \"binary\" we mean boolean.\n\t\t|| num_is(v)){ // by \"number\" we mean integers or decimals.\n\t\t\treturn true; // simple values are valid.\n\t\t}\n\t\treturn Val.link.is(v) || false; // is the value a soul relation? Then it is valid and return it. If not, everything else remaining is an invalid data type. Custom extensions can be built on top of these primitives to support other types.\n\t}\n\tVal.link = Val.rel = {_: '#'};\n\t;(function(){\n\t\tVal.link.is = function(v){ DEP('val.link.is'); // this defines whether an object is a soul relation or not, they look like this: {'#': 'UUID'}\n\t\t\tif(v && v[rel_] && !v._ && obj_is(v)){ // must be an object.\n\t\t\t\tvar o = {};\n\t\t\t\tobj_map(v, map, o);\n\t\t\t\tif(o.id){ // a valid id was found.\n\t\t\t\t\treturn o.id; // yay! Return it.\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false; // the value was not a valid soul relation.\n\t\t}\n\t\tfunction map(s, k){ var o = this; // map over the object...\n\t\t\tif(o.id){ return o.id = false } // if ID is already defined AND we're still looping through the object, it is considered invalid.\n\t\t\tif(k == rel_ && text_is(s)){ // the key should be '#' and have a text value.\n\t\t\t\to.id = s; // we found the soul!\n\t\t\t} else {\n\t\t\t\treturn o.id = false; // if there exists anything else on the object that isn't the soul, then it is considered invalid.\n\t\t\t}\n\t\t}\n\t}());\n\tVal.link.ify = function(t){ DEP('val.link.ify'); return obj_put({}, rel_, t) } // convert a soul into a relation and return it.\n\tType.obj.has._ = '.';\n\tvar rel_ = Val.link._, u;\n\tvar bi_is = Type.bi.is;\n\tvar num_is = Type.num.is;\n\tvar text_is = Type.text.is;\n\tvar obj = Type.obj, obj_is = obj.is, obj_put = obj.put, obj_map = obj.map;\n\n\tType.val = Type.val || Val;\n\n\tvar Node = {_: '_'};\n\tNode.soul = function(n, o){ DEP('node.soul'); return (n && n._ && n._[o || soul_]) } // convenience function to check to see if there is a soul on a node and return it.\n\tNode.soul.ify = function(n, o){ DEP('node.soul.ify'); // put a soul on an object.\n\t\to = (typeof o === 'string')? {soul: o} : o || {};\n\t\tn = n || {}; // make sure it exists.\n\t\tn._ = n._ || {}; // make sure meta exists.\n\t\tn._[soul_] = o.soul || n._[soul_] || text_random(); // put the soul on it.\n\t\treturn n;\n\t}\n\tNode.soul._ = Val.link._;\n\t;(function(){\n\t\tNode.is = function(n, cb, as){ DEP('node.is'); var s; // checks to see if an object is a valid node.\n\t\t\tif(!obj_is(n)){ return false } // must be an object.\n\t\t\tif(s = Node.soul(n)){ // must have a soul on it.\n\t\t\t\treturn !obj_map(n, map, {as:as,cb:cb,s:s,n:n});\n\t\t\t}\n\t\t\treturn false; // nope! This was not a valid node.\n\t\t}\n\t\tfunction map(v, k){ // we invert this because the way we check for this is via a negation.\n\t\t\tif(k === Node._){ return } // skip over the metadata.\n\t\t\tif(!Val.is(v)){ return true } // it is true that this is an invalid node.\n\t\t\tif(this.cb){ this.cb.call(this.as, v, k, this.n, this.s) } // optionally callback each key/value.\n\t\t}\n\t}());\n\t;(function(){\n\t\tNode.ify = function(obj, o, as){ DEP('node.ify'); // returns a node from a shallow object.\n\t\t\tif(!o){ o = {} }\n\t\t\telse if(typeof o === 'string'){ o = {soul: o} }\n\t\t\telse if('function' == typeof o){ o = {map: o} }\n\t\t\tif(o.map){ o.node = o.map.call(as, obj, u, o.node || {}) }\n\t\t\tif(o.node = Node.soul.ify(o.node || {}, o)){\n\t\t\t\tobj_map(obj, map, {o:o,as:as});\n\t\t\t}\n\t\t\treturn o.node; // This will only be a valid node if the object wasn't already deep!\n\t\t}\n\t\tfunction map(v, k){ var o = this.o, tmp, u; // iterate over each key/value.\n\t\t\tif(o.map){\n\t\t\t\ttmp = o.map.call(this.as, v, ''+k, o.node);\n\t\t\t\tif(u === tmp){\n\t\t\t\t\tobj_del(o.node, k);\n\t\t\t\t} else\n\t\t\t\tif(o.node){ o.node[k] = tmp }\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(Val.is(v)){\n\t\t\t\to.node[k] = v;\n\t\t\t}\n\t\t}\n\t}());\n\tvar obj = Type.obj, obj_is = obj.is, obj_del = obj.del, obj_map = obj.map;\n\tvar text = Type.text, text_random = text.random;\n\tvar soul_ = Node.soul._;\n\tvar u;\n\tType.node = Type.node || Node;\n\n\tvar State = Type.state;\n\tState.lex = function(){ DEP('state.lex'); return State().toString(36).replace('.','') }\n\tState.to = function(from, k, to){ DEP('state.to'); \n\t\tvar val = (from||{})[k];\n\t\tif(obj_is(val)){\n\t\t\tval = obj_copy(val);\n\t\t}\n\t\treturn State.ify(to, k, State.is(from, k), val, Node.soul(from));\n\t}\n\t;(function(){\n\t\tState.map = function(cb, s, as){ DEP('state.map'); var u; // for use with Node.ify\n\t\t\tvar o = obj_is(o = cb || s)? o : null;\n\t\t\tcb = fn_is(cb = cb || s)? cb : null;\n\t\t\tif(o && !cb){\n\t\t\t\ts = num_is(s)? s : State();\n\t\t\t\to[N_] = o[N_] || {};\n\t\t\t\tobj_map(o, map, {o:o,s:s});\n\t\t\t\treturn o;\n\t\t\t}\n\t\t\tas = as || obj_is(s)? s : u;\n\t\t\ts = num_is(s)? s : State();\n\t\t\treturn function(v, k, o, opt){\n\t\t\t\tif(!cb){\n\t\t\t\t\tmap.call({o: o, s: s}, v,k);\n\t\t\t\t\treturn v;\n\t\t\t\t}\n\t\t\t\tcb.call(as || this || {}, v, k, o, opt);\n\t\t\t\tif(obj_has(o,k) && u === o[k]){ return }\n\t\t\t\tmap.call({o: o, s: s}, v,k);\n\t\t\t}\n\t\t}\n\t\tfunction map(v,k){\n\t\t\tif(N_ === k){ return }\n\t\t\tState.ify(this.o, k, this.s) ;\n\t\t}\n\t}());\n\tvar obj = Type.obj, obj_as = obj.as, obj_has = obj.has, obj_is = obj.is, obj_map = obj.map, obj_copy = obj.copy;\n\tvar num = Type.num, num_is = num.is;\n\tvar fn = Type.fn, fn_is = fn.is;\n\tvar N_ = Node._, u;\n\n\tvar Graph = {};\n\t;(function(){\n\t\tGraph.is = function(g, cb, fn, as){ DEP('graph.is'); // checks to see if an object is a valid graph.\n\t\t\tif(!g || !obj_is(g) || obj_empty(g)){ return false } // must be an object.\n\t\t\treturn !obj_map(g, map, {cb:cb,fn:fn,as:as}); // makes sure it wasn't an empty object.\n\t\t}\n\t\tfunction map(n, s){ // we invert this because the way'? we check for this is via a negation.\n\t\t\tif(!n || s !== Node.soul(n) || !Node.is(n, this.fn, this.as)){ return true } // it is true that this is an invalid graph.\n\t\t\tif(!this.cb){ return }\n\t\t\tnf.n = n; nf.as = this.as; // sequential race conditions aren't races.\n\t\t\tthis.cb.call(nf.as, n, s, nf);\n\t\t}\n\t\tfunction nf(fn){ // optional callback for each node.\n\t\t\tif(fn){ Node.is(nf.n, fn, nf.as) } // where we then have an optional callback for each key/value.\n\t\t}\n\t}());\n\t;(function(){\n\t\tGraph.ify = function(obj, env, as){ DEP('graph.ify'); \n\t\t\tvar at = {path: [], obj: obj};\n\t\t\tif(!env){\n\t\t\t\tenv = {};\n\t\t\t} else\n\t\t\tif(typeof env === 'string'){\n\t\t\t\tenv = {soul: env};\n\t\t\t} else\n\t\t\tif('function' == typeof env){\n\t\t\t\tenv.map = env;\n\t\t\t}\n\t\t\tif(typeof as === 'string'){\n\t\t\t\tenv.soul = env.soul || as;\n\t\t\t\tas = u;\n\t\t\t}\n\t\t\tif(env.soul){\n\t\t\t\tat.link = Val.link.ify(env.soul);\n\t\t\t}\n\t\t\tenv.shell = (as||{}).shell;\n\t\t\tenv.graph = env.graph || {};\n\t\t\tenv.seen = env.seen || [];\n\t\t\tenv.as = env.as || as;\n\t\t\tnode(env, at);\n\t\t\tenv.root = at.node;\n\t\t\treturn env.graph;\n\t\t}\n\t\tfunction node(env, at){ var tmp;\n\t\t\tif(tmp = seen(env, at)){ return tmp }\n\t\t\tat.env = env;\n\t\t\tat.soul = soul;\n\t\t\tif(Node.ify(at.obj, map, at)){\n\t\t\t\tat.link = at.link || Val.link.ify(Node.soul(at.node));\n\t\t\t\tif(at.obj !== env.shell){\n\t\t\t\t\tenv.graph[Val.link.is(at.link)] = at.node;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn at;\n\t\t}\n\t\tfunction map(v,k,n){\n\t\t\tvar at = this, env = at.env, is, tmp;\n\t\t\tif(Node._ === k && obj_has(v,Val.link._)){\n\t\t\t\treturn n._; // TODO: Bug?\n\t\t\t}\n\t\t\tif(!(is = valid(v,k,n, at,env))){ return }\n\t\t\tif(!k){\n\t\t\t\tat.node = at.node || n || {};\n\t\t\t\tif(obj_has(v, Node._) && Node.soul(v)){ // ? for safety ?\n\t\t\t\t\tat.node._ = obj_copy(v._);\n\t\t\t\t}\n\t\t\t\tat.node = Node.soul.ify(at.node, Val.link.is(at.link));\n\t\t\t\tat.link = at.link || Val.link.ify(Node.soul(at.node));\n\t\t\t}\n\t\t\tif(tmp = env.map){\n\t\t\t\ttmp.call(env.as || {}, v,k,n, at);\n\t\t\t\tif(obj_has(n,k)){\n\t\t\t\t\tv = n[k];\n\t\t\t\t\tif(u === v){\n\t\t\t\t\t\tobj_del(n, k);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(!(is = valid(v,k,n, at,env))){ return }\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!k){ return at.node }\n\t\t\tif(true === is){\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\ttmp = node(env, {obj: v, path: at.path.concat(k)});\n\t\t\tif(!tmp.node){ return }\n\t\t\treturn tmp.link; //{'#': Node.soul(tmp.node)};\n\t\t}\n\t\tfunction soul(id){ var at = this;\n\t\t\tvar prev = Val.link.is(at.link), graph = at.env.graph;\n\t\t\tat.link = at.link || Val.link.ify(id);\n\t\t\tat.link[Val.link._] = id;\n\t\t\tif(at.node && at.node[Node._]){\n\t\t\t\tat.node[Node._][Val.link._] = id;\n\t\t\t}\n\t\t\tif(obj_has(graph, prev)){\n\t\t\t\tgraph[id] = graph[prev];\n\t\t\t\tobj_del(graph, prev);\n\t\t\t}\n\t\t}\n\t\tfunction valid(v,k,n, at,env){ var tmp;\n\t\t\tif(Val.is(v)){ return true }\n\t\t\tif(obj_is(v)){ return 1 }\n\t\t\tif(tmp = env.invalid){\n\t\t\t\tv = tmp.call(env.as || {}, v,k,n);\n\t\t\t\treturn valid(v,k,n, at,env);\n\t\t\t}\n\t\t\tenv.err = \"Invalid value at '\" + at.path.concat(k).join('.') + \"'!\";\n\t\t\tif(Type.list.is(v)){ env.err += \" Use `.set(item)` instead of an Array.\" }\n\t\t}\n\t\tfunction seen(env, at){\n\t\t\tvar arr = env.seen, i = arr.length, has;\n\t\t\twhile(i--){ has = arr[i];\n\t\t\t\tif(at.obj === has.obj){ return has }\n\t\t\t}\n\t\t\tarr.push(at);\n\t\t}\n\t}());\n\tGraph.node = function(node){ DEP('graph.node'); \n\t\tvar soul = Node.soul(node);\n\t\tif(!soul){ return }\n\t\treturn obj_put({}, soul, node);\n\t}\n\t;(function(){\n\t\tGraph.to = function(graph, root, opt){ DEP('graph.to'); \n\t\t\tif(!graph){ return }\n\t\t\tvar obj = {};\n\t\t\topt = opt || {seen: {}};\n\t\t\tobj_map(graph[root], map, {obj:obj, graph: graph, opt: opt});\n\t\t\treturn obj;\n\t\t}\n\t\tfunction map(v,k){ var tmp, obj;\n\t\t\tif(Node._ === k){\n\t\t\t\tif(obj_empty(v, Val.link._)){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.obj[k] = obj_copy(v);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!(tmp = Val.link.is(v))){\n\t\t\t\tthis.obj[k] = v;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(obj = this.opt.seen[tmp]){\n\t\t\t\tthis.obj[k] = obj;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.obj[k] = this.opt.seen[tmp] = Graph.to(this.graph, tmp, this.opt);\n\t\t}\n\t}());\n\tvar fn_is = Type.fn.is;\n\tvar obj = Type.obj, obj_is = obj.is, obj_del = obj.del, obj_has = obj.has, obj_empty = obj.empty, obj_put = obj.put, obj_map = obj.map, obj_copy = obj.copy;\n\tvar u;\n\tType.graph = Type.graph || Graph;\n}());\n","module.exports = require('./gun.js')","import Gun from \"gun\";\n\nconst gunConfig = { peers: [\"http://roke.educa.juegos/gun\"] }\nconst gun = Gun(gunConfig);\n\nexport function AstralPlane() {\n    \n  gun.get('astralPlane').once((data) => {\n    console.log(data.face)\n  })\n\n  return <></>;\n}\n","import * as ex from \"excalibur\";\nimport { render } from \"preact\";\nimport { Player } from \"./player\";\n// import { Capsule } from \"./capsule\";\n// import { Coin } from \"./money\";\nimport { resources, sounds, dsml1 } from \"./resources\";\nimport { addPermission } from \"./permission\";\nimport \"./index.css\";\nimport logo from \"./assets/logo512.png\";\nimport { CrtTerminal } from \"./crtterminal\";\nimport { CrtVisual } from \"./crtvisual\";\nimport { AstralPlane } from \"./telepathy\";\nimport { addPortal } from \"./room\";\n\n//ex.Flags.useCanvasGraphicsContext();\n\nrender(\n  <>\n    <CrtVisual />\n    <CrtTerminal />\n    <AstralPlane />\n  </>,\n  document.getElementById(\"app\")\n);\n\nconst game = new ex.Engine({\n  width: 640,\n  height: 480,\n  displayMode: ex.DisplayMode.Fixed,\n  canvasElementId: \"game_canvas\",\n  backgroundColor: ex.Color.Black,\n  pixelArt: true,\n  physics: {\n    solver: ex.SolverStrategy.Realistic,\n  },\n});\nconst loader = new ex.Loader([dsml1, ...resources, \n                  ...Object.values(sounds)]);\nloader.backgroundColor = \"#020610\";\nloader.logo = logo;\nloader.logoHeight = 322;\nloader.logoWidth = 512;\nloader.events.on(\"loadresourcestart\", () => {\n  loader.logoPosition = ex.vec(game.screen.width / 2 - 256, 0);\n  loader.loadingBarPosition = ex.vec(game.screen.width / 2 - 250, game.screen.height - 40);\n})\nloader.events.on(\"useraction\", () => {\n  ex.WebAudio.unlock()\n  addPermission();\n})\nloader.loadingBarHeight = 10;\nloader.loadingBarColor = ex.Color.Yellow;\n// loader.suppressPlayButton = true;\nloader.playButtonText = \"Enter\"\nwindow.loader = loader\n\ndocument.body.addEventListener(\"click\", function handler() {\n  this.removeEventListener(\"click\", handler);\n  addPermission();\n});\ndocument.getElementById(\"game\").onclick = (ev) => {\n  ev.target.focus();\n};\n\ngame.start(loader).then(() => {\n  game.currentScene.physics.config.gravity = ex.vec(0, 200);\n  let player = new Player(492, 60);\n  dsml1.addToScene(game.currentScene);\n  let portal = addPortal(492, 50);\n  portal.rotation = -Math.PI / 2;\n  game.add(portal);\n  game.add(player);\n  sounds.enter.play(0.5);\n\n  // setInterval(() => {\n  //   let coin = new Coin(20, 20);\n  //   coin.vel = ex.vec(Math.random() * 100 - 50, Math.random() * -100 - 50);\n  //   game.add(coin)\n  // }, 500)\n  window.player = player;\n  game.currentScene.camera.strategy.elasticToActor(player, 0.3, 0.8);\n  game.currentScene.camera.pos = player.pos;\n  game.currentScene.camera.zoom = 4;\n  let boundingBox = new ex.BoundingBox(\n    0,\n    0,\n    dsml1.data.levels[0].pxWid,\n    dsml1.data.levels[0].pxHei\n  );\n  game.currentScene.camera.strategy.limitCameraBounds(boundingBox);\n  game.currentScene.camera.zoomOverTime(2, 2000);\n  game.canvas.focus()\n});\n\n\nwindow.dsml1 = dsml1;\nwindow.game = game;\nwindow.ex = ex;\n"],"file":"assets/index-DDZKzwbP.js"}